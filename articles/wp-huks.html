<div class="wrap">
    <h3 class="header-style2">Хуки</h3>
    <p>Когда мы запрашиваем сайт, то на сервере начиается процесс сборки сайта из php кода и есть свои точки-события у каждой стадии, например сейчас идёт сборка шапки, потом подключения скриптов, потом сборка тела страницы и т.д. У каждой стадии есть свои хуки-события, к которым мы можем прицепиться. Мы уже пользовались разными хуками и знаем некоторые из них - когда подключали свои стили и скрипты, когда продключали меню и боковую панель, когда выводили посты.</p>
    <p>Так вот у хуков-действий есть приоритеты. Когда например собирается шапка и мы вклиниваемся со своими хотелками-действиями, например, выведи мои скриты, выведи мои стили или ещё что то, то всем моим хотелкам я могу установить приоритет выполнения в очереди. Если на вп-каме посмотреть про функцию add_action() - <a href="https://wp-kama.ru/function/add_action">тут</a>, то среди её аргументов можно увидеть такой параметр как $priority. Как  он работает? Например, есть такое событие как "wp_enqueue_scripts"(wp_head()), это событие наступает тогда когда ВП подключает свои скрипты, так вот при наступлении этого события мы выполняем свою функцию, в которой подключаем свои стили и скрипты:</p>
    <img src="/site-shpora/img/49.jpg" alt="" class="screen">
    <p>Как видно из картинки, 3м параметром мы задаём приоритет выполнения, чем меньше цифра, тем приоритет выше. Из картинки следует, что подключение стилей в шапке будет выполнено в первую очередь, потом подключатся скрипты. Если же у нас скрипты подцепленны к событию "wp_footer"(wp_footer()), то тут не надо никаких приоритетов.</p>
    <p>Далее вставлю видео, проще по нему посмотреть про хуки.</p>
    <iframe class="video" width="560" height="315" src="https://www.youtube.com/embed/L20CavV0Gqo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    
    
    
    <h3 class="header-style2">Регистрация своего хука</h3>
    <p>Чтобы создать свой хук нужно в файле functions.php создать хук-действие со своим наименованным событием и функцией, которая будет исполняться по наступленю этого события:</p>
    <img src="/site-shpora/img/50.jpg" alt="" class="screen">
    <p>Затем в любом месте вёрстки вешаем это событие функцией:</p>
    <p><b>&lt;?php do_action('my_action'); ?&gt;</b></p>
    <p>И когда интерпретатор дойдёт до этой строки кода, эта функция запустит это событие и выполнится на этом месте наша функция с выводящей строкой - "Привет".</p>
    
    <h3 class="header-style2">Шорткоды</h3>
    <p>И тут мы плавно из предыдущей темы про собственные хуки-действия переходим к шорткодам.</p>
    <p>Например если мы уже умеем вставлять свой хук-действие в любое место страницы, то мы хотим например вставить его прям по середине какого нибудь поста. Для этого идём в админку в редактор поста и там вставляем наш код, но ВП при выводе поста просто заэкранирует наш код и он выведется как есть. Вот тут и помогут шорткоды. Пишутся они похоже на add_action:</p>
    <img src="/site-shpora/img/51.jpg" alt="" class="screen">
    <p>А дальше заходим в пост и по середине вставляем такой шорткод - <b>[my_short]</b> как и задавали имя в functions.php</p>
    <p class="note">Важное замечание! Мы не увидим вставку шорткода в посту если он выведен обрезанным функцией the_excerpt(). Толко когда пост выведен полностью там и увидим шорткод.</p>
    <p>Почитать о шорткоде <a href="https://wp-kama.ru/function/add_shortcode">тут</a>.</p>
    <p>Шорткод можно использовать там, где нельзя использовать php код. Мы также можем вставлять iframe через шорткод:</p>
    <img src="/site-shpora/img/52.jpg" alt="" class="screen">
</div>
