
<div class="wrap">

    <p>Перейти к оглавлению:</p>
    <ul class="list">
        <li><a href="#chap2">Часть 2</a></li>
        <li><a href="#chap3">Часть 3</a></li>
        <li><a href="#chap4">Часть 4</a></li>
    </ul>

    <h3 class="header-style2">Часть 1. Устройство системы компоновки данных.</h3>
    <ul class="list">
        <li><a href="#chapter1">Вступление</a></li>
        <li><a href="#chapter1.1">Схема компоновки данных</a>
            <ul class="list2">
                <li><a href="#chapter1.1.1">Наборы данных</a></li>
                <li><a href="#chapter1.1.2">Связи наборов данных</a></li>
                <li><a href="#chapter1.1.3">Вычисляемые поля</a></li>
                <li><a href="#chapter1.1.4">Ресурсы</a></li>
                <li><a href="#chapter1.1.5">Параметры</a></li>
                <li><a href="#chapter1.1.6">Макеты</a></li>
                <li><a href="#chapter1.1.7">Вложенные схемы</a></li>
                <li><a href="#chapter1.1.8">Настройки</a></li>
            </ul>
        </li>
        <li><a href="#chapter1.2">Пример изменения настроек</a></li>
    </ul>


    <h3 class="header-style2">Часть 2. Примеры разработки отчётов.</h3>
    <ul class="list">
        <li><a href="#chapter2.1">Исходные данные для примеров</a></li>
        <li><a href="#chapter2.2">Пример 1. Набор данных - запрос</a>
            <ul class="list2">
                <li><a href="#chapter2.2.1">Визуальное конструирование</a></li>
                <li><a href="#chapter2.2.2">Варианты отчёта</a></li>
                <li><a href="#chapter2.2.3">Настройки отдельных группировок</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.3">Пример 2.</a>
            <ul class="list2">
                <li><a href="#chapter2.3.1">Вычисляемые поля</a></li>
                <li><a href="#chapter2.3.2">Парметры. Период отчёта</a></li>
                <li><a href="#chapter2.3.3">Быстрые пользовательские настройки</a></li>
                <li><a href="#chapter2.3.4">Системные поля</a></li>
                <li><a href="#chapter2.3.5">Обязательность использования параметров</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.4">Пример 3. Связь набора данных</a></li>
        <li><a href="#chapter2.5">Пример 4. Связь таблиц внутри набора данных</a>
            <ul class="list2">
                <li><a href="#chapter2.5.1">Связывание таблиц в запросе</a></li>
                <li><a href="#chapter2.5.2">Программный запуск отчёта</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.6">Пример 5. Набор данных  - объединение</a></li>
        <li><a href="#chapter2.7">Пример 6. Автоматическое формирование отчёта</a></li>
        <li><a href="#chapter2.8">Пример 7.</a>
            <ul class="list2">
                <li><a href="#chapter2.8.1">Передача параметров в запрос набора данных</a></li>
                <li><a href="#chapter2.8.2">Программная установка параметров отчёта</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.9">Пример 8.</a>
            <ul class="list2">
                <li><a href="#chapter2.9.1">Извлечение данных по периодам</a></li>
                <li><a href="#chapter2.9.2">Интерактивное оформление отчета</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.10">Пример 9. Свободная структура таблицы отчёта</a></li>
        <li><a href="#chapter2.11">Пример 10.</a>
            <ul class="list2">
                <li><a href="#chapter2.11.1">Связь наборов данных по периодам</a></li>
                <li><a href="#chapter2.11.2">Функциональные опции</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.12">Пример 11.</a>
            <ul class="list2">
                <li><a href="#chapter2.12.1">Характеристики в отчёте</a></li>
                <li><a href="#chapter2.12.2">Вывод данных в диаграмму</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.13">Пример 12.</a>
            <ul class="list2">
                <li><a href="#chapter2.13.1">Детализация в выбранном периоде</a></li>
                <li><a href="#chapter2.13.2">Выражения для представления полей</a></li>
                <li><a href="#chapter2.13.3">Характеристики в метаданных</a></li>
                <li><a href="#chapter2.13.4">Вывод всех дат в периоде</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.14">Пример 13.</a>
            <ul class="list2">
                <li><a href="#chapter2.14.1">Пользовательские поля</a></li>
                <li><a href="#chapter2.14.2">Вложенный отчет</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.15">Пример 14.</a>
            <ul class="list2">
                <li><a href="#chapter2.15.1">Расчет итогов по полям остатка</a></li>
                <li><a href="#chapter2.15.2">Вывод в диаграмму нескольких ресурсов</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.16">Пример 15.</a>
            <ul class="list2">
                <li><a href="#chapter2.16.1">Набор данных – объект</a></li>
                <li><a href="#chapter2.16.2">Программная компоновка</a></li>
                <li><a href="#chapter2.16.3">Общий макет оформления</a></li>
                <li><a href="#chapter2.16.4">Макет оформления в схеме компоновки</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.17">Пример 16.</a>
            <ul class="list2">
                <li><a href="#chapter2.17.1">Вывод иерархических данных</a></li>
                <li><a href="#chapter2.17.2">Вывод данных в собственной иерархии</a></li>
                <li><a href="#chapter2.17.3">Стандартная расшифровка полей отчета</a></li>
                <li><a href="#chapter2.17.4">Переопределение поля для расшифровки</a></li>
                <li><a href="#chapter2.17.5">Изменение действий расшифровки</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.18">Пример 17.</a>
            <ul class="list2">
                <li><a href="#chapter2.18.1">Язык выражений</a></li>
                <li><a href="#chapter2.18.2">Вывод отчета в общую форму</a></li>
                <li><a href="#chapter2.18.3">Фоновое выполнение отчета</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.19">Пример 18. Работа с системой компоновки данных из встроенного языка</a>
            <ul class="list2">
                <li><a href="#chapter2.19.1">Заполнение наборов данных и компоновка отчета</a></li>
                <li><a href="#chapter2.19.2">Настройка отчета</a></li>
                <li><a href="#chapter2.19.3">Описание схемы компоновки данных</a></li>
            </ul>
        </li>
        <li><a href="#chapter2.20">Пример 19. Консоль системы компоновки данных</a></li>
    </ul>



    <h3 class="header-style2">Часть 2. Примеры разработки отчётов.</h3>









    <h2 class="header-style" id="chapter1">Часть 1. Устройство системы компоновки данных.</h2>
    <p>В данной главе описывается общее устройство системы компоновки данных, рассматривается последовательность и назначение каждого этапа компоновки. Подробно описываются все составляющие схемы компоновки данных, структура отчета и его настроек.</p>
    <p><i>Система компоновки данных</i> – мощный и гибкий инструмент для создания отчетов на основе их декларативного описания. Использование декларативного описания отчетов позволяет воплотить следующие возможности:</p>
    <ul class="list">
        <li>создание отчета без программирования,</li>
        <li>возможность создания различных вариантов отчета,</li>
        <li>возможность задания различных вариантов пользовательских настроек,</li>
        <li>использование автоматически генерируемых форм просмотра и настройки отчета,</li>
        <li>разбиение исполнения отчета на этапы,</li>
        <li>исполнение отдельных этапов построения отчета на различных компьютерах,</li>
        <li>независимое использование отдельных частей системы компоновки данных,</li>
        <li>программное влияние на процесс выполнения отчета,</li>
        <li>настройки структуры отчета,</li>
        <li>совмещение в отчете нескольких таблиц,</li>
        <li>создание вложенных отчетов и др.</li>
    </ul>
    <p>Система компоновки данных состоит из набора элементов, каждый
     из которых имеет свое декларативное описание, возможность программного доступа и сериализации, то есть сохранения в XML или загрузки из XML. Это позволяет гибко управлять всеми этапами выполнения отчета.</p>
    <p>Формирование отчета с использованием системы компоновки данных разбивается на несколько этапов. При этом разбиение на этапы – не логическое, а физическое. То есть в каждый из этих этапов разработчик может вмешаться, программно или визуально, выполнить различные этапы компоновки данных в различных модулях и даже на различных компьютерах:</p>
    <img src="../img/1С-1/2024-05-02_08-35-56.png" alt="">
    <p>На схеме представлены следующие этапы формирования отчета:</p>
    <ol class="list">
        <li>Разработчик создает <i>схему компоновки данных</i> и <i>стандартные настройки компоновки</i>, которые содержат полную информацию о компоновке.</li>
        <li>На основе схемы компоновки данных и настроек компоновки <i>компоновщик макета</i> создает <i>макет компоновки данных</i>, который является уже готовым заданием для процессора компоновки. </li>
        <li><i>Процессор компоновки данных</i> в соответствии с макетом компоновки извлекает данные из информационной базы, агрегирует, оформляет эти данные и формирует результат компоновки. Результат компоновки состоит из массива элементов, которые можно получать последовательно, но в большинстве случаев результат компоновки получается целиком.</li>
        <li><i>Процессор вывода</i> обрабатывает <i>результат компоновки</i> и выводит его в различные форматы:
            <ul class="list">
                <li>табличный документ,</li>
                <li>HTML-документ,</li>
                <li>таблица значений,</li>
                <li>дерево значений.</li>
            </ul>
        </li>
    </ol>
    <p>Процесс разработки отчета с помощью системы компоновки данных и его дальнейшего использования на практике реализуется следующим образом.</p>
    <p>Исходя из прикладной задачи, для которой разрабатывается отчет, разработчик создает схему компоновки данных, в которой описывает наборы данных, связи между ними, определяет поля отчета, параметры получения данных и т. п., а также задает <i>стандартные настройки компоновки данных</i> – структуру отчета, порядок, отбор и другие.</p>
    <p>У каждого отчета разработчик может предусмотреть несколько вариантов настроек, представляющих данные в виде диаграммы, таблицы или группировок, имеющих различный состав полей, итогов и т. п. Разработчик может описать, какие настройки отчета будут доступны пользователю (пользовательские настройки) и какие из этих настроек будут присутствовать прямо в форме отчета (быстрые пользовательские настройки). С их помощью пользователь может настроить вариант отчета под себя и сохранить его для дальнейшего использования.</p>
    <p>Пользователь запускает отчет. При его формировании выполняется программная компоновка данных и вывод результатов компоновки пользователю. Данные в отчете выводятся в соответствии со стандартными настройками для основного варианта отчета.</p>
    <p>Пользователь может выбрать вариант отчета, являющийся с его точки зрения наиболее информативным, а может, при желании и соответствующей квалификации, задать собственные настройки и получить другой отчет, основанный на той же схеме компоновки данных. При этом данные будут представлены в соответствии с пользовательскими настройками.</p>
    <p>Таким образом, на основе одной схемы компоновки данных может быть получено множество различных отчетов. Применение настроек компоновки данных, созданных разработчиком или измененных пользователем, к схеме компоновки данных и определяет конечный результат. Этот процесс может быть представлен с помощью следующей схемы.</p>

    <h3 class="header-style2" id="chapter1.1">Схема компоновки данных</h3>
    <p></p>
    <p><b id="chapter1.1.1">Наборы данных</b></p>


    <p><b id="chapter1.1.2">Связи наборов данных</b></p>


    <p><b id="chapter1.1.3">Вычисляемые поля</b></p>


    <p><b id="chapter1.1.4">Вычисляемые поля</b></p>


    <p><b id="chapter1.1.5">Параметры</b></p>


    <p><b id="chapter1.1.6">Макеты</b></p>


    <p><b id="chapter1.1.7">Вложенные схемы</b></p>


    <p><b id="chapter1.1.8">Настройки</b></p>



</div>
