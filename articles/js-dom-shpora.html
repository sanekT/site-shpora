<div class="wrap">
    <h2 class="header-style">Шпаргалка по DOM</h2>
    
    
    <h3 class="header-style2">DOM дерево</h3>
    <img src="/site-shpora/img/50.png" alt="" class="screen">
    
    
    
    <h3 class="header-style2">Типы узлов</h3>
    <img src="/site-shpora/img/65.jpg" alt="" class="screen">
    
    
    
    <h3 class="header-style2">Навигация по всем узлам DOM дерева</h3>
    <img src="/site-shpora/img/51.png" alt="" class="screen">
    <p><span class="tag-style">document.head</span> - элемент HEAD доступен так.</p>
    <p><span class="tag-style">div.hasChildNodes</span> - есть ли у div дочерние элементы? Вернёт true или false</p>
    <p><span class="tag-style">div.childNodes.length</span> - возвращает длину псевдомассива.</p>
    <p><span class="tag-style">div.nodeType</span> - вернёт число тип узла, в данном случае это элемент, а значит вернёт 1</p>
    <p><span class="tag-style">div.nodeName</span> - вернёт имя узла большими буквами(DIV), будь то текстовый узел или коментарий или элемент.</p>
    <p><span class="tag-style">text.nodeValue/data</span> - получаем содержимое текстовых узлов, коментарией и т.д. Так как innerHTML не работает для таких узлов</p>
    <p><span class="tag-style">elem.innerHTML</span> - позволяет получить HTML-содержимое элемента в виде строки. Также можно добавить  или заменить содержимое html элемента</p>
    <p><span class="tag-style">elem.outerHTML</span> - содержит HTML элемента целиком. Это как innerHTML плюс сам элемент.</p>
    <p><span class="tag-style">elem.textContent</span> - предоставляет доступ к тексту внутри элемента за вычетом всех &lt;тегов>. На практике редко появляется необходимость читать текст таким образом. Намного полезнее возможность записывать текст в textContent, т.к. позволяет писать текст «безопасным способом»</p>
    <p><span class="tag-style">elem.hidden = true</span> - Атрибут и DOM-свойство «hidden» указывает на то, видим ли мы элемент или нет. Технически, hidden работает так же, как style="display:none". Но его применение проще</p>
    <p><span class="tag-style">elem.hasAttribute('href')</span> - проверяет наличие атрибута href.</p>
    <p><span class="tag-style">elem.getAttribute('src')</span> - получаем значение атрибута src.</p>
    <p><span class="tag-style">elem.setAttribute('src', value)</span> - устанавливает атрибуту src значение value.</p>
    <p><span class="tag-style">elem.removeAttribute('src')</span> - удаляет атрибут src.</p>
    <p class="note">Многие атрибуты тегов представленны в DOM в виде одноимённых свойств у этих элементов.</p>
    
    
    <h3 class="header-style2">Методы поиска узла - ELEMENT</h3>
    <p><span class="tag-style">document.getElementById(id)</span> - поиск элемента на странице по его атрибуту id</p>
    <p><span class="tag-style">document.getElementsByName(name)</span> - поиск элементов по атрибуту name. Не ищет внутри элемента.</p>
    <p><span class="tag-style">document.getElementsByTagName(tag)</span> - ищет элементы с данным тегом и возвращает их коллекцию. Передав "*" вместо тега, можно получить всех потомков.. Может искать внутри элемента</p>
    <p><span class="tag-style">document.getElementsByClassName(className)</span> - возвращает элементы, которые имеют данный CSS-класс. Может искать внутри элемента.</p>
    <p><span class="tag-style">document.querySelector()</span> - Метод elem.querySelector(css) возвращает первый элемент, соответствующий данному CSS-селектору. Иначе говоря, результат такой же, как при вызове elem.querySelectorAll(css)[0], но он сначала найдёт все элементы, а потом возьмёт первый, в то время как elem.querySelector найдёт только первый и остановится. Это быстрее, кроме того, его короче писать.. Может искать внутри элемента.</p>
    <p><span class="tag-style">document.querySelectorAll()</span> - Самый универсальный метод поиска – это elem.querySelectorAll(css), он возвращает все элементы внутри elem, удовлетворяющие данному CSS-селектору. Может искать внутри элемента.</p>
    <p><span class="tag-style">elem.matches(css) </span> - ничего не ищет, а проверяет, удовлетворяет ли elem CSS-селектору, и возвращает true или false. Этот метод удобен, когда мы перебираем элементы (например, в массиве или в чём-то подобном) и пытаемся выбрать те из них, которые нас интересуют. Не путать с методом match у регулярок. Пример:</p>
    <div class="code-style">
        <pre>
            &lt;a href="http://example.com/file.zip">...&lt;/a>
            &lt;a href="http://ya.ru">...&lt;/a>

            &lt;script>
              // может быть любая коллекция вместо document.body.children
              for (let elem of document.body.children) {
                if (elem.matches('a[href$="zip"]')) {
                  alert("Ссылка на архив: " + elem.href );
                }
              }
            &lt;/script>
        </pre>
    </div>
    <p><span class="tag-style">elem.closest(css)</span> - ищет ближайшего предка, который соответствует CSS-селектору. Сам элемент также включается в поиск. Другими словами, метод closest поднимается вверх от элемента и проверяет каждого из родителей. Если он соответствует селектору, поиск прекращается. Метод возвращает либо предка, либо null, если такой элемент не найден</p>
    
    
    <h3 class="header-style2">Навигацияя только по элементам DOM дерева</h3>
    <img src="../img/52.png" alt="" class="screen">
    
    
    
    <h3 class="header-style2">Типы псевдомасивов в DOM и их различия</h3>
    <p><b>NodeList</b></p>
    <p>Чтобы получить такой псевдомассив используется, например, метод document.querySelectorAll(selector) или document.body.childNodes</p>
    <p><b>HTMLCollection(Живая коллекция)</b></p>
    <p>Чтобы получить такой псевдомассив используется document.getElements...() подобные методы у документа или document.body.children</p>
    <p><b>Различия</b></p>
    <p>Если мы получили в переменную массив HTMLCollection каких нибудь элементом, а потом в программе где то поменялось количество этих элементов, то при обращении к этой коллекции там уже всё обновится и будет хранится актуальное количество элементов. А вот NodeList  так не умеет.</p>
    <p>Второе различие, которое я знаю это то что псевдомассив HTMLCollection не может использовать метод массива forEach(), а NodeList может.</p>
    
    
    <p><span class="tag-style">document.links</span>  -  коллекция ссылок на странице(HTMLCollection).</p>
    <p><span class="tag-style">document.images</span>  -  коллекция картинок на странице(HTMLCollection).</p>
    <p><span class="tag-style">document.forms</span>  -  коллекция форм на странице(HTMLCollection).</p>
    
    
    
    <h3 class="header-style2">Размеры окна и документа</h3>
    <p><b>Размеры окна</b></p>
    <p><span class="tag-style">document.documentElement.clientWidth/.clientHeight</span> - ширина и высота окна НЕ включая полосу прокрутки. Также надо обращать внимание на то - включено ли увеличение или уменьшение окна с помощью Ctrl + левая кнопка мыши, иначе размер окна будет один при его  изменении, а эти свой ства будут показывать другое. Так что надо сбросить до 100% размер окна браузера.</p>
    <p><span class="tag-style">window.innerWidth/.innerHeight</span> - ширина и высота окна включая полосу прокрутки.</p>
    <p><b>Размеры документа</b></p>
    <p>Чтобы надёжно получить полную высоту документа, нам следует взять максимальное из этих свойств:</p>
    <div class="code-style">
        <pre>
            let scrollHeight = Math.max(
              document.body.scrollHeight, document.documentElement.scrollHeight,
              document.body.offsetHeight, document.documentElement.offsetHeight,
              document.body.clientHeight, document.documentElement.clientHeight
            );
        </pre>
    </div>
    <p><span class="tag-style"></span> - </p>
    <p><b>Получение текущей прокрутки:</b></p>
    <p><span class="tag-style">elem.scrollLeft/scrollTop</span> - текущее состояние прокрутки элемента elem</p>
    <p><span class="tag-style">window.pageXOffset/pageYOffset</span> - новый кроссбраузерный вариант текущего состояния прокрутки документа. Старые варианты - documentElement.scrollLeft/Top, document.body.scrollLeft/Top.</p>
    
    
    
    
    <h3 class="header-style2">Работа с формой</h3>
    <p><span class="tag-style">document.forms</span>  -  коллекция форм на странице.</p>
    <p>Обращение к элементу &lt;form name="search"&gt;&lt;/form&gt;:</p>
    <p><span class="tag-style">document.forms[0];</span></p>
    <p><span class="tag-style">document.forms['search'];</span></p>
    <p><span class="tag-style">document.forms.search;</span></p>
    <p><span class="tag-style">document.search;</span></p>
    <p><span class="tag-style">form.method = "get";</span>  - устанавливаем способ послания данных</p>
    <p><span class="tag-style">form.action = '';</span>  - можно задать файл обработчик формы</p>
    <p><span class="tag-style">form.sabmit();</span>  - посылаем форму</p>
    <p><span class="tag-style">form.reset();</span> - очищаем форму</p>
    <p><span class="tag-style">form.length;</span> - вернёт количество дочерних элементов в форме.</p>
    <p><span class="tag-style">form.elements.length;</span> - вернёт количество элементов массива elements(то же что и form.length).</p>
    <p><span class="tag-style">form.elements;</span> - вернёт массив элементов в форме(инпуты, текстэрии, батоны)</p>
    <p>Обращение к элементу &lt;input type="text" name="q"&gt;:</p>
    <p><span class="tag-style">form.elements[0];</span></p>
    <p><span class="tag-style">form.elements["q"];</span></p>
    <p><span class="tag-style">form.elements.q;</span></p>
    <p><span class="tag-style">form.elements.q.type;</span> - возвращает тип инпута, вернёт "text"</p>
    <p><span class="tag-style">form.elements.q.value;</span> - вернёт значение выбранного инпута</p>
    <p><span class="tag-style">form.elements.q.defaulValue;</span> - вернёт значение инпута то что стоит изначально по умолчанию</p>
    <p><span class="tag-style">form.elements.q.focus();</span> - поставится курсор в выбранный инпут</p>
    <p><span class="tag-style">form.elements.q.blur();</span> - спадёт фокус с выбранного инпута</p>
    <p><span class="tag-style">form.elements.q.select();</span> - выделяет текст у выбранного инпута</p>
    <p>Имитируем нажатие кнопки у формы &lt;button class="btn"&gt;&lt;/button&gt;:</p>
    <p><span class="tag-style">btn.click();</span></p>
    
    
    
    <h3 class="header-style2">Элемент Select</h3>
    <div class="code-style">
        <pre>
            < form name="f" action="">
                < select name="book">
                    < option value="1">JavaScript< /option>
                    < option value="2">PHP< /option>
                    < option value="3">HTML< /option>
                    < option value="4">AJAX< /option>
                < /select>
            < /form>
        </pre>
    </div>
    <p><span class="tag-style">let select = document.forms.f.book;</span>// выбираем список</p>
    <p><span class="tag-style">console.log(select.type);</span>// select-one</p>
    <p><span class="tag-style">select.multiple = 'multiple';</span></p>
    <p><span class="tag-style">console.log(select.type);</span>// select-multiple</p>
    <p><span class="tag-style">console.log(select.length);</span>// 4</p>
    <p><span class="tag-style">let options = select.options;</span>// выбираем опции select</p>
    <p><span class="tag-style">console.log(select.value);</span>// значение атрибута value выбранного в данный момент option</p>
    <p><span class="tag-style">console.log(select.length == options.length);</span>// true</p>
    <p><span class="tag-style">options[3].defaultSelected = true;</span></p>
    <p><span class="tag-style">options[2].selected = true;</span></p>
    <p><span class="tag-style">console.log(select.selectIndex);</span>// 2</p>
    <p><span class="tag-style">console.log(select.selectIndex.text);</span>// HTML</p>
    <p><span class="tag-style">console.log(select.selectIndex.value);</span>// 3</p>
    <p><span class="tag-style">select.form.submit();</span>// посылаем форму</p>
    
    
    
    
    <h3 class="header-style2">Исключения</h3>
    <p><span class="tag-style">element.style.htmlFor</span>  - для html-атрибута for</p>
    <p><span class="tag-style">element.style.cssFloat</span>  - для css свойства float</p>
    <p><span class="tag-style">element.style.className</span>  - для html-атрибута class</p>
    
    
    
    
    <h3 class="header-style2">Типы событий</h3>
    <p>Красным отмечены те события, которые можно отменить.</p>
    <ul class="list">
        <li>Срабатывает на большинстве объектов
            <ul class="list">
                <li><span class="tag-style vue-r">onclick</span></li>
                <li><span class="tag-style">onmousedown</span></li>
                <li><span class="tag-style">onmouseup</span></li>
                <li><span class="tag-style">onmousemove</span></li>
                <li><span class="tag-style vue-r">onmouseover</span></li>
                <li><span class="tag-style vue-r">onmouseout</span></li>
            </ul>
        </li>
        <li>document, body, input, textarea
            <ul class="list">
                <li><span class="tag-style vue-r">onkeydown</span></li>
                <li><span class="tag-style vue-r">onkeypress</span></li>
                <li><span class="tag-style">onkeyup</span></li>
            </ul>
        </li>
        <li>window, body, a, button, input, label, select, textarea
            <ul class="list">
                <li><span class="tag-style">onfocus</span></li>
                <li><span class="tag-style">onblur</span></li>
            </ul>
        </li>
        <li>window, body, iframe, img, object
            <ul class="list">
                <li><span class="tag-style">onload</span></li>
            </ul>
        </li>
        <li>window, body
            <ul class="list">
                <li><span class="tag-style">onunload</span></li>
            </ul>
        </li>
        <li>window, body, img, object
            <ul class="list">
                <li><span class="tag-style">onerror</span></li>
            </ul>
        </li>
        <li>window, body, iframe
            <ul class="list">
                <li><span class="tag-style">onresize</span></li>
            </ul>
        </li>
        <li>form
            <ul class="list">
                <li><span class="tag-style">onsubmit</span></li>
                <li><span class="tag-style">onreset</span></li>
            </ul>
        </li>
        <li>input, textarea
            <ul class="list">
                <li><span class="tag-style">onselect</span></li>
            </ul>
        </li>
        <li>input, textarea, select
            <ul class="list">
                <li><span class="tag-style">onchange</span></li>
            </ul>
        </li>
        <li>window, body, элементы с прокруткой
            <ul class="list">
                <li><span class="tag-style">onscroll</span></li>
            </ul>
        </li>
    </ul>
    
    
    
    
    <h3 class="header-style2">Объект событий и его свойства</h3>
    <p><span class="tag-style">event.type</span>  - тип события</p>
    <p><span class="tag-style">event.target</span>  - ссылка на элемент, на котором зарегестрированно событие, т.е. это тот элемент в html, на который кликнули или навели мышкой</p>
    <p><span class="tag-style">event.currentTarget</span>  - ссылка на элемент, на котором произошло событие, this === currentTarget, это тот эелемент, на котором висит обработчик события и этот обработчик сработал, когда кликнули по нему или его дочернему элементу.</p>
    <p><span class="tag-style">event.target.className</span>  - вернёт классы, которые висят на данном элементе</p>
    <p><span class="tag-style">event.target.tagName</span>  - вернёт имя данного элемента</p>
    <hr>
    <p>Мышиные события</p>
    <p><span class="tag-style">event.button</span>  - какая кнопка мыши нажата? 0 - основная</p>
    <p>Свойства события клавиатуры</p>
    <p><span class="tag-style">event.keyCode</span>  - какая клавиша нажата?</p>
    <p><span class="tag-style">event.altKey</span>  - </p>
    <p><span class="tag-style">event.ctrlKey</span>  - </p>
    <p><span class="tag-style">event.shiftKey</span>  - эти 3 свойства возвращают true или false если нажата или нет клавиши alt, ctrl, shift</p>
    <p>Координаты точки нажатия относительно окна браузера</p>
    <p><span class="tag-style">event.clientX</span></p>
    <p><span class="tag-style">event.clientY</span></p>
    <p>Координаты точки нажатия относительно монитора</p>
    <p><span class="tag-style">event.screenX</span></p>
    <p><span class="tag-style">event.screenY</span></p>
    <hr>
    <p><span class="tag-style">event.prevenrDefault()</span>  - отмена действий по умолчанию</p>
    
</div>
