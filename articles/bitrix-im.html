<div class="wrap">
    
    <h2 class="header-style">Здесь буду записывать всякие разные вещи по созданию интернет магазина.</h2>
    
    
    <h3 class="header-style2">Описываю из курса Базарова по созданию ИМ. Ссылка на <a href="https://camouf.ru/video/new_store/">курс</a></h3>
    <p>Подготовили пустой шаблон, ну и теперь надо определить какие типы информации будут в нашем ИМ, чтобы под них создать Типы инфоблоков. Ну если это ИМ, то точно будет каталог товаров(так и назовёт тип инфоблока  - Каталоги), затем у нас могут быть статьи, новости, отзывы, обзоры и т.д.(назовём тип инфоблока - Информация),  также могут быть рекламные материалы - баннеры, акции(так и назовём тип - Рекламные материалы). Вот примерные 3 типа инфоблока нарисовались.</p>
    <p>В типе "Каталоги" создадим инфоблок "Каталог товаров" с символьным кодом "catalog". Далее настраиваем инфоблока так как нам надо. При настройке инфоблока есть такая вкладка как "Торговый каталог"(эта вкладка появляется с версии "Малый бизнес"), так вот если отметить галочкой что инфоблок "Является торговым каталогом", то наш инфоблок будет не просто хранилищем динамической информации, а делает его именно торговым каталогом, т.е. он будет учавствовать в модуле "Интернет магазин"(в левом меню пункта "Магазин", символьный код модуля - sale). Как он в нём учавствует опишу дальше. Также ниже есть возможность поставить галочку для пункта "Инфоблок имеет торговые предложения". Это означает, что для товара инфоблока будет доступна такая возможность как предоставление различных вариантов для этого же товара. Ставим галочку и появляется следующий пункт - "Инфоблок торговых предложений", в списке выбираем "новый инфоблок", опять откроется дополнительные настройки. В "Названии" пишем, например, "Предложения каталога" и привязываем к типу инфоблока "Каталоги". Ещё ниже можно описать свойства для наших торговых предложений. Эти свойства именно для предложений. Напишем пока одно свойство - "Цвет" и тип этого свойства - "справочник". Затем надо описать этот справочник в детальной настройке тут же справа от кода сво-ва. Тут описывать не буду, если что посмотреть в 9 уроке начиная с 10 минуты. В результате у нас теперь 2 инфоблока: 1) каталог товаров, 2) торговые предложения. Ну и далее наполняем их.</p>
    <p>При наполнении инфоблока "Каталог товаров" теперь появилась возможность создать обычный товар без торговых предложений и товар с торговыми предложениями. При создании обычного товара всё делается как и раньше, только появилась вкладка "Торговый каталог", в ней мы можем указать цену и другие настройки, которые рассмотрим позже. Кстати при указании цены хотел сохранить, а мне выдало ошибку "Не указан базовый тип цены". В инете нашёл, что надо зайти в меню слева во вкладку "Магазин" и в пункте "Настройка" -> "Цена" -> "Тип цены" создать тип цены. Как именно его создавать я не знаю, просто задал символьный код, названия на русскои и англ. и всё. Также чтобы в этой вкладке "Торговый каталог" во вкладке параметры можно было указать количество товаров, надо пройти в пункт меню "Настройки" -> "Настройки продукта" -> "Настройки модулей" -> "Торговый каталог" в первой же вкладке "Настройки" в третьем блоке "Значения параметров товаров по умолчанию" жмём кнопку "Изменить", в открывшемся окне ставим галочку у пункта "Разрешить покупку при отсутствии товара (включая разрешение отрицательного количества товара)" и остальное пока не трогаем. В чуть ниже блоке также убираем галочку с пункта "Складской учёт". Сохраняем. Теперь опять идём в товар, который создали и во вкладке "Торговый каталог" теперь можем поставить количество товаров. Выше все действия мы сделали для того, чтобы на время можно было указывать количество товаров, без этих действий, т.к. у нас ещё нет товаров, система просто не разрешает поставить количество, потом мы вернём настройки по другому, когда появятся товары.</p>
    <p>Теперь создадим товар с торговыми предложениями. Для этого жмём не "Создать товар", а "Создать товар с торговыми предложениями". Откроется такая же форма для заполнения товара, только последняя вкладка станет не "Торговый каталог", а "Торговые предложения". Заполняем товар, название, другие свойства и переходим во вкладку "Торговые предложения", в ней жмём "Добавить элемент", это как раз и будем добавляеть разные варианты для этого товара. В открывшемся окне будет такая же форма заполнения товара, только тут уже есть вкладка "Торговый каталог", заполняем. Как заполнять? Тут к названию товара допишем, например цвет товара, внизу в созданном сво-ве "Цвет" выберем ранее заполненые цвета в справочнике. Анонсы и подробное можно заполнять , а можно и не заполнять, по надобности делаем. И во вкладке "Торговый каталог" ставим цену, количество товаров и т.д., сохраняем и создаём опять новый элемент торгового предложения. По одному торговому элементу создавать долго, поэтому рядом есть кнопка "Генерировать торговые предложения", при нажатии на неё откроется окно при заполнении которого следующие элементы будут заполняться автоматом. Если что посмтреть заполнение <a href="https://camouf.ru/video/new_store/">тут</a> начиная с 24 минуты. Но даже после генерации нужно всё равно заходит в каждое предложение и изменять цену или количество, а товаров может быть 5 000, поэтому такие товары в основном заполняются в 1с программе.Позже посмотрим как сделать синхронизацию с 1с. Немного дальше в этом же видео показано как импортировать и экспортировать товары с другово сайта 1с битрикс.</p>
    
    
    
    
    
    
    
    
    
    
   
    <h3 class="header-style2">Компонент малая корзина "bitrix:sale.basket.basket.small.mail"</h3>
    <p>Смотреть с 00:04:35</p>
    <iframe class="video" width="560" height="315" src="https://www.youtube.com/embed/Ly8IzagGox0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    <p>Этот код вставляем в template.php для этого компонента, он выводит количество товаров в корзине и ещё по мелочи:</p>
    <div class="code-style">
        <pre>
            &lt;?if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();?>

            &lt;?//echo "&lt;pre>"; print_r($arResult["ITEMS"]);?>

            &lt;?php

                //эта функция вычисляет окончание слова "товар" от его количества
                function getNumEnding($number, $endingArray)
                {
                    $number = $number % 100;
                    if ($number >= 11 &amp;&amp; $number &lt;= 19)
                    {
                        $ending = $endingArray[2];
                    } else {
                        $i = $number % 10;
                        switch ($i) {
                            case (1): $ending = $endingArray[0]; break;
                            case (2): case (3): case (4): $ending = $endingArray[1]; break;
                            default: $ending=$endingArray[2]; 
                        }
                    }
                    return $ending;
                }
            ?>

            &lt;?php $defaultCurr = CSaleLang::GetLangCurrency(SITE_ID); ?>

            &lt;?php
                $quant='0';
                $price='0';
                foreach ($arResult["ITEMS"] as $v)
                {
                    if ($v["DELAY"] == "N" &amp;&amp; $v["CAN_BUY"] == "Y")
                    {
                        $quant = $quant + $v["QUANTITY"];
                        $pr = $v["QUANTITY"] * $v["PRICE"];
                        $price = $price + $pr;
                    }
                }
                if($quant==0):?>
                    &lt;span>В Вашей корзине&lt;br/>
                    пока нет товаров.&lt;/span>
                &lt;?else:?>
                    &lt;a href="/basket/">В корзине:&lt;/a>&nbsp;&lt;span><?=$quant?>&lt;/span>&lt;span> &lt;?php echo getNumEnding($quant, array("товар", "товара", "товаров")); ?>&lt;/span>
                    &lt;p>На сумму &lt;span class="header__userinfo-cart-sum">&lt;?php echo SaleFormatCurrency($price, $defaultCurr); ?>&lt;/span> руб.&lt;/p>
                &lt;?endif;?>
        </pre>
    </div>
    
    
    
</div>
