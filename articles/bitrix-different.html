<div class="wrap">
   
    <h2 class="header-style">Разное по битриксу</h2>
    
    
    <ul class="list">
        <li><a href="#1">Как подключится к хостингу через Win SCP клиент</a></li>
        <li><a href="#2">Как вывести количество показов новости</a></li>
        <li><a href="#3">Как подправить дату новости, если шаблонные даты не подходят</a></li>
        <li><a href="#4">Про дату в массиве $arResult</a></li>
        <li><a href="#5">Какие параметры отвечают за ЧПУ в массиве настройки комплексного компонента Новости</a></li>
        <li><a href="#6">Как подключить карту на сайт</a></li>
        <li><a href="#7">Рейтинг(звёзды) товаров каталога</a></li>
        <li><a href="#8">Как поставить флажок-галочку для свойств элемента инфоблока</a></li>
        <li><a href="#9">Разница между комплексными компонентами "Новости" и "Каталог"</a></li>
        <li><a href="#10">Как вывести разделы инфоблока</a></li>
        <li><a href="#11">Для чего нужен 4й параметр - $component у простого компонент внутри комплексного компонента</a></li>
        <li><a href="#12">Получение подразделов указанного раздела инфоблока с помощью API битрикса</a></li>
        <li><a href="#13">Компонент "Умный фильтр" - "bitrix:catalog.smart.filter</a></li>
        <li><a href="#14">Сортировка элементов</a></li>
        <li><a href="#1"></a></li>
        <li><a href="#1"></a></li>
        <li><a href="#1"></a></li>
        <li><a href="#1"></a></li>
        <li><a href="#1"></a></li>
        <li><a href="#1"></a></li>
    </ul>
    
    <h3 class="header-style2" id="1">Как подключится к хостингу через Win SCP клиент</h3>
    <iframe class="video" width="560" height="315" src="https://www.youtube.com/embed/mIVPWsaeOro" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    
    
    
    
    <h3 class="header-style2" id="2">Как вывести количество показов новости</h3>
    <p>Для этого во время настройки параметров компонента, например список новостей, в поле где выбираются что нужно взять из БД - название, описание для анонса, картинка анонса, вот в этом поле надо выбрать "количество показов", чтобы оно захватилось из БД. По умолчанию и так многое захватывается из БД, но не всё, поэтому нужно указать это поле отдельно.</p>
    
    
    
    
    <h3 class="header-style2" id="3">Как подправить дату новости, если шаблонные даты не подходят</h3>
    <p>Бывает когда выводишь из инфоблока элементы-новости, то при настройке параметров в поле "формат даты" есть шаблоны дат  и эти шаблоны не всегда подходят под дату в вёрстке, в таком случае можно вручную подправить как надо. Например нет такого шаблона как - "11 февряля, 2021", именно запятой нет в шаблоне, в таких случаях выбираем шаблон "11 февраля 2021" и уже в подключении компонента в параметрах наш шаблон будет указан как - ACTIVE_DATE_FORMAT => "j F Y", берём и просто добавляем запятую - "j F, Y". Вот так вручную можно подправлять шаблон даты как мне нужно.</p>
    
    
    
    
    <h3 class="header-style2" id="4">Про дату в массиве $arResult</h3>
    <p>В массиве $arResult у каждого элемента есть 2 свойства с датой: 1) ACTIVE_FROM => "11.11.2021" 2) DISPLAY_ACTIVE_FROM => "11 ноября, 2021". В первом просто дата, а во втором уже отформатированная дата по шаблону. Есть ещё правда ACTIVE_TO, но пока не сталкивался.</p>
    
    
    
    
    
    
    <h3 class="header-style2" id="5">Какие параметры отвечают за ЧПУ в массиве настройки комплексного компонента Новости</h3>
    <p>В комплексном компоненте Новости когда включаем режим ЧПУ, то в массиве настроек этого компонента за ЧПУ отвечают следующие св-ва массива:</p>
    <p><b>"SEF_MODE" => "Y"</b> - обозначает, что режим ЧПУ включён</p>
    <p><b>"SEF_FOLDER" => "/test/"</b> - раздел относительно которого будет работать компонент</p>
    <p><b>"SEF_URL_TEMPLATES" => ["news" => "", "section" => "#SECTION_CODE#/", "detail" => "#SECTION_CODE#/#ELEMENT_CODE#/"]</b> - пути шаблонов, которые будут подгружаться в зависимости от того что задано в GET запросе. Если в запросе указано только /test/, то подгружается файл news.php с расположенным в нём компонентом news.list. Если же в запросе /test/название раздела/, то подгрузится файл section.php с компонентом news.list в нём, который подгрузит элементы из указанного раздела. Ну и если в запросе /test/название раздела/название элемента/, то подгрузится файл detail.php с компонентом news.detail, который выведет детальное описание указанного элемента раздела инфоблока.</p>
    <p>Также есть возможность добавить свой файл к тем стандартным файлам комплексного компонента. Например, добавлю файл myfile.php и напишу в нём вывод какой то строки, теперь надо задать какой то путь, по которому мой файл будет открываться, для этого добавим в массив мой файл: <b>"SEF_URL_TEMPLATES" => ["news" => "", "section" => "#SECTION_CODE#/", "detail" => "#SECTION_CODE#/#ELEMENT_CODE#/", "myfile" => "mypath/"]</b>, и теперь мой файл откроется по пути /test/mypath/.</p>
    
    
    
    
    
    
    <h3 class="header-style2" id="6">Как подключить карту на сайт</h3>
    <p>Первый вариант: есть в битриксе компонент, который вставляет карты, ему нужен будет только ключ, который в яндексе надо создать.</p>
    <p>Второй вариант: можно создать карту в яндексе, скопировать там код и вставить куда нам нужно этот код. Разберём 2й вариант пока, в видео смотреть с 00:11:51:</p> 
    <iframe class="video" width="560" height="315" src="https://www.youtube.com/embed/BNAwuvtCoVY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    
    
    
    
    <h3 class="header-style2" id="7">Рейтинг(звёзды) товаров каталога</h3>
    <p>Количество звёзд на товаре строятся в битриксе на основании отзывов. В отзывах есть возможность голосовать за товар выставляя звёзды по 5ти бальной системе, вот оттуда потом звёзды ставятся каждому товару.</p>
    <p>Я когда натягивал вёрстку Техника, то там не было по вёрстке никаких отзывов, поэтому звёзды выносил в отдельное свойство-поле и админ сам в этом поле выставляет звёзды для отображения в товарах.</p>
    
    
    
    
    
    <h3 class="header-style2" id="8">Как поставить флажок-галочку для свойств элемента инфоблока</h3>
    <p>Когда мы создали свойство для элемента и назвали его как то, то потом при редактировании этого элемента хочется просто отметить галочкой это свойство, типо отметил значит отображать название этого свойства, не отметил не отображать. Для этого при создании свойства надо выбрать ему Тип - Список, затем заходим в доп. настройки и ниже там выбираем во Внешний вид списка - Флажки и ещё ниже в первом поле в Значении написать Y(означает Да, потом в коде этот Y будет выступать как булево значение в условиях). Всё теперь свойство выглядит как чекбокс.</p>
    
    
    
    
    
    
    <h3 class="header-style2" id="9">Разница между комплексными компонентами "Новости" и "Каталог"</h3>
    <p>"Каталог" предназначен больше для вывода каталогов в интернет магазинах, потому что там есть вывод цены, количества товаров, остатки товаров, склады, несколько типов цены. "Каталог" более профессиональный для более дорогих редакций и он гораздо сложнее чем "Новости". Поэтому когда делали сайт Книги и Техника, автор использовал для вывода каталога компонент "Новости", чтобы не усложнять информацию, да и у нас редакция была Старт, а там нет модуля "интернет магазина".</p>
    
    
    
    
    <h3 class="header-style2" id="10">Как вывести разделы инфоблока</h3>
    <p>Чтобы вывести разделы ифоблока нужно использовать компонент "Структура разделов", который находится Контент - Каталог - Структура разделов. Это единственный компонент, который выводит разделы(папки) инфоблока. Если что вот в этом видео показано:</p>
    <iframe class="video" width="560" height="315" src="https://www.youtube.com/embed/p3r7sMKtJeg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    
    
    
    
    
    <h3 class="header-style2" id="11">Для чего нужен 4й параметр - $component у простого компонент внутри комплексного компонента</h3>
    <p>Нужен этот параметр для того чтобы простой компонент понимал, что он находится внутри комплексного компанента и  начинал искать заданый ему шаблон в папке bitrix самого комплексного компонента, без этого параметра простой компонент даже не заходит в папку bitrix комплексного компонента, а начинает искать в папке, например как у меня, .default, а потом в папке bitrix уже самой системы.</p>
    
    
    
    
    <h3 class="header-style2" id="12">Получение подразделов указанного раздела инфоблока с помощью API битрикса</h3>
    <p>Когда я делал каталог на сайте "Шаблон техника", то там была такая структура, использовался комплексный компонент "Новости", на первой странице(news.php) выводил разделы инфоблока, по клику на которые переходил к подразделам, а значит подгружалась вторая страница(section.php). На этой второй странице размещал 2 простых компонента: 1) "bitrix:catalog.section.list" для вывода подразделов, 2) "bitrix:news.list" для вывода элементов подразделов. Нужно условие, при котором список элементов не будет выводится, пока есть подразделы в разделе, и как только подразделы в разделе закончились, только тогда выводится список элементов этого подраздела. Массивы $arResult и $arParams не дают информацию о подразделах, есть ещё они или нет, не понятно. Для этого и используем API битрикса, чтобы залезть в БД и получить информацию о количестве подразделов. Вот ссылка на <a href="https://dev.1c-bitrix.ru/api_help/iblock/index.php">документацию</a>. Выбрав слева Информационные блоки, справа видим информацию о нём. В самом верху видим, что модуль инфоблока надо проверить на то установлен ли он в системе или нет и только потом уже внутри этого условия писать выборку наших подразделов. Вот итоговый код:</p>
    <div class="code-style">
        <pre>
            if(CModule::IncludeModule('iblock')){
                $arr_section_from_db = CIblockSection::GetList(
                    [
                        "LEFT_MARGIN" => "ASC"   //указали сортировку запрашиваеммых данных
                    ], 
                    [
                        "IBLOCK_ID" => $arParams["IBLOCK_ID"],   //указали из какого инфоблока нужен нам раздел
                        "ACTIVE" => "Y",   //указали что раздел нам нужен активный
                        "CODE" => $arResult["VARIABLES"]["SECTION_CODE"]   //указали символьный код раздела
                    ]
                )->fetch();   // теперь в переменной лежит массив с данными о указанном разделе, чтобы получить массив его подразделов, нам нужен ID, ID будет лежать в ключе "ID"

                //снова посылаем такой же запрос, только указываем полученный ID раздела
                $arr_section_list_from_db = CIblockSection::GetList(
                    [
                        "LEFT_MARGIN" => "ASC"   //указали сортировку запрашиваеммых данных
                    ], 
                    [
                        "IBLOCK_ID" => $arParams["IBLOCK_ID"],   //указали из какого инфоблока нужен нам раздел
                        "ACTIVE" => "Y",   //указали что раздел нам нужен активный
                        "SECTION_ID" => $arr_section_from_db["ID"]   //указали ID выше полученного раздела
                    ]
                );
                //после того как передали ID раздела обратно в БД, то нам вернулся массив из его подразделов
                $count_section = $arr_section_list_from_db->SelectedRowsCount();   //посчитали сколько подразделов в массиве

            }
        </pre>
    </div>
    <p>Если хочется посмотреть код, то он лежит по адресу: D:\OpenServer\domains\bitrix-tehnika.local\local\templates\.default\components\bitrix\news\my_catalog\section.php</p>
    
    
    
    
    <h3 class="header-style2" id="13">Компонент "Умный фильтр" - "bitrix:catalog.smart.filter"</h3>
    <p>Этот компонент относится к каталогу и часто применяется в интернет магазинах. Находится в компонентах по пути Контент - Каталог - Умный фильтр. Настраиваем примерно так как показано в видео:</p>
    <iframe class="video" width="560" height="315" src="https://www.youtube.com/embed/NLbI4o3zG74" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    <p>Сделаю одно уточнение, всё делал как по видео но у меня умный фильтр не работал, у автора в вёрстке расположение фильтра было до компонента news.list, а в моей вёрстке про технику фильтр был ниже news.list, я его перебросил вверх и фильтр заработал. Я так понимаю в фильтре есть ключ "FILTER_NAME" => "arrFilter", так вот такой же ключ надо ставить в компонент news.list и видимо ключ у фильтра должен первей определяться, затем уже по этому массиву "arrFilter" уже выводится компонент news.list.</p>
    
    
    
    
    <h3 class="header-style2" id="14">Сортировка элементов</h3>
    <p>На данный момент не знаю есть ли в битрикс какой то компонент, который занимается сортировкой элементов, но в этом видео автор делает сортировку самостоятельно программируя. Я делал также сортировку  у себя в сайте Техника в файле D:\OpenServer\domains\bitrix-tehnika.local\local\templates\.default\components\bitrix\news\my_catalog\section.php</p>
    
</div>