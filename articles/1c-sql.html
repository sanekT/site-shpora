<div class="wrap">
   
    <h2 class="header-style">Язык запросов</h2>

    <ul class="list">
        <li><a href="#1">Основы синтаксиса</a>
            <ul class="list2">
                <li><a href="#1a">Выбрать по имени реквизита(поля, свойства, столбца)</a></li>
                <li><a href="#1b">Выбрать первые N строк - ПЕРВЫЕ</a></li>
                <li><a href="#1c">Выборка различных строк - РАЗЛИЧНЫЕ</a></li>
                <li><a href="#1d">Выборка строк по реквизиту в значениях которого ссылки на другой справочник</a></li>
                <li><a href="#1e">Поле Ссылка в табличной части</a></li>
                <li><a href="#1f">Выбрать все константы и их значения</a></li>
                <li><a href="#1g">Поле таблицы - Версия данных</a></li>
            </ul>
        </li>
        <li><a href="#2">Группировка в запросах</a>
            <ul class="list2">
                <li><a href="#2a">Агрегатная функция СУММА</a></li>
                <li><a href="#2b">Агрегатная функция СРЕДНЕЕ</a></li>
                <li><a href="#2c">Агрегатная функция МИНИМУМ</a></li>
                <li><a href="#2d">Агрегатная функция МАКСИМУМ</a></li>
                <li><a href="#2e">Агрегатная функция КОЛИЧЕСТВО</a></li>
                <li><a href="#2f">Агрегатная функция КОЛИЧЕСТВО РАЗЛИЧНЫЕ</a></li>
                <li><a href="#2g">Группировка без группируемых полей и агрегатных функций</a></li>
                <li><a href="#2h">Группировка без группировочных полей</a></li>
                <li><a href="#2i">Группировка по нескольким полям</a></li>
                <li><a href="#2j">Подсчитываем количество записей в таблице КОЛИЧЕСТВО(*)</a></li>
            </ul>
        </li>
        <li><a href="#3">Условия в запросах</a>
            <ul class="list2">
                <li><a href="#3a">Секция ГДЕ</a></li>
                <li><a href="#3b">Секция ИМЕЮЩИЕ</a></li>
                <li><a href="#3c">Выбрать записи без групп</a></li>
                <li><a href="#3d">Выбрать записи(элементы) из указанной группы(папки)</a></li>
                <li><a href="#3e">Выбрать записи по точному соответствию и не точному</a></li>
                <li><a href="#3f">Примеры по базе Гастроном</a></li>
            </ul>
        </li>
        <li><a href="#4">Упорядочивание в запросах(сортировка)</a>
            <ul class="list2">
                <li><a href="#4a">Секция УПОРЯДОЧИТЬ ПО</a></li>
                <li><a href="#4b">Автоупорядочивание</a></li>
                <li><a href="#4c">Примеры</a></li>
            </ul>
        </li>
        <li><a href="#5">Функции для работы с датой в запросах</a>
            <ul class="list2">
                <li><a href="#5a">Функция ДАТАВРЕМЯ</a></li>
                <li><a href="#5b">Отступление</a></li>
                <li><a href="#5c">Функция ГОД</a></li>
                <li><a href="#5d">Функция КВАРТАЛ</a></li>
                <li><a href="#5e">Функция МЕСЯЦ</a></li>
                <li><a href="#5f">Функция ДЕНЬГОДА</a></li>
                <li><a href="#5g">Функция ДЕНЬ</a></li>
                <li><a href="#5h">Функция НЕДЕЛЯ</a></li>
                <li><a href="#5i">Функция ДЕНЬНЕДЕЛИ</a></li>
                <li><a href="#5k">Функция ЧАС</a></li>
                <li><a href="#5l">Функция МИНУТА</a></li>
                <li><a href="#5m">Функция СЕУНДА</a></li>
                <li><a href="#5n">Функция НАЧАЛОПЕРИОДА</a></li>
                <li><a href="#5o">Функция КОНЕЦПЕРИОДА</a></li>
                <li><a href="#5p">Функция ДОБАВИТЬКДАТЕ</a></li>
                <li><a href="#5r">Функция РАЗНОСТЬДАТ</a></li>
                <li><a href="#5s">В функции можно передавать не только константы, но и поля таблиц</a></li>
                <li><a href="#5t">Примеры</a></li>
            </ul>
        </li>
        <li><a href="#6">Функции работы со строками в запросе</a>
            <ul class="list2">
                <li><a href="#6a">Сложение строк</a></li>
                <li><a href="#6b">Функция ПОДСТРОКА</a></li>
                <li><a href="#podobno">Функция ПОДОБНО(LIKE) - поиск по шаблону</a></li>
                <li><a href="#6d">Примеры</a></li>
            </ul>
        </li>
        <li><a href="#7">Условный оператор в запросе(ВЫБОР...КОНЕЦ)</a>
            <ul class="list2">
                <li><a href="#7a">Отступление</a></li>
                <li><a href="#7b">Более сложные логические выражения в условиях оператора</a></li>
                <li><a href="#7с">Более сложные результаты условного оператора</a></li>
                <li><a href="#7d">Пример</a></li>
            </ul>
        </li>
        <li><a href="#8">Операторы МЕЖДУ, В, В ИЕРАРХИИ</a>
            <ul class="list2">
                <li><a href="#8a">Логический оператор МЕЖДУ</a></li>
                <li><a href="#8b">Логический оператор В</a></li>
                <li><a href="#8c">Проверка принадлежности по иерархии для справочников</a></li>
                <li><a href="#8d">Примеры</a></li>
            </ul>
        </li>
        <li><a href="#9">Функции и операторы для работы с типами(ТИПЗНАЧЕНИЯ, ТИП, ССЫЛКА, ЕСТЬNULL, ВЫРАЗИТЬ)</a>
            <ul class="list2">
                <li><a href="#9a">Функция ТИПЗНАЧЕНИЯ</a></li>
                <li><a href="#9b">Функция ТИП</a></li>
                <li><a href="#9с">Отступление</a></li>
                <li><a href="#9d">Логический оператор ССЫЛКА</a></li>
                <li><a href="#9e">Функция ЕСТЬNULL</a></li>
                <li><a href="#9f">Функция ВЫРАЗИТЬ</a></li>
                <li><a href="#9g">Примеры</a></li>
            </ul>
        </li>
        <li><a href="#10">Функция ЗНАЧЕНИЕ(получает значения перечислений и предопределённых данных)</a>
            <ul class="list2">
                <li><a href="#10a">Перечисления</a></li>
                <li><a href="#10b">Предопределённые данные</a></li>
                <li><a href="#10с">Примеры</a></li>
            </ul>
        </li>
        <li><a href="#11">Итоги в запросах</a>
            <ul class="list2">
                <li><a href="#11a">Подведение итогов в целом по таблице</a></li>
                <li><a href="#11b">Подведение итогов по нескольким полям</a></li>
                <li><a href="#11с">Подведение итогов по иерархии</a></li>
                <li><a href="#11d">Подведение итогов без агрегатных функций</a></li>
                <li><a href="#11e">Примеры</a></li>
            </ul>
        </li>
        <li><a href="#12">Вычисляемые поля</a>
            <ul class="list2">
                <li><a href="#12a"></a></li>
            </ul>
        </li>
        <li><a href="#13">Вложенные таблицы</a>
            <ul class="list2">
                <li><a href="#13a"></a></li>
            </ul>
        </li>
        <li><a href="#14">Объединение таблиц</a>
            <ul class="list2">
                <li><a href="#14a"></a></li>
            </ul>
        </li>
        <li><a href="#15">Временные таблицы</a>
            <ul class="list2">
                <li><a href="#15a"></a></li>
            </ul>
        </li>
        <li><a href="#16">Программно пишем запрос и обрабатываем его результат.</a>
            <ul class="list2">
                <li><a href="#16a">Обрабатываем итоги и детальные записи</a></li>
                <li><a href="#16b">Программно работаем с временными таблицами</a></li>
                <li><a href="#16c">Обрабатываем пакетный запрос</a></li>
            </ul>
        </li>
        
    </ul>





    <h3 class="header-style">Общие заметки по запросам</h3>
    <p>Один и тот же объект конфигурации может имет несколько таблиц в БД. Например, есть Справочник Сотрудники, если у элемента Сотрудник есть табличная часть ПрошлаяРабота, значит помимо главной таблицы Справочник.Сотрудники, есть ещё таблица для табличной части Справочник.Сотрудники.ПрошлаяРабота.</p>
    <p>Результат выполнения запроса - это таблица(или дерево это тоже таблица, где одна запись может быть подчинена другой записи). Поэтому когда мы написали запрос и нам вернулась таблица с ответом, то из этой таблицы нужно получить ответ с помощью метода Выбрать():</p>
    <div class="code-style">
        <pre>
            <span class="vueb"><b>
                &НаКлиенте
                Процедура Запросы(Команда)
                    ЗапросыНаСервере();
                КонецПроцедуры

                &НаСервере
                Процедура ЗапросыНаСервере()
                    //КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА
                    // Данный фрагмент построен конструктором.
                    // При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!
                    
                    Запрос = Новый Запрос;
                    Запрос.Текст = 
                        "ВЫБРАТЬ
                        |	Сотрудники.Наименование
                        |ИЗ
                        |	Справочник.Сотрудники КАК Сотрудники";
                    
                    РезультатЗапроса = Запрос.Выполнить();
                    ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
                    
                    Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
                        Сообщение = Новый СообщениеПользователю;
                        Сообщение.Текст = ВыборкаДетальныеЗаписи.Наименование;
                        Сообщение.Сообшить();
                    КонецЦикла;
                    
                    //КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА

                КонецПроцедуры

            </b></span>
        </pre>
    </div>
    <p>В примере видно что использовался конструктор запросов. Что это такое? Конструктор нужен, если нет пока полных знаний по языку запросов. Чтобы его использовать, нажмём где нибудь в модуле правой кнопкой мыши и в контекстном меню можно выбрать "Конструктор запросов" или "Коструктор запросов с обработкой результата".</p>







    <h3 class="header-style" id="1">Основы синтаксиса</h3>
    <p><b id="1a">Выбрать по имени реквизита(поля, свойства, столбца)</b></p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ 
                Справочник.Еда
            </b></span>
            //вернутся все строки столбца(поля таблицы БД) Наименование

            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование, Цвета
            ИЗ 
                Справочник.Еда
            </b></span>
            //вернутся все строки столбцов(полей таблицы БД) Наименование и Цвета

            <span class="vue-b"><b>ВЫБРАТЬ
                *
            ИЗ 
                Справочник.Еда
            </b></span>
            //вернутся все строки всех столбцов(полей таблицы БД)
        </pre>
    </div>

    <p><b id="1b">Выбрать первые N строк</b></p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ ПЕРВЫЕ 3
                Наименование
            ИЗ 
                Справочник.Еда
            </b></span>
            //вернутся первые 3 строки столбца(поля таблицы БД) Наименование
        </pre>
    </div>

    <p><b id="1c">Выборка различных строк</b></p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ РАЗЛИЧНЫЕ
                Наименование
            ИЗ 
                Справочник.Еда
            </b></span>
            //если есть строки в Наименование которых есть повторяюшиеся названия, то слово Различные возвратит только одну такую строку
            //это что то вроде выборки уникальных названий
            //ну например есть 3 строки с название Банан, этот запрос вернёт только одну такую строку
        </pre>
    </div>

    <p><b id="1d">Выборка строк по реквизиту в значениях которого ссылки на другой справочник</b></p>
    <p>Например у нас есть документ ЗаказКлиента</p>
    <img src="../img/1С-1/2022-10-28_09-44-25.png" class="screen2" alt="">
    <p>В нём как видим только 3 реквизита - Дата, Номер и Клиент. Мы можем получить имена всех клиентов</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Клиент
            ИЗ 
                Документ.ЗаказКлиента
            </b></span>
        </pre>
    </div>
    <p>Но из-за того что типом реквизита Клиент является ссылка на другой спаровчник(тип реквизита Клиент -> СправочникСсылка.Клиенты)</p>
    <img src="../img/1С-1/2022-10-28_13-16-07.png" class="screen2" alt="">
    <p>То мы можем обращаться из этой таблицы(Документ.ЗаказКлиента) к данным таблицы Справочник.Клиенты</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Номер,
                Дата,
                Клиент,
                Клиент.ЛюбимыйЦвет, <span class="vue-g">//тут и</span>
                Клиент.Код <span class="vue-g">//тут мы уже обращаемся в таблицу Справочник.Клиенты</span>
            ИЗ 
                Документ.ЗаказКлиента
            </b></span>
            //от себя добавлю, хотел ещё получить Клиент.Пол, но там лежит ссылка на ПеречислениеСсылка.Пол
            //как получить его пока не знаю
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-28_13-21-26.png" class="screen" alt="">
    <p>Но это ещё не все данные, которые есть у документа Документ.ЗаказКлиента, есть ещё табличная часть по имени Продукты. Это как бы ещё одна таблица привязанная к документу. У этой таблицы есть свои реквизиты(столбцы)  - Еда и Количество. И чтобы добраться к ним из запроса мы сначала добираемся до самой таблицы Документ.ЗаказКлиента.Продукты, а уже потом указываем реквизиты табличной части</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Еда,
                Количество
            ИЗ 
                Документ.ЗаказКлиента.Продукты
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-28_13-39-22.png" class="screen" alt="">
    <p>Выборка. В каждом элементе документа есть табличная часть с этими полями, вот по этому запросу и получим все строки табличных частей из всех строк списка документа.</p>
    <img src="../img/1С-1/2022-10-28_13-45-25.png" class="screen2" alt="">

    <p><b id="1e">Поле Ссылка в табличной части</b></p>
    <p>Допустим есть документ ЗаказКлиента, у этого элемента документа есть табличная часть Продукты. Мы хотим получить из этой таблиной части поле Еда всех элементов документа. Пишем такой запрос:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ЗаказКлиента.Еда
            ИЗ
                Документ.ЗаказКлиента.Продукты КАК ЗаказКлиента
            </b></span>
        </pre>
    </div>
    <p>Мы получим все записи поля Еда всех табличных частей всех элементов документа, но ещё хотелось бы имя клиента, который эту еду заказал, но имя клиента нахидится не в табличной части документа, а в самом элементе документа. Как нам к такому полю обратиться? Для этого у табличной части есть поле Ссылка, это ссылка ссылается на элемент документа, с которой и связана эта табличная часть. И теперь если хочу добавить в выборку имя клиента, нужно обратиться через ссылку к элементу документа и к его полю Клиент:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ЗаказКлиента.Еда,
                ЗаказКлиента.Ссылка.Клиент
            ИЗ
                Документ.ЗаказКлиента.Продукты КАК ЗаказКлиента
            </b></span>
        </pre>
    </div>
    <p>Всё, теперь вернётся таблица, в котрой есть и имя клиента.</p>

    <p><b id="1f">Выбрать все константы и их значения</b></p>
    <p>Предположим у нас в конфе есть какие то объекты Константы: 1)НазваниеОрганизации(ЗАО Торговля), 2)УчётПоСериям(Нет), 3)УчётПоСкладам(Да), МаксимальныйРазмерКартинки(20). Так вот можно написать такой запрос:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                *
            ИЗ
                Константы
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px;font-size: 12px;">
        <tr>
            <td>НазваниеОрганизации</td>
            <td>УчётПоСериям</td>
            <td>УчётПоСкладам</td>
            <td>МаксимальныйРазмерКартинки</td>
        </tr>
        <tr>
            <td>ЗАО Торговля</td>
            <td>Нет</td>
            <td>Да</td>
            <td>20</td>
        </tr>
    </table>
    <p>Это возможно потому что скорее всего константы находятся в одной таблице. Названия констант выступают в виде наименования колонок, а их значения в виде записей под этими колонками. Также можно получить значение одной констатнты 2мя способами:</p>
    <p>1)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                *
            ИЗ
                Константа.МаксимальныйРазмерКартинки
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px;font-size: 12px;">
        <tr>
            <td>Значение</td>
        </tr>
        <tr>
            <td>20</td>
        </tr>
    </table>
    <p>2)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                МаксимальныйРазмерКартинки
            ИЗ
                Константы
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px;font-size: 12px;">
        <tr>
            <td>МаксимальныйРазмерКартинки</td>
        </tr>
        <tr>
            <td>20</td>
        </tr>
    </table>

    <p><b id="1g">Поле таблицы - Версия данных</b></p>
    <p>Версия данных используется системой в тех случаях, когда несколько пользователей изменяют данные одного и того же элемента справочника или документа. Например первый пользователь изменил и записал данные, а второй пользователь тоже пытается изменить на те же данные и ему приходит сообщение, что данные изменились и второй пользователь решает не записывать данные, потому что они изменены как надо, а может свои данные вписать, нет проблем.</p>













    <h3 class="header-style" id="2">Группировка в запросах</h3>
    <p>Давайте запросим из таблицы Справочник.Еда следующие реквизиты: Наименование, Цвет, Калорийность. Вот ответ:</p>
    <img src="../img/1С-1/2022-10-29_08-19-40.png" alt="">
    <p>Теперь нам надо вычислить сумму поля Калорийность для каждого цвета. Алгоритм для жёлтого цвета будет такой.</p>
    <ul class="list">
        <li>Находим все строки поля Цвет, у которых стоит Жёлтый.</li>
        <li>Это будут строки 1, 6, 8 и 9.</li>
        <li>Суммируем поле Калорийность всех этих строк: 89 + 31 + 340 + 536</li>
        <li>Получаем, что для жёлтого цвета суммарная калорийность равна 996.</li>
    </ul>
    <p>И так для каждого цвета. Описанный процесс называется группировкой. Таким образом группировка это схлопывание(свёртка) строк таблицы по определённому признаку.</p>
    <p>При группировке все поля делятся на 2 группы:</p>
    <ul class="list">
        <li><b>Группировочные</b> - это как раз те поля, по которым идёт свёртка. В нашем случае таким полем является Цвет.</li>
        <li><b>Группируемые</b> - это те поля, которые сворачиваются(объединяются). В нашем случае таким полем является Калорийность.</li>
    </ul>
    <p>Группируемые поля не могут быть сами по себе. К ним обязательно применяется одна из агрегатных функций: СУММА, СРЕДНЕЕ, МИНИМУМ, МАКСИМУМ, КОЛИЧЕСТВО, КОЛИЧЕСТВО РАЗЛИЧНЫЕ.</p>
    <img src="../img/1С-1/2022-10-29_08-34-29.png" class="screen" alt="">

    <p><b id="2a">Агрегатная функция СУММА</b>.</p>
    <p>Это как раз случай, который мы разбирали выше. Все строки группируются по группировочному полю Цвет, а группируемые строки поля Калорийность суммируются:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Цвет,
                СУММА(Количество)
            ИЗ 
                Справочник.Еда
            СГРУППИРОВАТЬ ПО
                Цвет
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_08-39-43.png" class="screen" alt="">

    <p><b id="2b">Агрегатная функция СРЕДНЕЕ</b>.</p>
    <p>Все строки группируются по группировочному полю Цвет, а среди группируемых строк поля Калорийность находится среднеарифметическое:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Цвет,
                СРЕДНЕЕ(Количество)
            ИЗ 
                Справочник.Еда
            СГРУППИРОВАТЬ ПО
                Цвет
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_08-43-16.png" class="screen" alt="">

    <p><b id="2c">Агрегатная функция МИНИМУМ</b>.</p>
    <p>Все строки группируются по группировочному полю Цвет, а среди группируемых строк поля Калорийность находится минимальное значение:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Цвет,
                МИНИМУМ(Количество)
            ИЗ 
                Справочник.Еда
            СГРУППИРОВАТЬ ПО
                Цвет
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_08-45-02.png" class="screen" alt="">

    <p><b id="2d">Агрегатная функция МАКСИМУМ</b>.</p>
    <p>Все строки группируются по группировочному полю Цвет, а среди группируемых строк поля Калорийность находится максимальное значение:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Цвет,
                МАКСИМУМ(Количество)
            ИЗ 
                Справочник.Еда
            СГРУППИРОВАТЬ ПО
                Цвет
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_08-46-11.png" class="screen" alt="">

    <p><b id="2e">Агрегатная функция КОЛИЧЕСТВО</b>.</p>
    <p>Все строки группируются по группировочному полю Цвет, а среди группируемых строк поля Калорийность находится их количество:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Цвет,
                КОЛИЧЕСТВО(Количество)
            ИЗ 
                Справочник.Еда
            СГРУППИРОВАТЬ ПО
                Цвет
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_08-48-05.png" class="screen" alt="">

    <p><b id="2f">Агрегатная функция КОЛИЧЕСТВО РАЗЛИЧНЫЕ</b>.</p>
    <p>Все строки группируются по группировочному полю Цвет, а среди группируемых строк поля Калорийность находится количество элементов с различными значениями. Что это значит? Это значит что ищется в поле Калорийность разные значения у одного и того же цвета и подсчитываются эти уникальные значения. Предположим что в таблице у цвета Жёлтый в поле Калорийность было бы 2 раза по 89, тогда в результате у цвета Жёлтный будет не 4 , а 3:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Цвет,
                КОЛИЧЕСТВО РАЗЛИЧНЫЕ(Количество)
            ИЗ 
                Справочник.Еда
            СГРУППИРОВАТЬ ПО
                Цвет
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_08-49-47.png" class="screen" alt="">

    <p><b id="2g">Группировка без группируемых полей и агрегатных функций.</b></p>
    <p>Использование агрегатных функций в запросе не требуется, если результатом запроса будут только группировочные поля.</p>
    <img src="../img/1С-1/2022-10-29_09-02-04.png" class="screen" alt="">
    <p>К примеру сделаем группировку всех вкусов, которые встречаются среди еды.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Вкус
            ИЗ 
                Справочник.Еда
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_09-08-52.png" alt="">
    <p>Как видим вкусы повторяются, давайте их сгруппируем:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Вкус
            ИЗ 
                Справочник.Еда
            СГРУППИРОВАТЬ ПО
                Вкус
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_09-10-10.png" alt="">
    <p>Кстати того же ответа можно добиться и по такому запросу:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ РАЗЛИЧНЫЕ
                Вкус
            ИЗ 
                Справочник.Еда
            </b></span>
        </pre>
    </div>

    <p><b id="2h">Группировка без группировочных полей</b></p>
    <p>Соответственно группировочных полей также не требуется, если результатом запроса будут группируемые поля.</p>
    <img src="../img/1С-1/2022-10-29_09-14-09.png" class="screen" alt="">
    <p>К примеру, получим результаты агрегатных функций применительно к полю Калорийность без группировочных полей(то есть по всей таблице)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                СУММА(Калорийность) КАК Сумма,
                СРЕДНЕЕ(Калорийность) КАК Среднее,
                МИНИМУМ(Калорийность) КАК Минимум,
                МАКСИМУМ(Калорийность) КАК Максимум,
                КОЛИЧЕСТВО(Калорийность) КАК Количнство
            ИЗ 
                Справочник.Еда
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_09-18-45.png" class="screen" alt="">


    <p><b id="2i">Группировка по нескольким полям</b></p>
    <p>Группировочных полей как и группируемых может быть сколь угодно много. В запросе они перечисляются через запятую.</p>

    <p><b id="2j">Подсчитываем количество записей в таблице КОЛИЧЕСТВО(*)</b></p>
    <p>Если мы не знаем сколько записей в таблице, то вот таким образом можно узнать:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                КОЛИЧЕСТВО(*) КАК КоличествоЗаписей
            ИЗ 
                Справочник.Еда
            </b></span>
        </pre>
    </div>








    <h3 class="header-style" id="3">Условия в запросах</h3>
    <p>Давайте напишем запрос, который запрашивает из таблицы Спарвочник.Еда наименование еды, её цвет, вкус и калорийность.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование, 
                Цвет,
                Вкус,
                Калорийность
            ИЗ 
                Справочник.Еда
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_10-47-22.png" alt="">

    <p><b id="3a">Секция ГДЕ</b></p>
    <p>А теперь давайте запросим еду только жёлтого цвета. Делается это при помощи секции ГДЕ, в которой необходимо задать условия отбора.</p>
    <img src="../img/1С-1/2022-10-29_10-49-43.png" alt="">
    <p>В нашем случае таким условием будет равенство реквизита Цвет(а вернее его свойства Наименование) цвету "Жёлтый"</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование, 
                Цвет,
                Вкус,
                Калорийность
            ИЗ 
                Справочник.Еда
            ГДЕ
                Цвет.Наименование = "Жёлтый"
            </b></span>

            //почему именно Цвет.Наименование, потому что в реквизите Цвет лежит ссылка на справочник Цвета
            //если попытаться сравнить так Цвет = "Жёлтый", то будет ошибка, т.к.сравниваются 2 разных типа
            //в каждой записи поля Цвет лежит тип ссылка Цвета(т.е. это ссылка на справочник Цвета)
            //и мы пытаемся сравнить тип ссылку с типом строка "Жёлтый", поэтому мы и обращаемся в другую таблицу - Цвет.Наименование, чтобы получить уже строку с именем цвета
        </pre>
    </div>
    <p>Ответ:</p>
    <img src="../img/1С-1/2022-10-29_10-56-10.png" alt="">
    <p>Условие отбора может определяться и как простое логическое выражение, и как более сложное, в котором простые логические выражения соединяются между собой логическими операторами И, ИЛИ, НЕ. Для примера выберем еду, у которой Цвет равен "белый" или Калорийность > 100</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование, 
                Цвет,
                Вкус,
                Калорийность
            ИЗ 
                Справочник.Еда
            ГДЕ
                Цвет.Наименование = "Белый" ИЛИ
                Калорийность > 100
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_11-02-59.png" alt="">

    <p><b id="3b">Секция ИМЕЮЩИЕ</b></p>
    <p>Если в запросе используется группировка и мы хотим наложить условие на результаты группировки, секция ГДЕ не подойдёт. Вместо неё нужно использовать секцию ИМЕЮЩИЕ. Давайте подсчитаем сумму строк поля Калорийность по цветам:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Цвет,
                СУММА(Калорийность)
            ИЗ 
                Справочник.Еда
            СГРУППИРОВАТЬ ПО
                Цвет 
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_11-11-31.png" alt="">
    <p>А теперь наложим условие на результат группировки так, чтобы остались цвета с суммарной калорийностью больше 100:</p>
    <img src="../img/1С-1/2022-10-29_11-13-20.png" alt="">
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Цвет,
                СУММА(Калорийность)
            ИЗ 
                Справочник.Еда
            СГРУППИРОВАТЬ ПО
                Цвет
            ИМЕЮЩИЕ
                СУММА(Калорийность) > 100    
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_11-17-04.png" alt="">
    <p>Обратим внимание, что агрегатные функции, которые учавствуют в условии, не обязаны входить в выборку:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Цвет
            ИЗ 
                Справочник.Еда
            СГРУППИРОВАТЬ ПО
                Цвет
            ИМЕЮЩИЕ
                СУММА(Калорийность) > 100    
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_11-19-50.png" alt="">
    <p>Условие отбора в секции ИМЕЮЩИЕ может определяться и как простое логическое выражение, и как более сложное, в котором простые логические выражения соединяются операторами И, ИЛИ, НЕ. Для примера давайте выбрем цвета имеющие суммарную калорийность больше 200 и меньше 300:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Цвет
                СУММА(Калорийность)
            ИЗ 
                Справочник.Еда
            СГРУППИРОВАТЬ ПО
                Цвет
            ИМЕЮЩИЕ
                СУММА(Калорийность) > 200 И   
                СУММА(Калорийность) &lt; 300    
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_11-24-11.png" alt="">

    <p><b id="3c">Выбрать записи без групп</b></p>
    <p>Допустим есть справочник Города. В нём есть 3 группы Россия, Индия и Бразилия. Надо получить только города, без названия этих групп:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Города.Наименование КАК Наименование
            ИЗ
                Справочник.Города КАК Города
            ГДЕ
                Города.ЭтоГруппа = ЛОЖЬ      
            </b></span>
            //ИЛИ
            <span class="vue-b"><b>ВЫБРАТЬ
                Города.Наименование КАК Наименование
            ИЗ
                Справочник.Города КАК Города
            ГДЕ
                НЕ Города.ЭтоГруппа     
            </b></span>
        </pre>
    </div>

    <p><b id="3d">Выбрать записи(элементы) из указанной группы(папки)</b></p>
    <p>Возьмём опять же спаровчник Города. Выберем все города из группы Россия. Первый способ:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Города.Наименование КАК Наименование
            ИЗ
                Справочник.Города КАК Города
            ГДЕ
                Города.Родитель.Наименование = "Россия"     
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Пермь</td>
        </tr>
        <tr>
            <td>Красноярск</td>
        </tr>
        <tr>
            <td>Воронеж</td>
        </tr>
    </table>
    <p id="v-ierarhii-ptimer1">Второй способ связан с использованием оператора <b>В ИЕРАРХИИ</b>:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Города
            ГДЕ
                Родитель В ИЕРАРХИИ (
                    ВЫБРАТЬ
                        Ссылка
                    ИЗ
                        Справочник.Города
                    ГДЕ
                        Наименование = "Россия"
                )     
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Пермь</td>
        </tr>
        <tr>
            <td>Красноярск</td>
        </tr>
        <tr>
            <td>Воронеж</td>
        </tr>
    </table>
    <p>Что тут происходит? В справочнике Города есть стандартный реквизит Родитель. Если в справочнике нету иерархической структуры, то этот реквизит отсутствует. У нас Города иерархический(имеет папки) справочник. Иерархия одноуровневая, т.е. подпапок внутри папок Россия, Индия и Бразилия нет, только города-элементы. У всех элементов, включая папки есть поле Родитель. У элементов городов в этом поле имя той папки, в которой эти элементы находятся. Но имя имеет тип не "строка", а ссылку на сам справочник Города. У элемента-папки, например, Россия там пусто, но не совсем, там пустая ссылка на всё тот же справочник Города.</p>
    <p>Итак, нам нужно получить элементы города из указанного родителя(папки). Оператор В ИЕРАРХИИ возвращает ИСТИНА или ЛОЖЬ при сравнении левого операнда с правым. В левом операнде у нас указано значение поля Родитель. Давайте для наглядности вызовем такой запрос, чтобы видеть что где находится:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Родитель,
                ТИПЗНАЧЕНИЯ(Родитель) КАК ТипРодителя
            ИЗ
                Справочник.Города   
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Родитель</td>
            <td>ТипРодителя</td>
        </tr>
        <tr>
            <td>Россия</td><td></td><td>Города</td>
        </tr>
        <tr>
            <td>Пермь</td><td>Россия</td><td>Города</td>
        </tr>
        <tr>
            <td>Красноярск</td><td>Россия</td><td>Города</td>
        </tr>
        <tr>
            <td>Воронеж</td><td>Россия</td><td>Города</td>
        </tr>
        <tr>
            <td>Индия</td><td></td><td>Города</td>
        </tr>
        <tr>
            <td>Мумбай</td><td>Индия</td><td>Города</td>
        </tr>
        <tr>
            <td>Дели</td><td>Индия</td><td>Города</td>
        </tr>
        <tr>
            <td>Калькутта</td><td>Индия</td><td>Города</td>
        </tr>
        <tr>
            <td>Бразилия</td><td></td><td>Города</td>
        </tr>
        <tr>
            <td>Сан-Пауло</td><td>Бразилия</td><td>Города</td>
        </tr>
        <tr>
            <td>Рио-де-Жанейро</td><td>Бразилия</td><td>Города</td>
        </tr>
        <tr>
            <td>Сальвадор</td><td>Бразилия</td><td>Города</td>
        </tr>
    </table>
    <p>Так выглядит таблица в БД с указанными полями справочника Города.</p>
    <p>Ориентируемся на запрос, что в начале с оператором В ИЕРАРХИИ. Значит идём мы по таблице с записями. Из первой записи поля Родитель в занчение попадает пустота, как видно из таблицы выше, это левый операнд, правый операнд равен слову Россия, у которой тип равен Города(ссылка на справочник Города). Они равны? Нет. Пустота не равна ссылке Россия. Первая запись пропускается. Идём дальше, из второй записи поля Родитель в значение левого операнда попадает слово Россия(опять смотрим на таблицу выше) с типом Города, во второй операнд попадает опять же слово Россия с типом Города. Про правый операнд дальше не буду расписывать, в него всегда в данном запросе будет попадать слово Россия с типом Города. Итак слева в значении Россия с типом Города и справа тоже, они равны, значит вторая запись(Наименование - Пермь) попадает в выборку. Идём дальше, 3я и 4я запись также равны, значит в выборку попадают записи(Наименование - Красноярск и Воронеж). Остальные сравнения вернут ЛОЖЬ, потому что как видно из таблицы ни одно значение поля Родитель не будет равно слову Россия с типом Города.</p>
    <p>Как оказалось, можно даже использовать оператор <b>В</b> без слова ИЕРАРХИЯ и он также найдёт все города России. Какую роль играет слово ИЕРАРХИЯ пока не пойму, узнаю допишу. Понял в чём разница. Добавим, например, в папку Россия новую папку "Южные города" и в эту папку добавим элемент город Краснодар. Если в запросе опустить слово ИЕРАРХИЯ, то ответом будут все элементы внутри папки Россия, но не будет элемента Краснодар, потому как непосредственно в папке Россия он не лежит, он лежит в папке Южные города, которая лежит в папке Россия. А вот если использовать оператор В ИЕРАРХИИ, то тогда выведутся совершенно все элементы из папки Россия, какая бы вложенность там не была. Выведутся и элементы страны(папки) и элементы-города.</p>
    <p>Ссылка на подробное описание этого оператора <a href="v-ierarhii">тут</a>.</p>

    <p><b id="3e">Выбрать записи по точному соответствию и не точному</b></p>
    <p>По точному соответствию. Ну это обычное условие, например, Цвет.Наименование = "Жёлтый"</p>
    <p>Поиск по не точному, т.е. по шаблону, про это <a href="#podobno">сюда</a></p>
    

    <p><b id="3f">Примеры по базе Гастроном:</b></p>
    <p>1) Выберем из таблицы все названия вкусов кроме солёного:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ 
                Справочник.Вкусы
            ГДЕ
                Наименование &lt;> "Солёный"
                //и второй вариант этого же условия
                НЕ Наименование = "Солёный"
            </b></span>
        </pre>
    </div>
    <p>2)Получить всю еду из таблицы Спарвочник.Еда, которая сладкая или кислая по вкусу:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ 
                Справочник.Еда
            ГДЕ
                Вкус.Наименование = "Сладкий" ИЛИ
                Вкус.Наименование = "Кислый"
            </b></span>
        </pre>
    </div>
    <p>3)Написать запрос, который выводит вкус, средняя калорийность которого(в таблице Справочник.Еда) меньше 100:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Вкус,
                СРЕДНЕЕ(Калорийность)
            ИЗ 
                Справочник.Еда
            СГРУППИРОВАТЬ ПО
                Вкус
            ИМЕЮЩИЕ
                СРЕДНЕЕ(Калорийность) &lt; 100
            </b></span>
        </pre>
    </div>









    <h3 class="header-style" id="4">Упорядочивание в запросах</h3>
    <p>Если мы запросим, например, Наименование и Код из таблицы Справочник.Еда, то к нам, в зависимости от СУБД на серверной стороне, может прийти ответ из строк в разной последовательности. Чтобы упорядочить последовательность есть следующие инструменты.</p>

    <p><b id="4a">Секция УПОРЯДОЧИТЬ ПО</b></p>
    <p>Поля, по которым требуется упорядочивание пишутся в секции УПОРЯДОЧИТЬ ПО через запятую.</p>
    <img src="../img/1С-1/2022-10-29_18-41-09.png" alt="">
    <p>Следом за именем поля может идти одно из слов: ВОЗР(упорядочить по возрастанию), УБЫВ(упорядочить по убыванию). По умолчанию идёт по возрастанию по первому столбцу. Давайте запросим Наименование и Код из таблицы Справочник.Еда, упорядочив по убыванию по полю Код.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Код,
                Наименование
            ИЗ 
                Справочник.Еда
            УПОРЯДОЧИТЬ ПО
                Код УБЫВ
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_18-46-23.png" alt="">
    <p>По возрастанию поля Наименование(азбучный порядок).</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Код,
                Наименование
            ИЗ 
                Справочник.Еда
            УПОРЯДОЧИТЬ ПО
                Наименование ВОЗР
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_18-49-01.png" alt="">
    <p>А теперь давайте упорядочим следующую таблицу:</p>
    <img src="../img/1С-1/2022-10-29_18-51-44.png" alt="">
    <p>так чтобы сначала шла сортировка по полю Вкус по возрастанию, а затем(среди строчек с одинаковым значением поля Вкус) шла сортировка по полю Цвет по убыванию:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Вкус,
                Цвет
            ИЗ 
                Справочник.Еда
            УПОРЯДОЧИТЬ ПО
                Вкус.Наименование ВОЗР
                Цвет.Наименование УБЫВ
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_18-57-23.png" alt="">
    <p>Отдельно обратим вниманиена то, что мы указали сортировку не по самим полям Вкус и Цвет, а по их строковому реквизиту Наименование. Это связано с тем, что сортировка возможна лишь по полям имеющих тип: Строка, Число, Дата. А поля Вкус и Цвет являются ссылками на элементы справочников Вкусы и Цвета, сортировать по которым нет смысла(в этом случае сортировка будет вестить по внутреннему идентификатору ссылки). Зато можно сделать по одному из реквизитов, например, Наименование. Но мы можем оставить просто ссылку без вызова строкового реквизита, тогда ниже надо добавить слово АВТОУПОРЯДОЧИАНИЕ, тогда система сама вызовет у ссылки строковое представление и упорядочит по нему.</p>

    <p><b id="4b">Автоупорядочивание</b></p>
    <p>1С не советует применять её без необходимости. Если вдруг понадобится эта возможность, то оставлю ссылку на страницу. где она описана. Также опишу случаи, в которых сожно использовать автоупорядочивание. <b>1)</b>Для универсальных запросов, когда разработчик не может предвидеть, из каких таблиц будут запрашиваться данные; <b>2)</b>Для случаев, когда получаемый порядок записей не важен, но при этом он должен быть одинаковым в независимости от применяемой СУБД.</p>

    <p><b id="4c">Примеры</b></p>
    <p>1) Написать запрос, который получает список клиентов, упорядоченный по их любимому цвету по возрастанию</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ЛюбимыйЦвет
            ИЗ 
                Справочник.Клиенты
            УПОРЯДОЧИТЬ ПО
                ЛюбимыйЦвет.Наименование ВОЗР
            </b></span>
        </pre>
    </div>
    <p>2) Написать запрос, который получает список заказов клиентов(таблица Документ.ЗаказКлиента) упорядоченный по дате по убыванию.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Номер,
                Дата,
                Клиент
            ИЗ 
                Документ.ЗаказКлиента
            УПОРЯДОЧИТЬ ПО
                Дата УБЫВ
            </b></span>
        </pre>
    </div>
    <p>3) Написать запрос, котрый получает список документов "Установка цен на еду для клиентов"(таблица Документ.УстановкаЦенНаЕдуДляКлиентов), упорядоченный по клиентам по возрастанию, а затем по датам по убыванию.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Клиент,
                Номер,
                Дата
            ИЗ 
                Документ.УстановкаЦенНаЕдуДляКлиентов
            УПОРЯДОЧИТЬ ПО
                Клиент.Наименование ВОЗР,
                Дата УБЫВ
            </b></span>
        </pre>
    </div>












    <h3 class="header-style" id="5">Функции для работы с датой в запросах</h3>
    <p>Разберём функции для работы с реквизитом типа Дата в запросах.</p>

    <p><b id="5a">Функция ДАТАВРЕМЯ</b></p>
    <p>Эта функция в качестве параметров принимает целочисленные Год, Месяц, День, Час, Минута и Секунда. Последние 3 параметра необязательны. Назначение функции ДАТАВРЕМЯ состоит в конструировании даты по её отдельным компонентам. Таким образом следующий запрос:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ДАТАВРЕМЯ(2013, 02, 01)
            </b></span>
        </pre>
    </div>
    <p>вернёт нам таблицу с типом поля ДАТА и значением 1 февраля 2013 года:</p>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>01.02.2013 00:00:00</td>
        </tr>
    </table>
    <p>Значение часов, минут и секунд равно нулю, потому что мы их не указывали.</p>

    <p><b id="5b">Отступление</b></p>
    <p>Обратим внимание на текст запроса, мы получаем таблицу как бы "из воздуха", не указывая в секции ИЗ источник данных. Получается тогда, что не обязательно делать запрос к реально существующим таблицам БД. Можно конструировать эти таблицы самостоятельно, задавая константные значения полей.</p>
    <p>Например, так(поля типа ЧИСЛО)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                1,
                2,
                3
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
            <td>Поле2</td>
            <td>Поле3</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>
    </table>
    <p>Или так(поля типа СТРОКА)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                "Привет",
                ",",
                "мир",
                "!"
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
            <td>Поле2</td>
            <td>Поле3</td>
            <td>Поле4</td>
        </tr>
        <tr>
            <td>Привет</td>
            <td>,</td>
            <td>мир</td>
            <td>!</td>
        </tr>
    </table>
    <p>Или вообще вот так(поля разных типов):</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                "Какой то текст",
                ДАТАВРЕМЯ(2013, 02, 01),
                1
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
            <td>Поле2</td>
            <td>Поле3</td>
        </tr>
        <tr>
            <td>Какой то текст</td>
            <td>01.02.2013 00:00:00</td>
            <td>1</td>
        </tr>
    </table>
    <p>Вернёмся для работы с датой</p>

    <p><b id="5c">Функция ГОД</b></p>
    <p>Принимает праметр типа ДАТА, возвращает год</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ГОД(ДАТАВРЕМЯ(2013, 02, 01))
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>2 013</td>
        </tr>
    </table>

    <p><b id="5d">Функции КВАРТАЛ</b></p>
    <p>Принимает параметр типа ДАТА. Возвращает номер квартала даты(целочисленное значение от 1 до 4). Квартал это каждый сезон года по 3 месяца.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                КВАРТАЛ(ДАТАВРЕМЯ(2013, 02, 01))
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>1</td>
        </tr>
    </table>

    <p><b id="5e">Функции МЕСЯЦ</b></p>
    <p>Принимает параметр типа ДАТА. Возвращает номер месяца даты(целочисленное значение от 1 до 12)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                МЕСЯЦ(ДАТАВРЕМЯ(2013, 02, 01))
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>2</td>
        </tr>
    </table>

    <p><b id="5f">Функции ДЕНЬГОДА</b></p>
    <p>Принимает параметр типа ДАТА. Возвращает номер дня в году(целочисленное значение от 1 до 366)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ДЕНЬГОДА(ДАТАВРЕМЯ(2013, 02, 01))
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>32</td>
        </tr>
    </table>

    <p><b id="5g">Функции ДЕНЬ</b></p>
    <p>Принимает параметр типа ДАТА. Возвращает номер дня в месяце(целочисленное значение от 1 до 31)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ДЕНЬ(ДАТАВРЕМЯ(2013, 02, 01))
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>1</td>
        </tr>
    </table>

    <p><b id="5h">Функции НЕДЕЛЯ</b></p>
    <p>Принимает параметр типа ДАТА. Возвращает номер недели в году</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                НЕДЕЛЯ(ДАТАВРЕМЯ(2013, 02, 01))
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>5</td>
        </tr>
    </table>

    <p><b id="5i">Функции ДЕНЬНЕДЕЛИ</b></p>
    <p>Принимает параметр типа ДАТА. Возвращает номер дня недели(от 1 до 7)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ДЕНЬНЕДЕЛИ(ДАТАВРЕМЯ(2013, 02, 01))
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>5</td>
        </tr>
    </table>

    <p><b id="5k">Функции ЧАС</b></p>
    <p>Принимает параметр типа ДАТА. Возвращает час суток(от 0 до 23)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ЧАС(ДАТАВРЕМЯ(2013, 02, 01, 20, 38, 17))
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>20</td>
        </tr>
    </table>

    <p><b id="5l">Функции МИНУТА</b></p>
    <p>Принимает параметр типа ДАТА. Возвращает минуты часа(от 0 до 59)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                МИНУТА(ДАТАВРЕМЯ(2013, 02, 01, 20, 38, 17))
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>38</td>
        </tr>
    </table>

    <p><b id="5m">Функции СЕУНДА</b></p>
    <p>Принимает параметр типа ДАТА. Возвращает секунды в минуте(от 0 до 59)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                СЕУНДА(ДАТАВРЕМЯ(2013, 02, 01, 20, 38, 17))
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>17</td>
        </tr>
    </table>

    <p><b id="5n">Функции НАЧАЛОПЕРИОДА</b></p>
    <p>Принимает параметр типа ДАТА и тип перода(одно из значений МИНУТА, ЧАС, ДЕНЬ, НЕДЕЛЯ, МЕСЯЦ, КВАРТАЛ, ГОД, ДЕКАДА, ПОЛУГОДИЕ). Функция предназначена для получения даты начала периода по дате, принадлежащей этому периоду.</p>
    <p>Сбрасываем на начало года:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                НАЧАЛОПЕРИОДА(ДАТАВРЕМЯ(2013, 02, 01), ГОД)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>01.01.2013 00:00:00</td>
        </tr>
    </table>
    <p>Сбрасываем на начало недели:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                НАЧАЛОПЕРИОДА(ДАТАВРЕМЯ(2013, 02, 01), НЕДЕЛЯ)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>28.01.2013 00:00:00</td>
        </tr>
    </table>

    <p><b id="5o">Функции КОНЕЦПЕРИОДА</b></p>
    <p>Принимает параметр типа ДАТА и тип перода(одно из значений МИНУТА, ЧАС, ДЕНЬ, НЕДЕЛЯ, МЕСЯЦ, КВАРТАЛ, ГОД, ДЕКАДА, ПОЛУГОДИЕ). Функция предназначена для получения даты начала периода по дате, принадлежащей этому периоду.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                КОНЕЦПЕРИОДА(ДАТАВРЕМЯ(2013, 02, 01), ГОД)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>31.12.2013 23:59:59</td>
        </tr>
    </table>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                КОНЕЦПЕРИОДА(ДАТАВРЕМЯ(2013, 02, 01), НЕДЕЛЯ)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>03.02.2013 23:59:59</td>
        </tr>
    </table>

    <p><b id="5p">Функции ДОБАВИТЬКДАТЕ</b></p>
    <p>Принимает параметр типа ДАТА и тип увеличения(одно из значений СЕКУНДА, МИНУТА, ЧАС, ДЕНЬ, НЕДЕЛЯ, МЕСЯЦ, КВАРТАЛ, ГОД, ДЕКАДА, ПОЛУГОДИЕ) и величину увеличения(целочисленное значение)</p>
    <p>Функция предназначена для добавления к дате некоторой величины.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ДОБАВИТЬКДАТЕ(ДАТАВРЕМЯ(2013, 02, 01), МЕСЯЦ, 1)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>01.03.2013 00:00:00</td>
        </tr>
    </table>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ДОБАВИТЬКДАТЕ(ДАТАВРЕМЯ(2013, 02, 01), КВАРТАЛ, 2)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>01.08.2013 00:00:00</td>
        </tr>
    </table>

    <p><b id="5r">Функции РАЗНОСТЬДАТ</b></p>
    <p>Принимает 2 параметра типа ДАТА и 3й параметр тип разности(одно из значений СЕКУНДА, МИНУТА, ЧАС, ДЕНЬ, МЕСЯЦ, КВАРТАЛ, ГОД)</p>
    <p>Функция предназначена для получения разницы между двумя датами(2м и 1м параметром)</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                РАЗНОСТЬДАТ(ДАТАВРЕМЯ(2013, 02, 01), ДАТАВРЕМЯ(2014, 02, 01), ГОД)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>1</td>
        </tr>
    </table>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                РАЗНОСТЬДАТ(ДАТАВРЕМЯ(2013, 02, 01), ДАТАВРЕМЯ(2014, 02, 01), МЕСЯЦ)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>12</td>
        </tr>
    </table>

    <p><b id="s">В функции можно передавать не только константы, но и поля таблиц</b></p>
    <p>В функции можно передавать не только даты, сконструированные при помощи ДАТАВРЕМЯ, но и свойства объекта, которые мы запрашиваем из БД имеющих тип ДАТА.</p>
    <p>К примеру, если мы запрашиваем документы и нам известно, что свойство Дата имеет тип ДАТА, это означает, что мы можем использовать его в качестве параметров для функций работащих с датой.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Дата, 
                ГОД(Дата),
                НАЧАЛАОПЕРИОДА(Дата, МЕСЯЦ),
                ДАТАВРЕМЯ(1999, 01, 01)
            ИЗ
                Документ.ЗаказКлиента
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-29_23-56-54.png" alt="">
    <p>Мы можем использовать одновременно оба типа дат:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Дата, 
                РАЗНОСТЬДАТ(ДАТАВРЕМЯ(1999, 01, 01), Дата, День)
            ИЗ
                Документ.ЗаказКлиента
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-30_08-22-18.png" alt="">

    <p><b id="5t">Примеры</b></p>
    <p>1) Получить по запросу все заказы клиентов из таблицы Документ.ЗаказКлиента и отдельно получить год, месяц и день, на которые приходятся заказы.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Дата, 
                Номер,
                Клиент,
                ГОД(Дата),
                МЕСЯЦ(Дата),
                ДЕНЬ(Дата)
            ИЗ
                Документ.ЗаказКлиента
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-30_08-38-05.png" alt="">
    <p>2) Написать запрос, который выводит разницу между датой 1 января 2014 и 1 января 2000 в годах, месяцах, днях, часах, минутах и секундах.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Дата, 
                Номер,
                Клиент,
                ГОД(Дата),
                МЕСЯЦ(Дата),
                ДЕНЬ(Дата)
            ИЗ
                Документ.ЗаказКлиента
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
            <td>Поле2</td>
            <td>Поле3</td>
            <td>Поле4</td>
            <td>Поле5</td>
            <td>Поле6</td>
        </tr>
        <tr>
            <td>14</td>
            <td>168</td>
            <td>5 114</td>
            <td>122 736</td>
            <td>7 364 160</td>
            <td>441 849 600</td>
        </tr>
    </table>
    <p>3) Написать запрос, который выведет дату от 1 января 2014 года 100 000 дней назад.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ДОБАВИТЬКДАТЕ(ДАТАВРЕМЯ(2014, 01, 01), ДЕНЬ, -100000)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>18.03.1740 00:00:00</td>
        </tr>
    </table>
    <p>4) Написать запрос, который выводит день недели, который пришёлся на день победы 9 мая 1945года</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ДЕНЬНЕДЕЛИ(ДАТАВРЕМЯ(1945, 05, 09))
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>3</td>
        </tr>
    </table>
    <p>5) Написать запрос, который получает все заказы клиентов(таблица ДокументЗаказКлиента) и отдельно выводит начало и конец квартала, в который попадает заказ:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Дата, 
                Номер,
                НАЧАЛОПЕРИОДА(Дата, КВАРТАЛ),
                КОНЕЦПЕРИОДА(Дата, КВАРТАЛ)
            ИЗ
                Документ.ЗаказКлиента
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-30_08-57-04.png" alt="">















    <h3 class="header-style" id="6">Функции работы со строками</h3>
    <p>Прямо скажем механизмов работы со строками мало в запросах 1С. По-первых строки можно складывать, во-вторых от строки можно взять подстроку. В-третьих, строки можно сравнивать, в том числе и по шаблону. Вот и всё что можно желать со строками.</p>
    <p>Когда мы говорим о строке в запросе, то имеется в виду либо постоянная строка:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                "Жизнь прекрасна"
            </b></span>
        </pre>
    </div>
    <p>либо реквизит таблицы, у которого тип СТРОКА:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Еда
            </b></span>
        </pre>
    </div>

    <p><b id="6a">Сложение строк</b></p>
    <p>Для сложения используется операция + :</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                "Еда:" + Наименование
            ИЗ
                Справочник.Еда
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>
                Еда:Банан<br>
                Еда:Колбаса<br>
                Еда:Кефир<br>
                ...
            </td>
        </tr>
    </table>

    <p><b id="6b">Функция ПОДСТРОКА</b></p>
    <p>Данная функция предназначена для выделения подстроки  из строки. В качестве параметров принимает:</p>
    <ul class="list">
        <li><b>строку</b>, из которой необходимо выделить подстроку</li>
        <li><b>позицию символа</b>, с которого начинается выделаемая из строки подстрока</li>
        <li><b>длину</b> выделяемой подстроки</li>
    </ul>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ПОДСТРОКА("1234567890", 1, 5)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>12345</td>
        </tr>
    </table>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ПОДСТРОКА("1234567890", 3, 4)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>3456</td>
        </tr>
    </table>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ПОДСТРОКА(Наименование, 1, 2)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>
                Банан<br>
                Колбаса<br>
                Кефир<br>
                ...
            </td>
            <td>
                Ба<br>
                Ко<br>
                Ке<br>
                ...
            </td>
        </tr>
    </table>

    <p><b id="podobno">Функция ПОДОБНО(LIKE) - поиск по не точному соответствию</b></p>
    <p>Если нужно убедиться, что строковый реквизит соответствует искомой строке, то мы его сравниваем с этой строкой:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Еда
            ГДЕ
                Наименование = "Лимон"
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Лимон</td>
        </tr>
    </table>
    <p>А что если нужно более хитрое сравнение? Не просто на равенство или неравенство, а на подобие определённому шаблону? Вот как раз для этого и создана функция ПОДОБНО. Если быть совсем точным, то это даже не функция, а оператор, который позволяет сравнить значение выражения указанного слева от него, со строкой шаблона, указанной справа.</p>
    <p>Значение выражения должно иметь тип строка. Если значение выражения удовлетворяет шаблону - результатом оператора будет ИСТИНА, иначе, ЛОЖЬ.</p>
    <p>Справа от оператора ПОДОБНО должны быть не то что строка, а именно строка шаблон. Просто какое то слово тут не подойдёт. Если нужно просто сравнить с трокой словом, то оператор ПОДОБНО тогда не нужен и просто сравниваем с этим слововм.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Еда
            ГДЕ
                Наименование ПОДОБНО "[К]%"
            </b></span>
        </pre>
    </div>
    <p>Результатом данного запроса будет вся еда, наименование которой начинается на букву "К". Буква "К" в квадратных скобках в данном случае означает, что первым символом наименования должна быть буква "К". Знак "%", идущий следом означает, что после буквы "К" могут идти(или не идти) любые символы в любом количестве.</p>
    <p>Но можно указывать буквы и без квадратных скобок, например мы ищем по начинающимся буквам или заканчивающимся буквам или в середине эти буквы:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Еда
            ГДЕ
                Наименование ПОДОБНО "К%" - (Клубника, Кефир, Крыжовник)
                //или так
                Наименование ПОДОБНО "Ке%" - (Кефир)
                //или так
                Наименование ПОДОБНО "%ир" - (Кефир)
                //или так
                Наименование ПОДОБНО "%пс%" - (Чипсы)
            </b></span>
        </pre>
    </div>
    <p>Использование квадратных скобок больше подойдёт, когда мы перечисляем в них несколько букв, и надо выбрать Наименование, которые начинаются(заканчиваются или в середине) на одну из этих букв:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Еда
            ГДЕ
                Наименование ПОДОБНО "[КЧ]%" - (Клубника, Кефир, Крыжовник, Чипсы) 
            </b></span>
        </pre>
    </div>
    <p>При формировании строки шаблона есть определённые правила, которые нужно соблюдать:</p>
    <ul class="list">
        <li><b>%</b> означает любое количество произвольных символов</li>
        <li><b>_</b> означает один произвольный символ</li>
        <li><b>[]</b> означает любой одиночный символ, перечисленный внутри скобок</li>
        <li><b>[^]</b> означает любой одиночный символ, кроме тех, что перечислены внутри скобок после ^</li>
    </ul>
    <p>Примеры шаблонов с пояснениями:</p>
    <p><b>---</b> "%" абсолютно любая строка(даже пустая)</p>:
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>
                Лимон<br>
                Банан<br>
                Кефир<br>
                ...
            </td>
        </tr>
    </table>
    <p><b>---</b> "___" строка из 3х любых символов:</p>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Сыр</td>
        </tr>
    </table>
    <p><b>---</b> "[ЧЛ]%[ЫН]" строка, начинающаяся с буквы <b>Ч</b> или <b>Л</b> и оканчивающаяся на <b>Ы</b> или <b>Н</b>:</p>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Чипсы<br>Лимон</td>
        </tr>
    </table>
    <p><b>---</b> "[^К]%" строка, не содержащая в начале букву <b>К</b>:</p>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Банан<br>Чипсы<br>Лимон<br>...</td>
        </tr>
    </table>
    <p> <b>---</b> "[А-К]%" строка, начинающаяся с буквы из отрезка с <b>А</b> по <b>К</b>:</p>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Банан<br>Колбаса<br>Кефир<br>...</td>
        </tr>
    </table>
    <p>Обратим внимание на приём, использованный в шаблоне "[А-К]%". Вместо того, чтобы перечислять все буквы от А до К, например, так "[АБВГДЕЁЖЗИЙК]", мы указали отрезок значений через чёрточку. Квадратные скобки позволяют это делать.</p>
    <p><b>---</b> "%[0-9]%" найдём все слова, в которых есть хоть одна цифра.</p>
    <p><b>---</b> "%[0-9][0-9]%" найдём все слова, в которых есть 2 подряд идущие цифры.</p>
    <p><b>---</b> Наименование ПОДОБНО "% % %" - найти записи, где как минимум 3 слова в наименовании.</p>
    <p><b>---</b> Наименование ПОДОБНО "% % %" И НЕ Наименование ПОДОБНО "% % % %" - найти записи, где только 3 слова в наименовании.</p>
    

    <p><b>Примеры</b></p>
    <p>1) Написать запрос, который выводит все заказы клиентов(таблица Документ.ЗаказКлиента) и первые 3 буквы имени клиента в каждом заказе:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Номер,
                Дата,
                ПОДСТРОКА(Клиент.Наименование, 1, 3)
            ИЗ
                Документ.ЗаказКлиента
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Номер</td>
            <td>Дата</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>000000001<br>000000002<br>...<br>000000010<br></td>
            <td>01.01.2014 12:00:00<br>10.01.2014 12:00:00<br>...<br>17.03.2014 12:00:00</td>
            <td>Анд<br>Нат<br>...<br>Анд</td>
        </tr>
    </table>
    <p>2) Написать запрос, который получает цвета(таблица Справочник.Цвета), в названии которых присутствует сочетании букв "ра"</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Цвета
            ГДЕ
                Наименование ПОДОБНО "%[р][а]%"
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Красный<br>Оранжевый</td>
        </tr>
    </table>
    <p>3) Написать запрос, который получает цвета, в названии которых больше шести букв:</p>
    <p><b>Пока не знаю ответа, узнаю, допишу</b></p>













    <h3 class="header-style" id="7">Условный оператор в запросе</h3>
    <p>Предположим мы написали запрос, который возвращает строки полей Наименование и Калорийность из таблицы Справочник.Еда. И хотим в результат добавить ещё одну колонку, в которую будем выводить жирность еды по следующим условиям:</p>
    <ul class="list">
        <li>если калорийность меньше 100, то жирность низкая</li>
        <li>если больше 100 и меньше 200, то в меру</li>
        <li>если больше 200 , то жирность высокая</li>
    </ul>
    <p>Как этого можно добиться, ведь в таблице Справочник.Еда нет колонки Жирность?Оказывается, эту колонку мы можем добавить сами, используя условный оператор внутри запроса:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Калорийность,
                ВЫБОР
                    КОГДА Калорийность &lt; 100 ТОГДА
                        "Низкая"
                    КОГДА Калорийность &lt; 200 ТОГДА
                        "В меру"
                    ИНАЧЕ
                        "Высокая"
                КОНЕЦ
            ИЗ
                Справочник.Цвета
            </b></span>
        </pre>
    </div>
    <p>Условия оператора обрабатывается последовательно. Если одно из них оказалось верным, то в качестве результата возвращается соответствующее значение. Если же одно из условий не выполнилось, то возвращается значение из секции ИНАЧЕ. Если же ни одно из условий не выполнилось и секции ИНАЧЕ нет, то вернётся NULL.</p>
    <p>Вот акая таблица к нам вернётся:</p>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Калорийность</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>Банан<br>Колбаса<br>...<br>Сыр<br></td>
            <td>89<br>254<br>...<br>340</td>
            <td>Низкая<br>Высокая<br>...<br>Высокая</td>
        </tr>
    </table>

    <p><b id="7a">Отступление</b></p>
    <p>Обратим внимание, что 3я колонка в таблице, которую вернул запрос, называется Поле1. Это имя было создано системой автоматом. В наших силах дать имя этой колонке. Для этого сразу после описания поля нужно написать ключевое слово КАК, а после пробела указать имя.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Калорийность,
                ВЫБОР
                    КОГДА Калорийность &lt; 100 ТОГДА
                        "Низкая"
                    КОГДА Калорийность &lt; 200 ТОГДА
                        "В меру"
                    ИНАЧЕ
                        "Высокая"
                КОНЕЦ КАК Жирность
            ИЗ
                Справочник.Цвета
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Калорийность</td>
            <td>Жирность</td>
        </tr>
        <tr>
            <td>Банан<br>Колбаса<br>...<br>Сыр<br></td>
            <td>89<br>254<br>...<br>340</td>
            <td>Низкая<br>Высокая<br>...<br>Высокая</td>
        </tr>
    </table>
    <p>Пседонимы можно присваивать любым полям, в том числе тем, у которых уже есть имя. Давайте сделаем псевдоним Еда для поля Наименование.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование КАК Еда
            ИЗ
                Справочник.Цвета
            </b></span>
        </pre>
    </div>

    <p><b id="7b">Более сложные логические выражения в условиях оператора</b> </p>
    <p>Пример1</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ВЫБОР
                    КОГДА Наименование ПОДОБНО "Б%" ТОГДА
                        "Начинается на Б"
                    КОГДА Наименование ПОДОБНО "К%" ТОГДА
                        "Начинается на К"
                    ИНАЧЕ
                        "Начинается на другую букву"
                КОНЕЦ
            ИЗ
                Справочник.Цвета
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>Банан<br>Колбаса<br>...<br>Сыр<br></td>
            <td>Начинается на Б<br>Начинается на К<br>...<br>Начинается на другую букву</td>
        </tr>
    </table>
    <p>Пример2</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ВЫБОР
                    КОГДА ПОДСТРОКА(Наименование, 1, 3) = "Бан" ТОГДА
                        "Это банан"
                    КОГДА ПОДСТРОКА(Наименование, 1, 2) = "Чи" ТОГДА
                        "Это чипсы"
                    ИНАЧЕ
                        "Что то другое"
                КОНЕЦ
            ИЗ
                Справочник.Цвета
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>Банан<br>Колбаса<br>...<br>Сыр<br></td>
            <td>Это банан<br>Что то другое<br>...<br>Что то другое</td>
        </tr>
    </table>

    <p><b id="7c">Более сложные результаты условного оператора</b></p>
    <p>Конечно, результатом условного оператора может быть не только постоянная строка, но и любое другое выражение допустимое в запросе.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ВЫБОР
                    КОГДА Код = "000000001" ТОГДА
                        "Банан"
                    КОГДА Код = "000000002" ТОГДА
                        Наименование
                    КОГДА Код = "000000003" ТОГДА
                        555
                    КОГДА Код = "000000004" ТОГДА
                        Калорийность
                    КОГДА Код = "000000005" ТОГДА
                        ДАТАВРЕМЯ(2014, 01, 01)
                    КОГДА Код = "000000006" ТОГДА
                        ИСТИНА
                    КОГДА Код = "000000007" ТОГДА
                        Ссылка
                КОНЕЦ
            ИЗ
                Справочник.Цвета
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>Банан<br>Колбаса<br>Кефир<br>Крыжовник<br>Чипсы<br>Клубника<br>Лимон<br>Мороженое<br>Сыр<br></td>
            <td>Банан<br>Колбаса<br>555<br>44<br>01.01.2014 00:00:00<br>Да<br>Лимон<br>пусто<br>пусто</td>
        </tr>
    </table>

    <p><b id="7d">Пример</b></p>
    <p>1) Написать запрос, котрый получает все заказы клиентов и выводит в какой день недели они были сделаны:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ВЫБОР
                    КОГДА ДЕНЬНЕДЕЛИ(Дата) = 1 ТОГДА
                        "Понедельник"
                    КОГДА ДЕНЬНЕДЕЛИ(Дата) = 2 ТОГДА
                        "Вторник"
                    КОГДА ДЕНЬНЕДЕЛИ(Дата) = 3 ТОГДА
                        "Среда"
                    КОГДА ДЕНЬНЕДЕЛИ(Дата) = 4 ТОГДА
                        "Четверг"
                    КОГДА ДЕНЬНЕДЕЛИ(Дата) = 5 ТОГДА
                        "Пятница"
                    КОГДА ДЕНЬНЕДЕЛИ(Дата) = 6 ТОГДА
                        "Суббота"
                    ИНАЧЕ
                        "Воскресенье"
                КОНЕЦ КАК ДеньНедели
            ИЗ
                Справочник.Цвета
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-30_20-59-56.png" alt="">














    <h3 class="header-style" id="8">Операторы МЕЖДУ, В, В ИЕРАРХИИ</h3>
    <p><b id="8a">Логический оператор МЕЖДУ</b></p>
    <p>Работает как с числовыми отрезками, так и с датами.</p>
    <p>Оператор МЕЖДУ позволяет проверить, входит ли значение выражения, указанного слева от него в отрезок, указанный справа(включая гораницы отрезка). Таким образом такой пример:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Калорийность
            ИЗ
                Спарвочник.Еда
            ГДЕ
                Калорийность >= 200 И Калорийность &lt;= 300
            </b></span>
        </pre>
    </div>
    <p>можно написать так:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Калорийность
            ИЗ
                Спарвочник.Еда
            ГДЕ
                Калорийность МЕЖДУ 200 И 300
            </b></span>
        </pre>
    </div>
    <p>Если же надо наоборот выбрать всю еду, калорийность котрой не входит в отрезок(200, 300), то подойдёт следующая форма отрицания(НЕ):</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Калорийность
            ИЗ
                Спарвочник.Еда
            ГДЕ
                Калорийность НЕ МЕЖДУ 200 И 300
            </b></span>
        </pre>
    </div>
    <p>Оператор МЕЖДУ можно применять не только к числовым отрезкам. С датами он также хорошо работает:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Номер,
                Дата
            ИЗ
                Документ.ЗаказКлиента
            ГДЕ
                Дата МЕЖДУ ДАТАВРЕМЯ(2014, 01, 01) И ДАТАВРЕМЯ(2014, 01, 31)
            </b></span>
            //ИЛИ

            <span class="vue-b"><b>ВЫБРАТЬ
                Номер,
                Дата
            ИЗ
                Документ.ЗаказКлиента
            ГДЕ
                Дата МЕЖДУ &ДатаНачало И &ДатаКонец
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Номер</td>
            <td>Дата</td>
        </tr>
        <tr>
            <td>000000001<br>000000002</td>
            <td>01.01.2014 12:00:00<br>10.01.2014 12:00:00</td>
        </tr>
    </table>

    <p><b id="8b">Логический оператор В</b></p>
    <p><b>Проверка совпадения с одним из перечисленных</b></p>
    <p>Оператор В позволяет проверить, совпадает ли значение выражения, указанного слева от него, с одним из значений указанных справа. Таким образом вместо:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Цает
            ИЗ
                Справочник.Еда
            ГДЕ
                Цвет.Наименования = "Зелёный" ИЛИ
                Цвет.Наименования = "Красный" ИЛИ
                Цвет.Наименования = "Белый"
            </b></span>
        </pre>
    </div>
    <p>можно написать так:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Цает
            ИЗ
                Справочник.Еда
            ГДЕ
                Цвет.Наименование В ("Зелёный", "Красный", "Белый")
            </b></span>
        </pre>
    </div>
    <p>Ответ будет один и тот же.</p>
    <p>Если же надо наоборот выбрать всю еду, цвет которой не совпадает ни с одним значением из списка, то подойдёт форма отрицания с частицей НЕ:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Цает
            ИЗ
                Справочник.Еда
            ГДЕ
                Цвет.Наименование НЕ В ("Зелёный", "Красный", "Белый")
                //или
                Цвет.Наименование = "Жёлтый"
            </b></span>
        </pre>
    </div>

    <p><b>Проверка совпадения значения с одним из результата запроса</b></p>
    <p>Пусть нам требуется выбрать из базы только те цвета, которые присутствуют в описании еды. Таки образом в отобранном списке не должен присутствовать, например, чёрный цвет, так как еды чёрного цвета нет в базе. Один из способов как это можно сделать - использовать логический оператор В, справа от которого будет находится подзапрос, выбирающий названия цветов из всех записей справочника Еда:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Цвета
            ГДЕ
                Наименование В (
                    ВЫБРАТЬ
                        Цвет.Наименование
                    ИЗ
                        Справочник.Еда
                )
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Белый<br>Жёлтый<br>Зелёный<br>Красный</td>
        </tr>
    </table>
    <p>Также стоит упомянуть, что из внутреннего запроса есть возможность обращаться к полям внешнего запроса.</p>

    <p><b id="8c">Проверка принадлежности по иерархии для справочников</b></p>
    <p>Хороший пример про иерархию показан <a href="#v-ierarhii-ptimer1">тут</a></p>
    <p>Для справочников проверка может осуществляться и на принадлежность по иерархии. Для начала рассмотрим пример иерархического справочника. Посмотрим справочник Города в базе Гастроном. Его элементы отличаются от других справочников наличием папок. Это группы справочника.</p>
    <p>Группы отличаются от обычным элементов тем, что могут включать в себя другие группы и элементы. У каждого элемента(будь то группа или обычный элемент) может быть родитель. Например, родителем элемента Рио-де-Жанейро является группа Бразилия.</p>
    <p>Теперь давайте напишем такой запрос, который будет запрашивать выбранную группу-страну и элементы-города входящие в неё.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Города
            ГДЕ
                Ссылка В ИЕРАРХИИ (&ГруппаСтрана) 
            </b></span>
        </pre>
    </div>
    <p>Сейчас у нас выведутся все странны и города. Обратим внимание на то, что в тексте запроса перед именем ГруппаСтрана стоит амперсанд(&). Имена с амперсандами автоматом распознаются системой как параметры, значения которых должно быть задано перед выполнением запроса. После того как мы вставим этот запрос в консоль и нажмём кнопку "Выполнить", у нас появится возможность задать этот параметр, задав в качестве значения, например, группу Россия:</p>
    <img src="../img/1С-1/2022-10-31_10-06-40.png" alt="">
    <p>Если теперь нажмём кнопку "Выполнить", то ответ запроса будет таким:</p>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Россия<br>Пермь<br>Красноярск<br>Воронеж</td>
        </tr>
    </table>
    <p>В ответ попала сама группа(Россия) и все её элементы(Пермь, Красноярск, Воронеж)</p>
    <p>Таким образом ответом оператора В ИЕРАРХИИ будет ИСТИНА, если значение выражения слева является ссылкой на элемент справочника и входит во множество значений справа(Россия) или иерархически принадлежит какой-нибудь группе, содержащейся в этом множестве(Пермь, Красноярск, Воронеж).</p>
    <p>В качестве множества значений, на совпадение с которыми выполняетс проверка, может фигурировать и результат запроса:</p>
    <img src="../img/1С-1/2022-10-31_10-21-35.png" class="screen" alt="">
    <p>Для оператора В ИЕРАРХИИ также доступно использование частыицы НЕ перед ним.</p>

    <p><b id="8d">Примеры</b></p>
    <p>1)Написать запрос, который выбирает все строчки из заказов клиентов, в табличной части которых количество входит в отрезок (5, 15). В качестве истоника записей используем таблицу Документ.ЗаказКлиента.Продукты. Мы также хотим в ответе получить поля Номер и Дата замих строчек списка документа, для этого в табличной части есть поле Ссылка, эта ссылка содержит в себе ссылку на соответствующий элемент документа.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Ссылка.Номер,
                Ссылка.Дата,
                Еда,
                Количество
            ИЗ
                Документ.ЗаказКлиента.Продукты
            ГДЕ
                Количество МЕЖДУ 5 И 15 
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Номер</td>
            <td>Дата</td>
            <td>Еда</td>
            <td>Количество</td>
        </tr>
        <tr>
            <td>000000001<br>000000007<br>000000009<br>000000009</td>
            <td>01.01.2014 00:00:00<br>30.03.2014 00:00:00<br>18.02.2014 00:00:00<br>18.02.2014 00:00:00</td>
            <td>Клубника<br>Крыжовник<br>Клубника<br>Кефир</td>
            <td>12<br>10<br>12<br>5</td>
        </tr>
    </table>
    <p>2)Написать запрос, который при помощи логического оператора В из справочника клиентов выбирает только Андрея и Наташу:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                наименование
            ИЗ
                Спарвочник.Клиенты
            ГДЕ
                Наименование В ("Андрей", "Наташа") 
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Андрей<br>Наташа<br></td>
        </tr>
    </table>

    <p>3)Написать запрос 3мя разными способами, который выбирает из справочника Клиенты только тех, кто встречается в заказах клиентов за январь и март 2014 года. На выходе должна получиться в точности такая таблица:</p>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Андрей<br>Наташа<br></td>
        </tr>
    </table>
    <p>Первый способ:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Клиенты
            ГДЕ
                Наименование В (
                    ВЫБРАТЬ
                        Клиент.Наименование
                    ИЗ
                        Документ.ЗаказКлиента
                    ГДЕ
                        МЕСЯЦ(Дата) = 1 ИЛИ
                        МЕСЯЦ(Дата) = 3
                )
            </b></span>
        </pre>
    </div>
    <p>Второй способ:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ РАЗЛИЧНЫЕ
                Клиент.Наименование
            ИЗ
                Документ.ЗаказКлиента
            ГДЕ
                МЕСЯЦ(Дата) = 1 ИЛИ
                МЕСЯЦ(Дата) = 3
            </b></span>
        </pre>
    </div>
    <p>Третий способ:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Клиент.Наименование
            ИЗ
                Документ.ЗаказКлиента
            ГДЕ
                МЕСЯЦ(Дата) = 1 ИЛИ
                МЕСЯЦ(Дата) = 3
            СГРУППИРОВАТЬ ПО
                Клиент
            </b></span>
        </pre>
    </div>












    <h3 class="header-style" id="9">Функции и операторы для работы с типами(ТИПЗНАЧЕНИЯ, ТИП, ССЫЛКА, ЕСТЬNULL, ВЫРАЗИТЬ)</h3>
    <p>Давайте вспомним, что каждый реквизит(свойство, поле) справочника, документа или любого другого прикладного объекта имеет свой тип. Этот тип можно посмотреть в конфигураторе. В языке запросов есть целый класс функций и операторов для работы с типами реквизитов.</p>

    <p><b id="9a">Функция ТИПЗНАЧЕНИЯ</b></p>
    <p>Эта функция принимает один параметр(значение) и возвращает его тип. Например в справочнике Еда есть поле Вкус, это поле ссылается на справочник Вкусы, так вот есть запросить тип поля Вкус, то увидим следующее:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Вкус,
                ТИПЗНАЧЕНИЯ(Вкус)
            ИЗ
                Справочник.Еда
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Вкус</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>Банан<br>Колбаса<br>...<br>Сыр<br></td>
            <td>Сладкий<br>Солёный<br>...<br>Солёный</td>
            <td>Вкусы<br>Вкусы<br>...<br>Вкусы</td>
        </tr>
    </table>
    <p>Как видим тип вернулся названием справочника - Вкусы, т.е. поле Вкус содержит записи со ссылкой на справочник Вкусы. Если мы запросим тип поля Наименование, то получим - Строка.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ТИПЗНАЧЕНИЯ(Наименование)
            ИЗ
                Справочник.Еда
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>Банан<br>Колбаса<br>...<br>Сыр<br></td>
            <td>Строка<br>Строка<br>...<br>Строка</td>
        </tr>
    </table>
    <p>Теперь рассмотрим реквизит ОтличительныйПризнак у справочника Города:</p>
    <img src="../img/1С-1/2022-10-31_19-13-56.png" alt="">
    <p>Как видно этот реквизит может иметь один из нескольких типов: Строка, Справочник.Вкусы, Справочник.Цвета.Такой тип реквизитов называется <b>СОСТАВНЫМ</b>. Если мы попытаемся заполнить значение такого реквизита в режиме 1С:Предприятие, то система спросит нас, какого типа будет вводимое значение:</p>
    <img src="../img/1С-1/2022-10-31_19-17-53.png" alt="">
    <p>И только после нашего выбора позволит внести значение выбранного типа. Таким образом элементы справочника Города в реквизите ОтличительныйПризнак могут хранить значения разных типов.</p>
    <p>Интересно как поведёт себя функция ТИПЗНАЧЕНИЯ на реквизите ОтличительныйПризнак:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ОтличительныйПризнак
                ТИПЗНАЧЕНИЯ(ОтличительныйПризнак)
            ИЗ
                Справочник.Города
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-31_19-26-08.png" alt="">
    <p>Тип значения отличительного признака для элемента Россия равен NULL. Мы впервые сталкиваемся с этим типов. Значения данного типа используются исключительно для опеределения отсутствующего значения при работе с БД. Ведь элемент Россия является группой, а не обычным элементом справочника, поэтому у него отсутствует поле ОтличительныйПризнак.</p>
    <p>Далее по таблице вроде всё понятно у кого какой тип. Пустой только элемент Сан-Пауло.Все незаполненые поля составного типа имеют специальное значение НЕОПРЕДЕЛЕНО. Значение НЕОПРЕДЕЛЕНО применяется, когда необходимо использовать пустое значение, не принадлежащее ни к одному другому типу. А тип для значения, которое не принадлежит ни к одному из типов, отсутствует. Поэтому это поле не заполнено никаким типом.</p>

    <p><b id="9b">Функция ТИП</b></p>
    <p>Она принимает всего один параметр - имя примитивного типа(СТРОКА, ЧИСЛО, ДАТА, БУЛЕВО), либоимя таблицы, тип ссылки которой нужно получить. Результатом данной конструкции будет значение типа Тип для указанного типа.</p>
    <p>Пусть нам требуется отобрать все элементы справочника Города, у которых составной реквизит ОтличительныйПризнак имеет значение типа СТРОКА:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ОтличительныйПризнак
                ТИПЗНАЧЕНИЯ(ОтличительныйПризнак)
            ИЗ
                Справочник.Города
            ГДЕ
                ТИПЗНАЧЕНИЯ(ОтличительныйПризнак) = ТИП(СТРОКА)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>ОтличительныйПризнак</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>Воронеж<br>Дели<br>Калькутта</td>
            <td>Туманный<br>Странный<br>Волшебный</td>
            <td>Строка<br>Строка<br>Строка</td>
        </tr>
    </table>
    <p>Теперь давайте отберём записи, у которыхзначения реквизита ОтличительныйПризнак являются ссылками на элементы справочника Цвета(таблица Справочник.Цвет):</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ОтличительныйПризнак
                ТИПЗНАЧЕНИЯ(ОтличительныйПризнак)
            ИЗ
                Справочник.Города
            ГДЕ
                ТИПЗНАЧЕНИЯ(ОтличительныйПризнак) = ТИП(Справочник.Цвета)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>ОтличительныйПризнак</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>Красноярск<br>Сальвадор</td>
            <td>Чёрный<br>Оранжевый</td>
            <td>Цвета<br>Цвета</td>
        </tr>
    </table>

    <p><b id="9c">Отступление</b></p>
    <p>Как мы помним, некоторые элементы справочника Города не имеют реквизита ОтличительныйПризнак, например, группы. Функция ТИПЗНАЧЕНИЯ для таких элементов выдаёт NULL. Как можно сделать отбор таких элементов в запросе? Для этого есть специальный логический оператор ЕСТЬ NULL(не путать с функцией ЕСТЬNULL, которую рассмотрим ниже).</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ОтличительныйПризнак
                ТИПЗНАЧЕНИЯ(ОтличительныйПризнак)
            ИЗ
                Справочник.Города
            ГДЕ
                ОтличительныйПризнак ЕСТЬ NULL
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>ОтличительныйПризнак</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>Россия<br>Индия<br>Бразилия</td>
            <td></td>
            <td>Null<br>Null<br>Null</td>
        </tr>
    </table>
    <p>Отлично. Но есть такие элементы(Сан-Пауло), у которых реквизит ОтличительныйПризнак(составного типа) просто не заполнен и равен спец. значению НЕОПРЕДЕЛЕНО. Чтобы отобрать такие записи следует использовать другую конструкцию:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ОтличительныйПризнак
                ТИПЗНАЧЕНИЯ(ОтличительныйПризнак)
            ИЗ
                Справочник.Города
            ГДЕ
                ОтличительныйПризнак = НЕОПРЕДЕЛЕНО
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>ОтличительныйПризнак</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>Сан-Пауло</td>
            <td></td>
            <td></td>
        </tr>
    </table>
    <p>Но сравнение с НЕОПРЕДЕЛЕНО для определения пустых реквизитов будет работать только для составных типов. Кстати, у логического оператора ЕСТЬ NULL форма отрицания выглядит так:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ОтличительныйПризнак
                ТИПЗНАЧЕНИЯ(ОтличительныйПризнак)
            ИЗ
                Справочник.Города
            ГДЕ
                ОтличительныйПризнак ЕСТЬ НЕ NULL
            </b></span>
        </pre>
    </div>

    <p><b id="9d">Логический оператор ССЫЛКА</b></p>
    <p>Оператор ССЫЛКА позволяет проверить, является ли значение выражения, указанного слева от него, ссылкой на таблицу, указанную справа.</p>
    <p>К примеру, давайте выберем из справочника Города только те записи, у которых значение составного реквизита ОтличительныйПризнак являются ссылкой на элемент справочника Вкусы:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ОтличительныйПризнак
                ТИПЗНАЧЕНИЯ(ОтличительныйПризнак)
            ИЗ
                Справочник.Города
            ГДЕ
                ОтличительныйПризнак ССЫЛКА Справочник.Вкусы
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>ОтличительныйПризнак</td>
            <td>Поле1</td>
        </tr>
        <tr>
            <td>Пермь<br>Мумбаи<br>Рио-де-Жанейро</td>
            <td>Сладкий<br>Горький<br>Сладкий</td>
            <td>Вкусы<br>Вкусы<br>Вкусы</td>
        </tr>
    </table>
    <p>Эту задачу можно решить и с помощью ТИПЗНАЧЕНИЯ и ТИП:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ОтличительныйПризнак
                ТИПЗНАЧЕНИЯ(ОтличительныйПризнак)
            ИЗ
                Справочник.Города
            ГДЕ
                ТИПЗНАЧЕНИЯ(ОтличительныйПризнак) = ТИП(Справочник.Вкусы)
            </b></span>
        </pre>
    </div>
    <p>Где можно использовать оператор ССЫЛКА? Например в регистр накопления могут писать документы на поступление товаров и документы на продажу товаров. И с помощью этого опрератора можно легко определить регистратора:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Регистратор
            ИЗ
                РегистрНакопления.ОстаткиТоваров
            ГДЕ
                Регистратор ССЫЛКА Документ.ПоступлениеТоваров
            </b></span>
        </pre>
    </div>
    <p>Или, например, есть справочник КонтактныеЛица, этот справочник может быть подчинён 2 другим справочникам, а значит во вкладке Владелец будут ссылки на 2 разных справочника, так вот оперетор ССЫЛКА поможет выбрать из этого поля нужные записи какого то определённого владельца-справочника.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Владелец
            ИЗ
                Справочник.КонтактныеЛица
            ГДЕ
            Владелец ССЫЛКА Справочник.Контрагенты
            </b></span>
        </pre>
    </div>

    <p><b id="9e">Функция ЕСТЬNULL</b></p>
    <p>Функция предназначена для замены значения NULL на другое значение. Мы помним, что значение NULL возвращается в том случае, если запрашиваемый реквизит(свойство, поле) не существует. Например, для групп справочника Города не существует реквизит ОтличительныйПризнак.</p>
    <p>Функция ЕСТЬNULL поможет вывести нам другое значение в том случае, если это значение равно NULL. Пусть в данном случае это будет строка "Такого реквизита нет":</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ЕСТЬNULL(ОтличительныйПризнак, "Такого реквизита нет")
            ИЗ
                Справочник.Города
            </b></span>
        </pre>
    </div>
    <p>И 2й способ:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ВЫБОР
                    КОГДА ЦенаПокупки ЕСТЬ NULL ТОГДА
                        "null"
                    ИНАЧЕ
                        ЦенаПокупки
                КОНЕЦ
            ИЗ
                Справочник.Города
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-31_21-14-59.png" alt="">
    <p>Получается, что если первый параметр функции ЕСТЬNULL не равен NULL, то возвращается он. Если же равен, то возвращается второй параметр.</p>

    <p><b id="9f">Функция ВЫРАЗИТЬ</b></p>
    <p>Эта функция предназначена только для полей, имеющих составной тип. Отличным примером такого поля, у элементов справочника Города, является свойство ОтличительныйПризнак, в его состав входят типы: 1)Строка, 2)СправочникСсылка.Вкусы, 3)СправочникСсылка.Цвета. . Иногда возникает необходимость привести значения состовного поля к какому-либо определённому типу. Давайте приведём все значения поля ОтличительныйПризнак к типу Справочник.Цвета:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ВЫРАЗИТЬ(ОтличительныйПризнак КАК Справочник.Цвета)
            ИЗ
                Справочник.Города
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-10-31_21-48-23.png" alt="">
    <p>В результате, все значения элементов, которые имели тип Справочник.Цвета, остались заполненными и оказались приведёнными к указанному типу. Все значения других типов (СТРОКА, Справочник.Вкусы) теперь равны NULL. В этом состоит особенность приведения типа при помощи функции ВЫРАЗИТЬ.</p> 
    <p>Ещё раз объясню что за функция ВЫРАЗИТЬ и для чего она нужна. Возьмём другой пример. Напишем запрос к регистру накопления:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Регистратор
            ИЗ  
                РегистрНакопления.ОстаткиНоменклатуры
            </b></span>
        </pre>
    </div>
    <p>Мы получим таблицу со всемы ссылками на документы, записывающие в этот регистр, а это и документ ПоступлениеТоваров и документ ПродажаТоваров. Значит реквизит Регистратор(кстати это стандартный реквизит) является составным, потому что содержит ссылки на разные документы. И бывает когда мы хотим получить кроме регистратора ещё и контрагента. Как это сделать? Да просто обращаемся к полю Регистратор.Контрагент. При таком обращении происходит неявное левое присоединение всех таблиц документов, учавствующих в записи в этот регистр, и мы получим всех контрагентов из всех документов. А что если нам нужны только поставщики? Да просто, берём условие и дописываем, что Регистратор ССЫЛКА Документ.ПоступлениеТоваров, т.е. это условие говорит, что ссылка в поле Регистратор должны принадлежать документу ПоступлениеТоваров. НО при проходе по регистру вначале всё равно будут неявно присоединяться по левому соединению таблицы всех документов и только потом, когда дойдёт до условия, будут отброшены те записи, которые не попадают в это условие. А документов пишущих в регистр может быть десятки, а не как у меня всего 2. И такая операция может занимать много времени присоединяя все таблицы. Поэтому перед условием выразим сразу поле Регистратор из составного типа в тип ДокументСсылка.ПоступлениеТоваров:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Регистратор
                ВЫРАЗИТЬ(Регистратор КАК Документ.ПоступлениеТоваров).Контрагент
            ИЗ
                РегистрНакопления.ОстаткиНоменклатуры
            ГДЕ 
                Регистратор ССЫЛКА Документ.ПоступлениеТоваров
            </b></span>
        </pre>
    </div>
    <p>И вот теперь при таком запросе лишние соединения таблиц не будут происходить. Как говорит Камков, такие конструкции очень редко встречаются.</p>
    <p>Ещё один пример с этой функций - <a href="#virazit">сюда</a>.</p>

    <p><b id="9g">Примеры</b></p>
    <p>1) Написать запрос, который запрашивает из справочника Города реквизиты Наименование и Мэр, а также тип значения, которое находится в составном поле Мэр:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Мэр,
                ТИПЗНАЧЕНИЯ(Мэр) КАК Тип
            ИЗ
                Справочник.Города
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Мэр</td>
            <td>Тип</td>
        </tr>
        <tr>
            <td>Россия<br>Пермь<br>Красноярск<br>Воронеж<br>Индия<br>Мумбай<br>Дели<br>Калькутта<br>Бразилия<br>Сан-Пауло<br>Рио-де-Жанейро<br>Сальвадор</td>
            <td>пусто<br>Леший<br>Наташа<br>пусто<br>пусто<br>Андрей<br>Шевченко<br>Пётр<br>пусто<br>пусто<br>Иванов<br>Наташа</td>
            <td>Null<br>Строка<br>Клиенты<br>Не определено<br>Null<br>Клиенты<br>Строка<br>Клиенты<br>Null<br>Не определено<br>Строка<br>Клиенты</td>
        </tr>
    </table>
    <p>2) Написать 2 способа запроса(при помощи ТИП и ССЫЛКА), которые будут выводить только те города, у которых в реквизите Мэр находятся значения являющиеся ссылками на элементы справочника Клиенты:</p>
    <div class="code-style">
        <pre>
            //1й способ
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Мэр,
                ТИПЗНАЧЕНИЯ(Мэр) КАК Тип
            ИЗ
                Справочник.Города
            ГДЕ
                Мэр ССЫЛКА Справочник.Города
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Мэр</td>
            <td>Тип</td>
        </tr>
        <tr>
            <td>Россия<br>Пермь<br>Красноярск<br>Воронеж<br>Индия<br>Мумбай<br>Дели<br>Калькутта<br>Бразилия<br>Сан-Пауло<br>Рио-де-Жанейро<br>Сальвадор</td>
            <td>пусто<br>Леший<br>Наташа<br>пусто<br>пусто<br>Андрей<br>Шевченко<br>Пётр<br>пусто<br>пусто<br>Иванов<br>Наташа</td>
            <td>Null<br>Строка<br>Клиенты<br>Не определено<br>Null<br>Клиенты<br>Строка<br>Клиенты<br>Null<br>Не определено<br>Строка<br>Клиенты</td>
        </tr>
    </table>
    <div class="code-style">
        <pre>
            //2й способ
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Мэр,
                ТИПЗНАЧЕНИЯ(Мэр) КАК Тип
            ИЗ
                Справочник.Города
            ГДЕ
                ТИПЗНАЧЕНИЯ(Мэр) = ТИП(Справочник.Города)
            </b></span>
        </pre>
    </div>
    <p>Таблица с ответом та же.</p>
    <p>3) Написать запрос, который запрашивает только те города, у которых реквизит Мэр присутствует, но не заполнен:</p>
    <div class="code-style">
        <pre>
            //2й способ
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Мэр,
                ТИПЗНАЧЕНИЯ(Мэр) КАК Тип
            ИЗ
                Справочник.Города
            ГДЕ
                Мэр = НЕОПРЕДЕЛЕНО
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Мэр</td>
            <td>Тип</td>
        </tr>
        <tr>
            <td>Воронеж<br>Сан-Пауло</td>
            <td>пусто<br>пусто</td>
            <td>Не определено<br>Не определено</td>
        </tr>
    </table>
    <p>4) Написать запрос, который запрашивает только те города, у которых реквизит Мэр отсутствует, т.е. не может быть заполнен в принципе:</p>
    <div class="code-style">
        <pre>
            //2й способ
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Мэр,
                ТИПЗНАЧЕНИЯ(Мэр) КАК Тип
            ИЗ
                Справочник.Города
            ГДЕ
                Мэр ЕСТЬ NULL
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Мэр</td>
            <td>Тип</td>
        </tr>
        <tr>
            <td>Россия<br>Индия<br>Бразилия</td>
            <td>пусто<br>пусто<br>пусто</td>
            <td>Null<br>Null<br>Null</td>
        </tr>
    </table>
    <p>5) Написать запрос, который запрашивает все города и в тех случаях, когда реквизит Мэр отсутствует выводит "Здесь не может быть главы"</p>
    <div class="code-style">
        <pre>
            //2й способ
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                ЕСТЬNULL(Мэр, "Здесь не может быть главы")
            ИЗ
                Справочник.Города
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-11-01_09-36-00.png" alt="">












    <h3 class="header-style" id="10">Функция ЗНАЧЕНИЕ(получает значения перечислений и предопределённых данных)</h3>
    <p>Функция ЗНАЧЕНИЕ предназначена для обращения в тексте запроса к значениям системных перечислений и предопределённым данным.</p>

    <p><b id="10a">Перечисления</b></p>
    <p>Перечисления - это прикладной объект, это особенный объект. В отличии от справочников и документов все возможные значения перечислений задаются на этапе конфинурирования и не могут быть в дальнейшем изменены в пользовательском режиме.</p>
    <p>В нашей базе Гастроном есть перечисление Пол со значениями Мужской и Женский. Где мы в дальнейшем можем использовать это перечисление? Ну, конечно, в справочнике Клиенты. В этом справочнике есть реквизит Пол, который имеет тип ПеречислениеСсылка.Пол. Таким образом при заполнении элемента справочника мы в поле Пол можем указать только 2 значения Мужской или Женский.</p>
    <p>Теперь давайте составим запрос, выбирающий клиентов и их пол из базы:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Пол
            ИЗ
                Справочник.Клиенты
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Пол</td>
        </tr>
        <tr>
            <td>Андрей<br>Наташа<br>Пётр</td>
            <td>Мужской<br>Женский<br>Мужской</td>
        </tr>
    </table>
    <p>А теперь давайте изменим запрос, чтобы остались только мужчины. Если написать так, то ничего не получится:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Пол
            ИЗ
                Справочник.Клиенты
            ГДЕ
                Пол = "Мужской"
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Пол</td>
        </tr>
        <tr>
            
        </tr>
    </table>
    <p>Потому что к значениям пречисления так обращаться нельзя. К ним нужно обращатьсяиспользуя функцию ЗНАЧЕНИЕ:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Пол
            ИЗ
                Справочник.Клиенты
            ГДЕ
                Пол = ЗНАЧЕНИЕ(Перечисление.Пол.Мужской)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
            <td>Пол</td>
        </tr>
        <tr>
            <td>Андрей<br>Пётр</td>
            <td>Мужской<br>>Мужской</td>
        </tr>
    </table>
    <p>Я так понимаю, из-за того что в поле Пол лежит значение объекта Перечисления, то и сравнивать нужно с таким же значением, а примере выше мы пытались сравнить это значение со строкой "Мужской".</p>
    <p>Итак одна из задач функции ЗНАЧЕНИЕ - использование в запросах значений перечислений.</p>

    <p><b id="10b">Предопределённые данные</b></p>
    <p>Покажем на примере, что такое предопределённые данные для справочников. Откроем в базе Гастроном(в режиме пользователя) справочник "Единицы измерения".</p>
    <img src="../img/1С-1/2022-11-01_11-14-51.png" alt="">
    <p>Присмотримся к его элементам. Видим жёлтые кружочки рядом с некоторыми из элементов. Эти элементы и есть предопределённые данные. Вообще же если какой-либо элемент справочника является предопределённым(т.е. у него есть жёлтый кружок), то это особый элемент.</p>
    <p>Во-первых это означает, что элемент был создан ещё на этапе конфигурирования программистом. Во-вторых, это означает, что элемент очень важен для работы программы. Что на него завязан какой то код в базе данных. Именно поэтому просто удалить такой элемент не получится.</p>
    <p>Теперь посмотрим где же эти самые предопределённые элементы(в данном случае для справочника Единицы измерения) создаются:</p>
    <img src="../img/1С-1/2022-11-01_11-22-32.png" class="screen" alt="">
    <img src="../img/1С-1/2022-11-01_18-31-02.png" class="screen" alt="">
    <p>Обратим внимание, что все предопределённые элементы имеют спец. имя, которое не отображается в режиме пользователя. Это имя называется предопределённым именем элемента и именно по этому имени можно обращаться к нему из кода( или из запроса в нашем случае).</p>
    <p>Возникает вопрос, почему единицы измерения просто не сделать перечислением с элементами Тонна, Грамм и Пачка? А всё потому, что в данном случае нам важно, чтобы справочник единицы измерения всегда содержал определённые элементы(тонна, грамм, пачка), но в то же время мы не хотим запрещать пользователю добавлять какие то свои элементы(килограмм, штука и т.д.). Поэтому здесь безусловно больше подходят предопределённые элементы, чем перечисления. А обращаться к нашим предопределённым элементам из запроса мы сможем используя уже знакому нам функцию ЗНАЧЕНИЕ:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.ЕдиницыИзмерения
            ГДЕ
                Ссылка = ЗНАЧЕНИЕ(Справочник.ЕдиницыИзмерения.Тонна)
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>т.</td>
        </tr>
    </table>

    <p><b id="10c">Примеры</b></p>
    <p>1) Написать запрос, который выводит все значения перечисления ВременаГода из базы Гастроном. Должен получится ответ:</p>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Поле1</td>
            <td>Поле2</td>
            <td>Поле3</td>
            <td>Поле4</td>
        </tr>
        <tr>
            <td>Зима</td>
            <td>Весна</td>
            <td>Лето</td>
            <td>Осень</td>
        </tr>
    </table>
    <p>Но я пока не знаю как написать такой запрос. У меня только такой пока запрос:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Ссылка
            ИЗ
                Перечисление.ВременаГода
            </b></span>
        </pre>
    </div>
    <p>который выводит</p>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Ссылка</td>
        </tr>
        <tr>
            <td>Зима<br>Весна<br>Лето<br>Осень</td>
        </tr>
    </table>
    <p>2) Написать запрос, который выводит предопределённый элемент справочника Склады с предопределённым именем Временный:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Склады
            ГДЕ
                Ссылка = ЗНАЧЕНИЕ(Справочник.Склады.Временный)
            </b></span>
        </pre>
    </div>
    <p>который выводит</p>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px">
        <tr>
            <td>Наименование</td>
        </tr>
        <tr>
            <td>Временный</td>
        </tr>
    </table>
















    <h3 class="header-style" id="11">Итоги в запросах</h3>
    <p>Рассмотрим запрос, выбирающий из таблицы Документ.ПрибытиеГостей номер, город и количество прибывших:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Номер,
                Город,
                Количество
            ИЗ
                Документ.ПрибытиеГостей
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-11-01_20-50-17.png" alt="">
    <p>Наша задача состоит в том, чтобы подвести итоги(просуммировать) количества прибывших гостей для каждого города. Как помним, эту задачу можно решить при помощи группировки:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Город,
                Сумма(Количество)
            ИЗ
                Документ.ПрибытиеГостей
            СГРУППИРОВАТЬ ПО
                Город
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-11-01_20-57-49.png" alt="">
    <p>Обратим внимание на то, что количество записей после группировки сократилось, а информация о номере документа пропала. Так работает группировка. Даже если в запрос в секцию Выбрать добавить поле Номер, то будет ошибка.</p>
    <p>Рассмотрим механизм формирование итогов, который решает эту задачу по другому:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Город,
                Номер,
                Количество
            ИЗ
                Документ.ПрибытиеГостей
            ИТОГИ
                СУММА(Количество)
            ПО
                Город
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-11-01_21-39-17.png" alt="">
    <p>Обратим внимание, что после подведения итогов:</p>
    <ul class="list">
        <li>Количество записей наоборот увеличилось. Остались все записи, которые были до подведения итогов + к ним добавились записи самих итогов.</li>
        <li>У нас есть возможность просматриватьдополнительные поля(Номер), которые пропадали при группировке.</li>
    </ul>
    <p>Общий синтаксис секций итогов такой:</p>
    <img src="../img/1С-1/2022-11-01_21-50-01.png" class="screen" alt="">

    <p><b id="11a">Подведение итогов в целом по таблице</b></p>
    <p>Если надо подвести итоги целиком по всей таблице необходимо использовать ключевое слово ОБЩИЕ в секции ПО:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Город,
                Номер,
                Количество
            ИЗ
                Документ.ПрибытиеГостей
            ИТОГИ
                СУММА(Количество)
            ПО
                ОБЩИЕ
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-11-01_21-55-48.png" alt="">

    <p><b id="11b">Подведение итогов по нескольким полям</b></p>
    <p>Достаточно просто перечислить эти поля через запятую в секции ПО. В качестве примераподведём итоги в целом по таблице(поле ОБЩИЕ), а затем по полю Город:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Город,
                Номер,
                Количество
            ИЗ
                Документ.ПрибытиеГостей
            ИТОГИ
                СУММА(Количество)
            ПО
                ОБЩИЕ,
                Город
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-11-01_22-00-52.png" alt="">
    <p>Строки выделенные жёлтым называются <b>итоговыми записями</b>, остальные называются <b>детальными записями</b>. Вспоминаем как конструктор запроса называет выборку из результата запроса - ВыборкаДетальнойЗаписи.</p>

    <p><b id="11c">Подведение итогов по иерархии</b></p>
    <p>В том случае, если мы подводим итоги по полю(в данном случае Город) тип которого имеет иерархическую структуру(папки + обычные элементы) можно использовать ключевое слово ИЕРАРХИЯ, чтобы подвести итоги по всем уровням вложенности:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Город,
                Номер,
                Количество
            ИЗ
                Документ.ПрибытиеГостей
            ИТОГИ
                СУММА(Количество)
            ПО
                Город ИЕРАРХИЯ
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-11-01_22-06-29.png" alt="">
    <p>Если же неоходимо вывести итоги только для групп(в данном случае папки в справочнике Города) надо использовать ключевое слово ТОЛЬКО ИЕРАРХИЯ:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Город,
                Номер,
                Количество
            ИЗ
                Документ.ПрибытиеГостей
            ИТОГИ
                СУММА(Количество)
            ПО
                Город ТОЛЬКО ИЕРАРХИЯ
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-11-01_22-09-55.png" alt="">

    <p><b id="11d">Подведение итогов без агрегатных функций</b></p>
    <p>Использование агрегатных функций при подведении итогов не является обязательным:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Город,
                Номер,
                Количество
            ИЗ
                Документ.ПрибытиеГостей
            ИТОГИ
            ПО
                Город ТОЛЬКО ИЕРАРХИЯ
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-11-02_08-33-42.png" alt="">

    <p><b id="11e">Примеры</b></p>
    <p>1) Написать запрос, который получает Цвет, Вкус, Наименование и Калорийность элементов справочника Еда, а затем подводит итоги(минимальное значение) Калорийности по полям Цвет и Вкус</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Цвет,
                Вкус,
                Наименование,
                Калорийность
            ИЗ
                Справочник.Еда
            ИТОГИ
                МИНИМУМ(Калорийность)
            ПО
                Цвет,
                Вкус
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-11-02_08-43-17.png" alt="">

    <p>2) Написать запрос, который получает Наименование и Калорийность элементов справочника Еда, а затем подводит итоги калорийности(мин, макс, среднее, количество) в целом по таблице:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Наименование,
                Калорийность КАК МинКалорийность,
                Калорийность КАК МаксКалорийность,
                Калорийность КАК СредКалорийность,
                Калорийность КАК КолКалорийность
            ИЗ
                Справочник.Еда
            ИТОГИ
                МИНИМУМ(МинКалорийность),
                МАКСИМУМ(МаксКалорийность),
                СРЕДНЕЕ(СредКалорийность),
                КОЛИЧЕСТВО(КолКалорийность)
            ПО
                ОБЩИЕ
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-11-02_09-02-28.png" class="screen" alt="">

    <p>3)Написать запрос, который выводит итоги по количеству и сумме товаров табличной части документа ПоступлениеТоваров:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Товар,
                Количество,
                Сумма
            ИЗ
                Документ.ПоступлениеТоваров.Товары
            ИТОГИ
                СУММА(Количество),
                СУММА(Сумма)
            ПО
                Товар</b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-12-29_20-44-17.png" alt="">
    <p>А теперь я хочу сделать так, чтобы в поле Сумма суммировались все записи кроме записи, где есть число 3 000:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Товар,
                Количество,
                Сумма
            ИЗ
                Документ.ПоступлениеТоваров.Товары
            ИТОГИ
                СУММА(Количество),
                СУММА(ВЫБОР КОГДА Сумма = 3000 ТОГДА 0 ИНАЧЕ Сумма КОНЕЦ) КАК Сумма
            ПО
                Товар</b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-12-29_20-48-32.png" alt="">
    <p>Видно по итоговой записи товара Телевизор, что в сумму не вошла запись с числом 3000.</p>








    


    <h3 class="header-style" id="12">Вычисляемые поля</h3>
    <p>Часто бывает нужно вычислять поля. Например у нас есть документ и мы получаем поля Дата и СуммаДокумента:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Дата,
                СуммаДокумента
            ИЗ
                Документ.ПродажаТоваров
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px;font-size: 12px;">
        <tr>
            <td>Дата</td>
            <td>СуммаДокумента</td>
        </tr>
        <tr>
            <td>02.03.2022 0:00:00</td>
            <td>350</td>
        </tr>
        <tr>
            <td>03.03.2022 0:00:00</td>
            <td>750</td>
        </tr>
        <tr>
            <td>024.03.2022 0:00:00</td>
            <td>16 020</td>
        </tr>
    </table>
    <p>Но поле значения поля СуммаДокумента нам нужны не в рублях, а в тысячах рублей, тогда добавляем новое поле путём вычисления:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Дата,
                СуммаДокумента,
                СуммаДокумента / 1000 КАК СуммаВТысячах
            ИЗ
                Документ.ПродажаТоваров
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px;font-size: 12px;">
        <tr>
            <td>Дата</td>
            <td>СуммаДокумента</td>
            <td>СуммаВТысячах</td>
        </tr>
        <tr>
            <td>02.03.2022 0:00:00</td>
            <td>350</td>
            <td>0,35</td>
        </tr>
        <tr>
            <td>03.03.2022 0:00:00</td>
            <td>750</td>
            <td>0,75</td>
        </tr>
        <tr>
            <td>04.03.2022 0:00:00</td>
            <td>16 020</td>
            <td>16,02</td>
        </tr>
        <tr>
            <td>05.03.2022 0:00:00</td>
            <td>1 461</td>
            <td>1,461</td>
        </tr>
    </table>
    <p id="virazit">В вычисляемых полях можно применять операции сложения, умножения, деления и вычитания. Также можно выполнять некоторые другие. Например, операция округления - ВЫРАЗИТЬ.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Дата,
                СуммаДокумента,
                ВЫРАЗИТЬ(СуммаДокумента / 1000 КАК ЧИСЛО(15,1)) КАК СуммаВТысячах
            ИЗ
                Документ.ПродажаТоваров
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px;font-size: 12px;">
        <tr>
            <td>Дата</td>
            <td>СуммаДокумента</td>
            <td>СуммаВТысячах</td>
        </tr>
        <tr>
            <td>02.03.2022 0:00:00</td>
            <td>350</td>
            <td>0,35</td>
        </tr>
        <tr>
            <td>03.03.2022 0:00:00</td>
            <td>750</td>
            <td>0,75</td>
        </tr>
        <tr>
            <td>04.03.2022 0:00:00</td>
            <td>16 020</td>
            <td>16,02</td>
        </tr>
        <tr>
            <td>05.03.2022 0:00:00</td>
            <td>1 461</td>
            <td>1,5</td>
        </tr>
    </table>
    <p>В последней записи число округлилось. 15 в скобках слова ЧИСЛО это общее число знаков(пропустить его нельзя, потому и указываем), 1 это до скольки знаков после точки надо округлить.</p>
    <p>Также новое поле образуют и другие функции работы с датой, строкой и т.д.</p>








    <h3 class="header-style" id="13">Вложенные таблицы(Вложенный запрос)</h3>
    <p><b>1й пример</b></p>
    <p>Возьмём таблицу табличной части Товары документа ПоступлениеТоваров. Выберем ссылку и номер строки из этой таблицы, сгруппируем по ссылке и посчитаем количество поля номер строки по ссылкам:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Ссылка,
                КОЛИЧЕСТВО(НомерСтроки)
            ИЗ
                Документ.ПоступлениеТоваров.Товары
            СГРУППИРОВАТЬ ПО
                Ссылка
            </b></span>
        </pre>
    </div>
    <img src="../img/1С-1/2022-12-29_21-18-35.png" class="screen" alt="">
    <p>А теперь нужно получить различные значения поля НомерСтроки. Как это сделать? Мы можем запрос выше сделать вложенным в другой запрос, который уже по этой таблице выдаст различные значения. Обратим внимание что нужно задать псевдоним для вложенного запроса:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВложеннаяТаблица.НомерСтроки)
            ИЗ
                (ВЫБРАТЬ
                    Ссылка,
                    КОЛИЧЕСТВО(НомерСтроки)
                ИЗ
                    Документ.ПоступлениеТоваров.Товары
                СГРУППИРОВАТЬ ПО
                    Ссылка) КАК ВложеннаяТаблица
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px;font-size: 12px;">
        <tr>
            <td>НомерСтроки</td>
        </tr>
        <tr>
            <td>2</td>
        </tr>
    </table>

    <p><b>2й пример</b></p>
    <p>Найти все документы продажи, товары в которых никогда не поступали документами поступления</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Ссылка,
                Товар
            ИЗ
                Документ.ПродажаТоваров.Товары
            ГДЕ
                Товар НЕ В (
                    ВЫБРАТЬ
                        Товар
                    ИЗ
                        Документ.ПоступлениеТоваров.Товары
                )
            </b></span>
        </pre>
    </div>
    <p>Обратим внимание, что тут вложенному запросу не нужен псевдоним.</p>

    <p><b>3й пример</b></p>
    <p>Нужно получить поставщиков 5ти самых дорогих товаров справочника Номенклатура:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                Ссылка.Контрагент
            ИЗ
                Документ.ПоступлениеТоваров.Товары
            ГДЕ
                Товар В(ВЫБРАТЬ ПЕРВЫЕ 5
                            Ссылка
                        ИЗ
                            Справочник.Номенклатура
                        ГДЕ
                            ЭтоГруппа = Ложь
                        УПОРЯДОЧИТЬ ПО
                            ЦенаПокупки УБЫВ)
            </b></span>
        </pre>
    </div>











    <h3 class="header-style" id="14">Объединение таблиц</h3>
    <p>Очень частая контсрукция запроса это объедиднение таблиц. Если написать такой запрос, то получим:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                1, 1
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px;font-size: 12px;">
        <tr>
            <td>Поле1</td>
            <td>Поле2</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
        </tr>
    </table>
    <p>А если написать запрос с объединением, то получим:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                1, 1
            ОБЪЕДИНИТЬ
            ВЫБРАТЬ
                1, 2
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px;font-size: 12px;">
        <tr>
            <td>Поле1</td>
            <td>Поле2</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
        </tr>
    </table>
    <p>Но если написать так, то получим:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                1, 1
            ОБЪЕДИНИТЬ
            ВЫБРАТЬ
                1, 1
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px;font-size: 12px;">
        <tr>
            <td>Поле1</td>
            <td>Поле2</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
        </tr>
    </table>
    <p>Потому что оператор объединения ещё и исключает дубли. Чтобы дубли не исключать, надо написать так:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                1, 1
            ОБЪЕДИНИТЬ ВСЕ
            ВЫБРАТЬ
                1, 1
            </b></span>
        </pre>
    </div>
    <table border="1" style="margin-top: 0px;margin-bottom: 40px;font-size: 12px;">
        <tr>
            <td>Поле1</td>
            <td>Поле2</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
        </tr>
        <tr>
            <td>1</td>
            <td>1</td>
        </tr>
    </table>



















    <h3 class="header-style" id="15">Временные таблицы</h3>
    <p>Запросы можно помещать во временные таблицы и потом использовать эти таблицы в других запросах:</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
                ПродажаТоваровТовары.Товар КАК Товар,
                СУММА(ПродажаТоваровТовары.Количество) КАК Количество
            ПОМЕСТИТЬ ВременнаяТаблица
            ИЗ
                Документ.ПродажаТоваров.Товары КАК ПродажаТоваровТовары
            ГДЕ
                ПродажаТоваровТовары.Ссылка = &Ссылка

            СГРУППИРОВАТЬ ПО
                ПродажаТоваровТовары.Товар

            ИНДЕКСИРОВАТЬ ПО
                ПродажаТоваровТовары.Товар
            </b></span>
        </pre>
    </div>
    <p>Если написать слово ИНДЕКСИРОВАТЬ, то система добавляет вспомогательные данные к этой таблице, помогающие ускорить поиск по заданному полю. Т.е. это поле только для повышения быстродействия. Без индекса работало бы всё равно.</p>
    <div class="code-style">
        <pre>
            <span class="vue-b"><b>ВЫБРАТЬ
            	Товар
            ПОМЕСТИТЬ ВременнаяТаблица1
            ИЗ
                Документ.ПоступлениеТоваров.Товары
            ;
            ВЫБРАТЬ
                Товар
            ПОМЕСТИТЬ ВременнаяТаблица2
            ИЗ
                Документ.ПродажаТоваров.Товары
            ;


            ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Номенклатура
            ГДЕ
                Наименование НЕ В(
                    ВЫБРАТЬ
                        Товар.Наименование
                    ИЗ	
                        ВременнаяТаблица1
                )
                И Наименование НЕ В(
                    ВЫБРАТЬ
                        Товар.Наименование
                    ИЗ	
                        ВременнаяТаблица2	
                )
                И НЕ ЭтоГруппа
            </b></span>

            //ИЛИ

            <span class="vue-b"><b>ВЫБРАТЬ
            	Товар.Наименование Как Наименование
            ПОМЕСТИТЬ ВременнаяТаблица
            ИЗ
                Документ.ПоступлениеТоваров.Товары

            ОБЪЕДИНИТЬ

            ВЫБРАТЬ
                Товар.Наименование Как Наименование
            ИЗ
                Документ.ПродажаТоваров.Товары
            ;


            ВЫБРАТЬ
                Наименование
            ИЗ
                Справочник.Номенклатура
            ГДЕ
                Наименование НЕ В(
                    ВЫБРАТЬ
                        Наименование
                    ИЗ	
                        ВременнаяТаблица
                )
                И НЕ ЭтоГруппа
            </b></span>
        </pre>
    </div>













     
    <h3 class="header-style" id="16">Программно пишем запрос и обрабатываем его результат.</h3>
    <p><b id="16a">Обрабатываем итоги.</b></p>
    <p>Вот результат такого запроса:</p>
    <img src="../img/1С-1/2023-01-05_22-49-04.png" alt="">
    <div class="code-style">
    <pre>
    <span class="vue-r">&НаСервере
    Процедура ВыполнитьЗапросНаСервере()</span>
        <span class="vue-g">//КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА
        // Данный фрагмент построен конструктором.
        // При повторном использовании конструктора, внесенные вручную изменения будут утеряны!!!</span>
        
        <span class="vue-b"><b>Запрос = Новый Запрос;
        Запрос.Текст = </b></span>
            "ВЫБРАТЬ
            |	ПродажиОбороты.Номенклатура КАК Номенклатура,
            |	ПродажиОбороты.Контрагент КАК Контрагент,
            |	ПродажиОбороты.СуммаОборот КАК СуммаОборот
            |ИЗ
            |	РегистрНакопления.Продажи.Обороты(&НачалоПериода, &КонецПериода, , ) КАК ПродажиОбороты
            |ИТОГИ
            |	СУММА(СуммаОборот)
            |ПО
            |	ОБЩИЕ,
            |	Контрагент";
        
        <span class="vue-b"><b>Запрос.УстановитьПараметр("КонецПериода", '20230501');
        Запрос.УстановитьПараметр("НачалоПериода", '20230101');
        
        <span class="vue-g">//РезультатЗапроса может нам сразу сказать ещё до всяких выборок есть в нём 
        //результат или нет с помощью функции Пусто(), которая вернёт Истина если записи в нём есть</span>
        РезультатЗапроса = Запрос.Выполнить();

        <span class="vue-g">//из РезультатЗапроса можно выгрузить в таблицу записи и посмотреть на эти записи
        //во время отладки кода
        //Таблица = РезультатЗапроса.Выгрузить();</span>

        <span class="vue-g">//из РезультатЗапроса также можно выбрать все записи
        //Выборка = РезультатЗапроса.Выбрать();
        //Пока Выборка.Следующий() Цикл
        //    Сообщить(Выборка.СуммаОборот);
        //КонецЦикла;
        //выведет все записи с суммой, даже все итоги выведет
        //чтобы получить общие итоги, можно убрать цикл и один раз вызвать метод Следующий()
        //и следующей строкой уже можно из выборки получить общую сумму, потому что насколько 
        //я понял, то общий итог всегда первый и в таблице вверху находится</span>
        

        <span class="vue-g">//а можно вот так получить запись с общим итогом
        //такая выборка с таким параметром ПоГруппировкам вернёт только одну запись с общим итогом</span>
        ВыборкаОбщийИтог = РезультатЗапроса.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
        <span class="vue-g">//позиционируем указатель на единственную запись </span>
        ВыборкаОбщийИтог.Следующий();

        
        <span class="vue-g">//далее идёт выборка уже из общего итога и опять с парметром по группировкам
        //теперь в записи попадут уровнем ниже итоги по контрагентам</span>
        ВыборкаКонтрагент = ВыборкаОбщийИтог.Выбрать(ОбходРезультатаЗапроса.ПоГруппировкам);
        
        Пока ВыборкаКонтрагент.Следующий() Цикл
            Сообщить(ВыборкаКонтрагент.СуммаОборот);<span class="vue-g">//на каждом круге цикла выведет итоги по контрагентам</span>

            <span class="vue-g">//тут опять выбираем уровнем ниже и получаем детальные записи каждого контрагента
            //на витке цикла </span>
            ВыборкаДетальныеЗаписи = ВыборкаКонтрагент.Выбрать();
        
            Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
                Сообщить(ВыборкаКонтрагент.СуммаОборот);<span class="vue-g">//на каждок круге цикла выведет суммы товаров по каждому контрагенту</span>
            КонецЦикла;
        КонецЦикла;</b></span>
        
        <span class="vue-g">//КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА</span>
    <span class="vue-r">КонецПроцедуры</span>
    </pre>
    </div>

    <p><b id="16b">Работа с временными таблицами программно</b></p>
    <p>Напишем в какой-нибудь обработке такой запрос. В конструкторе собираем запрос, например получим Наименование из Справочника Номенклатура и поместим этот запрос во временную таблицу, вот так в коде будет выглятеть такой запрос. Удалим пока всю обработку результата, просто оставим Запрос.Выполнить(). Зайдём в пользовательский режим и выполним запрос нажатием на кнопку в обработке и увидем исключение, что нужен менеждер временных таблиц. Создадим такой менеджер в коде:</p>
    <div class="code-style">
        <pre>
            <span class="vue-r">&НаКлиенте
            Процедура ВыполнитьЗапрос(Команда)</span>
                <span class="vue-b"><b>ВыполнитьЗапросНаСервере();</b></span>
            <span class="vue-r">КонецПроцедуры</span> 

            <span class="vue-r">&НаСервере
            Процедура ВыполнитьЗапросНаСервере()</span>
                <span class="vue-g">//созданный объект предназначен для хранения временных таблиц</span>
                <span class="vue-g">//такое свойство в объекте запроса уже предусмотренно</span>
                <span class="vue-b"><b>УправляющийВременнымиТаблицами = <span class="vue-r">Новый</span> МенеджерВременныхТаблиц;
                
                Запрос = Новый Запрос; 
                <span class="vue-g">//копируем ссылку созданного объекта в свойство запроса</span>
                Запрос.МенеджерВременныхТаблиц = УправляющийВременнымиТаблицами;
                Запрос.Текст = </b></span>
                    "ВЫБРАТЬ
                    |	Номенклатура.Наименование КАК Наименование
                    |ПОМЕСТИТЬ ВременнаяТаблица
                    |ИЗ
                    |	Справочник.Номенклатура КАК Номенклатура";
                
                    <span class="vue-b"><b>Запрос.Выполнить();</b></span>
            <span class="vue-r">КонецПроцедуры</span>
        </pre>
    </div>
    <p>Заходим в пользовательский режим и выполняем запрос, ничего не происходит, значит временная таблица сохранилась в менеджере(в БД). Как теперь ею пользоваться? Нужно помнить, что временная таблица будет сохранена в менеджере до тех пор пока не уничтожен объект УправляющийВременнымиТаблицами. Далее нам нужно из какой-то другой процедуры или из этой же обратиться к этой временной таблице. Для этого создадим новый запрос и к свойству МенеджерВременныхТаблиц нового запроса подключим наш объект УправляющийВременнымиТаблицами.</p>
    <div class="code-style">
        <pre>
            <span class="vue-r">&НаКлиенте
            Процедура ВыполнитьЗапрос(Команда)</span>
                <span class="vue-b"><b>ВыполнитьЗапросНаСервере();</b></span>
            <span class="vue-r">КонецПроцедуры</span> 

            <span class="vue-r">&НаСервере
            Процедура ВыполнитьЗапросНаСервере()</span>
                <span class="vue-b"><b>УправляющийВременнымиТаблицами = <span class="vue-r">Новый</span> МенеджерВременныхТаблиц;
                
                Запрос = <span class="vue-r">Новый</span> Запрос;
                Запрос.МенеджерВременныхТаблиц = УправляющийВременнымиТаблицами;
                Запрос.Текст = </b></span>
                    "ВЫБРАТЬ
                    |	Номенклатура.Наименование КАК Наименование
                    |ПОМЕСТИТЬ ВременнаяТаблица
                    |ИЗ
                    |	Справочник.Номенклатура КАК Номенклатура";
                
                <span class="vue-b"><b>Запрос.Выполнить();</b></span>

                <span class="vue-g">//создаём новый объект запроса, помещаем менеджер в его свойство и добавляем текст запроса</span>
                <span class="vue-b"><b>Запрос2 = <span class="vue-r">Новый</span> Запрос;</b></span>
                <span class="vue-b"><b>Запрос2.МенеджерВременныхТаблиц =  УправляющийВременнымиТаблицами;</b></span>
                <span class="vue-b"><b>Запрос2.Текст =  "";</b></span>
            <span class="vue-r">КонецПроцедуры</span>
        </pre>
    </div>
    <p>Теперь как вписать текс запроса в свойство Текст? Можно ручками написать, но это долго, хотелось бы через контсруктор, но если поставить курсор между кавыками и открыть конструкор, то в нём не будет временной таблицы созданной выше. На этот случай у нас есть кнопка "Создать описание временной таблицы", эта кнопка над центральной колонкой конструктора, вторая слева. Нажимаем её и откроется окно, где мы вводим Имя таблицы и имя поля "Наименование", оно у нас там единственное, нажимаем ОК. Всё, у нас в центральной колонке появилась эта временная таблица. Выбираем это поле и заканчиваем создание запроса, теперь у нас в коде появился текст запроса. Далее выполняем запрос 2 и обрабатываем результат запроса.</p>
    <div class="code-style">
        <pre>
            <span class="vue-r">&НаКлиенте
            Процедура ВыполнитьЗапрос(Команда)</span>
                <span class="vue-b"><b>ВыполнитьЗапросНаСервере();</b></span>
            <span class="vue-r">КонецПроцедуры</span> 

            <span class="vue-r">&НаСервере
            Процедура ВыполнитьЗапросНаСервере()</span>
                <span class="vue-b"><b>УправляющийВременнымиТаблицами = <span class="vue-r">Новый</span> МенеджерВременныхТаблиц;
                
                Запрос = <span class="vue-r">Новый</span> Запрос;
                Запрос.МенеджерВременныхТаблиц = УправляющийВременнымиТаблицами;
                Запрос.Текст = </b></span>
                    "ВЫБРАТЬ
                    |	Номенклатура.Наименование КАК Наименование
                    |ПОМЕСТИТЬ ВременнаяТаблица
                    |ИЗ
                    |	Справочник.Номенклатура КАК Номенклатура";
                
                <span class="vue-b"><b>Запрос.Выполнить();</b></span>

                <span class="vue-b"><b>Запрос2 = <span class="vue-r">Новый</span> Запрос;</b></span>
                <span class="vue-b"><b>Запрос2.МенеджерВременныхТаблиц =  УправляющийВременнымиТаблицами;</b></span>
                <span class="vue-b"><b>Запрос2.Текст =</b></span>  
                    "ВЫБРАТЬ
                    |	ВременнаяТаблица.Наименование КАК Наименование
                    |ИЗ
                    |	ВременнаяТаблица КАК ВременнаяТаблица";
                <span class="vue-b"><b>РезультатЗапроса = Запрос.Выполнить();</b></span>
            <span class="vue-r">КонецПроцедуры</span>
        </pre>
    </div>

    <p><b id="16c">Обрабатываем пакетный запрос.</b></p>
    <p>Запрос делает тоже самое что и выше, но выше мы разделяли запросы по отдельности и выполняли. Если же текст запроса состоит из 2х частей и больше это уже пакетный запрос и обрабатывается немного по другому. Пакет будет содержать данные уже из всех частей запроса, из временной таблице тоже вернётся результат. Иногда такое бывает нужно.</p>
    <div class="code-style">
        <pre>
            <span class="vue-r">&НаКлиенте
            Процедура ВыполнитьЗапрос(Команда)</span>
                <span class="vue-b"><b>ВыполнитьЗапросНаСервере();</b></span>
            <span class="vue-r">КонецПроцедуры</span> 

            <span class="vue-r">&НаСервере
            Процедура ВыполнитьЗапросНаСервере()</span>
                <span class="vue-b"><b>УправляющийВременнымиТаблицами = <span class="vue-r">Новый</span> МенеджерВременныхТаблиц;
                
                Запрос = <span class="vue-r">Новый</span> Запрос;
                Запрос.МенеджерВременныхТаблиц = УправляющийВременнымиТаблицами;
                Запрос.Текст = </b></span>
                    "ВЫБРАТЬ
                    |	Номенклатура.Наименование КАК Наименование
                    |ПОМЕСТИТЬ ВременнаяТаблица
                    |ИЗ
                    |	Справочник.Номенклатура КАК Номенклатура
                    |;
                    |
                    |////////////////////////////////////////////////////////////////////////////////
                    |ВЫБРАТЬ
                    |	ВременнаяТаблица.Наименование КАК Наименование
                    |ИЗ
                    |	ВременнаяТаблица КАК ВременнаяТаблица";
                
                <span class="vue-g">//в Результат будут лежать все данные в виде массива. У нас 2 части </span>    
                <span class="vue-g">//в запросе, значит там лежат 2 результата для каждой таблицы</span>    
                <span class="vue-b"><b>Результат = Запрос.ВыполнитьПакет();</b></span>

                <span class="vue-g">//можем выгрузить результаты в переменную Таблица</span> 
                <span class="vue-g">//что делают 2е строки? Это скорее всего реквизиты формы с типом ТабличныйДокумент </span> 
                <span class="vue-g">//куда мы выводим результаты</span> 
                <span class="vue-b"><b>Таблица = Результат[0].Выгрузить();</b></span>
                <span class="vue-b"><b>РезультатПакетногоЗапроса.Загрузить(Таблица);</b></span>

                <span class="vue-b"><b>Таблица = Результат[1].Выгрузить();</b></span>
                <span class="vue-b"><b>РезультатПакетногоЗапроса2.Загрузить(Таблица);</b></span>
                
            <span class="vue-r">КонецПроцедуры</span>
        </pre>
    </div>



</div>
