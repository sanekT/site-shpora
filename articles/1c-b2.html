<div class="wrap">
   
    <h2 class="header-style">Основы программирования на 1с часть 2</h2>
    <ul class="list">
        <li><a href="#forms">Формы</a></li>
        <li><a href="#table">Табличные части</a></li>
        <li><a href="#din-list">Динамический список</a></li>
        <li><a href="#reg-nakoplenie">Регистр накопления</a></li>
        <li><a href="#reg-svedenii">Регистр сведений</a></li>
        <li><a href="#reg-buh">Регистр бухгалтерии</a></li>
        <li><a href="#perechislenie">Перечисления</a></li>
        <li><a href="#note-zapros">Заметки по запросам</a></li>
        <li><a href="#command">Команды</a></li>
    </ul>

    <ul class="list">
        <li><a href="#work-forms">Работа с <b id="forms">формами</b></a>
            <ul class="list2">
                <li><a href="#work-forms-total">В общем о классе ФормаКлиенскогоПриложения</a>
                    <ul class="list2">
                        <li><a href="#work-forms-1">Конвертация данных формы</a></li>
                        <li><a href="#work-forms-client-server">Подробно о директивах НаКлиенте, НаСервере, НаСервереБезКонтекста</a></li>
                        <li><a href="#work-forms-context">Контекст модуля формы</a></li>
                        <li><a href="#work-forms-events">События формы и её элементов в модуле формы</a>
                            <ul class="list2">
                                <li><a href="#work-forms-events-1"><b>"ПриСозданииНаСервере", "ПриОткрытии"</b>. Свойство <b>"Параметры"</b> у формы. <b>"Ключевой параметр"</b></a></li>
                            </ul>
                        </li>
                        <li><a href="#work-forms-prog-open-form">Программно открываем формы. Метод <b>ОткрытьФорму()</b></a></li>
                        <li><a href="#work-forms-prog-param-form">Передача праметров в форму</a></li>
                        <li><a href="#work-forms-prog-graf-open-form">Графическая схема открытия формы объекта из формы списка</a></li>
                        <li><a href="#work-forms-prog-graf-write-form">Графическая схема записи элемента справочника в ИБ</a></li>
                        <li><a href="#work-forms-prog-form">Форма как программный объект</a></li>
                        <li><a href="#work-forms-prog-emit">Как передать данные от одной формы в другую? Не буду описывать, скажу только, что такой пример можно посмотреть в разделе "Работа с файлами" в статье "Пишем в текстовый файл TXT способ 3"</a></li>
                        <li><a href="#work-forms-prog-open-child-form">Как открыть подчинённую форму в маленьком окне втури формы владельца? Нужно просто в методе ОткрытьФорму() последним параметром указать режим открытия окна, также указать владельца формы.</a></li>
                    </ul>
                </li>
                <li><a href="#work-forms-select">Форма выбора</a>
                    <ul class="list2">
                        <li><a href="#work-forms-select1">Как убрать отображение папок в форме выбора</a></li>
                        <li><a href="#work-forms-select2"></a></li>
                    </ul>
                </li>
		<li><a href="#work-forms-in">Работа в форме</a>
                    <ul class="list2">
                        <li><a href="#work-forms-in1">Как программно установить фокус на поле формы</a></li>
                        <li><a href="#work-forms-in2">Как программно создать элемент формы, реквизит формы</a></li>
                        <li><a href="#work-forms-in3">Библиотека процедур и функций для создания всех перечисленных выше элементов, реквизитов, конопок, описаний типов, квалификаторов и т.д.</a></li>
                        <li><a href="#work-forms-in4">Создание динамического списка в форме программно</a></li>
                        <li><a href="#work-forms-in5">Условное оформление списка из объекта формы и условное оформление списка из динамического списка</a></li>
                        <li><a href="#work-forms-in6">Передача данных между формами</a></li>
                        <li><a href="#work-forms-in6"></a></li>
                        <li><a href="#work-forms-in6"></a></li>
                        <li><a href="#work-forms-in6"></a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a href="#table-part">Работа с <b id="table">табличной частью</b></a>
            <ul class="list2">
                <li><a href="#table-part1">Как включить <b>подвал</b> и вывести в него итоги</a></li>
                <li><a href="#table-part2">Запрещаем изменение значений реквизитов в табличной части на форме</a></li>
                <li><a href="#table-part3">Размещаем в ком. панели таб. части кнопку "Подбор" и по ней открываем форму выбора справочника Номенклатура. Из формы выбора выбираем товар и он добавляется в таб. часть</a></li>
                <li><a href="#table-part4">Свойство "Проверка заполнения" для табличной части</a></li>
            </ul>
        </li>
        <li><a href="#din-list">Работа с <b id="din-list">динамическим списком</b>(ДС)</a>
            <ul class="list2">
                <li><a href="#din-list1">Пока моё видение, что такое ДС</a></li>
                <li><a href="#din-list2">Как по значению реквизита формы, отображающей ДС, менять содержимое этого списка</a></li>
                <li><a href="#din-list3">Как условно оформить строки ДС</a></li>
            </ul>
        </li>
        <li><a href="#work-buttons">Работа с <b>кнопкой выбора/выпадающего списка/очистки/регулирования/открытия/создания</b> у поля ввода и с их событиями</a>
            <ul class="list2">
                <li><a href="#work-buttons1">Основы</a></li>
                <li><a href="#work-buttons2">Кнопка выбора</a>
                    <ul class="list2">
                        <li><a href="#work-buttons2a"></a></li>
                        <li><a href="#work-buttons2b"></a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a href="#reg-copy-0">Отдельно об <b id="reg-nakoplenie">регистре накопления</b></a>
            <ul class="list2">
                <li><a href="#reg-theory">Теория</a></li>
                <li><a href="#reg-copy-0.1">Команда перехода к движениям в форме документа</a></li>
                <li><a href="#reg-copy-1">Основная таблица регистра накпления</a></li>
                <li><a href="#reg-copy-2">Виртуальная таблица Остатки</a></li>
                <li><a href="#reg-copy-3">Виртуальная таблица Обороты</a></li>
                <li><a href="#reg-copy-4">Виртуальная таблица ОборотыИОстатки</a></li>
                <li><a href="#reg-copy-5">Выборка из виртуальной таблицы <b>Остатки</b> объектным и табличным способом</a></li>
                <li><a href="#reg-copy-6">Для чего <b>поле "Активность"</b> в таблице регистра накопления в БД</a></li>
                <li><a href="#reg-copy-7">Как не записывать одинаковые товары в регистр при проведении</a></li>
                <li><a href="#reg-copy-8">Регистр <b>"Взаиморасчеты"</b> и отчёт по нему. <b>"Пользовательские поля"</b> для отчёта</a></li>
                <li><a href="#document17">Регистр <b>"Продажи"</b> и отчёт по нему</a></li>
                <li><a href="#reg-copy-ostatki-itogi">Таблица итогов в режиме "Остатки"</a></li>
                <li><a href="#reg-copy-oboroti-itogi">Таблица итогов в режиме "Обороты"</a></li>
                <li><a href="#reg-copy-9">Отличие оборотного регистра накопления от остаточного. Управление итогами. Таблица итогов. Свойство <b>"Использовать в итогах"</b>, кнопка <b>"Агрегаты"</b>.</a></li>
                <li><a href="#reg-copy-10">Отличие оборотного регистра накопления от остаточного в выборе измерений</a></li>
                <li><a href="#reg-copy-11">Свойство <b>"Разрешить разделение итогов"</b> регистра накопления на вкладке "Прочее"</a></li>
                <li><a href="#reg-copy-11.1">Чистов про итоговую таблицу</a></li>
                <li><b>От ИИ:</b></li>
                <li><a href="#reg-copy-12">Что такое "Период рассчитанных итогов"</a></li>
                <li><a href="#reg-copy-13">Для чего галочка "Разрешить разделение итогов"</a></li>
                <li><a href="#reg-copy-14"></a></li>
            </ul>
        </li>
        <li><a href="#reg-info">Отдельно об <b id="reg-svedenii">регистре сведений</b></a>
            <ul class="list2">
                <li>Примеры с этим регистром ещё есть в разделе "Обработки"(тут в шпоре) и во внешней обработке "РаботаСРегистромСведений", которая лежит в папке для 1С на компе.</li>
                <li><a href="#reg-info-theory">Теория. Физические и виртуальные таблицы.</a></li>
                <li><a href="#reg-info-example">Примеры использования регистра сведений</a></li>
                <li><a href="#reg-info-0">СрезПервых и СрезПоследних своим запросом</a></li>
                <li><a href="#reg-info-0.1">Приёмы чтения/записи/удаления в регистр сведений записей из обработки</a></li>
                <li><a href="#reg-info-1">Что такое регистр сведений</a></li>
                <li><a href="#reg-info-2">Что такое измерение и ресурс</a></li>
                <li><a href="#reg-info-3">Рассмотрим переодический регистр сведений</a></li>
                <li><a href="#reg-info-4">Добавление переодического регистра сведений. Свойство <b>Ведущее</b>. Свойство <b>"Основной отбор по периоду"</b> и <b>"Основной отбор"</b></a></li>
                <li><a href="#reg-info-5">Создание записей в регистре сведений.</a></li>
                <li><a href="#reg-info-6">Автоматическая подстановка цены в поле "Цена" табличной части документа при выборе номенклатуры. Обращение к регистру сведений "Цены на номенклатуру" с помощью <b>объектной модели</b></a></li>
                <li><a href="#reg-info-7">Запись в регистр сведений из документа числовых значений ресурса</a></li>
                <li><a href="#reg-info-8">Запись в регистр сведений из документа не числовых значений ресурса</a></li>
                <li><a href="#reg-info-10">Читаем данные из регистра сведений с помощью <b>табличной модели</b>(пишем запрос)</a></li>
                <li><a href="#reg-info-11">Дополнение от меня.</a></li>
                <li><a href="#reg-info-12">Виртуальные таблицы регистра сведений - <b>СрезПервых</b> и <b>СрезПоследних</b></a></li>
                <li><a href="#reg-info-12a">Что под капотом у метода <b>СрезПоследних()</b> виртуальной таблицы. Как он ищет ближайшие записи на дату?</a></li>
                <li><a href="#reg-info-13">Выводим текущие цены из регистра сведений на начальную страницу</a></li>
                <li><a href="#reg-info-14">Разница между методами <b>Получить()</b>, <b>ПолучитьПервое()</b> и <b>ПолучитьПоследнее()</b> у менеджера регистра сведений при попытке получить ресурс из БД.</a></li>
                <li><a href="#reg-info-14a">Разница между методами <b>ПолучитьПоследнее()</b> и <b>СрезПоследних()</b> у менеджера регистра сведений при попытке получить ресурс из БД.</a></li>
                <li><a href="#reg-info-15">Миг связанный с получением цены из регистра сведений при добавлении товара в табличной части документа.</a></li>
                <li><a href="#reg-info-16">Изменяем данные в независимом переиодическом регистре сведений с <b>отбором</b> по измерению</a></li>
                <li><a href="#reg-info-17">Записываем и изменяем данные в периодическом зависимом регистре сведений в обработчике "ПриЗаписи". Что такое отбор, что такое <b>транзакции. Отбор по регистратору</b>. Показан алгоритм записи в регистр сведений без помощи платформы, а именно без свойства Движения, по такому алгоритму помжно записывать в регистр из любого модуля системы. Тут много понятной теории, полезно перечитать.</a></li>
                <li><a href="#reg-info-18">Отличие метода РегистрСведенийМенеджер.&lt;Имя регистра сведений>.<b>СоздатьНаборЗаписей()</b> от РегистрСведенийМенеджер.&lt;Имя регистра сведений>.<b>СоздатьМенеджерЗаписи()</b></a></li>
                <li><a href="#reg-info-19">Строим из данных регистра сведений "Дежурства" пересечённую таблицу и выводим её в табличный документ</a></li>
                <li><a href="#reg-info-20">Архитектура регистра на уровне СУБД. <b>Очень подробно про Индексы</b>. <span class="ск">Данные с инфостарта</span>.</a></li>
                <li><a href="#reg-info-21"><b>Запись регистра</b>. <span class="ск">Данные с инфостарта</span>.</a></li>
            </ul>
        </li>
        <li><a href="#reg-buh">Отдельно об <b id="reg-buh">Регистр бухгалтерии</b></a>
            <ul class="list2">
                <li><a href="#reg-buh-1">Создание регистра бухгалтерии и его свойства. Синтетический учет.</a></li>
                <li><a href="#reg-buh-2">Отчёт "Оборотно-сальдовая ведомость" при синтетическом учёте</a></li>
                <li><b>От ИИ:</b></li>
                <li><a href="#reg-buh-3">Для чего галочка "Корреспонденция"</a></li>
                <li><a href="#reg-buh-4">Для чего признак "балансовый" у измерений и ресурсов</a></li>
                <li><a href="#reg-buh-5"></a></li>
                <li><a href="#reg-buh-6"></a></li>
                <li><a href="#reg-buh-7"></a></li>
            </ul>
        </li>
        <li><a href="#enumeration"><b id="perechislenie">Перечисления</b>. Тут много взято из книги Хрусталёвой "Пособие ...". Не все статьи тут прям про объект перечисление, но все примеры связаны с ним. Полезно почитать как для ссылок делать свои представления, как отделить материалы от услуг при проведении документа.</a>
            <ul class="list2">
                <li><a href="#enumeration-1">Что такое Перечисление</a></li>
                <li><a href="#enumeration-2">Добавление перечисления и привязка его значений к реквизиту "Вид номенклатуры" справочника "Номенклатура"</a></li>
                <li><a href="#enumeration-3">Произвольное представление номенклатуры(делаем своё представление ссылок)</a></li>
                <li><a href="#enumeration-4">Запись в движения только той номенклатуры, которая является материалом</a></li>
                <li><a href="#enumeration-5">Как получить значения перечисления несколькими способами</a></li>
            </ul>
        </li>
        <li><a href="#11b">Крестики-нолики</a></li>
        <li><a href="#12">Объектная модель запросов к БД</a></li>
        <li><a href="#common_obj">Объекты из дерева "Общие"</a>
            <ul class="list2">
                <li><a href="#func_options">Функциональные опции</a></li>
                <li><a href="#roli">Роли</a></li>
                <li><a href="#"></a></li>
            </ul>
        </li>
        <li><a href="#query">Заметки по <b id="note-zapros">запросам</b></a>
            <ul class="list2">
                <li><a href="#query1">Как в результате запроса сделать, чтобы в отсортированном списке одну нужную мне запись поднять вверх списка или опустить на низ</a></li>
                <li><a href="#query2">Как получить 2 таблицы с данными в одном запросе. Пакет запросов, метод <b>ВыполнитьПакет()</b>.</a></li>
                <li><a href="#query3">Как заполнить реквизит "Коментарий" в документах "ПриходнаяНакладная", если в их табличных частях есть определённый товар</a></li>
                <li><a href="#query4">Как заполнить реквизит "Коментарий" в документах "ПриходнаяНакладная", если в их табличных частях есть вообще хоть один товар</a></li>
                <li><a href="#query5">Как пронумеровать записи в запросе</a></li>
                <li><a href="#query2"></a></li>
                <li><a href="#query2"></a></li>
            </ul>
        </li>
        <li><a href="#command">Работа с <b id="command">командами</b></a>
            <ul class="list2">
                <li><a href="#command1">В общем о командах</a></li>
                <li><a href="#command2">Пример. Зададим команду(кнопку) для документов вида "ПоступлениеТоваров"</a></li>
                <li><a href="#command3">Общая команда, которая открывает параметры учёта</a></li>
                <li><a href="#command4">Сделаем команду "Печать" для документа "ПродажаТоваров" без конструктора</a></li>
                <li><a href="#command5"></a></li>
                <li><a href="#command6"></a></li>
            </ul>
        </li>
        <li><a href="obj-data">Объектные и не объектные данные в БД</a></li>
        <li><a href="#14">Объект встроенного языка УправляемаяФорма</a>
            <ul class="list2">
                <li><a href="#14a">Получение данных полей табличной части из элементов формы документа</a></li>
                <li><a href="#14b">Выносим процедуру подсчёта суммы в Общие Модули</a></li>
                <li><a href="#14c">Свойства и методы управляемой формы</a></li>
            </ul>
        </li>
        <li><a href="#15">Модули</a>
            <ul class="list2">
                <li><a href="#gc">Глобальный контекст</a></li>
                <li><a href="#15a">Модуль управляемого приложения</a></li>
                <li><a href="#15b">Общие модули.</a></li>
                <li><a href="#15c">Модуль объектов. Что такое ДокументМенеджер и ДокументОбъект.</a></li>
                <li><a href="#15d">Модуль форм</a></li>
                <li><a href="#15e">Модуль сеанса</a></li>
                <li><a href="#15f">Модуль внешнего соединения</a></li>
                <li><a href="#15g">Модуль менеджера</a></li>
                <li><a href="#15h">Модуль команды</a></li>
            </ul>
        </li>
        <li><a href="#17">Анализ незнакомого кода с помощью синтакс-помощника</a></li>
        <li><a href="#18">Анализ кода с помощью отладчика</a></li>
        <li><a href="#copy-base">Как сделать копию базы 1с(бекап). Два способа.</a></li>
        <li><a href="#20"></a></li>
        <li><a href="#21"></a></li>
        <li><a href="#22"></a></li>
        <li><a href="#23"></a></li>
        <li><a href="#24">Директивы <b>&НаСервере</b>, <b>&НаСервереБезКонтекста</b></a></li>
        <li><a href="#how">Заметки:</b></a>
            <ul class="list2">
                <li><a href="#how1">Как добавлять и удалять строки таблицы формы, которая отображает таблицу значений</b></a></li>
                <li><a href="#how2"></b></a></li>
                <li><a href="#how3"></b></a></li>
                <li><a href="#how4"></b></a></li>
                <li><a href="#how5"></b></a></li>
            </ul>
        </li>
    </ul>






    <div class="work-forms">
        <h2 class="header-style" id="work-forms">Работа с формами</h2>
        <h3 class="header-style2" id="work-forms-total">В общем о классе ФормаКлиенскогоПриложения</h3>
        <p>Подробнее про создание формы на сервере можно посмотреть в этом видео - https://www.youtube.com/watch?v=yVz6N1y3eSk&list=PLkdnTy1CsgR1phYcN8Ts1HD2AugrAVgRd&index=55  начиная с 19 минуты.</p>
        <p>На сегодня, как я понял, уже нет такого типа данных как "Управляемая форма", вместо такого названия есть "Форма клиентского приложения".</p>
        <p>В модуле формы любую процедуру можно назначить в качестве обработчика для события.</p>
        <p>Если посмотреть на эту картинку, то мы увидим такое явление как "Данные сеанса", вот в эти данные и входит такое понятие как "Данные формы":</p>
        <img src="img/1С-1/2023-08-19_10-40-12.png" class="screen" alt="">
        <p>"Данные формы" мы получаем из конвертации объекта данных из базы. Затем данные формы вместе с формой летят на клиента и там отображаются через элементы формы. Конвертация происходит потому, что объект данных просто так нельзя передать по HTTP, его нужно перевести в вид json или xml, но ещё до того как перевести в json нужно переделать данные объекта данных в другой вид. Ну например, мы на клиенте открываем карточку сотрудника, в этой карточке есть реквизиты с данными, эти данные лежат в базе. Мы посылаем сигнал на сервер, сервер получает из базы объект данных конкретного сорудника в виде объекта. В объекте есть поле "Пол", в котором значение в виде ссылки на значение перечисления. Просто так это не передать, поэтому сервер создаёт тип данных "Структура" и записывает в неё 2 свойства:</p>
        <div class="code-style">
            <pre>
                Структура.Вставить("ID", "24:kj342po3j4s98df3l342l4k3j"); - тут ссылка
                Структура.Вставить("Представление", "Мужской"); - тут строка для отображения в реквизите
            </pre>
        </div>
        <p>И вот таким образом данные объекта сотрудника переделываются в данные формы. Затем вся форма с описанием оформления и данными запаковывется в json или xml и передаётся на клиент.</p>
        <p>После передачи формы на клиента, она теперь существует одновременно и на стороне клиента и на стороне сервера. Это нужно для того, чтобы с клиента обратится на сервер к данным формы, которые не прилетели на клиента, мы их не передавали на клиента и нам нужна какая то информация из этих данных. Т.е. обращаемся именно к уже сконвертированным данным формы на сервере. Для этого и сохраняется объект формы на сервере паралельно с объектом формы на клиенте. На данный миг пока понял так.</p>
        <p>"Данные сеансов" всё время синхронизируются с клиентом.</p>
        <p>На этой картинке показано как работает механизм создания формы и отправки его на клиента:</p>
        <img src="img/1С-1/2023-08-19_10-48-11.png" class="screen" alt="">



        <p class="title-size16"><b id="work-forms-1">Конвертация данных формы</b></p>
        <p>Для упрощения жизни существуют простые способы преобразования универсальных объектов «ДанныеФормы….» в привычные прикладные объекты и наоборот.</p>
        <p>Так, например, можно получить наполненный данными СправочникОбъект на основании данных формы, если вызвать метод РеквизитФормыВЗначение("Объект"). При этом будет создан новый СправочникОбъект и наполнен данными из указанного реквизита данных формы. Напомню, что данный глобальный метод доступен только на сервере.</p>
        <p>Обратное преобразование выполняется методом ЗначениеВРеквизитФормы(). Если мы произвели какие-то действия с данными СправочникОбъект, например, очистили табличную часть, то мы должны поместить наши изменения обратно в форму, иначе будет что? Правильно, измененный СправочникОбъект будет уничтожен при возврате на клиента, а данные формы останутся неизменными. Цикл записи объекта будет построен на старых данных формы, а стало быть, изменение табличной части просто пропадёт.</p>



        <p class="title-size16"><b id="work-forms-client-server">Подробно о директивах НаКлиенте, НаСервере, НаСервереБезКонтекста</b></p>
        <p>В этом видео Чистов раасказывает о этих директивах подробно - https://www.youtube.com/watch?v=SVMgXFwm_dg&list=PLkdnTy1CsgR1phYcN8Ts1HD2AugrAVgRd&index=52.  СпецКурс. 006, начиная с 46 минуты 35 сек.</p>
        <p>В этом же видео с 01:10:00 - объясняет зачем нужна директива НаСервере, если есть такая хорошая директива НаСервереБезКонтекста. Вот пример, который Чистов привёл, для показа того, для чего нужна директива НаСервере:</p>
        <div class="code-style">
            <pre>
                --модуль формы документа "СчетНаОплату"
                <span class="сс"><span class="з">//мы хотим по нажатию на кнопку "ДатьСкидку" умножить все цены товаров табличной части
                //на 0.9(это мы с цены скидываем 10%)
                //можно было бы и на клиенте это всё сделать, но представим
                //что мы работаем с планшета и у нас в табличной части пару сотен товаров,
                //сразу все товары не подгрузятся на клиента и если мы попытаемся на клиенте перемножать
                //то каждый раз будут подгружаться товары и перемножаться, котороче будет много обращений
                //на сервер, а это плохо. Поэтому план такой, чтобы всё сделать один раз на сервере и когда
                //сервер всё обработает, то он автоматом вернёт все данные формы и форма обновится на клиенте
                //с новыми данными</span>
                <span class="ск">&НаКлиенте
                Процедура</span> ДатьСкидку<span class="ск">(</span>Команда<span class="ск">)</span>
                    ДатьСкидкуНаСервере<span class="ск">();
                КонецПроцедуры
    
                &НаСервере
                Процедура</span> ДатьСкидкуНаСервере<span class="ск">()</span> 
                    <span class="з">//на сервере работаем не с элементами формы, а с данными формы, которые лежат в реквизитах формы
                    //в данном случае обращаемся к основному реквизиту формы Объект
                    //Важное наблюдение. На сервере вызывается эта процедура, данные переменожаются, меняются и 
                    //возвращаются на клиента, но эти данные не записывались на сервере в БД
                    //запись происходит только по кнопке "Записать", тогда данные формы летят на сервер, там конвертируются в 
                    //объект базы данных и уже этот объект записывается в базу</span>
                    <span class="ск">Для каждого</span> Стр <span class="ск">Из</span> Объект<span class="ск">.</span>Товары <span class="ск">Цикл</span>
                        Стр<span class="ск">.</span>ПродажнаяЦена <span class="ск">=</span> Стр<span class="ск">.</span>ПродажнаяЦена <span class="ск">*</span> 0.9<span class="ск">;</span> 
    
                        <span class="з">//цену изменили, теперь и сумму нужно пересчитать
                        //НО вот так считать сумму можно если вычисление суммы не сложное
                        //если вычисление суммы сложное, то нужна отдельная процедура
                        //по её вычислению. Такую процедуру размещают сразу в 2х модулях
                        //и на клиенте и на сервере, для этого есть такая директива как
                        //НаКлиентеНаСервереБезКонтекста. С такой директивой эта процедура
                        //будет доступна и на клиенте и на сервере</span>
                        Стр<span class="ск">.</span>Сумма <span class="ск">=</span> Стр<span class="ск">.</span>ПродажнаяЦена <span class="ск">*</span> Стр<span class="ск">.</span>Количество<span class="ск">;
                        <span class="з">//РасчитатьСумму(Стр);</span>
                    КонецЦикла;	
                КонецПроцедуры</span>
            
                <span class="ск">&НаКлиентеНаСервереБезКонтекста
                Процедура</span> РасчитатьСумму<span class="ск">(Стр)</span>
                    ... 
                <span class="ск">КонецПроцедуры</span></span>
            </pre>
        </div>
        <p><b>Далее опишу об этих директивах объяснения из статьи</b></p>




        <p class="title-size16"><b id="work-forms-context">Контекст модуля формы</b></p>
        <p>Каждый модуль связан с остальной частью конфигурации. Эта связь называется <b>контекстом модуля</b>. Контекст модуля определяет набор доступных во время выполнения модуля объектов, переменных, процедур и функций. Контекст модуля формы образуется:</p>
        <ul class="list">
            <li>локальным контекстом самого модуля формы</li>
            <li>реквизитами этой формы</li>
            <li>свойствами и методами объекта УправляемаяФорма встроенного языка</li>
            <li>свойствами и методами расширения формы, определяемого типом того объекта, данные которого содержатся в основном реквизите формы</li>
            <li>глобальным контекстом, в том числе неглобальными общими модулями и экспортируемыми функциями и процедурами глобальных общих модулей</li>
            <li>экспортируемыми переменными, процедурами и функциями модуля управляемого приложения.</li>
        </ul>
        <p>Рассмотрим подробнее, что собой представляет каждая из перечисленных составляющих.</p>
        <p><b>1. Локальный контекст модуля формы.</b></p>
        <p>Локальный контекст модуля формы – это переменные, процедуры и функции, объявленные в этом модуле. Например, внутри модуля формы можно непосредственно обращаться по имени к процедуре ПолучитьСумму(), объявленной в этом же модуле:</p>
        <div class="code-style">
            <pre>
                &НаКлиенте
                Процедура Команда1()
                    <span class="сс">ПолучитьСумму()</span>;
                КонецПроцедуры
    
                &НаСервереБезКонтекста
                Процедура <span class="сс">ПолучитьСумму()</span>
                    …
                КонецПроцедуры
            </pre>
        </div>
        <p>Или внутри модуля формы можно непосредственно обращаться по имени к переменной СлужебнаяПеременная, объявленной в этом модуле:</p>
        <div class="code-style">
            <pre>
                &НаКлиенте
                Перем <span class="сс">СлужебнаяПеременная</span>;
    
                &НаКлиенте
                Процедура Команда1()
                    <span class="сс">СлужебнаяПеременная</span> = 3;
                КонецПроцедуры
            </pre>
        </div>
        <p><b>2. Реквизиты формы, которой «принадлежит» модуль.</b></p>
        <p>Например, если у формы существует реквизит СлужебныйРеквизит, то к нему можно непосредственно обращаться по имени в модуле формы:</p>
        <div class="code-style">
            <pre>
                &НаКлиенте
                Процедура Команда1()
                    <span class="сс">СлужебныйРеквизит</span> = 3;
                КонецПроцедуры
            </pre>
        </div>
        <p><b>3. Свойства и методы объекта класса ФормаКлиенскогоПриложения.</b></p>
        <p>Свойства и методы объекта встроенного языка ФормаКлиенскогоПриложения описаны в синтакс-помощнике:  Интерфейс(управляемый) > ФормаКлиенскогоПриложения. К ним можно обращаться непосредственно по имени. Например, можно задать заголовок формы, а можно закрыть форму:</p>
        <div class="code-style">
            <pre>
                &НаКлиенте
                Процедура Команда1()
                    <span class="сс">Заголовок</span> = "Новый заголовок формы";
                КонецПроцедуры
    
                &НаКлиенте
                Процедура Команда2()
                    <span class="сс">Закрыть()</span>;
                КонецПроцедуры
            </pre>
        </div>
        <p><b>4. Свойства и методы расширения формы, определяемого типом того объекта, данные которого содержатся в основном реквизите формы.</b></p>
        <p>Один из реквизитов формы может быть основным, в списке реквизитов он выделяется жирным.</p>
        <img src="img/1С-1/2023-08-03_10-05-31.png" class="screen" alt="">
        <p>Как правило, основной реквизит формы содержит данные того объекта, который отображается в форме. Например, если это форма справочника, то основной реквизит будет содержать данные объекта СправочникОбъект.&lt;Имя справочника>. А если это форма документа, то основной реквизит формы будет содержать данные объекта ДокументОбъект.&lt;Имя документа></p>
        <p>Тут следует пояснить, почему в списке реквизитов тип основного реквизита указан в скобках: (ДокументОбъект.ПриходнаяНакладная. Дело в том, что это «ненастоящий» тип реквизита формы. Настоящий тип в данном случае будет ДанныеФормыСтруктура. Но ДанныеФормыСтруктура – это универсальный тип, который может содержать данные различных прикладных объектов. Поэтому, чтобы в редакторе формы можно было «ориентироваться», данные какого же именно прикладного объекта отображает эта форма, в колонке Тип редактора показывается не тип реквизита формы (ДанныеФормыСтруктура), а тип того объекта, данные которого содержатся в этом реквизите. И этот «ненастоящий» тип показывается в скобках.</p>
        <p>От типа объекта, данные которого содержатся в основном реквизите формы, зависят некоторые особенности в поведении формы. Например, если основной реквизит формы будет содержать данные документа, то при закрытии такой формы система будет запрашивать подтверждение записи и проведения этого документа. Если же основной реквизит формы будет содержать данные справочника, то подобного запроса подтверждения при закрытии формы возникать не будет. В зависимости от того, какой тип имеет объект, данные которого содержатся в основном реквизите, к контексту программного объекта ФормаКлиенскогоПриложения добавляется контекст соответствующего расширения.</p>
        <p>Например, если основной реквизит – СправочникОбъект.&lt;имя>, то в модуле формы становятся доступны свойства, методы объекта встроенного языка Расширение управляемой формы для справочника (синтакс-помощник – Интерфейс (управляемый) > Форма клиентского приложения > Расширение
        справочника). А если основной реквизит – ДинамическийСписок, то в модуле формы становятся доступны свойства, методы объекта встроенного языка Расширение управляемой формы для динамического списка (синтакс-помощник – Интерфейс (управляемый) > Форма клиентского приложения > Расширение динамического списка).</p>
        <p>Проще говоря в зависимости от объекта основного реквизита модуль формы расширяется дополнительными методами и свойствами.</p>
        <p>Таким образом, в модуле формы, где основной реквизит содержит данные документа, можно обратиться к свойству расширения управляемой формы для документа <i style="text-decoration:underline;">АвтоВремя</i>:</p>
        <div class="code-style">
            <pre>
                &НаКлиенте
                Процедура Команда1()
                    АвтоВремя = <span class="сс">РежимАвтоВремя.Первым</span>;
                КонецПроцедуры
            </pre>
        </div>
        <p>Или записать документ с помощью метода расширения управляемой формы для документа Записать():</p>
        <div class="code-style">
            <pre>
                &НаКлиенте
                Процедура Команда1()
                    <span class="сс">Записать(РежимЗаписиДокумента.Проведение)</span>;
                КонецПроцедуры
            </pre>
        </div>
        <p><b>5. Глобальный контекст, в том числе неглобальные общие модули и экспортируемые функции и процедуры глобальных общих модулей.</b></p>
        <p>В модуле формы можно:</p>
        <div class="code-style">
            <pre>
                //получить системную дату
                &НаКлиенте
                Процедура Команда1()
                    МояДата = <span class="сс">ТекущаяДата()</span>;
                КонецПроцедуры
    
                //или получить историю работы пользователя
                &НаКлиенте
                Процедура Команда1()
                    История = <span class="сс">ИсторияРаботыПользователя.Получить()</span>;
                КонецПроцедуры
            </pre>
        </div>
        <p>Если в глобальном общем модуле (например, ОбменДанными) определена экспортная процедура ПолучитьПрефиксНомера(), то в модуле формы можно обращаться к ней по имени.</p>
        <div class="code-style">
            <pre>
                //заметим, что обращение идёт без указания имени общего модуля
                &НаКлиенте
                Процедура Команда1(Префикс)
                    Префикс = <span class="сс"><b>ПолучитьПрефиксНомера()</b>;</span>
                КонецПроцедуры 
            </pre>
        </div>
        <p>Если такой общий модуль – неглобальный (например, РаботаСДокументами), то при обращении к процедуре ее имя нужно указывать через точку от имени модуля.</p>
        <div class="code-style">
            <pre>
                &НаКлиенте
                Процедура КоличествоПриИзменении(Элемент)
                    <span class="сс"><b>РаботаСДокументами.РассчитатьСумму(СтрокаТабличнойЧасти);</b></span>
                КонецПроцедуры
            </pre>
        </div>
        <p>Второй способ предпочтительнее, так как неглобальные общие модули компилируются по мере обращения к ним, а не при запуске системы, как глобальные. Естественно, при этом нужно обеспечивать согласованность того, как описана процедура в модуле формы (&НаКлиенте, &НаСервере и т.д.), и того, какие флажки проставлены у общего модуля (клиент (управляемое приложение), сервер и т.д.).</p>
        <p><b>6. Экспортируемые переменные, процедуры и функции модуля управляемого приложения.</b></p>
        <p>Если в модуле приложения определена экспортная процедура ТестовоеСообщение(), то в модуле формы можно обращаться к ней по имени.</p> 
        <div class="code-style">
            <pre>
                --модуль приложения
                Процедура <span class="сс">ТестовоеСообщение()</span> Экспорт
                    Сообщить("Тестовое сообщение");
                КонецПроцедуры
    
                --модуль формы
                &НаКлиенте
                Процедура Команда1()
                    <span class="сс">ТестовоеСообщение()</span>;
                КонецПроцедуры  
            </pre>
        </div>
        <p>По описанию модуль управляемого приложения предоставляет доступ к своим процедурам и функциям также как и глобальный общий модуль. В чём разница пока не знаю. экспортировать переменную можно так:</p>
        <div class="code-style">
            <pre>
                Перем МояПеременная Экспорт;
            </pre>
        </div>



        <p class="title-size16"><b id="work-forms-events">События формы и её элементов</b></p>
        <p><b id="work-forms-events-1">"ПриСозданииНаСервере", "ПриОткрытии", свойство формы "Параметры", "Ключевой параметр"</b></p>
        <p>Объясняет что такое ключевые параметры в этом видео - https://www.youtube.com/watch?v=WBGTR_ZjPBs&list=PLkdnTy1CsgR1phYcN8Ts1HD2AugrAVgRd&index=34.  СпецКурс 016.  с 35 минуты.</p>
        <p>Это событие наступает ещё до конструирования формы на стороне сервера. Процесс конвертации прикладного объекта в данные формы уже произошёл. В модуле формы доступен контекст всей формы, а значит в этом событии будет такое свойство как "Параметры". "Параметры" как и данные формы тоже имеет тип "ДанныеФормыСтруктура". Многие вещи в построении формы зависят от того, что есть в параметрах.</p>
        <p>Вот параметры на миг создания документа "РасходнаяНакладная". Я заранее в пользовательской части сделал отбор в форме списка этого вида документа и в параметрах мы видим свойство "ЗначениеЗаполнения". Это структура и в ней в ключе и значении то, что я отобрал.</p>
        <img src="img/1С-1/2023-09-26_13-06-13.png" class="screen" alt="">
        <p>Как только событие "ПриСозданииНаСервере" отработает, то свойство "Параметры" сильно обрезается и на клиента приходят только "ключевые параметры". Это можно увидеть в событии формы "ПриОткрытии":</p>
        <img src="img/1С-1/2023-09-26_13-28-55.png" class="screen" alt="">
        <p>Свойство "Ключ" пустое, потому что форма новая, если открыть существующую форму, то в ключе будет ссылка на объект. Что такое ключ? Когда форма конструируется на сервере, то система на основе одного или нескольких параметров определяет уникальность формы. Ссылка является уникальным распознователем каждого объекта, вот и ключ принимает это значение. На уникальность формы влияет не один ключевой параметр, а несколько. На картинке показаны 3 ключевых параметра, они от системы. Но к ним можно и свои добавить. В редакторе формы мы можем сделать свои ключевые параметры. Для этого рядом с реквизитами и командами есть вкладка "Параметры". Созданным нами ключеыой параметр будет жить, пока жива форма.</p>
        <p>Те 3 параметра, что система сама нам предоставила являются предопределёнными.</p>
        <p>Вот примерно такую схему нарисовал:</p>
        <img src="img/1С-1/2023-09-26_13-32-35.png" class="screen" alt="">
        <p>Как пользоваться ключом показано в следующей статье "Программно открываем формы".</p>



        <p class="title-size16"><b id="work-forms-prog-open-form">Программно открываем формы</b></p>
        <p>Для того, чтобы открыть форму какого то объекта конфигурации используется метод глобального контекста ОткрытьФорму(&lt;ИмяФормы>, &lt;Параметры>, &lt;Владелец>, &lt;Уникальность>, &lt;Окно>, &lt;НавигационнаяСсылка>, &lt;ОписаниеОповещенияОЗакрытии>, &lt;РежимОткрытияОкна>). Обязательный параметр только 1й. В тренировочной форме обработки создадим кнопку и в обработчике этой кнопки напишем глобальный метод открытия формы, при нажатии на кнопку в польз. режиме откроется указанная форма указанного объекта конфигурации. При поставке первой кавычки, когда начинаяю писать имя формы, нам будут вылетать подсказки, по подсказкам мы можем указать путь до нужной формы.</p>
        <p><span class="ск">Путь к спец ключам объектов: Интерфейс(управляемый) -> Форма клиентского приложения -> Расширение справочника -> Параметры формы.</span></p>
    
        <p><b>Открыть форму элемента справочника "Номенклатура"</b></p>
        <i class="i-h">Открытие основной формы нового объекта</i>
        <p>Для открытия формы элемента нужна форма с именем "ФормаОбъекта", откроется форма объекта, которая является основной. Если больше не передать никаких параметор, то откроется новый элемент справочника в форме:</p>
        <div class="code-style">
            <pre>
                <span class="сс">ОткрытьФорму<span class="ск">(</span><span class="серый">"Справочник.Номенклатура.ФормаОбъекта"</span><span class="ск">);</span></span>
            </pre>
        </div>
        <i class="i-h">Открытие произвольной формы нового объекта</i>
        <p>Чтобы открыть любую другую форму, не являющихся основными, то используется свойство "Форма", а потом имя существующей формы:</p>
        <div class="code-style">
            <pre>
                <span class="сс">ОткрытьФорму<span class="ск">(</span><span class="серый">"Справочник.Номенклатура.Форма.ИмяФормы"</span><span class="ск">);</span></span>
            </pre>
        </div>
        <i class="i-h">Открытие основной формы существующего объекта</i>
        <p>Чтобы открыть уже существующую форму элемента нужно уже передавать "ПараметрыФормы". Парметры формы это всегда структура, для каждого прикладного объекта и не только есть специальные ключи, по которым система понимает, что нужно делать. Вот для открытия существующего объекта нужно передать ключ с именем "Ключ", в значении которого должна быть ссылка на этот объект:</p>
        <div class="code-style">
            <pre>
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> ОткрытьФормуНоменклатуры<span class="ск">(</span>Команда<span class="ск">)</span>
                    СсылкаНаНоменклатуру <span class="ск">=</span> ПолучитьНоменклатуруПоКоду<span class="ск">(</span><span class="серый">"000000004"</span><span class="ск">);</span>
                    ПараметрыФормы <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Ключ"</span>, СсылкаНаНоменклатуру<span class="ск">);</span>
                    ОткрытьФорму<span class="ск">(</span><span class="серый">"Справочник.Номенклатура.ФормаОбъекта"</span>, ПараметрыФормы<span class="ск">);
                КонецПроцедуры </span>   
    
                <span class="ск">&НаСервере
                Функция</span> ПолучитьНоменклатуруПоКоду<span class="ск">(</span>Код<span class="ск">)</span>
                    <span class="ск">Возврат</span> Справочники<span class="ск">.</span>Номенклатура<span class="ск">.</span>НайтиПоКоду<span class="ск">(</span>Код<span class="ск">);
                КонецФункции</span></span>
            </pre>
        </div>
        <i class="i-h">Открытие копии основной формы существующего объекта</i>
        <p>Кроме ключа "Ключ" можно передать ключ "ЗначениеКопирования" и тогда при открытии формы с таким параметром формы, у нас откроется копия элемента справочника указанного в ссылке:</p>
        <div class="code-style">
            <pre>
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> ОткрытьФормуНоменклатуры<span class="ск">(</span>Команда<span class="ск">)</span>
                    СсылкаНаНоменклатуру <span class="ск">=</span> ПолучитьНоменклатуруПоКоду<span class="ск">(</span><span class="серый">"000000004"</span><span class="ск">);</span>
                    ПараметрыФормы <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"ЗначениеКопирования"</span>, СсылкаНаНоменклатуру<span class="ск">);</span>
                    ОткрытьФорму<span class="ск">(</span><span class="серый">"Справочник.Номенклатура.ФормаОбъекта"</span>, ПараметрыФормы<span class="ск">);
                КонецПроцедуры </span>   
    
                <span class="ск">&НаСервере
                Функция</span> ПолучитьНоменклатуруПоКоду<span class="ск">(</span>Код<span class="ск">)</span>
                    <span class="ск">Возврат</span> Справочники<span class="ск">.</span>Номенклатура<span class="ск">.</span>НайтиПоКоду<span class="ск">(</span>Код<span class="ск">);
                КонецФункции</span></span> 
            </pre>
        </div>
        <i class="i-h">Открытие основной формы объекта с заполнением полей</i>
        <p>Можно открыть форму справочника с заполнением некоторых полей:</p>
        <div class="code-style">
            <pre>
                <span class="сс">ЗначениеПолей <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Дата, ДатаОкончания"</span>, ДатаНачало, ДатаКонец<span class="ск">);</span>
                ПараметрыФормы <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"ЗначенияЗаполнения"</span>, ЗначениеПолей<span class="ск">);</span>
                ОткрытьФорму<span class="ск">(</span><span class="серый">"Документ.Запись.ФормаОбъекта"</span><span class="ск">,</span> ПараметрыФормы<span class="ск">);</span></span>
            </pre>
        </div>
    
        <p><b>Открыть форму списка справочника "Номенклатура"</b></p>
        <i class="i-h">Открытие основной формы списка справочника</i>
        <div class="code-style">
            <pre>
                <span class="сс">ОткрытьФорму<span class="ск">(</span><span class="серый">"Справочник.Номенклатура.ФормаСписка"</span><span class="ск">);</span></span>
            </pre>
        </div>
        <i class="i-h">Открытие основной формы списка с отбором по полю. Пример 1. Способ 1</i>
        <p>Форму списка можно открыть с уже отобранными объектами по заданному полю. Например, в справочнике Номенклатура есть реквизит "ВидНоменклатуры"(Товар или Услуги) и мы хотим открыть форму списка с отбором по "ВидНоменклатуры -> Товар". Для этого есть ключ "Отбор", но в значение мы должны такде передать структуру, в котрой будет имя поля и его значение:</p>
        <div class="code-style">
            <pre>
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> ОткрытьФормуСпискаСОтбором<span class="ск">(</span>Команда<span class="ск">)</span>
                    Отбор <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"ВидНоменклатуры"</span>, ПредопределенноеЗначение<span class="ск">(</span><span class="серый">"Перечисление.ВидыНоменклатуры.Товар"</span><span class="ск">));</span>
                    ПараметрыФормы <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Отбор"</span>, Отбор<span class="ск">);</span>
                    ОткрытьФорму<span class="ск">(</span><span class="серый">"Справочник.Номенклатура.ФормаСписка"</span>, ПараметрыФормы<span class="ск">);
                КонецПроцедуры </span></span>
            </pre>
        </div>
        <i class="i-h">Открытие основной формы списка с отбором по полю. Пример 2. Способ 1</i>
        <p>Ещё пример открытия формы списка(динамического списка) с отбором. Открываем регистр "Продажи" из формы документа с отбором по этому документу. В системе есть свой меанизм такого поведения, когда документ является регистратором для регистра, то в форме документа доступно возможность отобразить в панели навигации ссылку на регистр с отбором по этому документу. Вот делаем то же самое только своими силами:</p>
        <div class="code-style">
            <pre>
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> РегистрПродажи<span class="ск">(</span>Команда<span class="ск">)</span>
                    ДанныеОтбора <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Регистратор"</span><span class="ск">,</span> Объект<span class="ск">.</span>Ссылка<span class="ск">);</span>
                    ПараметрыФормы <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Отбор"</span><span class="ск">,</span> ДанныеОтбора<span class="ск">);</span>
    
                    ОткрытьФорму<span class="ск">(</span><span class="серый">"РегистрНакопления.Продажи.ФормаСписка"</span><span class="ск">,</span> ПараметрыФормы<span class="ск">);
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <i class="i-h">Открытие основной формы списка с отбором по полю. Пример 3. Способ 1</i>
        <p>Ещё пример. В форму элемента справочника "Контрагенты" добавим команду, по этой команде откроется список документов "ПриходнаяНакладная",в которых есть этот контрагент. Команда добавляется в подобъект "Команда" справочника.</p>
        <div class="code-style">
            <pre>
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> ДокументыКонтрагента<span class="ск">(</span>ПараметрКоманды<span class="ск">,</span> ПараметрыВыполненияКоманды<span class="ск">)</span>
                    ДанныеОтбора <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Контрагент"</span><span class="ск">,</span> ПараметрКоманды<span class="ск">);</span>
                    ПараметрыФормы <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Отбор"</span><span class="ск">,</span> ДанныеОтбора<span class="ск">);</span>
    
                    ОткрытьФорму<span class="ск">(</span><span class="серый">"Документ.ПриходнаяНакладная.ФормаСписка"</span><span class="ск">,</span> 
                            ПараметрыФормы<span class="ск">,</span>
                            ПараметрыВыполненияКоманды<span class="ск">.</span>Владелец<span class="ск">,</span>
                            ПараметрыВыполненияКоманды<span class="ск">.</span>Уникальность<span class="ск">,</span>
                            ПараметрыВыполненияКоманды<span class="ск">.</span>Окно<span class="ск">,</span>
                            ПараметрыВыполненияКоманды<span class="ск">.</span>НавигационнаяСсылка<span class="ск">);
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <p>Для всех примеров выше можно вот так схематично показать логику:</p>
        <img src="img/1С-1/2023-10-13_10-41-48.png" class="screen" alt="">
        <i class="i-h">Открытие основной формы списка с отбором по полю. Пример 1. Способ 2</i>
        <p>Тот же пример с элементом справочника "Контрагенты", только теперь мы в команде не будем передавать в параметре особенный ключ "Отбор", а передадим простой ключ с именем поля и его значением. Такие параметры тоже система передаёт и они доходят до создаваемой формы на сервере. Там на сервере при наступлении события формы списка обработаем этот параметр и сделает отбор из динамического списка. Отличие в чём, как я понял, в примере выше мы сразу передали поля для отбора и система когда делала запрос, то выбирала сразу отобранные объекты и формировала динамический список. Сейчас система не будет делать отбор при запросе, а выберет все объекты и сформирует динамический список. А уже при построении формы на сервере в обработчике события мы возмём поля из параметра, пришедшего с клиента, и произведём отбор списка.</p> 
        <p>Но обработать событие можно только со своей формой списка, потому что у нас же нет доступа к форме, которая система сама создаёт по умолчанию, поэтому делаем свою форму списка.</p>
        <p>Как по мне, на первый взгляд, это выглядит не бережно к мощностям сервера. Делается какая то двойная работа. Но пока я всего не знаю.</p>
        <div class="code-style">
            <pre>
                --модуль команды
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> ДокументыКонтрагента<span class="ск">(</span>ПараметрКоманды<span class="ск">,</span> ПараметрыВыполненияКоманды<span class="ск">)</span>
                    ПараметрыФормы <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Контрагент"</span><span class="ск">,</span> ПараметрКоманды<span class="ск">);</span>
    
                    ОткрытьФорму<span class="ск">(</span><span class="серый">"Документ.ПриходнаяНакладная.Форма.ФормаСпискаОтборЧерезПараметр"</span><span class="ск">,</span> 
                            ПараметрыФормы<span class="ск">,</span>
                            ПараметрыВыполненияКоманды<span class="ск">.</span>Владелец<span class="ск">,</span>
                            ПараметрыВыполненияКоманды<span class="ск">.</span>Уникальность<span class="ск">,</span>
                            ПараметрыВыполненияКоманды<span class="ск">.</span>Окно<span class="ск">,</span>
                            ПараметрыВыполненияКоманды<span class="ск">.</span>НавигационнаяСсылка<span class="ск">);
                КонецПроцедуры</span></span>
    
                --модуль формы списка "ФормаСпискаОтборЧерезПараметр"
                <span class="сс"><span class="ск">&НаСервере
                Процедура</span> ПриСозданииНаСервере<span class="ск">(</span>Отказ<span class="ск">,</span> СтандартнаяОбработка<span class="ск">)</span>
                    Список<span class="ск">.</span>Отбор<span class="ск">.</span>Элементы<span class="ск">.</span>Очистить<span class="ск">();</span>
                    ЭлементОтбора <span class="ск">=</span> Список<span class="ск">.</span>Отбор<span class="ск">.</span>Элементы<span class="ск">.</span>Добавить<span class="ск">(</span>Тип<span class="ск">(</span><span class="серый">"ЭлементОтбораКомпоновкиДанных"</span><span class="ск">));</span>
                    ЭлементОтбора<span class="ск">.</span>ЛевоеЗначение <span class="ск">= Новый</span> ПолеКомпоновкиДанных<span class="ск">(</span><span class="серый">"Контрагент"</span><span class="ск">);</span>
                    ЭлементОтбора<span class="ск">.</span>Использование <span class="ск">=</span> Истина<span class="ск">;</span>
                    ЭлементОтбора<span class="ск">.</span>ПравоеЗначение <span class="ск">=</span> Параметры<span class="ск">.</span>Контрагент<span class="ск">;	
                КонецПроцедуры</span> </span>              
            </pre>
        </div>
        <p>Вот схема:</p>
        <img src="img/1С-1/2023-10-13_11-02-32.png" class="screen" alt="">
    
        <p><b>Открыть форму выбора справочника "Номенклатура"</b></p>
        <div class="code-style">
            <pre>
                <span class="сс">ОткрытьФорму<span class="ск">(</span><span class="серый">"Справочник.Номенклатура.ФормаВыбора"</span><span class="ск">);</span></span>
            </pre>
        </div>
    
        <p><b>Вот ещё один из способов открыть форму</b>:</p>
        <div class="code-style">
            <pre>
                П = Новый Структура("Ключ", Поставщик);
                Форма = ПолучитьФорму("Справочник.Контрагенты.ФормаОбъекта", П);
                Форма.Открыть();
            </pre>
        </div>
        <p><span class="ск">Вот пример открытия формы</span> - <a href="#document25-1">тут</a></p>
    
        <p><b>Видео, где разные способы открытия форм списка</b> - https://www.youtube.com/watch?v=jOXBSQ6yGuk. Тут про разные способы отбора, про "Связи параметров выбора", "Параметры выбора".</p>




        <p class="title-size16"><b id="work-forms-prog-param-form">Передача параметров в форму</b></p>
        <p><b>Жизненный цикл параметров формы</b>.</p>
        <p>Все параметры, переданные в форму в миг её открытия видны только в процедуре "ПриСозданииНаСервере" одноимённого события формы. После создания все параметры уничтожаются и более не доступны в форме. Исключение составляют параметры, которые в редакторе формы объявлены с признаком "Ключевой параметр". Такой параметр будет существовать до тех пор, пока существует сама форма.</p>
        <p>Ключевые параметры определяют уникальность окна. В обычных формах был такой атрибут «Ключ уникальности». Если запрашивалась форма, то она сначала искалась в уже открытых. Ключ уникальности позволял варьировать условия при которых создавалась новая форма или возвращалась существующая. Ту же самую роль играют ключевые параметры. Если метод «ОткрытьФорму» вызван два раза подряд с одним и тем же значением ключевого параметра, то второй вызов не откроет новое окно, а активирует существующее.</p>
        <p>Вот ссылка на статью, где хорошо рассказывается про жизненный цикл открытия и записи данных в форму - https://infostart.ru/1c/articles/198766/</p>
    
        <p><b>Свойство реквизита "Параметры выбора"</b></p>
        <p>Есть свойство "Связи параметров выбора", тут динамически передаются поля со значения для отбора списка формы выбора(пользователь какое выбрал значение, то и передаётся), а вот свойство "Параметры выбора" это закреплённое поле со значением для отбора, в нём мы в конфигураторе задали поле со значением, оно и будет передаваться и изменить его можно только из конфигуратора. Закреплённое поля со значением можно передать либо в свойстве "Параметры выбора", либо программно написать тот же механизм. Будет писать программно. Если посмотреть в синтакс помощнике свойство "ПараметрыВыбора", то там найдём пример, как отправлять параметр в фиксированном массиве.</p>
        <p>Код будем показывать на примере документа, в котором есть поле ввода "Контрагент" и мы хотим при выборе контрагента, чтобы открывалась форма выбора с уже отобранными контрагентами по полю "Телефон". Будем использовать событие "НачалоВыбора" поля "Контрагент":</p>
        <div class="code-style">
            <pre>
                --модуль формы документа
    
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> КонтрагентНачалоВыбора<span class="ск">(</span>Элемент<span class="ск">,</span> ДанныеВыбора<span class="ск">,</span> СтандартнаяОбработка<span class="ск">)</span>
                    НовыйПараметр <span class="ск">= Новый</span> ПараметрВыбора<span class="ск">(</span><span class="серый">"Отбор.Телефон"</span><span class="ск">,</span> <span class="серый">"+7(918)123-45-67"</span><span class="ск">);</span>
                    НовыйМассив <span class="ск">= Новый</span> Массив<span class="ск">();</span>
                    НовыйМассив<span class="ск">.</span>Добавить<span class="ск">(</span>НовыйПараметр<span class="ск">);</span>
                    НовыеПараметры <span class="ск">= Новый</span> ФиксированныйМассив<span class="ск">(</span>НовыйМассив<span class="ск">);</span>
                    Элементы<span class="ск">.</span>Контрагент<span class="ск">.</span>ПараметрыВыбора <span class="ск">=</span> НовыеПараметры<span class="ск">;	
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <p>Теперь при открытии формы выбора из поля "Контрагент", откроется эта форма с отобранными контрагентами по полю "Телефон" со значением "+7(918)123-45-67". Почему мы запаковываем в массив, а потом массив в фиксированный массив, я пока не знаю. Читал, что фиксированные массивы спокойно сериализуются и передаются на сервер.</p>
        <p>Этот же пример можно сделать и по другому:</p>
        <div class="code-style">
            <pre>
                --модуль формы документа
    
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> КонтрагентНачалоВыбора<span class="ск">(</span>Элемент<span class="ск">,</span> ДанныеВыбора<span class="ск">,</span> СтандартнаяОбработка<span class="ск">)</span>
                    СтандартнаяОбработка <span class="ск">=</span> Ложь<span class="ск">;</span>
                    ПараметрыОтбора <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Телефон"</span><span class="ск">,</span> <span class="серый">"+7(918)765-43-21"</span><span class="ск">);</span>
                    ПараметрыФормы <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Отбор"</span><span class="ск">,</span> ПараметрыОтбора<span class="ск">);</span>
                    ОткрытьФорму<span class="ск">(</span><span class="серый">"Справочник.Контрагенты.ФормаВыбора"</span><span class="ск">,</span> ПараметрыФормы<span class="ск">);
                КонецПроцедуры</span></span></span>
            </pre>
        </div>
        <p>Во втором примере итог такой же. Тут как видно нет никакой запаковки в фиксированный массив, может метод ОткрытьФорму() сам это делает?</p>
        <p>По поводу свойства "Параметры выбора" в начале не совсем верно сказа, что тут может быть только закреплённый параметр. Можно сделать и динамический. Например, в элементе справочника "Контрагенты" есть поле ввода "ДокументыКонтрагента". Мы хотим, чтобы открылась форма выбора с документами какого то вида с отбором по текущему контрагенту. Тогда в коде просто указываем поле "Отбор.Контрагент" и в значении "Объект.Ссылка". Тогда =-098получится, что мы можем открыть любой элемент контрагента и отбор произойдёт по нему, что придаёт динамику.ш</p>
    
        <p>Вот пример передачи параметров в форму для открытия формы - <a href="#document25-1">тут</a></p>
        <p>Ещё примеры передачи параметров в статье выше - <a href="#work-forms-prog-open-form">тут</a></p>




        <p class="title-size16"><b id="work-forms-prog-graf-open-form">Графическая схема открытия формы объекта из формы списка</b></p>
        <img src="img/1С-1/2023-10-11_09-03-52.png" class="screen" alt="">





        <p class="title-size16"><b id="work-forms-prog-graf-write-form">Графическая схема записи элемента справочника в ИБ</b></p>
        <img src="img/1С-1/2023-10-11_09-07-16.png" class="screen" alt="">  




        <p class="title-size16"><b id="work-forms-prog-form">Форма как программный объект</b></p>
        <p>Помимо того что форма внутри своего модуля предоставляет доступ к различным частям конфигурации, она также доступна из других частей конфигурации как программный объект.</p>
        <p>При этом помимо стандартных свойств и методов объекта встроенного языка ФормаКлиенскогоПриложения у нее могут существовать и другие свойства и методы, определенные разработчиком.</p>
        <p>Например, если в модуле формы ФормаДокумента документа ПриходнаяНакладная описана экспортируемая процедура ПроверочнаяПроцедура(), то может быть использован следующий вызов этой процедуры:</p>
        <div class="code-style">
            <pre>
                --модуль формы
                <span class="сс">&НаКлиенте
                Процедура ПроверочнаяПроцедура() Экспорт
                    Сообщить(<span class="серый">"Я из модуля формы"</span>);
                КонецПроцедуры</span>
    
                --модуль приложения
                <span class="сс">Процедура ПриНачалеРаботыСистемы()
                    Форма = ПолучитьФорму(<span class="серый">"Документ.ПриходнаяНакладная.Форма.ФормаДокумента"</span>);
                    Форма.ПроверочнаяПроцедура();
                КонецПроцедцры</span>    
    
                <span class="з">//при запуске системы мы увидим сообщение - "Я из модуля формы"</span>
            </pre>
        </div>





        <p class="title-size16"><b id="work-forms-select1">Как убрать отображение папок в форме выбора</b></p>
        <p>Нужно создать формы выбора, выбрать в элементах "Список" и в свойстве "Отображение" выбрать просто "список".</p>




        <p class="title-size16"><b id="work-forms-in1">Как программно установить фокус полю формы</b></p>
        <p>У объекта формы есть свойство <b>ТекущийЭлемент</b>, в которое и присваиваем то поле формы, которое и хотим сделать активным:</p>
        <div class="code-style">
            <pre>
                --модуль формы
    
                ...
                ЭтаФорма.ТекущийЭлемент = [ЭлементыФормы].[Полеформы];
            </pre>
        </div>
    
        <p class="title-size16"><b id="work-forms-in2">Как программно создать элемент формы, реквизит формы и команд формы</b></p>
        <p>Есть определенные ситуации, когда без программного формирования элементов формы не обойтись:</p>
        <ol class="list">
            <li>Заранее неизвестно какое количество элементов необходимо разместить на форме (Примеры: Система тестирования, где при формирование тестового задания заранее неизвестно сколько будет вопросов или документ корректировки регистров, когда так же заранее не известно какие колонки будут у таблицы формы).</li>
            <li>Доработка типового функционала. Программное размещение элементов впоследствии упрощает обновление типовых конфигураций. Многие разработчики даже придерживаются данного правила при работе с «расширениями».</li>
        </ol>
        <p>Создание элементов, реквизитов и команд лучше производить в процедуре "ПриСозданииНаСервере".</p>
        <p>Есть два варианта размещения элементов на форме – "добавить" и "вставить".</p>
        <div class="code-style">
            <pre>
                <span class="сс">ЭтаФорма<span class="ск">.</span>Элементы<span class="ск">.</span>Добавить<span class="ск">(</span><span class="серый">[Название нового элемента]</span><span class="ск">,</span> <span class="серый">[Тип элемента]</span><span class="ск">,</span> <span class="серый">[Элемент-родитель]</span><span class="ск">)</span></span> – элемент будет добавлен на размещаемый элемент-родитель в конец списка.
    
                //И
    
                <span class="сс">ЭтаФорма<span class="ск">.</span>Элементы<span class="ск">.</span>Вставить<span class="ск">(</span><span class="серый">[Название нового элемента]</span><span class="ск">,</span> <span class="серый">[Тип элемента]</span><span class="ск">,</span> <span class="серый">[Элемент-родитель]</span><span class="ск">,</span> <span class="серый">[Последующий элемент]</span><span class="ск">)</span></span> - элемент будет добавлен на размещаемый элемент-родитель и вставлен перед желаемым элементом.
            </pre>
        </div>
        <p>После создания элемента, мы можем определить ему свойства. Свойства практически всегда совпадают с названиями на панели свойств элемента.</p>
        <p><span class="сс">Группа – Тип("ГруппаФормы")</span></p>
        <p>Элементы формы, которые можно создать с типом «ГруппаФормы»:</p>
        <ul class="list">
            <li>ГруппаКнопок</li>
            <li>ГруппаКолонок</li>
            <li>КоманднаяПанель</li>
            <li>КонтекстноеМеню</li>
            <li>ОбычнаяГруппа</li>
            <li>Подменю</li>
            <li>Страницы</li>
            <li>Страница</li>
        </ul>
        <div class="code-style">
            <pre>
                <span class="з">//группы</span>
    
                <span class="з">//пример создания обычной группы без </span>отображения
                ГруппаДатаНомер = ЭтаФорма.Элементы.Добавить("ГруппаОбычная", Тип("ГруппаФормы"), ЭтаФорма);
                ГруппаДатаНомер.Вид = ВидГруппыФормы.ОбычнаяГруппа;
                ГруппаДатаНомер.Отображение = ОтображениеОбычнойГруппы.Нет;
                ГруппаДатаНомер.Отображатьзаголовок = Ложь;
                ГруппаДатаНомер.Группировка = ГруппировкаПодчиненныхЭлементовФормы.ГоризонтальнаяВсегда;
    
                <span class="з">//пример создания обычной формы</span>
                ГруппаШапка = ЭтаФорма.Элементы.Добавить("ГруппаШапка", Тип("ГруппаФормы"), ЭтаФорма);
                ГруппаШапка.Вид = ВидГруппыФормы.ОбычнаяГруппа;
                ГруппаШапка.Заголовок = "Основновные реквизиты";
                ГруппаШапка.Отображение = ОтображениеОбычнойГруппы.ОбычноеВыделение;
                ГруппаШапка.Отображатьзаголовок = Истина;
                ГруппаШапка.Группировка = ГруппировкаПодчиненныхЭлементовФормы.Вертикальная;
                ГруппаШапка.РастягиватьПоГоризонтали = Истина;
    
                <span class="з">//пример создания группы страниц</span>
                ГруппаСтраниц = ЭтаФорма.Элементы.Добавить("ГруппаСтраницы", Тип("ГруппаФормы"),ЭтаФорма);
                ГруппаСтраниц.Вид = ВидГруппыФормы.Страницы;
                ГруппаСтраниц.ОтображениеСтраниц = ОтображениеСтраницФормы.ЗакладкиСверху;
                ГруппаСтраниц.РастягиватьПоГоризонтали = Истина;
    
                <span class="з">//пример создания страниц</span>
    
                СтраницаТовары = ЭтаФорма.Элементы.Добавить("СтраницаТовары", Тип("ГруппаФормы"),ГруппаСтраниц);
                СтраницаТовары.Вид = ВидГруппыФормы.Страница;
                СтраницаТовары.Заголовок = "Товары";
                
                СтраницаДополнительно = ЭтаФорма.Элементы.Добавить("СтраницаДополнительно", Тип("ГруппаФормы"),ГруппаСтраниц);
                СтраницаДополнительно.Вид = ВидГруппыФормы.Страница;
                СтраницаДополнительно.Заголовок = "Дополнительно";
            </pre>
        </div>
        <p><span class="сс">Поле – Тип("ПолеФормы")</span></p>
        <p>Для работы элемента формы "Поле" необходимо наличие источника данных - реквизита. Если необходимого реквизита нет, его нужно предварительно создать.</p>
        <p>Элементы формы, которые можно создать с типом "ПолеФормы":</p>
        <ul class="list">
            <li>ПолеHTMLДокумента</li>
            <li>ПолеВвода</li>
            <li>ПолеГеографическойСхемы</li>
            <li>ПолеГрафическойСхемы</li>
            <li>ПолеДендрограммы</li>
            <li>ПолеДиаграммы</li>
            <li>ПолеДиаграммыГанта</li>
            <li>ПолеИндикатор</li>
            <li>ПолеКалендарь</li>
            <li>ПолеКартинки</li>
            <li>ПолеНадписи</li>
            <li>ПолеПереключателя</li>
            <li>ПолеПланировщика</li>
            <li>ПолеПолосыРегулирования</li>
            <li>ПолеТабличногоДокумента</li>
            <li>ПолеТекстовогоДокумента</li>
            <li>ПолеФлажок</li>
            <li>ПолеФорматированногоДокумента</li>
        </ul>

        <p><b>Создание реквизита формы</b></p>
        <p>При создании важно понимать, что указывается не "тип", а "описание типов" и для часто используемых типов: "строка", "число" и "дата", необходимо указывать квалификатор. Рассмотрим на примере ниже.</p>
        <div class="code-style">
            <pre>
                <span class="сс"><span class="з">// Создать реквизиты можно только на сервере</span>
                ДобавляемыеРеквизиты = Новый Массив; //Определяем массив добавляемых реквизитов
    
                НовыйРеквизит = Новый РеквизитФормы(<span class="с">"Комментарий"</span>,Новый ОписаниеТипов(<span class="с">"Строка"</span>,,Новый КвалификаторыСтроки(500))); 
                ДобавляемыеРеквизиты.Добавить(НовыйРеквизит); 
    
                НовыйРеквизит = Новый РеквизитФормы(<span class="с">"Номер"</span>,Новый ОписаниеТипов(<span class="с">"Число"</span>,Новый КвалификаторыЧисла(10,0))); 
                ДобавляемыеРеквизиты.Добавить(НовыйРеквизит);
    
                НовыйРеквизит = Новый РеквизитФормы(<span class="с">"Дата"</span>,Новый ОписаниеТипов(<span class="с">"Дата"</span>,,,Новый КвалификаторыДаты(ЧастиДаты.ДатаВремя))); 
                ДобавляемыеРеквизиты.Добавить(НовыйРеквизит);
    
                НовыйРеквизит = Новый РеквизитФормы(<span class="с">"Наименование"</span>,Новый ОписаниеТипов(<span class="с">"Строка"</span>,,Новый КвалификаторыСтроки(150))); 
                ДобавляемыеРеквизиты.Добавить(НовыйРеквизит);
    
                НовыйРеквизит = Новый РеквизитФормы(<span class="с">"ПометкаУдаления"</span>,Новый ОписаниеТипов(<span class="с">"Булево"</span>)); 
                ДобавляемыеРеквизиты.Добавить(НовыйРеквизит);
    
                <span class="з">//применяем реквизиты</span>
                ЭтаФорма.ИзменитьРеквизиты(ДобавляемыеРеквизиты);</span>


                -- пример добавления реквизитов по кнопке. Чтобы увидеть добавляемые реквизиты можно
                -- в отладчике посмотреть на содержимое формы и увидеть там добаленные реквизиты
                -- если хотим не по кнопке добавлять, то добавляем в событии "ПриСозданииНаСервере"
                <span class="сс"><span class="ск">&НаСервере</span>
                Процедура СоздатьРеквизитыНаСервере()
                    
                    ТипСтрока = <span class="ск">Новый</span> ОписаниеТипов(<span class="с">"Строка"</span>);
                    ТипНоменклатура = <span class="ск">Новый</span> ОписаниеТипов(<span class="с">"СправочникСсылка.Номенклатура"</span>);
                    ТипЧисло = <span class="ск">Новый</span> ОписаниеТипов(<span class="с">"Число"</span>);
                    
                    <span class="з">//1. Создать объект "РеквизитФормы"</span>
                    РеквизитТекст = <span class="ск">Новый</span> РеквизитФормы(<span class="с">"ТекстСообщения"</span>, ТипСтрока);
                    РеквизитНоменклатура = <span class="ск">Новый</span> РеквизитФормы(<span class="с">"Номенклатура"</span>, ТипНоменклатура);
                    РеквизитКоличество = <span class="ск">Новый</span> РеквизитФормы(<span class="с">"Количество"</span>, ТипЧисло);
                    РеквизитЦена = <span class="ск">Новый</span> РеквизитФормы(<span class="с">"Цена"</span>, ТипЧисло);
                    
                    <span class="з">//2. Создать массив добавляемых реквизитов</span>
                    ДобавляемыеРеквизиты = <span class="ск">Новый</span> Массив;
                    ДобавляемыеРеквизиты.Добавить(РеквизитТекст);
                    ДобавляемыеРеквизиты.Добавить(РеквизитНоменклатура);
                    ДобавляемыеРеквизиты.Добавить(РеквизитКоличество);
                    ДобавляемыеРеквизиты.Добавить(РеквизитЦена);
                    
                    <span class="з">//3. Вызвать метод объекта "ФормаКлиентскогоПриложения" - ИзменитьРеквизиты()</span>
                    ИзменитьРеквизиты(ДобавляемыеРеквизиты);
                    
                КонецПроцедуры

                <span class="ск">&НаКлиенте</span>
                Процедура СоздатьРеквизиты(Команда)
                    СоздатьРеквизитыНаСервере();
                КонецПроцедуры</span>
            </pre>
        </div>

        <p><b>Создание элементов с типом "ПолеФормы"</b></p>
        <p>При создании поля указываем  тип "ПолеФормы", принцип мало чем отличается от создания группы:</p>
        <div class="code-style">
            <pre>
                <span class="з">//Создание полей. Элементы формы можно создавать только на сервере</span>
        
                <span class="сс">НовыйЭлемент = ЭтаФорма.Элементы.Добавить(<span class="с">"Номер"</span>, Тип(<span class="с">"ПолеФормы"</span>),ГруппаДатаНомер);
                НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
                НовыйЭлемент.ПутьКДанным = <span class="с">"Номер"</span>;
            
                НовыйЭлемент = ЭтаФорма.Элементы.Добавить(<span class="с">"Дата"</span>, Тип(<span class="с">"ПолеФормы"</span>),ГруппаДатаНомер);
                НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
                НовыйЭлемент.ПутьКДанным = <span class="с">"Дата"</span>;
                
                НовыйЭлемент = ЭтаФорма.Элементы.Добавить(<span class="с">"Наименование"</span>, Тип(<span class="с">"ПолеФормы"</span>),ГруппаШапка);
                НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
                НовыйЭлемент.ПутьКДанным = <span class="с">"Наименование"</span>;
                
                НовыйЭлемент = ЭтаФорма.Элементы.Добавить(<span class="с">"Комментарий"</span>, Тип(<span class="с">"ПолеФормы"</span>),СтраницаДополнительно);
                НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
                НовыйЭлемент.ПутьКДанным = <span class="с">"Комментарий"</span>;
                
                НовыйЭлемент = ЭтаФорма.Элементы.Добавить(<span class="с">"ПометкаУдаления"</span>, Тип(<span class="с">"ПолеФормы"</span>),СтраницаДополнительно);
                НовыйЭлемент.Вид = ВидПоляФормы.ПолеФлажка;
                НовыйЭлемент.ПутьКДанным = <span class="с">"ПометкаУдаления"</span>;</span>
                
                
                -- пример для отображения реквизитов созданных в примере выше, где создаются реквизиты
                <span class="сс"><span class="ск">&НаКлиенте</span>
                Процедура СоздатьВсеЭлементы(Команда)
                    СоздатьВсеЭлементыНаСервере();
                КонецПроцедуры

                <span class="ск">&НаСервере</span>
                Процедура СоздатьВсеЭлементыНаСервере()
                    // проверки при создании элементов для того, чтобы при повторном нажатии не вылетало
                    // ошибки, что элементы такие уже есть    

                    Если Элементы.Найти(<span class="с">"ТекстСообщения"</span>) = Неопределено Тогда
                        НовыйЭлемент = Элементы.Добавить(<span class="с">"ТекстСообщения"</span>, Тип(<span class="с">"ПолеФормы"</span>), Элементы.ГруппаПраво);
                        НовыйЭлемент.ПутьКДанным = <span class="с">"ТекстСообщения"</span>;
                        НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
                    КонецЕсли; 
                    
                    Если Элементы.Найти(<span class="с">"Номенклатура"</span>) = Неопределено Тогда
                        НовыйЭлемент = Элементы.Добавить(<span class="с">"Номенклатура"</span>, Тип(<span class="с">"ПолеФормы"</span>), Элементы.ГруппаПраво);
                        НовыйЭлемент.ПутьКДанным = <span class="с">"Номенклатура"</span>;
                        НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
                    КонецЕсли; 
                    
                    Если Элементы.Найти(<span class="с">"Количество"</span>) = Неопределено Тогда
                        НовыйЭлемент = Элементы.Добавить(<span class="с">"Количество"</span>, Тип(<span class="с">"ПолеФормы"</span>), Элементы.ГруппаПраво);
                        НовыйЭлемент.ПутьКДанным = <span class="с">"Количество"</span>;
                        НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
                    КонецЕсли; 
                    
                    Если Элементы.Найти(<span class="с">"Цена"</span>) = Неопределено Тогда
                        НовыйЭлемент = Элементы.Добавить(<span class="с">"Цена"</span>, Тип(<span class="с">"ПолеФормы"</span>), Элементы.ГруппаПраво);
                        НовыйЭлемент.ПутьКДанным = <span class="с">"Цена"</span>;
                        НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;
                    КонецЕсли; 

                КонецПроцедуры</span>
            </pre>
        </div>

        <p><b>Создание элемента формы с видом "ПолеФлажок", привязывается к реквизиту с типом "булево". Реквизит уже есть. Просто программно создаём элемент и привязваемся к нему.</b></p>
        <div class="code-style">
            <pre>
                <span class="сс">&НаКлиенте
                Процедура СоздатьПолеФлажка(Команда)
                    СоздатьПолеФлажкаНаСервере();
                КонецПроцедуры

                &НаСервере
                Процедура СоздатьПолеФлажкаНаСервере()
                    
                    НовыйЭлемент = Элементы.Добавить(<span class="с">"Реквизит_Согласован"</span>, Тип(<span class="с">"ПолеФормы"</span>), Элементы.ГруппаПраво);
                    НовыйЭлемент.ПутьКДанным = <span class="с">"Реквизит_Согласован"</span>;
                    НовыйЭлемент.Вид = ВидПоляФормы.ПолеФлажка;
                    НовыйЭлемент.ПоложениеЗаголовка = ПоложениеЗаголовкаЭлементаФормы.Право;
                    НовыйЭлемент.ВидФлажка = ВидФлажка.Выключатель; 
                    
                КонецПроцедуры</span>
            </pre>
        </div>

        <p><b>Создание элемента формы с видом "ПолеКалендарь", привязывается к реквизиту с типом "дата". Реквизит уже есть. Просто программно создаём элемент и привязваемся к нему.</b></p>
        <div class="code-style">
            <pre>
                <span class="сс">&НаКлиенте
                Процедура СоздатьПолеКалендаря(Команда)
                    СоздатьПолеКалендаряНаСервере();
                КонецПроцедуры

                &НаСервере
                Процедура СоздатьПолеКалендаряНаСервере()
                    
                    Реквизит_ДатаДоставки = ТекущаяДата();
                    
                    НовыйЭлемент = Элементы.Добавить(<span class="с">"Реквизит_ДатаДоставки"</span>, Тип(<span class="с">"ПолеФормы"</span>), Элементы.ГруппаПраво);
                    НовыйЭлемент.ПутьКДанным = <span class="с">"Реквизит_ДатаДоставки"</span>;
                    НовыйЭлемент.Вид = ВидПоляФормы.ПолеКалендаря;
                    НовыйЭлемент.ОтображатьПанельМесяцев = Истина;
                    НовыйЭлемент.НачалоПериодаОтображения = НачалоМесяца(ТекущаяДата());
                    НовыйЭлемент.КонецПериодаОтображения = КонецМесяца(ТекущаяДата());
                    
                КонецПроцедуры</span>
            </pre>
        </div>

        <p><b>Создание элемента формы с видом "ПолеПереключателя", привязывать будем к реквизиту с типом "ПеречислениеСсылка". Реквизит уже есть. Просто программно создаём элемент и привязваемся к нему.</b></p>
        <div class="code-style">
            <pre>
                <span class="сс">&НаКлиенте
                Процедура СоздатьПолеПереключателя(Команда)
                    СоздатьПолеПереключателяНаСервере();
                КонецПроцедуры

                &НаСервере
                Процедура СоздатьПолеПереключателяНаСервере()
                    
                    НовыйЭлемент = Элементы.Добавить(<span class="с">"Реквизит_ВидыДнейКалендаря"</span>, Тип(<span class="с">"ПолеФормы"</span>), Элементы.ГруппаПраво);
                    НовыйЭлемент.ПутьКДанным = <span class="с">"Реквизит_ВидыДнейКалендаря"</span>;
                    НовыйЭлемент.Вид = ВидПоляФормы.ПолеПереключателя;
                    НовыйЭлемент.СписокВыбора.Добавить(Перечисления.ВидыДнейКалендаря.Рабочий);
                    НовыйЭлемент.СписокВыбора.Добавить(Перечисления.ВидыДнейКалендаря.Предпраздничный);
                    НовыйЭлемент.СписокВыбора.Добавить(Перечисления.ВидыДнейКалендаря.Праздник);
                    НовыйЭлемент.СписокВыбора.Добавить(Перечисления.ВидыДнейКалендаря.Суббота);
                    НовыйЭлемент.СписокВыбора.Добавить(Перечисления.ВидыДнейКалендаря.Воскресенье);
                    
                    НовыйЭлемент.ВидПереключателя = ВидПереключателя.Тумблер;
                    
                КонецПроцедуры</span>
            </pre>
        </div>

        <p><b>Чтобы программно заполнить значением программно созданный реквизит, нужно к нему обратиться через форму</b></p>
        <div class="code-style">
            <pre>
                ЭтотОбъект.ИмяРеквизита = "значение";
                ЭтотОбъект["ИмяРеквизита"] = "значение";
                // вот так не сработает
                ИмяРеквизита = "значение";
            </pre>
        </div>

        <p><b>Ещё пример, нужно показать на форме реквизиты, которые уже есть в самом справочнике "Контрагенты", нам нужно программно создать группу и элементы, которые разместим в этой группе. Также нужно группу расместить в определённом месте формы</b></p>
        <div class="code-style">
            <pre>
                <span class="сс">&НаСервере
                Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
                    ОбновитьСвойстваЭлементовФормы();
                    
                    <span class="з">//1. создание группы</span>
                    ЭлементГруппа = Элементы.Добавить(<span class="с">"ГруппаНовыеРеквизиты"</span>, Тип(<span class="с">"ГруппаФормы"</span>));
                    ЭлементГруппа.Вид = ВидГруппыФормы.ОбычнаяГруппа;
                    ЭлементГруппа.ОтображатьЗаголовок = Ложь;
                    ЭлементГруппа.Группировка = ГруппировкаПодчиненныхЭлементовФормы.ГоризонтальнаяВсегда;
                    
                    <span class="з">//2. создание элемента "Страна регистрации" внутри группы</span>
                    ЭлементСтрана = Элементы.Добавить(<span class="с">"СтранаРегистрации"</span>, Тип(<span class="с">"ПолеФормы"</span>), ЭлементГруппа);
                    ЭлементСтрана.ПутьКДанным = <span class="с">"Объект.СтранаРегистрации"</span>;
                    ЭлементСтрана.Вид = ВидПоляФормы.ПолеВвода;
                    
                    <span class="з">//3. создание элемента "КПП" внутри группы</span>
                    ЭлементКПП = Элементы.Добавить(<span class="с">"КПП"</span>, Тип(<span class="с">"ПолеФормы"</span>), ЭлементГруппа);
                    ЭлементКПП.ПутьКДанным = <span class="с">"Объект.КПП"</span>;
                    ЭлементКПП.Вид = ВидПоляФормы.ПолеВвода;
                    
                    <span class="з">//4. перемещение группы в нужное место на форме</span>
                    Элементы.Переместить(ЭлементГруппа, ЭтотОбъект, Элементы.ОсновнойДоговор);
                КонецПроцедуры</span>
            </pre>
        </div>

        <p><span class="сс">Декорация - Тип("ДекорацияФормы")</span></p>
        <p>Обе существующие декорации имеют один тип, но разный вид.</p>
        <p><b>Декорация "Надпись"</b></p>
        <div class="code-style">
            <pre>
                <span class="з">//Декорация надпись</span>
                НовыйЭлемент = ЭтаФорма.Элементы.Добавить("ЗаголовокТовара", Тип("ДекорацияФормы"),СтраницаТовары);
                НовыйЭлемент.Вид = ВидДекорацииФормы.Надпись;
                НовыйЭлемент.Заголовок = "Глобус";
            </pre>
        </div>

        <p><b>Декорация "Картинка"</b></p>
        <div class="code-style">
            <pre>
                <span class="з">//Декорация картинка</span>
                НовыйЭлемент = ЭтаФорма.Элементы.Добавить("КартинкаТовара", Тип("ДекорацияФормы"),СтраницаТовары);
                НовыйЭлемент.Вид = ВидДекорацииФормы.Картинка;
                НовыйЭлемент.Картинка = БиблиотекаКартинок.ГеографическаяСхема;
                НовыйЭлемент.РазмерКартинки = РазмерКартинки.Растянуть;
                НовыйЭлемент.Ширина = 20;
                НовыйЭлемент.Высота = 8;    
            </pre>
        </div>

        <p><span class="сс">Кнопка – Тип("КнопкаФормы")</span></p>
        <p>Для работы кнопок, необходимо наличие команды. Если на форме нет определенной команды, то её необходимо создать программно.</p>
        <p><b>Создание команды</b></p>
        <p>Важно, для работы команды должно быть определено действие. Действие - это основная процедура команды, программно его создать не получится.</p>
        <p>Пример заранее описанного общего действия для всех команд:</p>
        <div class="code-style">
            <pre>
                &НаКлиенте
                Процедура ОбщееДействие(Команда)
                    
                    ШифрКоманды = ПолучитьШифрКоманды(ТекущийЭлемент.Имя);
                    
                    Если ШифрКоманды = 1 Тогда
                        Сообщить("Привет, мир!");	
                    ИначеЕсли ШифрКоманды = 2 Тогда
                        Сообщить(Строка(ЭтотОбъект.Номер + ЭтотОбъект.Номер));
                    ИначеЕсли ШифрКоманды = 3 Тогда
                        Сообщить(Формат(ТекущаяДата(),"ДЛФ=DDT"));
                    КонецЕсли;
                        
                КонецПроцедуры
    
                &НаКлиенте
                Функция ПолучитьШифрКоманды(ИмяКнопки)
                    Возврат Число(СтрЗаменить(ИмяКнопки,"Кнопка",""));
                КонецФункции
            </pre>
        </div>
        <p>Пример создания команды формы и кнопки в элементах формы указывающей на эту команду</p>
        <div class="code-style">
            <pre>
                <span class="з">//далее создадим программно команду формы </span> 
                ИмяКоманды = "IS_ЗаполнитьПоИНН";
                Команда = ЭтаФорма.Команды.Добавить(ИмяКоманды);
                <span class="з">//зададим имя процедуры, которая выполнится по нажатию на эту команду</span>
                Команда.Действие = ИмяКоманды;
                <span class="з">//команды изменяет данные карточки контрагента, поэтому установим 
                //свойство "ИзменяетСохраняемыеДанные" в Истина, чтобы появилась
                //"звёздочка" рядом с именем контрагента, что сигнализирует об изменении
                //данных и что их нужно сохранить</span>
                Команда.ИзменяетСохраняемыеДанные = Истина;
                <span class="з">//заполним заголовок команды, это так будет подписана кнопка для пользователя.</span>
                Команда.Заголовок = "Заполнить по ИНН";     
            </pre>
        </div>
        <p><b>Создание кнопок</b></p>
        <div class="code-style">
            <pre>
                <span class="з">//Создание кнопок</span>
        
                НовыйЭлемент = ЭтаФорма.Элементы.Добавить("Кнопка1", Тип("КнопкаФормы"),СтраницаТовары);
                НовыйЭлемент.Заголовок = "Привет мир!";
                НовыйЭлемент.ИмяКоманды = "ОбщаяКоманда";
    
                НовыйЭлемент = ЭтаФорма.Элементы.Добавить("Кнопка2", Тип("КнопкаФормы"),СтраницаДополнительно);
                НовыйЭлемент.Заголовок = "Сложить номер";
                НовыйЭлемент.ИмяКоманды = "ОбщаяКоманда";
                
                НовыйЭлемент = ЭтаФорма.Элементы.Добавить("Кнопка3", Тип("КнопкаФормы"),СтраницаДополнительно);
                НовыйЭлемент.Заголовок = "Текущее время";
                НовыйЭлемент.ИмяКоманды = "ОбщаяКоманда";
            </pre>
        </div>
        <p><b>Пример:</b></p>
        <div class="code-style">
            <pre>
                <span class="сс">&НаКлиенте
                Процедура СоздатьКнопку(Команда)
                    СоздатьКнопкуНаСервере();
                КонецПроцедуры

                &НаСервере
                Процедура СоздатьКнопкуНаСервере()
                    
                    <span class="з">//1. создание команды</span>
                    НоваяКоманда = Команды.Добавить(<span class="с">"ПоказатьТекущуюДату"</span>);
                    НоваяКоманда.Действие = "СообщитьТекущуюДату";
                    
                    <span class="з">//2. создание элемента формы (кнопки)</span>
                    НоваяКнопка = Элементы.Добавить(<span class="с">"ПоказатьТекущуюДату"</span>, Тип(<span class="с">"КнопкаФормы"</span>), Элементы.ГруппаПраво);
                    НоваяКнопка.ИмяКоманды = <span class="с">"ПоказатьТекущуюДату"</span>;
                    
                КонецПроцедуры

                &НаКлиенте
                Процедура СообщитьТекущуюДату()

                    ДатаФормат = Формат(ТекущаяДата(), <span class="с">"ДЛФ=DD"</span>);
                    Сообщить(ДатаФормат);

                КонецПроцедуры</span>
            </pre>
        </div>

        <p><span class="сс">Таблица формы и колонки </span></p>
        <p>Для работы таблицы формы необходимо наличие реквизита "Таблица значений" или "Динамический список". Не забывайте про путь, если таблица находиться в объекте, тогда указываем полный путь, пример: "Объект.Товары" и так же для колонок "Объект.Товары.Номенклатура".</p>
        <p><b>Создание таблицы</b></p>
        <p>Пример создания таблицы:</p>
        <div class="code-style">
            <pre>
                ТаблицаФормы = Элементы.Добавить("МояТаблицаТоваров", Тип("ТаблицаФормы"),ЭтотОбъект);
                ТаблицаФормы.ПутьКДанным = "Объект.Товары";    
            </pre>
        </div>
        <p><b>Создание колонок</b></p>
        <p>Пример создания колонок:</p>
        <div class="code-style">
            <pre>
                <span class="з">//Создаем колонку для выбора и ввода</span>
                НовыйЭлемент  = Форма.Элементы.Добавить("МояТаблицаТоваровНоменклатура",Тип("ПолеФормы"),ТаблицаФормы);
                НовыйЭлемент.Вид = ВидПоляФормы.ПолеВвода;      
                НовыйЭлемент.ПутьКДанным = "Объект.Товары.Номенклатура";
                
                
                <span class="з">//Создаем колонку для булево</span>
                НовыйЭлемент  = Форма.Элементы.Добавить("МояТаблицаТоваровПроведен",Тип("ПолеФормы"),ТаблицаФормы);
                НовыйЭлемент.Вид = ВидПоляФормы.ПолеФлажка;      
                НовыйЭлемент.ПутьКДанным = "Объект.Товары.Используется";    
            </pre>
        </div>
        <p><b>Пример создания программно элемента формы с типом "ТаблицаФормы" к существующему реквизиту с типом "ТаблицаЗначений".</b></p>
        <p>Реквизит таблицы значений уже заранее создан, в него сразу были добавлены колонки. При создании колонок мы также программно установим для некоторых колонок обработчики события "ПриИзменении", чтобы подсчитывать сумму при изменении цены или количества.</p>
        <div class="code-style">
            <pre>
                <span class="сс">&НаКлиенте
                Процедура СоздатьТаблицуФормы(Команда)
                    СоздатьТаблицуФормыНаСервере();
                КонецПроцедуры

                &НаСервере
                Процедура СоздатьТаблицуФормыНаСервере()
                    <span class="з">//как нам расчитать итоговую сумму. Если бы у нас была табличная часть и мы включили бы подвал, то для колонки Сумма мы бы указали "ПутьКДаннымПодвала" к специальному значению, 
                    //подсчитыному системой, обозначается буквой "Е":
                    <img src="img/1С-Курс(IronSkills)/2025-08-12_09-22-15.png" class="screen-2" alt=""><br>
                    //Но так как у нас нет в нашем реквизите таблицы значений такой возможности, то создадим ещё один реквизит "ИтогСумма" и для колонки "Сумма" в свойствах укажем для свойства "ПутьКДаннымПодвала" 
                    //путь до этого реквизита, т.е. колонка Сумма отобразит в подвале значение реквизита ИтогСумма. А как нам расчитать этот реквизит, есть такое событие как "ПриОкончанииРедактирования", установим 
                    //его на весь элемент таблицы и при уходе фокуса с таблицы вызовется это событие, отработает обработчик, расчитает итог в реквизит ИтогСумма и колонка Сумма покажет этот итог из этого реквизита.</span>
                    
                    <span class="з">//сначала создаем таблицу формы</span>
                    ЭлементТаблица = Элементы.Добавить(<span class="с">"ТаблицаТоваров"</span>, Тип(<span class="с">"ТаблицаФормы"</span>), Элементы.ГруппаПраво);
                    ЭлементТаблица.ПутьКДанным = <span class="с">"ТаблицаТоваров"</span>;
                    <span class="з">// на всю таблицу вешаем обработчик события "ПриОкончанииРедактирования"</span>
                    ЭлементТаблица.УстановитьДействие(<span class="с">"ПриОкончанииРедактирования"</span>, <span class="с">"РассчитатьИтогВТаблице"</span>);
                    <span class="з">// указываем подвал для отображения итоговой суммы</span>
                    ЭлементТаблица.Подвал = Истина;
                    
                    <span class="з">//колонка "Номенклатура"</span>
                    КолонкаНоменклатура = Элементы.Добавить(<span class="с">"Номенклатура"</span>, Тип(<span class="с">"ПолеФормы"</span>), ЭлементТаблица);
                    КолонкаНоменклатура.ПутьКДанным = <span class="с">"ТаблицаТоваров.Номенклатура"</span>;
                    КолонкаНоменклатура.Вид = ВидПоляФормы.ПолеВвода;
                    
                    <span class="з">//колонка "Количество"</span>
                    КолонкаКоличество = Элементы.Добавить(<span class="с">"Количество"</span>, Тип(<span class="с">"ПолеФормы"</span>), ЭлементТаблица);
                    КолонкаКоличество.ПутьКДанным = <span class="с">"ТаблицаТоваров.Количество"</span>;
                    КолонкаКоличество.Вид = ВидПоляФормы.ПолеВвода;
                    КолонкаКоличество.УстановитьДействие(<span class="с">"ПриИзменении"</span>, <span class="с">"РассчитатьСумму"</span>);
                    
                    <span class="з">//колонка "Цена"</span>
                    КолонкаЦена = Элементы.Добавить(<span class="с">"Цена"</span>, Тип(<span class="с">"ПолеФормы"</span>), ЭлементТаблица);
                    КолонкаЦена.ПутьКДанным = <span class="с">"ТаблицаТоваров.Цена"</span>;
                    КолонкаЦена.Вид = ВидПоляФормы.ПолеВвода;
                    КолонкаЦена.УстановитьДействие(<span class="с">"ПриИзменении"</span>, <span class="с">"РассчитатьСумму"</span>);
                    КолонкаЦена.ТекстПодвала = "Итого сумма:";

                    <span class="з">//колонка "Сумма"</span>
                    КолонкаСумма = Элементы.Добавить(<span class="с">"Сумма"</span>, Тип(<span class="с">"ПолеФормы"</span>), ЭлементТаблица);
                    КолонкаСумма.ПутьКДанным = <span class="с">"ТаблицаТоваров.Сумма"</span>;
                    КолонкаСумма.Вид = ВидПоляФормы.ПолеВвода;
                    КолонкаСумма.ПутьКДаннымПодвала = <span class="с">"ИтогоСумма"</span>;
                    
                КонецПроцедуры
            
            
                &НаКлиенте
                Процедура РассчитатьСумму()
                    //1. Получить данные строки, с которой работает пользователь
                    ТекСтрока = Элементы.ТаблицаТоваров.ТекущиеДанные;
                    
                    //2. Пересчет суммы
                    ТекСтрока.Сумма = ТекСтрока.Количество * ТекСтрока.Цена;
                КонецПроцедуры
            
                
                &НаКлиенте
                Процедура РассчитатьИтогВТаблице()
                    ИтогоСумма = ЭтотОбъект[<span class="с">"ТаблицаТоваров"</span>].Итог(<span class="с">"Сумма"</span>);
                КонецПроцедуры</span>
            </pre>
        </div>




        <p class="title-size16"><b id="work-forms-in3">Библиотека процедур и функций для создания всех перечисленных выше элементов, реквизитов, конопок, описаний типов, квалификаторов и т.д.</b></p>
        <div class="code-style">
            <pre>
                <span class="з">//////////////////////////////////////////////////////////////////////////////////
                //
                //	Модуль Динамического Формирования Интерфейса
                //	Версия 2.0.0.1 Начало разработки 26.03.2020 года
                //	
                //	Разработчик модуля: Котов Дмитрий Вадимович
                //	Инфостарт //infostart.ru/profile/564942/
                //	telegram: @KotovDima
                //	instagram: @KotovDima1C
                //
                //////////////////////////////////////////////////////////////////////////////////</span>
    
                <span class="ск">#Область ОписаниеТипов</span>
    
                <span class="з">//////////////////////////////////////////////////////////////////////////////////
                //Создание описание типов
    
                // Создание описания типа Строка
                //
                // Параметры:
                //  ДлинаСтроки - Число - длина строки
                //</span>
                Функция ОписаниеТипаСтрока(ДлинаСтроки = 0) Экспорт
                    Возврат Новый ОписаниеТипов("Строка",,кСтрока(ДлинаСтроки));
                КонецФункции
    
                <span class="з">// Создание описания типа Число
                //
                // Параметры:
                //  ДлинаЧисла - Число - общая длина числа
                //	ТочностьЧисла - Число - количество символов после запятой
                //</span>
                Функция ОписаниеТипаЧисло(ДлинаЧисла = 15,ТочностьЧисла = 2) Экспорт
                    Возврат Новый ОписаниеТипов("Число",кЧисло(ДлинаЧисла,ТочностьЧисла));
                КонецФункции
    
                <span class="з">// Создание описания типа ДатаВремя
                //
                // Параметры:
                //  ДатаВремя - Строка - Варианты: "ДатаВремя", "Дата" или "Время"
                //</span>
                Функция ОписаниеТипаДатаВремя(ДатаВремя = "ДатаВремя") Экспорт
                    Возврат Новый ОписаниеТипов("Дата",,,кДатаВремя(ДатаВремя));
                КонецФункции
    
                <span class="з">// Создание типа "Таблица значений"</span>
                Функция ОписаниеТипаТаблицаЗначений() Экспорт
                    МассивТипаВыбора = Новый Массив;
                    МассивТипаВыбора.Добавить(Тип("ТаблицаЗначений"));
                    Возврат Новый ОписаниеТипов(МассивТипаВыбора);	
                КонецФункции
    
                <span class="з">// Создание типа "Динамический список"</span>
                Функция ОписаниеТипаДинамическийСписок() Экспорт
                    МассивТипаВыбора = Новый Массив;
                    МассивТипаВыбора.Добавить(Тип("ДинамическийСписок"));
                    Возврат Новый ОписаниеТипов(МассивТипаВыбора);	
                КонецФункции
    
                <span class="з">// Создание типа "Булево"</span>
                Функция ОписаниеТипаБулево() Экспорт
                    Возврат Новый ОписаниеТипов("Булево");	
                КонецФункции
    
                <span class="з">// Создание описания ссылочного типа справочника
                //
                // Параметры:
                //  ИмяДокумента - Строка - Имя документа в дереве метаданных
                //</span>
                Функция ОписаниеТипаДокумент(ИмяДокумента) Экспорт
                    Возврат Новый ОписаниеТипов("ДокументСсылка." + ИмяДокумента);	
                КонецФункции
    
                <span class="з">// Создание описания ссылочного типа справочника
                //
                // Параметры:
                //  ИмяСправочника - Строка - Имя справочника в дереве метаданных
                //</span>
                Функция ОписаниеТипаСправочник(ИмяСправочника) Экспорт
                    Возврат Новый ОписаниеТипов("СправочникСсылка." + ИмяСправочника);	
                КонецФункции
    
                <span class="з">// Создание описания типа перечисление
                //
                // Параметры:
                //  ИмяПеречисления - Строка - Имя перечисления в дереве метаданных
                //</span>
                Функция ОписаниеТипаПеречисление(ИмяПеречисления) Экспорт
                    Возврат Новый ОписаниеТипов("ПеречислениеСсылка." + ИмяПеречисления);	
                КонецФункции
    
    
                <span class="з">///////////////////////////////////////////////////////////////////////////////////
                //Создание квалификаторов
    
                // Создание квалификатора для типа Строка
                //
                // Параметры:
                //  ДлинаСтроки - Число - длина строки
                //</span>
                Функция кСтрока(ДлинаСтроки = 0) Экспорт
                    Возврат Новый КвалификаторыСтроки(ДлинаСтроки);
                КонецФункции
    
                <span class="з">// Создание квалификатора для типа Число
                //
                // Параметры:
                //  ДлинаЧисла - Число - общая длина числа
                //	ТочностьЧисла - Число - количество символов после запятой
                //</span>
                Функция кЧисло(ДлинаЧисла = 15,ТочностьЧисла = 2) Экспорт
                    Возврат Новый КвалификаторыЧисла(ДлинаЧисла,ТочностьЧисла);
                КонецФункции
    
                <span class="з">// Создание квалификатора для типа ДатаВремя
                //
                // Параметры:
                //  ДатаВремя - Строка - Варианты: "ДатаВремя", "Дата" или "Время"
                //</span>
                Функция кДатаВремя(ДатаВремя = "ДатаВремя") Экспорт
                    Возврат Новый КвалификаторыДаты(ЧастиДаты[ДатаВремя]);
                КонецФункции
    
                <span class="ск">#КонецОбласти</span>
    
                <span class="ск">#Область СозданиеРеквизитовКоманд</span>
    
                <span class="з">// Создание одного реквизита
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяРеквизита - Строка - Имя реквизита
                //	ОписаниеТипа - ОписаниеТипа - Описание типа реквизита
                //</span>
                Процедура СоздатьРеквизит(Форма,ИмяРеквизита,ОписаниеТипа) Экспорт
                    структураРеквизитов = Новый Структура;
                    структураРеквизитов.Вставить(ИмяРеквизита,ОписаниеТипа);
                    СоздатьРеквизиты(Форма,структураРеквизитов);                 
                КонецПроцедуры
    
                <span class="з">// Создание реквизитов
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы 
                //  структураРеквизитов - Структура - Где ключ это Имя реквизита, а значение это описание типа реквизита
                //</span>
                Процедура СоздатьРеквизиты(Форма,структураРеквизитов) Экспорт                
                    ДобавляемыеРеквизиты = Новый Массив;
                    Для Каждого тРеквизит Из структураРеквизитов Цикл 
                        НовыйРеквизит = Новый РеквизитФормы(тРеквизит.Ключ,тРеквизит.Значение); 
                        ДобавляемыеРеквизиты.Добавить(НовыйРеквизит); 
                    КонецЦикла;
                    Форма.ИзменитьРеквизиты(ДобавляемыеРеквизиты); 
                КонецПроцедуры
    
                <span class="з">// Создание реквизитов для таблицы
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы 
                //	ИмяТаблицы - Строка - Имя таблицы куда добавляете реквизиты
                //  структураРеквизитов - Структура - Где ключ это Имя реквизита, а значение это описание типа реквизита
                //</span>
                Процедура СоздатьРеквизитыТаблицы(Форма,ИмяТаблицы,структураРеквизитов) Экспорт
                    ДобавляемыеРеквизиты = Новый Массив;
                    Для Каждого тРеквизит Из структураРеквизитов Цикл 
                        НовыйРеквизит = Новый РеквизитФормы(тРеквизит.Ключ,тРеквизит.Значение,ИмяТаблицы); 
                        ДобавляемыеРеквизиты.Добавить(НовыйРеквизит); 
                    КонецЦикла;
                    Форма.ИзменитьРеквизиты(ДобавляемыеРеквизиты); 
                КонецПроцедуры
    
                <span class="з">// Создание команды
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //	ИмяКоманды - Строка - Имя команды
                //  Заголовок - Строка - Заголовок команды
                //  ИмяДействия - Строка - Имя процедуры действия команды
                //		Пример процедуры в модуле формы "Процедура &lt;ИмяДействия>(Команда)"
                //</span>
                Процедура СоздатьКоманду(Форма,ИмяКоманды,Заголовок,ИмяДействия) Экспорт
                    НоваяКоманда = Форма.Команды.Добавить(ИмяКоманды);
                    НоваяКоманда.Заголовок = Заголовок;
                    НоваяКоманда.Действие = ИмяДействия;
                КонецПроцедуры
    
                <span class="ск">#КонецОбласти
    
                #Область ВспомогательныеФункции</span>
    
                Процедура ЕслиСтруктураНеопределеноТоНовая(текущаяСруктура)
                    Если текущаяСруктура = Неопределено Тогда
                        текущаяСруктура = Новый Структура;
                    КонецЕсли;
                КонецПроцедуры
    
                Процедура ОпределитьЭлементФормы(Форма,Элемент)
                    Если Элемент = Неопределено Тогда Возврат КонецЕсли;
                    Если ТипЗнч(Элемент) = Тип("Строка") Тогда
                        Элемент = Форма.Элементы[Элемент];	
                    КонецЕсли;
                КонецПроцедуры
    
                Процедура ПолучитьСостояниеРастягиванияЭлементаПоГоризонтали(Элемент,Состояние)
                    Если Состояние = 1 Тогда
                        Элемент.РастягиватьПоГоризонтали = ИСТИНА;	
                    ИначеЕсли Состояние = 2 Тогда
                        Элемент.РастягиватьПоГоризонтали = ЛОЖЬ;	
                    КонецЕсли;	
                КонецПроцедуры
    
                Процедура ПолучитьСостояниеРастягиванияЭлементаПоВертикали(Элемент,Состояние)
                    Если Состояние = 1 Тогда
                        Элемент.РастягиватьПоВертикали = ИСТИНА;	
                    ИначеЕсли Состояние = 2 Тогда
                        Элемент.РастягиватьПоВертикали = ЛОЖЬ;	
                    КонецЕсли;	
                КонецПроцедуры
    
                Процедура ПолучитьСостояниеГруппировкиЭлемента(Элемент,Состояние)
                    Если Состояние = 1 Тогда
                        Элемент.Группировка = ГруппировкаПодчиненныхЭлементовФормы.Вертикальная;		
                    ИначеЕсли Состояние = 2 Тогда
                        Элемент.Группировка = ГруппировкаПодчиненныхЭлементовФормы.ГоризонтальнаяЕслиВозможно;	
                    ИначеЕсли Состояние = 3 Тогда
                        Элемент.Группировка = ГруппировкаПодчиненныхЭлементовФормы.ГоризонтальнаяВсегда;			
                    КонецЕсли;	
                КонецПроцедуры
    
                Процедура ПолучитьСостояниеГруппировкиКолонкиЭлемента(Элемент,Состояние)
                    Если Состояние = 1 Тогда
                        Элемент.Группировка = ГруппировкаКолонок.Горизонтальная;		
                    ИначеЕсли Состояние = 2 Тогда
                        Элемент.Группировка = ГруппировкаКолонок.Вертикальная;	
                    ИначеЕсли Состояние = 3 Тогда
                        Элемент.Группировка = ГруппировкаКолонок.ВЯчейке;			
                    КонецЕсли;	
                КонецПроцедуры
    
                Процедура УстановитьМножествоСтруктурСвойствЭлементу(Элемент,
                    СтруктураСвойств1,
                    СтруктураСвойств2 = Неопределено,
                    СтруктураСвойств3 = Неопределено,
                    СтруктураСвойств4 = Неопределено,
                    СтруктураСвойств5 = Неопределено,
                    СтруктураСвойств6 = Неопределено,
                    СтруктураСвойств7 = Неопределено,
                    СтруктураСвойств8 = Неопределено,
                    СтруктураСвойств9 = Неопределено,
                    СтруктураСвойств10 = Неопределено) Экспорт
                    
                    УстановитьСвойстваЭлементу(Элемент,СтруктураСвойств1);
                    Если СтруктураСвойств2 &lt;> Неопределено Тогда УстановитьСвойстваЭлементу(Элемент,СтруктураСвойств2) КонецЕсли;
                    Если СтруктураСвойств3 &lt;> Неопределено Тогда УстановитьСвойстваЭлементу(Элемент,СтруктураСвойств3) КонецЕсли;
                    Если СтруктураСвойств4 &lt;> Неопределено Тогда УстановитьСвойстваЭлементу(Элемент,СтруктураСвойств4) КонецЕсли;
                    Если СтруктураСвойств5 &lt;> Неопределено Тогда УстановитьСвойстваЭлементу(Элемент,СтруктураСвойств5) КонецЕсли;
                    Если СтруктураСвойств6 &lt;> Неопределено Тогда УстановитьСвойстваЭлементу(Элемент,СтруктураСвойств6) КонецЕсли;
                    Если СтруктураСвойств7 &lt;> Неопределено Тогда УстановитьСвойстваЭлементу(Элемент,СтруктураСвойств7) КонецЕсли;
                    Если СтруктураСвойств8 &lt;> Неопределено Тогда УстановитьСвойстваЭлементу(Элемент,СтруктураСвойств8) КонецЕсли;
                    Если СтруктураСвойств9 &lt;> Неопределено Тогда УстановитьСвойстваЭлементу(Элемент,СтруктураСвойств9) КонецЕсли;
                    Если СтруктураСвойств10 &lt;> Неопределено Тогда УстановитьСвойстваЭлементу(Элемент,СтруктураСвойств10) КонецЕсли;
                    
                КонецПроцедуры
    
                Процедура УстановитьСвойстваЭлементу(Элемент,СтруктураСвойств) Экспорт
                    Для Каждого тСвойство Из СтруктураСвойств Цикл
                        Элемент[тСвойство.Ключ] = тСвойство.Значение;	
                    КонецЦикла;	
                КонецПроцедуры
    
                Процедура УстановитьСобытияЭлементу(Элемент,СтруктураСобытий) Экспорт
                    Для Каждого тСвойство Из СтруктураСобытий Цикл	
                        Элемент.УстановитьДействие(тСвойство.Ключ,тСвойство.Значение);
                    КонецЦикла;	
                КонецПроцедуры
    
                Процедура УстановитьПараметрыЗапросу(РеквизитДинамическийСписок,ПараметрыЗапроса) Экспорт
                    Для Каждого Параметра из ПараметрыЗапроса Цикл
                            РеквизитДинамическийСписок.Параметры.УстановитьЗначениеПараметра(Параметра.Ключ,Параметра.Значение);	
                    КонецЦикла;		 
                КонецПроцедуры
    
                Функция СоздатьЭлементФормы(Форма,ИмяЭлемента,ТипЭлемента,РодительЭлемента,ЭлементПеред = Неопределено)	
                    Если ЭлементПеред = Неопределено Тогда
                        НовыйЭлемент = Форма.Элементы.Добавить(ИмяЭлемента,ТипЭлемента,РодительЭлемента);
                    Иначе
                        НовыйЭлемент = Форма.Элементы.Вставить(ИмяЭлемента,ТипЭлемента,РодительЭлемента,ЭлементПеред);		
                    КонецЕсли;
                    Возврат НовыйЭлемент;
                КонецФункции
    
                Процедура СоздатьКолонкиДляТаблицыФормы(Форма,ТаблицаФормы,СтруктураКолонок,ЭтоДС = ЛОЖЬ)
                    ИмяСписка = ТаблицаФормы.Имя; 
                    Для Каждого тКолонка Из СтруктураКолонок Цикл
                        ИмяКолонки = тКолонка.Ключ;
                        НоваяКолонкаТаблицы = СоздатьЭлементФормы(Форма,ИмяСписка + ИмяКолонки,Тип("ПолеФормы"),ТаблицаФормы);
                        НоваяКолонкаТаблицы.Вид = ?(ЭтоДС,ВидПоляФормы.ПолеНадписи,ВидПоляФормы.ПолеВвода);
                        Если тКолонка.Значение &lt;> "" Тогда НоваяКолонкаТаблицы.Заголовок = тКолонка.Значение КонецЕсли;
                        НоваяКолонкаТаблицы.ПутьКДанным = ИмяСписка + "." + ИмяКолонки;
                    КонецЦикла;		    
                КонецПроцедуры
    
                Функция ПолучитьГоризонтальноеПоложение(ШифрПоложения)
                    Если ШифрПоложения = 1 Тогда
                        нГоризонтальноеПоложение = ГоризонтальноеПоложениеЭлемента.Лево;
                    ИначеЕсли ШифрПоложения = 2 Тогда
                        нГоризонтальноеПоложение = ГоризонтальноеПоложениеЭлемента.Центр;
                    ИначеЕсли ШифрПоложения = 3 Тогда
                        нГоризонтальноеПоложение = ГоризонтальноеПоложениеЭлемента.Право;
                    Иначе
                        нГоризонтальноеПоложение = ГоризонтальноеПоложениеЭлемента.Авто;
                    КонецЕсли;
                    Возврат нГоризонтальноеПоложение;
                КонецФункции
    
                <span class="ск">#КонецОбласти
    
                #Область СозданиеЭлементов</span>                                    
    
                <span class="з">// Создать обычную группу без отображения
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяГруппы - Строка - Имя элемента на форме
                //	РодительГруппы	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	ГруппировкаОбычнойГруппы - Число - Принимаемые значения:
                //					1 - Вертикальная
                //					2 - ГоризонтальнаяЕслиВозможно
                //					3 - ГоризонтальнаяВсегда
                //					0 - Авто
                //	РастягиватьГоризонтально - Число - Принимаемые значения:
                //					1 - ИСТИНА
                //					2 - ЛОЖЬ
                //					0 - Авто
                //	РастягиватьВертикально - Число - Принимаемые значения:
                //					1 - ИСТИНА
                //					2 - ЛОЖЬ
                //					0 - Авто
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздГруппаОбычнаяБезОтображения(Форма,
                    ИмяГруппы,
                    РодительГруппы,
                    ГруппировкаОбычнойГруппы = 0,
                    РастягиватьГоризонтально = 0,
                    РастягиватьВертикально = 0,
                    СтруктураСвойств = Неопределено,
                    ЭлементПеред = Неопределено) Экспорт
                    
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСвойств);		
                    ОпределитьЭлементФормы(Форма,РодительГруппы);
                    ОпределитьЭлементФормы(Форма,ЭлементПеред);
                    
                    НовыйЭлемент = СоздатьЭлементФормы(Форма,ИмяГруппы,Тип("ГруппаФормы"),РодительГруппы,ЭлементПеред);                  
                    НовыйЭлемент.Вид = ВидГруппыФормы.ОбычнаяГруппа;
                    НовыйЭлемент.Отображение = ОтображениеОбычнойГруппы.Нет;
                    НовыйЭлемент.ОтображатьЗаголовок = ЛОЖЬ;
                    
                    ПолучитьСостояниеГруппировкиЭлемента(НовыйЭлемент,ГруппировкаОбычнойГруппы);
                    ПолучитьСостояниеРастягиванияЭлементаПоГоризонтали(НовыйЭлемент,РастягиватьГоризонтально);	
                    ПолучитьСостояниеРастягиванияЭлементаПоВертикали(НовыйЭлемент,РастягиватьВертикально);
                    
                    УстановитьСвойстваЭлементу(НовыйЭлемент,СтруктураСвойств);
                    
                    Возврат НовыйЭлемент;
                КонецФункции
    
                <span class="з">// Создать обычную группу
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяГруппы - Строка - Имя элемента на форме
                //	РодительГруппы	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	Заголовок		- Строка - Заголовок группы
                //	ГруппировкаОбычнойГруппы - Число - Принимаемые значения:
                //					1 - Вертикальная
                //					2 - ГоризонтальнаяЕслиВозможно
                //					3 - ГоризонтальнаяВсегда
                //					0 - Авто
                //	РастягиватьГоризонтально - Число - Принимаемые значения:
                //					1 - ИСТИНА
                //					2 - ЛОЖЬ
                //					0 - Авто
                //	РастягиватьВертикально - Число - Принимаемые значения:
                //					1 - ИСТИНА
                //					2 - ЛОЖЬ
                //					0 - Авто
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздГруппаОбычная(Форма,
                    ИмяГруппы,
                    РодительГруппы,
                    Заголовок = "",
                    ГруппировкаОбычнойГруппы = 0,
                    РастягиватьГоризонтально = 0,
                    РастягиватьВертикально = 0,
                    СтруктураСвойств = Неопределено,
                    ЭлементПеред = Неопределено) Экспорт
                    
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСвойств);		
                    ОпределитьЭлементФормы(Форма,РодительГруппы);
                    ОпределитьЭлементФормы(Форма,ЭлементПеред);
                    
                    НовыйЭлемент = СоздатьЭлементФормы(Форма,ИмяГруппы,Тип("ГруппаФормы"),РодительГруппы,ЭлементПеред);                  
                    НовыйЭлемент.Вид = ВидГруппыФормы.ОбычнаяГруппа;
                    НовыйЭлемент.Отображение = ОтображениеОбычнойГруппы.СлабоеВыделение;
                    НовыйЭлемент.ОтображатьЗаголовок = ИСТИНА;
                    
                    ПолучитьСостояниеГруппировкиЭлемента(НовыйЭлемент,ГруппировкаОбычнойГруппы);
                    ПолучитьСостояниеРастягиванияЭлементаПоГоризонтали(НовыйЭлемент,РастягиватьГоризонтально);	
                    ПолучитьСостояниеРастягиванияЭлементаПоВертикали(НовыйЭлемент,РастягиватьВертикально);	
    
                    Если Заголовок &lt;> "" Тогда НовыйЭлемент.Заголовок = Заголовок КонецЕсли;
                    
                    УстановитьСвойстваЭлементу(НовыйЭлемент,СтруктураСвойств);
                    
                    Возврат НовыйЭлемент;
                КонецФункции
    
                <span class="з">// Создать группу страниц
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяГруппы - Строка - Имя элемента на форме
                //	РодительГруппы	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	РастягиватьГоризонтально - Число - Принимаемые значения:
                //					1 - ИСТИНА
                //					2 - ЛОЖЬ
                //					0 - Авто
                //	РастягиватьВертикально - Число - Принимаемые значения:
                //					1 - ИСТИНА
                //					2 - ЛОЖЬ
                //					0 - Авто
                //	ПриСменеСтраницы - Строка - При смене страницы???
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздГруппаСтраниц(Форма,
                    ИмяГруппы,
                    РодительГруппы,
                    РастягиватьГоризонтально = 0,
                    РастягиватьВертикально = 0,
                    ПриСменеСтраницы = "",	//FIXME GVGold Котов Д.В. 26.03.2020 
                    СтруктураСвойств = Неопределено,
                    ЭлементПеред = Неопределено) Экспорт
                    
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСвойств);		
                    ОпределитьЭлементФормы(Форма,РодительГруппы);
                    ОпределитьЭлементФормы(Форма,ЭлементПеред);
                    
                    
                    НовыйЭлемент = СоздатьЭлементФормы(Форма,ИмяГруппы,Тип("ГруппаФормы"),РодительГруппы,ЭлементПеред);	                  
                    НовыйЭлемент.Вид = ВидГруппыФормы.Страницы;
                        
                    ПолучитьСостояниеРастягиванияЭлементаПоГоризонтали(НовыйЭлемент,РастягиватьГоризонтально);	
                    ПолучитьСостояниеРастягиванияЭлементаПоВертикали(НовыйЭлемент,РастягиватьВертикально);	
                    
                    Если ПриСменеСтраницы &lt;> "" Тогда НовыйЭлемент.ПриСменеСтраницы = ПриСменеСтраницы КонецЕсли;	
                    
                    УстановитьСвойстваЭлементу(НовыйЭлемент,СтруктураСвойств);
                    
                    Возврат НовыйЭлемент;
                КонецФункции
    
                <span class="з">// Создать страницу группы страницы
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяСтраницы - Строка - Имя элемента на форме
                //	ГруппаСтраницы	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	Заголовок		- Строка - Заголовок страницы
                //	ГруппировкаОбычнойГруппы - Число - Принимаемые значения:
                //					1 - Вертикальная
                //					2 - ГоризонтальнаяЕслиВозможно
                //					3 - ГоризонтальнаяВсегда
                //					0 - Авто
                //	РастягиватьГоризонтально - Число - Принимаемые значения:
                //					1 - ИСТИНА
                //					2 - ЛОЖЬ
                //					0 - Авто
                //	РастягиватьВертикально - Число - Принимаемые значения:
                //					1 - ИСТИНА
                //					2 - ЛОЖЬ
                //					0 - Авто
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	СтраницаПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздСтраница(Форма,
                    ИмяСтраницы,
                    ГруппаСтраницы,
                    Заголовок = "",
                    ГруппировкаОбычнойГруппы = 0,
                    РастягиватьГоризонтально = 0,
                    РастягиватьВертикально = 0,
                    СтруктураСвойств = Неопределено,
                    СтраницаПеред = Неопределено) Экспорт
                    
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСвойств);		
                    ОпределитьЭлементФормы(Форма,ГруппаСтраницы);
                    ОпределитьЭлементФормы(Форма,СтраницаПеред);	
                    
                    НовыйЭлемент = СоздатьЭлементФормы(Форма,ИмяСтраницы,Тип("ГруппаФормы"),ГруппаСтраницы,СтраницаПеред);	                  
                    НовыйЭлемент.Вид = ВидГруппыФормы.Страница;
                    
                    ПолучитьСостояниеГруппировкиЭлемента(НовыйЭлемент,ГруппировкаОбычнойГруппы);
                    ПолучитьСостояниеРастягиванияЭлементаПоГоризонтали(НовыйЭлемент,РастягиватьГоризонтально);	
                    ПолучитьСостояниеРастягиванияЭлементаПоВертикали(НовыйЭлемент,РастягиватьВертикально);	
    
                    Если Заголовок &lt;> "" Тогда НовыйЭлемент.Заголовок = Заголовок КонецЕсли;
                    
                    УстановитьСвойстваЭлементу(НовыйЭлемент,СтруктураСвойств);
                    
                    Возврат НовыйЭлемент; 
                КонецФункции
    
                <span class="з">// Создать обычную группу
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяГруппы - Строка - Имя элемента на форме
                //	РодительПанели	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздГруппаКоманднаяПанель(Форма,
                    ИмяПанели,
                    РодительПанели,
                    СтруктураСвойств = Неопределено,
                    ЭлементПеред = Неопределено) Экспорт
                    
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСвойств);		
                    ОпределитьЭлементФормы(Форма,РодительПанели);
                    ОпределитьЭлементФормы(Форма,ЭлементПеред);
                    
                    НовыйЭлемент = СоздатьЭлементФормы(Форма,ИмяПанели,Тип("ГруппаФормы"),РодительПанели,ЭлементПеред);
                    НовыйЭлемент.Вид = ВидГруппыФормы.КоманднаяПанель;	
                    
                    УстановитьСвойстваЭлементу(НовыйЭлемент,СтруктураСвойств);
                    
                    Возврат НовыйЭлемент;
                КонецФункции
    
                <span class="з">// Создать группу
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяГруппы - Строка - Имя элемента на форме
                //	РодительГруппы	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздГруппа(Форма,
                    ИмяГруппы,
                    РодительГруппы,	
                    СтруктураСвойств,
                    ЭлементПеред = Неопределено) Экспорт
                    
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСвойств);		
                    ОпределитьЭлементФормы(Форма,РодительГруппы);
                    ОпределитьЭлементФормы(Форма,ЭлементПеред);
                    
                    НовыйЭлемент = СоздатьЭлементФормы(Форма,ИмяГруппы,Тип("ГруппаФормы"),РодительГруппы,ЭлементПеред);
                                        
                    УстановитьСвойстваЭлементу(НовыйЭлемент,СтруктураСвойств);
                    
                    Возврат НовыйЭлемент;
                КонецФункции
    
                <span class="з">// Создание поля популярных видов
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяПоля - Строка - Имя элемента на форме
                //	РодительПоля	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	Заголовок		- Строка - заголовок элемента
                //	ШифрВидаПоля	- Число - возможно указать шифр следующих значений:
                //					1 - ПолеВвода
                //					2 - ПолеФлажка
                //					3 - ПолеИндикатора
                //					4 - ПолеПереключателя
                //					5 - ПолеПериода
                //					6 - ПолеHTMLДокумента
                //					0 - Без указания типа, тип можно передать в структуре свойств
                //	ПутьКДанным		- Строка - Путь к данным значения
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	СтруктураСобытий - Структура - Содержит значения событий, где ключ название события и в значение название процедуры тип "строка"
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздПоле(Форма,
                    ИмяПоля,
                    РодительПоля,
                    Заголовок,
                    ШифрВидаПоля = 0,
                    ПутьКДанным = "",
                    СтруктураСвойств = Неопределено,
                    СтруктураСобытий = Неопределено,
                    ЭлементПеред = Неопределено) Экспорт
                    
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСвойств);
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСобытий);
                    ОпределитьЭлементФормы(Форма,РодительПоля);
                    ОпределитьЭлементФормы(Форма,ЭлементПеред);
                    
                    НовыйЭлемент = СоздатьЭлементФормы(Форма,ИмяПоля,Тип("ПолеФормы"),РодительПоля,ЭлементПеред);
                    
                    Если ШифрВидаПоля &lt;> 0 Тогда
                        НаборВидов = "ПолеВвода
                        |ПолеФлажка		
                        |ПолеИндикатора
                        |ПолеПереключателя
                        |ПолеПериода
                        |ПолеHTMLДокумента";
                        ВидПоля = СокрЛП(СтрПолучитьСтроку(НаборВидов,ШифрВидаПоля));
                        НовыйЭлемент.Вид = ВидПоляФормы[ВидПоля];
                    КонецЕсли;
                        
                    Если Заголовок &lt;> "" Тогда НовыйЭлемент.Заголовок = Заголовок КонецЕсли;	
                    Если ПутьКДанным &lt;> "" Тогда НовыйЭлемент.ПутьКДанным = ПутьКДанным КонецЕсли;
                    
                    УстановитьСвойстваЭлементу(НовыйЭлемент,СтруктураСвойств);
                    УстановитьСобытияЭлементу(НовыйЭлемент,СтруктураСобытий);
                    
                    Возврат НовыйЭлемент;
                КонецФункции
    
                <span class="з">// Создание поля популярных видов
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяПоля - Строка - Имя элемента на форме
                //	РодительПоля	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	Заголовок		- Строка - заголовок элемента
                //	тВидФлажка		- Число - возможные варианты:
                //					0 - Авто
                //					1 - Флажок
                //					2 - Тублер
                //					3 - Выключатель
                //	ПутьКДанным		- Строка - Путь к данным значения
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	СтруктураСобытий - Структура - Содержит значения событий, где ключ название события и в значение название процедуры тип "строка"
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздПолеФлажок(Форма,
                    ИмяПоля,
                    РодительПоля,
                    Заголовок,
                    тВидФлажка = 0,
                    ПутьКДанным = "",
                    СтруктураСвойств = Неопределено,
                    СтруктураСобытий = Неопределено,
                    ЭлементПеред = Неопределено) Экспорт
                    
                    НовыйЭлемент = СздПоле(Форма,ИмяПоля,РодительПоля,Заголовок,2,ПутьКДанным,СтруктураСвойств,СтруктураСобытий,ЭлементПеред);
                    Если тВидФлажка &lt;> 0 Тогда
                        НаборВидов = "Флажок
                        |Тублер		
                        |Выключатель";
                        ВидПоля = СокрЛП(СтрПолучитьСтроку(НаборВидов,тВидФлажка));
                        НовыйЭлемент.ВидФлажка = ВидФлажка[ВидПоля];
                    КонецЕсли;	
                КонецФункции
                    
                <span class="з">//Быстрая функция по созданию декорации надпись
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяДекорации - Строка - Имя элемента на форме
                //	РодительДекорации	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	ЗаголовокДекорации - Строка - текст который содержит декорация
                //	РастягиватьПоГоризонтали - Булево - растянуть надпись на всю ширину формы
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздДекорацияНадпись(Форма,
                    ИмяДекорации,
                    РодительДекорации,
                    ЗаголовокДекорации,
                    РастягиватьПоГоризонтали = ИСТИНА,
                    ЭлементПеред = Неопределено) Экспорт
                    
                    ОпределитьЭлементФормы(Форма,РодительДекорации);
                    ОпределитьЭлементФормы(Форма,ЭлементПеред);	
                    
                    НовыйЭлемент = СздДекорация(Форма,ИмяДекорации,РодительДекорации,,,ЭлементПеред);
                    
                    НовыйЭлемент.Заголовок = ЗаголовокДекорации;
                    
                    Если РастягиватьПоГоризонтали Тогда
                        НовыйЭлемент.АвтоМаксимальнаяШирина = ЛОЖЬ;
                        НовыйЭлемент.РастягиватьПоГоризонтали = ИСТИНА;	
                    КонецЕсли;
                        
                    Возврат НовыйЭлемент;
                КонецФункции
    
                <span class="з">//Быстрая функция по созданию декорации картинки
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяДекорации - Строка - Имя элемента на форме
                //	РодительДекорации	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	ИмяКартинки - Строка - Имя картинки в дереве метаданных
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздДекорацияКартинка(Форма,
                    ИмяДекорации,
                    РодительДекорации,
                    ИмяКартинки,
                    ЭлементПеред = Неопределено) Экспорт
                    
                    НовыйЭлемент = СздДекорация(Форма,ИмяДекорации,РодительДекорации,,,ЭлементПеред);
                    
                    НовыйЭлемент.Вид = ВидДекорацииФормы.Картинка;
                    НовыйЭлемент.Картинка = БиблиотекаКартинок[ИмяКартинки];
                    
                    Возврат НовыйЭлемент;
                КонецФункции
    
                <span class="з">//Общая функция создания декорации с видом надпись и картинка
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяДекорации - Строка - Имя элемента на форме
                //	РодительДекорации	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	СтруктураСобытий - Структура - Содержит значения событий, где ключ название события и в значение название процедуры тип "строка"
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздДекорация(Форма,
                    ИмяДекорации,
                    РодительДекорации,
                    СтруктураСвойств = Неопределено,
                    СтруктураСобытий = Неопределено,                                            
                    ЭлементПеред = Неопределено) Экспорт
                    
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСвойств);
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСобытий);
                    ОпределитьЭлементФормы(Форма,РодительДекорации);
                    ОпределитьЭлементФормы(Форма,ЭлементПеред);
                    
                    НовыйЭлемент = СоздатьЭлементФормы(Форма,ИмяДекорации,Тип("ДекорацияФормы"),РодительДекорации,ЭлементПеред);
                    
                    УстановитьСвойстваЭлементу(НовыйЭлемент,СтруктураСвойств);
                    УстановитьСобытияЭлементу(НовыйЭлемент,СтруктураСобытий);
                    
                    Возврат НовыйЭлемент;
                КонецФункции
    
                <span class="з">//Общая функция создания кнопки
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяКнопки - Строка - Имя элемента на форме
                //	РодительКнопки	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	ЗаголовокКнопки - Строка - отображаемый заголовок кнопки
                //	ИмяКоманды - Строка - Имя команды
                //	ВидКнопки - Число - Принимаемые значения
                //					1 - Обычная кнопка
                //					2 - Гиперссылка
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	СтруктураСобытий - Структура - Содержит значения событий, где ключ название события и в значение название процедуры тип "строка"
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздКнопка(Форма,
                    ИмяКнопки,
                    РодительКнопки,
                    ЗаголовокКнопки = "",
                    ИмяКоманды = "",	
                    ВидКнопки = 0,
                    СтруктураСвойств = Неопределено,	
                    ЭлементПеред = Неопределено) Экспорт
                    
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСвойств);
                    ОпределитьЭлементФормы(Форма,РодительКнопки);
                    ОпределитьЭлементФормы(Форма,ЭлементПеред);	
                    
                    //НовыйЭлемент = СоздатьЭлементФормы(Форма,ИмяКнопки,Тип("ДекорацияФормы"),РодительКнопки,ЭлементПеред);
                    НовыйЭлемент = СоздатьЭлементФормы(Форма,ИмяКнопки,Тип("КнопкаФормы"),РодительКнопки,ЭлементПеред);
                    Если ВидКнопки &lt;> 0 Тогда
                        НаборВидов = "ОбычнаяКнопка
                        |Гиперссылка";
                        ВидПоля = СокрЛП(СтрПолучитьСтроку(НаборВидов,ВидКнопки));
                        НовыйЭлемент.Вид = ВидКнопкиФормы[ВидПоля];
                    КонецЕсли;		
                    
                    Если ЗаголовокКнопки &lt;> "" Тогда НовыйЭлемент.Заголовок = ЗаголовокКнопки; КонецЕсли;
                    Если ИмяКоманды &lt;> "" Тогда НовыйЭлемент.ИмяКоманды = ИмяКоманды; КонецЕсли;
                    
                    УстановитьСвойстваЭлементу(НовыйЭлемент,СтруктураСвойств);
    
                    Возврат НовыйЭлемент;
                КонецФункции
    
                <span class="з">// Создаем динамический список версия 2.0
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяСписка - Строка - Имя будущей таблицы формы
                //	РодительСписка	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	ТекстЗапроса	- Строка - если не заполнен, то обязательно должен быть заполнен параметр ТаблицаСписка
                //	ПараметрыЗапроса - Структура - Содержит параметры для запроса, где ключ - имя параметры, а значение соответственно
                //  ТаблицаСписка	- Строка - имя таблицы списка,
                //	СтруктураКолонок 	- Структура - Ключ имя колонки в динамическом списке, значение это заголовок колонки
                //	                   Для сложных случаев лучше передать "неопределено" и впоспользоваться процедурой формирования колонок таблицы формы этого же модуля ДФИ
                //	СвояКоманднаяПанель - Булево - используется если требуется снять флаг "Автозаполнение" и наполнить самостоятельно
                //		Из-за специфики работы, нет программной возможности снятия флага "Автозаполнение", по этому создается своя командная панель, а стандартная скрывается полностью.
                //		Имя новой командной панели <ИмяСписка>+"КоманднаяПанель2"
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	СтруктураСобытий - Структура - Содержит значения событий, где ключ название события и в значение название процедуры тип "строка"
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздДинамическийСписок(Форма,
                    ИмяСписка = "Список", 
                    РодительСписка,
                    ТекстЗапроса = "", 			
                    ПараметрыЗапроса = Неопределено,
                    ТаблицаСписка = "",
                    СтруктураКолонок = Неопределено,                 
                    СтруктураСвойств = Неопределено,
                    СтруктураСобытий = Неопределено,
                    СвояКоманднаяПанель = ЛОЖЬ,
                    ЭлементПеред = Неопределено
                    ) Экспорт
                                                                                                                                                
                    СоздатьРеквизит(Форма,ИмяСписка,ОписаниеТипаДинамическийСписок());             
                    РеквизитДинамическийСписок = Форма[ИмяСписка]; 
                    Если ТекстЗапроса = "" Тогда
                        РеквизитДинамическийСписок.ПроизвольныйЗапрос = ЛОЖЬ;
                        РеквизитДинамическийСписок.ОсновнаяТаблица = ТаблицаСписка;
                    Иначе
                        РеквизитДинамическийСписок.ПроизвольныйЗапрос = ИСТИНА;
                        РеквизитДинамическийСписок.ТекстЗапроса = ТекстЗапроса;
                        Если ТаблицаСписка &lt;> "" Тогда РеквизитДинамическийСписок.ОсновнаяТаблица = ТаблицаСписка; КонецЕсли;		
                    КонецЕсли;
                    
                    ЕслиСтруктураНеопределеноТоНовая(ПараметрыЗапроса);
                    УстановитьПараметрыЗапросу(РеквизитДинамическийСписок,ПараметрыЗапроса);
                    
                    ТаблицаФормы = СздТаблицаФормы(Форма,ИмяСписка,РодительСписка,ИмяСписка,СтруктураКолонок,СтруктураСвойств,СтруктураСобытий,СвояКоманднаяПанель,ЭлементПеред); 
                    
                    Возврат ТаблицаФормы;
                КонецФункции 
    
                <span class="з">// Создаем колонку для Таблицы формы (Динамического списка)
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяКолонки - Строка - Имя будущей колонки
                //	ТипКолонки - Число - Принимаемые значения:
                //		0 - Поле вводы
                //		1 - Поле надписи
                //		2 - Поле флажка
                //		3 - Поле картинки
                //	Заголовок - Строка - Заголовок колонки
                //	ПутьКДанным - Строка - Путь к данным, не забывайте про точку и "Объект", пример "Объект.Товары.Номенклатура"
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	СтруктураСобытий - Структура - Содержит значения событий, где ключ название события и в значение название процедуры тип "строка"
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздКолонкаТаблицыФормы(Форма,
                    ИмяКолонки,
                    Родитель,
                    ТипКолонки = 0,
                    Заголовок = "",
                    ПутьКДанным,
                    ОтображатьШапку = ИСТИНА,
                    ОтображатьПодвал = ЛОЖЬ,
                    СтруктураСвойств = Неопределено,
                    СтруктураСобытий = Неопределено,
                    ЭлементПеред = Неопределено
                    ) Экспорт
                    
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСвойств);
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСобытий);
                    ОпределитьЭлементФормы(Форма,Родитель);
                    ОпределитьЭлементФормы(Форма,ЭлементПеред);
    
                    Если ТипКолонки &lt;> 0 Тогда
                        НаборВидов = "ПолеНадписи		
                        |ПолеФлажка
                        |ПолеКартинки";
                        ВидПоля = СокрЛП(СтрПолучитьСтроку(НаборВидов,ТипКолонки));
                    Иначе
                        ВидПоля = "ПолеВвода";
                    КонецЕсли;	
                    
                    НовыйЭлемент = СоздатьЭлементФормы(Форма,ИмяКолонки,Тип("ПолеФормы"),Родитель,ЭлементПеред);
                    НовыйЭлемент.Вид = ВидПоляФормы[ВидПоля];	
                    НовыйЭлемент.ПутьКДанным = ПутьКДанным;
                    НовыйЭлемент.ОтображатьВШапке = ОтображатьШапку;
                    НовыйЭлемент.ОтображатьВПодвале = ОтображатьПодвал;
    
                    УстановитьСвойстваЭлементу(НовыйЭлемент,СтруктураСвойств);
                    УстановитьСобытияЭлементу(НовыйЭлемент,СтруктураСобытий);
                    
                    Возврат НовыйЭлемент; 
                КонецФункции	
    
                <span class="з">// Создаем Таблицу формы
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяТаблицы - Строка - Имя будущей таблицы
                //	РодительТаблицы	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //	ПутьКДанным - Строка - Путь к данным реквизита
                //	СтруктураКолонок - Структура - Содержит значения колонок, где ключ имя колонки и значение это заголовок если необходимо изменить, иначе можно передать ""
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	СтруктураСобытий - Структура - Содержит значения событий, где ключ название события и в значение название процедуры тип "строка"
                //	СвояКоманднаяПанель - Булево - используется если требуется снять флаг "Автозаполнение" и наполнить самостоятельно
                //		Из-за специфики работы, нет программной возможности снятия флага "Автозаполнение", по этому создается своя командная панель, а стандартная скрывается полностью.
                //		Имя новой командной панели &lt;ИмяСписка>+"КоманднаяПанель2"
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздТаблицаФормы(Форма,
                    ИмяТаблицы,
                    РодительТаблицы,
                    ПутьКДанным,
                    СтруктураКолонок = Неопределено,                 
                    СтруктураСвойств = Неопределено,
                    СтруктураСобытий = Неопределено,
                    СвояКоманднаяПанель = ЛОЖЬ,
                    ЭлементПеред = Неопределено
                    ) Экспорт	
                    
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураКолонок);
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСвойств);
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСобытий);
                    ОпределитьЭлементФормы(Форма,РодительТаблицы);
                    ОпределитьЭлементФормы(Форма,ЭлементПеред);	
                    
                    Если СвояКоманднаяПанель Тогда
                        ГруппаДинамическогоСписка = СздГруппаОбычнаяБезОтображения(Форма,"ДополнительнаяГруппаКоманднаяПанель" + ИмяТаблицы,РодительТаблицы,1,1,1,,ЭлементПеред);
                        КоманднаяПанельСписка  = СздГруппаКоманднаяПанель(Форма,ИмяТаблицы + "КоманднаяПанель2",ГруппаДинамическогоСписка);
                        ТаблицаФормы = СоздатьЭлементФормы(Форма,ИмяТаблицы,Тип("ТаблицаФормы"),ГруппаДинамическогоСписка);
                        ТаблицаФормы.ПоложениеКоманднойПанели = ПоложениеКоманднойПанелиЭлементаФормы.Нет;
                    Иначе
                        ТаблицаФормы = СоздатьЭлементФормы(Форма,ИмяТаблицы,Тип("ТаблицаФормы"),РодительТаблицы,ЭлементПеред);
                    КонецЕсли;
                                
                    ТаблицаФормы.ПутьКДанным = ПутьКДанным; 
                    
                    СоздатьКолонкиДляТаблицыФормы(Форма,ТаблицаФормы,СтруктураКолонок);
                    
                    УстановитьСвойстваЭлементу(ТаблицаФормы,СтруктураСвойств);
                    УстановитьСобытияЭлементу(ТаблицаФормы,СтруктураСобытий);
                    
                    Возврат ТаблицаФормы;
                КонецФункции
    
                <span class="з">// Создать обычную группу без отображения
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяГруппы - Строка - Имя элемента на форме
                //	РодительГруппы	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	ГруппировкаГруппы - Число - Принимаемые значения:
                //					1 - Горизонтальная
                //					2 - Вертикальная
                //					3 - В ячейке
                //					0 - Авто
                //	РастягиватьГоризонтально - Число - Принимаемые значения:
                //					1 - ИСТИНА
                //					2 - ЛОЖЬ
                //					0 - Авто
                //	ОтображатьВШапке - Булево - Если необходимо вывести заголовок
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздГруппаКолонокТаблицыФормы(Форма,
                    ИмяГруппы,
                    РодительГруппы,
                    ГруппировкаГруппы = 0,
                    РастягиватьГоризонтально = 0,
                    ОтображатьВШапке = ЛОЖЬ,
                    Заголовок = "",
                    СтруктураСвойств = Неопределено,
                    ЭлементПеред = Неопределено) Экспорт
                    
                    ЕслиСтруктураНеопределеноТоНовая(СтруктураСвойств);		
                    ОпределитьЭлементФормы(Форма,РодительГруппы);
                    ОпределитьЭлементФормы(Форма,ЭлементПеред);
                    
                    НовыйЭлемент = СоздатьЭлементФормы(Форма,ИмяГруппы,Тип("ГруппаФормы"),РодительГруппы,ЭлементПеред);                  
                    НовыйЭлемент.Вид = ВидГруппыФормы.ГруппаКолонок;
                    НовыйЭлемент.ОтображатьВШапке = ОтображатьВШапке;
                    НовыйЭлемент.Заголовок = Заголовок;
                    
                    ПолучитьСостояниеГруппировкиКолонкиЭлемента(НовыйЭлемент,ГруппировкаГруппы);
                    ПолучитьСостояниеРастягиванияЭлементаПоГоризонтали(НовыйЭлемент,РастягиватьГоризонтально);	
                    
                    УстановитьСвойстваЭлементу(НовыйЭлемент,СтруктураСвойств);
                    
                    Возврат НовыйЭлемент;
                КонецФункции
    
                <span class="з">// Создание специфического элемента, выпадающий список.
                //	Создается автоматически строковый реквизит с идентичным названием
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяСписка - Строка - Имя элемента на форме
                //	РодительСписка	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	Заголовок - Строка - отображаемый заголовок кнопки
                //	МассивЗначений - Массив - массив значений выбора из списка (содержит строковый тип)
                //	РедактированиеТекста - Булево - Редактирование текста, если ЛОЖЬ, то можно выбирать только из списка
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	СтруктураСобытий - Структура - Содержит значения событий, где ключ название события и в значение название процедуры тип "строка"
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздВыпадающийСписок(Форма,
                    ИмяСписка,
                    РодительСписка,
                    ЗаголовокЭлемента = "",
                    МассивЗначений,
                    РедактированиеТекста = ЛОЖЬ,
                    СтруктураСвойств = Неопределено,
                    СтруктураСобытий = Неопределено,
                    ЭлементПеред = Неопределено
                    ) Экспорт
                    
                    СоздатьРеквизит(Форма,ИмяСписка,ОписаниеТипаСтрока(100)); 
                    НовыйРеквизит = Форма[ИмяСписка]; 
                    НовыйЭлемент = СздПоле(Форма,ИмяСписка,РодительСписка,ЗаголовокЭлемента,1,ИмяСписка,СтруктураСвойств,СтруктураСобытий,ЭлементПеред);
                    НовыйЭлемент.КнопкаВыпадающегоСписка = ИСТИНА; 
                    
                    Для Каждого текЭлемент Из МассивЗначений Цикл
                        НовыйЭлемент.СписокВыбора.Добавить(текЭлемент);	
                    КонецЦикла;
                    
                    Если ЗаголовокЭлемента &lt;> "" Тогда НовыйЭлемент.Заголовок = ЗаголовокЭлемента; КонецЕсли;
    
                    НовыйЭлемент.РедактированиеТекста = РедактированиеТекста;
                    
                    Возврат НовыйЭлемент;	   
                КонецФункции
    
                <span class="з">// Создание специфического элемента, переключатель
                //	Создается автоматически реквизит с типом число с идентичным названием
                //
                // Параметры:
                //	Форма - ФормаКлиентскогоПриложения - Форма на которой создаются элементы
                //  ИмяПереключателя - Строка - Имя элемента на форме
                //	РодительЭлемента	- Строка - достаточно указать название элемента формы
                //					- Элементы - можно в качестве родителя передать элемент формы
                //	Заголовок - Строка - отображаемый заголовок кнопки
                //	МассивЗначений - Массив - Массив значений выбора из списка (содержит строковый тип),
                //					Важно отметить, что номер в массиве соответствует номеру в списке выбора переключателя.
                //	тВидПереключателя - Число - Принимает значения:
                //					1 - Переключатель
                //					2 - Тумблер
                //	СтруктураСвойств - Структура - Содержит значения свойств, где ключ название свойства и значение
                //	СтруктураСобытий - Структура - Содержит значения событий, где ключ название события и в значение название процедуры тип "строка"
                //	ЭлементПеред	- Строка - достаточно указать название элемента формы перед которым требуется вставить новый элемент
                //					- Элементы - можно передать элемент формы
                //</span>
                Функция СздПереключатель(Форма,
                    ИмяПереключателя,
                    РодительЭлемента,
                    ЗаголовокЭлемента = "",
                    МассивЗначений,
                    тВидПереключателя,
                    СтруктураСвойств = Неопределено,
                    СтруктураСобытий = Неопределено,
                    ЭлементПеред = Неопределено
                    ) Экспорт
                    
                    СоздатьРеквизит(Форма,ИмяПереключателя,ОписаниеТипаЧисло(10,0)); 
                    НовыйРеквизит = Форма[ИмяПереключателя]; 
                    НовыйЭлемент = СздПоле(Форма,ИмяПереключателя,РодительЭлемента,ЗаголовокЭлемента,4,ИмяПереключателя,СтруктураСвойств,СтруктураСобытий,ЭлементПеред);
    
                    Если ЗаголовокЭлемента &lt;> "" Тогда НовыйЭлемент.Заголовок = ЗаголовокЭлемента; КонецЕсли;
                    
                    Если тВидПереключателя &lt;> 0 Тогда
                        НаборВидов = "Переключатель
                        |Тумблер";		
                        ВидПоля = СокрЛП(СтрПолучитьСтроку(НаборВидов,тВидПереключателя));
                        НовыйЭлемент.ВидПереключателя = ВидПереключателя[ВидПоля];
                    КонецЕсли;	
                    
                    Счетчик = 0;
                    Для Каждого текЭлемент Из МассивЗначений Цикл
                        НовыйЭлемент.СписокВыбора.Добавить(Счетчик,текЭлемент);
                        Счетчик = Счетчик + 1;
                    КонецЦикла;
                    
                    Возврат НовыйЭлемент;	
                КонецФункции
    
                <span class="ск">#КонецОбласти
    
                #Область УдалениеЭлементовИРеквизитов</span>
    
                <span class="з">//Удалить реквизиты ранее созданный программно!
                //
                //Параметры:
                //	МассивУдаляемыхРеквизитов - Массив - Содержит строковые типы с именами реквизитов, ТОЛЬКО СОЗДАННЫЕ ПРОГРАММНО!</span>
                Процедура УдлРеквизиты(Форма,МассивУдаляемыхРеквизитов) Экспорт
                    Форма.ИзменитьРеквизиты(,МассивУдаляемыхРеквизитов); 	
                КонецПроцедуры
                    
                <span class="з">//Удалить реквизит ранее созданный программно!
                //
                //Параметры:
                //	ИмяРеквизита - Строка - Имя удаляемого реквизита, ТОЛЬКО СОЗДАННЫЕ ПРОГРАММНО!</span>
                Процедура УдлРеквизит(Форма,ИмяРеквизита) Экспорт 
                    МассивУдаляемыхРеквизитов = Новый Массив;
                    МассивУдаляемыхРеквизитов.Добавить(ИмяРеквизита);
                    УдлРеквизиты(Форма,МассивУдаляемыхРеквизитов);	
                КонецПроцедуры
    
                <span class="з">//Удалить элементы ранее созданный программно!
                //
                //Параметры:
                //	МассивУдаляемыхЭлементов - Массив - Содержит строковые типы с именами удаляемых элементов, ТОЛЬКО СОЗДАННЫЕ ПРОГРАММНО!</span>
                Процедура УдлЭлементы(Форма,МассивУдаляемыхЭлементов) Экспорт
                    Для Каждого текЭлемент Из МассивУдаляемыхЭлементов Цикл
                        Если Форма.Элементы.Найти(текЭлемент) &lt;> Неопределено Тогда
                            Форма.Элементы.Удалить(Форма.Элементы[текЭлемент]);
                        КонецЕсли;		
                    КонецЦикла;	 	
                КонецПроцедуры
                    
                <span class="з">//Удалить элемент ранее созданный программно!
                //
                //Параметры:
                //	ИмяРеквизита - Строка - Имя удаляемого элемента на форме, ТОЛЬКО СОЗДАННЫЕ ПРОГРАММНО!</span>
                Процедура УдлЭлемент(Форма,ИмяЭлемента) Экспорт 
                    МассивУдаляемыхЭлементов = Новый Массив;
                    МассивУдаляемыхЭлементов.Добавить(ИмяЭлемента);
                    УдлЭлементы(Форма,МассивУдаляемыхЭлементов);	
                КонецПроцедуры
    
                <span class="з">//Удалить элемент и реквизит ранее созданный программно!
                //
                //Параметры:
                //	ИмяРеквизитаЭлемента - Строка - Имя удаляемого элемента и реквизита на форме СОВПАДАЕТ!!! и ТОЛЬКО СОЗДАННЫЕ ПРОГРАММНО!</span>
                Процедура УдлРеквизитИЭлемент(Форма,ИмяРеквизитаЭлемента) Экспорт
                    УдлРеквизит(Форма,ИмяРеквизитаЭлемента);
                    УдлЭлемент(Форма,ИмяРеквизитаЭлемента);
                КонецПроцедуры
    
                <span class="ск">#КонецОбласти
    
                #Область Свойства</span>
    
                <span class="з">//Основные свойства поля ввода
                //
                // Параметры:
                //Заголовок - Строка - Заголовок поля на форме
                //Вид - ВидПоляФормы - Вид поля формы клиентского приложения
                //ПутьКДанным - Строка - Путь к данным реквизита формы или объекта
                //ПоложениеЗаголовка - ПоложениеЗаголовкаЭлементаФормы - Определяет положение заголовка относительно поля в макете формы. Следует заметить, что для отключения вывода заголовка следует установить это свойство в значение Нет.
                //Видимость - Булево - Видимость элемента на форме
                //Доступность - Булево - Доступность элемента на форме
                //ТолькоПросмотр - Булево - Только просмотр элемента на форме
                //ПропускатьПриВводе - Булево - Указывает необходимость пропуска поля при вводе данных
                //		- Неопределено - Авто
                //АктивизироватьПоУмолчанию - Булево - Если свойство установлено, данный элемент будет активизирован при открытии формы
                //ВажностьПриОтображении - ВажностьПриОтображении - Указывает важность элемента при отображении (используется для адаптации формы к ширине экрана мобильного устройства)
                //Маска - Строка - (Поле ввода) Содержит посимвольную строку маски интерактивного ввода текста в поле.
                //В строке маски допустимо использование следующих специальных символов:
                //! - любой введенный символ преобразуется в верхний регистр;
                //9 - допустимо ввести произвольный символ цифры;
                //# - допустимо ввести произвольный символ цифры или - (знак минус) или + (знак плюс) или пробел;
                //N - допустимо ввести любые алфавитно-цифровые символы (буквы или цифры);
                //U - допустимо ввести любые алфавитно-цифровые символы (буквы или цифры) и любой введенный символ преобразуется в верхний регистр;
                //X (латинского алфавита) - допустимо ввести произвольный символ;
                //^ - недопустимо вводить этот символ интерактивно пользователем, он может устанавливаться только из языка;
                //h - допустим ввод символов обозначения шестнадцатеричных цифр;
                //@ – допустимо ввести любые алфавитно-цифровые символы (буквы или цифры) в верхнем регистре или пробел.
                //Если в маске из специальных символов используются только символы "@", то все символы текста, соответствующие символам маски, не являющимся специальными символами, удаляются после последнего непустого блока из символов "@". Например, при маске "@@.@@.@@." текст "41. 2. ." преобразуется в "41.2".
                //Для того, чтобы использовать в маске один из специальных символов, нужно использовать перед ним символ "\".
                //Допускается указание нескольких масок в одном параметре. Маски разделяются символом ";". В этом случае использоваться будет та маска, к которой подходит введенный текст.
                //РежимПароля  - Булево - (Поле ввода, поле надписи) Содержит признак специального режима для ввода пароля, в котором все вводимые символы отображаются символом "*" (звездочка).
                //		- Неопределено - Авто 
                //МногострочныйРежим - Булево - Управляет многострочным режимом в поле ввода.
                //РасширенноеРедактирование - Булево - (Поле ввода) Если свойство установлено в Истина, то включается расширенный режим редактирования, при котором само поле ввода обрабатывает нажатие клавиши TAB (в текст вставляется символ табуляции и переход к следующему полю не происходит), а также доступен поиск по тексту с помощью стандартных действий.
                //Гиперссылка - Булево - (Поле надписи, поле картинки) можно обработать событие гиперссылки "ОбработкаНавигационнойСсылки"
                //</span>
                Функция СтруктураСвойствОсновные(Заголовок = "",
                    Вид = Неопределено,
                    ПутьКДанным = "",
                    ПоложениеЗаголовка = Неопределено,
                    Видимость = Неопределено,
                    Доступность = Неопределено,
                    ТолькоПросмотр = Неопределено,
                    ПропускатьПриВводе = Неопределено,
                    АктивизироватьПоУмолчанию = Неопределено,
                    Маска = "",
                    РежимПароля = Неопределено,
                    МногострочныйРежим = Неопределено,
                    РасширенноеРедактирование = Неопределено,
                    Гиперссылка = Неопределено) Экспорт
                    
                    СтруктураСвойств = Новый Структура;
                    
                    Если Заголовок &lt;> "" Тогда СтруктураСвойств.Вставить("Заголовок",Заголовок) КонецЕсли;
                    Если Вид &lt;> Неопределено Тогда СтруктураСвойств.Вставить("Вид",Вид) КонецЕсли;
                    Если ПутьКДанным &lt;> "" Тогда СтруктураСвойств.Вставить("ПутьКДанным",ПутьКДанным) КонецЕсли;
                    Если ПоложениеЗаголовка &lt;> Неопределено Тогда СтруктураСвойств.Вставить("ПоложениеЗаголовка",ПоложениеЗаголовка) КонецЕсли;
                    Если Видимость &lt;> Неопределено Тогда СтруктураСвойств.Вставить("Видимость",Видимость) КонецЕсли;
                    Если Доступность &lt;> Неопределено Тогда СтруктураСвойств.Вставить("Доступность",Доступность) КонецЕсли;
                    Если ТолькоПросмотр &lt;> Неопределено Тогда СтруктураСвойств.Вставить("ТолькоПросмотр",ТолькоПросмотр) КонецЕсли;
                    Если ПропускатьПриВводе &lt;> Неопределено Тогда СтруктураСвойств.Вставить("ПропускатьПриВводе",ПропускатьПриВводе) КонецЕсли;
                    Если АктивизироватьПоУмолчанию &lt;> Неопределено Тогда СтруктураСвойств.Вставить("АктивизироватьПоУмолчанию",АктивизироватьПоУмолчанию) КонецЕсли;
                    Если Маска &lt;> "" Тогда СтруктураСвойств.Вставить("Маска",Маска) КонецЕсли;
                    Если РежимПароля &lt;> Неопределено Тогда СтруктураСвойств.Вставить("РежимПароля",РежимПароля) КонецЕсли;
                    Если МногострочныйРежим &lt;> Неопределено Тогда СтруктураСвойств.Вставить("МногострочныйРежим",МногострочныйРежим) КонецЕсли;
                    Если РасширенноеРедактирование &lt;> Неопределено Тогда СтруктураСвойств.Вставить("РасширенноеРедактирование",РасширенноеРедактирование) КонецЕсли;
                    Если Гиперссылка &lt;> Неопределено Тогда СтруктураСвойств.Вставить("Гиперссылка",Гиперссылка) КонецЕсли;
                    
                    Возврат СтруктураСвойств; 
                КонецФункции
    
                <span class="з">//Свойства Подсказка
                //
                // Параметры:
                //	Подсказка - Строка - Текст подсказки
                //	ОтображениеПодсказки - ОтображениеПодсказки - Задает способ отображения подсказки элемента формы
                //	ПодсказкаВвода - Строка - Текст подсказки ввода в поле формы</span>
                Функция СтруктураСвойствПодсказка(Подсказка = Неопределено,
                    ОтображениеПодсказки = Неопределено,
                    ПодсказкаВвода = Неопределено) Экспорт
                    
                    СтруктураСвойств = Новый Структура;
                    
                    Если Подсказка &lt;> Неопределено Тогда СтруктураСвойств.Вставить("Подсказка",Подсказка) КонецЕсли;
                    Если ОтображениеПодсказки &lt;> Неопределено Тогда СтруктураСвойств.Вставить("ОтображениеПодсказки",ОтображениеПодсказки) КонецЕсли;
                    Если ПодсказкаВвода &lt;> Неопределено Тогда СтруктураСвойств.Вставить("ПодсказкаВвода",ПодсказкаВвода) КонецЕсли;
                    
                    Возврат СтруктураСвойств;
                КонецФункции
    
                <span class="з">//Свойства размеров
                //
                // Параметры:
                //	Ширина - Число - Ширина элемента
                //	Высота - Число - Высота элемента
                //	АвтоМаксимальнаяШирина - Булево - Отключение автоматической ширины
                //	МаксимальнаяШирина - Число - Максимальная ширина элемента на форме, работает если АвтоМаксимальнаяШирина - ОТКЛЮЧЕНА
                //	АвтоМаксимальнаяВысота - Булево - Отключение автоматической высоты
                //	МаксимальнаяВысота - Число - Максимальная высота элемента на форме, работает если АвтоМаксимальнаяВысота - ОТКЛЮЧЕНА
                //	РастягиватьПоГоризонтали - Булево - Если требуется принудительно задать автоматическое растягивание по ширине
                //	РастягиватьПоВертикали - Булево - Если требуется принудительно задать автоматическое растягивание по высоте
                //	тГоризонтальноеПоложение - Число - Принимаемые значения:
                //		1 - Лево
                //		2 - Центр
                // 		3 - Право
                //		0 - Авто
                //	тГоризонтальноеПоложениеВШапке - Число - Принимаемые значения:
                //		1 - Лево
                //		2 - Центр
                // 		3 - Право
                //		0 - Авто
                //	тГоризонтальноеПоложениеВПодвале - Число - Принимаемые значения:
                //		1 - Лево
                //		2 - Центр
                // 		3 - Право
                //		0 - Авто
                //</span>
                Функция СтруктураСвойствРасположение(Ширина = Неопределено,
                    Высота = Неопределено,
                    АвтоМаксимальнаяШирина = Неопределено,
                    МаксимальнаяШирина = Неопределено,
                    АвтоМаксимальнаяВысота = Неопределено,
                    МаксимальнаяВысота = Неопределено,
                    РастягиватьПоГоризонтали = Неопределено,
                    РастягиватьПоВертикали = Неопределено,
                    тГоризонтальноеПоложение = Неопределено,
                    тГоризонтальноеПоложениеВШапке = Неопределено,
                    тГоризонтальноеПоложениеВПодвале = Неопределено) Экспорт
                    
                    СтруктураСвойств = Новый Структура;
                    
                    Если Ширина &lt;> Неопределено Тогда СтруктураСвойств.Вставить("Ширина",Ширина) КонецЕсли;
                    Если Высота &lt;> Неопределено Тогда СтруктураСвойств.Вставить("Высота",Высота) КонецЕсли;
                    Если АвтоМаксимальнаяШирина &lt;> Неопределено Тогда СтруктураСвойств.Вставить("АвтоМаксимальнаяШирина",АвтоМаксимальнаяШирина) КонецЕсли;
                    Если МаксимальнаяШирина &lt;> Неопределено Тогда СтруктураСвойств.Вставить("МаксимальнаяШирина",МаксимальнаяШирина) КонецЕсли;
                    Если АвтоМаксимальнаяВысота &lt;> Неопределено Тогда СтруктураСвойств.Вставить("АвтоМаксимальнаяВысота",АвтоМаксимальнаяВысота) КонецЕсли;
                    Если МаксимальнаяВысота &lt;> Неопределено Тогда СтруктураСвойств.Вставить("МаксимальнаяВысота",МаксимальнаяВысота) КонецЕсли;	
                    Если РастягиватьПоГоризонтали &lt;> Неопределено Тогда СтруктураСвойств.Вставить("РастягиватьПоГоризонтали",РастягиватьПоГоризонтали) КонецЕсли;
                    Если РастягиватьПоВертикали &lt;> Неопределено Тогда СтруктураСвойств.Вставить("РастягиватьПоВертикали",РастягиватьПоВертикали) КонецЕсли;	
                    Если тГоризонтальноеПоложение &lt;> Неопределено Тогда СтруктураСвойств.Вставить("ГоризонтальноеПоложение",ПолучитьГоризонтальноеПоложение(тГоризонтальноеПоложение)) КонецЕсли;	
                    Если тГоризонтальноеПоложениеВШапке &lt;> Неопределено Тогда СтруктураСвойств.Вставить("ГоризонтальноеПоложениеВШапке",ПолучитьГоризонтальноеПоложение(тГоризонтальноеПоложениеВШапке)) КонецЕсли;	
                    Если тГоризонтальноеПоложениеВПодвале &lt;> Неопределено Тогда СтруктураСвойств.Вставить("ГоризонтальноеПоложениеВПодвале",ПолучитьГоризонтальноеПоложение(тГоризонтальноеПоложениеВПодвале)) КонецЕсли;	
                    
                    Возврат СтруктураСвойств;
                КонецФункции                                     
    
                <span class="з">//Свойства Таблицы формы
                //
                // Параметры:
                //	Отображение - ОтображениеТаблицы - Отображение данных в таблице
                //	РежимВводаСтрок - РежимВводаСтрокТаблицы - Режим ввода строк в таблице
                //	РежимВыделения - РежимВыделенияТаблицы - Определяет режим выделения строк в таблице
                //	РежимВыделенияСтроки - РежимВыделенияСтрокиТаблицы - Определяет режим выделения строки в таблице
                //	Шапка - Булево - Определяет наличие шапки у таблицы
                //	Подвал - Булево - Определяет наличие подвала у таблицы
                //	АвтоВводНовойСтроки - Булево - Содержит признак автоматического ввода новой строки после заполнения текущей
                //	ВысотаВСтрокахТаблицы - Число - Содержит высоту таблицы. Задается в строках. Указывает количество строк, отображаемых в области данных таблицы. Таблица занимает такую высоту, чтобы разместились шапка, подвал и заданное число строк в области данных. Число строк в общем случае не является числом записей данных, отображаемых в таблице, так как одна запись данных может выводиться в несколько строк таблицы. Более того, разные строки данных могут занимать разную высоту</span>
                Функция СтруктураСвойствТаблицыФормы(Отображение = Неопределено,
                    РежимВводаСтрок = Неопределено,
                    РежимВыделения = Неопределено,
                    РежимВыделенияСтроки = Неопределено,
                    Шапка = Неопределено,
                    Подвал = Неопределено,
                    АвтоВводНовойСтроки = Неопределено,
                    ВысотаВСтрокахТаблицы = Неопределено) Экспорт
                    
                    СтруктураСвойств = Новый Структура;
                    
                    Если Отображение &lt;> Неопределено Тогда СтруктураСвойств.Вставить("Отображение",Отображение) КонецЕсли;
                    Если РежимВводаСтрок &lt;> Неопределено Тогда СтруктураСвойств.Вставить("РежимВводаСтрок",РежимВводаСтрок) КонецЕсли;
                    Если РежимВыделения &lt;> Неопределено Тогда СтруктураСвойств.Вставить("РежимВыделения",РежимВыделения) КонецЕсли;
                    Если РежимВыделенияСтроки &lt;> Неопределено Тогда СтруктураСвойств.Вставить("РежимВыделенияСтроки",РежимВыделенияСтроки) КонецЕсли;
                    Если Шапка &lt;> Неопределено Тогда СтруктураСвойств.Вставить("Шапка",Шапка) КонецЕсли;
                    Если Подвал &lt;> Неопределено Тогда СтруктураСвойств.Вставить("Подвал",Подвал) КонецЕсли;
                    Если АвтоВводНовойСтроки &lt;> Неопределено Тогда СтруктураСвойств.Вставить("АвтоВводНовойСтроки",АвтоВводНовойСтроки) КонецЕсли;	
                    Если ВысотаВСтрокахТаблицы &lt;> Неопределено Тогда СтруктураСвойств.Вставить("ВысотаВСтрокахТаблицы",ВысотаВСтрокахТаблицы) КонецЕсли;
                    
                    Возврат СтруктураСвойств;	 
                КонецФункции
    
                <span class="ск">#КонецОбласти</span>    
            </pre>
        </div>




        <p class="title-size16"><b id="work-forms-in4">Создание динамического списка в форме программно</b></p>
        <p>Возникла необходимость в программном создании элементов формы, особенно такого как динамический список. Необходимо программно влиять на него полностью, включая и формирование необходимых мне колонок. Данная процедура может выполняться за сеанс формы N-ное количество раз, поэтому и была написана универсальная процедура формирования динамического списка:</p>
        <div class="code-style">
            <pre>
                &НаСервере
                Процедура СозданиеДинамическогоСписка(
                    <span class="з">//тип строка - имя будущего списка на форме и реквизита</span>
                    ИмяСписка = "Список",
                    
                    <span class="з">//тип строка - запрос, если он не указан, необходимо указать таблицу
                    ТекстЗапроса = "", 
                    
                    <span class="з">//тип массив - массив создаваемых колонок, значения тип строка. Пример: "Д,ДоговораКонтрагента" значит будет создана колонка с заголовком "Д" и колонкой списка "ДоговораКонтрагента". Если указать просто "ДоговораКонтрагента", заголовок будет идентичен заголовку по умолчанию типа "Договор контрагента".</span>
                    МассивКолонок,    
                    
                    <span class="з">//типа структура - структура содержит действия (свойства) динамического списка, можно указать только те которые необходимы. Пример: СписокДействий = Новый Структура("Выбор,ПриАктивизацииСтроки","СписокВыбор","СписокПриАктивизацииСтроки")</span>
                    СписокДействий = Неопределено, 
    
                    <span class="з">//тип строка - содержит имя основной таблицы, пример: "Документ.РеализацияТоваровУслуг"</span>    
                    ТаблицаСписка = "",	
                    
                    <span class="з">//тип строка - имя элемента на который будет размещен список, если пустое, тогда добавляется на форму</span>
                    ДобавитьВ = "", 
                    
                    <span class="з">//тип строка - имя элемента перед которым будет размещен список, если пустое, будет просто добавлен в конец</span>
                    ВставитьПеред = "",
                    
                    <span class="з">//тип булево - если ИСТИНА, скрывает стандартную панель и создает свою пустую для будушего наполнения ИмяСписка+"КоманднаяПанель2"</span>
                    СвояКоманднаяПанель = ЛОЖЬ,
                    
                    <span class="з">//тип структура - содержит перечень параметров, если они используются в запросе.</span>
                    ПараметрыЗапроса = Неопределено)
                    
                    <span class="з">//Защита от дурака</span>
                    Если ТекстЗапроса = "" И ТаблицаСписка = "" Тогда Сообщить("Ошибка формирования динамического списка, укажите запрос или таблицу"); Возврат; КонецЕсли;
                                                                                                                    
                    <span class="з">//Создаем свою командную панель, тот случай когда я не нашел способа снять галочку "Автозаполнение"</span>
                    Если СвояКоманднаяПанель Тогда
                        Если ВставитьПеред = "" Тогда
                            ГруппаДинамическогоСписка  = Элементы.Добавить("Группа" + ИмяСписка + "CоСвоейКоманднойПанелью",Тип("ГруппаФормы"),?(ДобавитьВ = "",ЭтаФорма,ЭтаФорма.Элементы[ДобавитьВ]));
                        Иначе
                            ГруппаДинамическогоСписка  = Элементы.Вставить("Группа" + ИмяСписка + "CоСвоейКоманднойПанелью",Тип("ГруппаФормы"),?(ДобавитьВ = "",ЭтаФорма,ЭтаФорма.Элементы[ДобавитьВ]),ЭтаФорма.Элементы[ВставитьПеред]);			
                        КонецЕсли;
                        ГруппаДинамическогоСписка.Вид = ВидГруппыФормы.ОбычнаяГруппа;
                        ГруппаДинамическогоСписка.ОтображатьЗаголовок = Ложь;
                        ГруппаДинамическогоСписка.Отображение = ОтображениеОбычнойГруппы.Нет;
                        ГруппаДинамическогоСписка.Группировка = ГруппировкаПодчиненныхЭлементовФормы.Вертикальная;
                        КоманднаяПанельСписка  = Элементы.Добавить(ИмяСписка + "КоманднаяПанель2",Тип("ГруппаФормы"),ГруппаДинамическогоСписка);
                        КоманднаяПанельСписка.Вид = ВидГруппыФормы.КоманднаяПанель;			
                    КонецЕсли;
                                                    
                    <span class="з">//Создаем реквизит формы</span>
                    ТипыРеквизита = Новый Массив;                             
                    ТипыРеквизита.Добавить(Тип("ДинамическийСписок"));
                    ОписаниеТиповДляРеквизита = Новый ОписаниеТипов(ТипыРеквизита); 
                    ДинамическийСписок = Новый РеквизитФормы(ИмяСписка, ОписаниеТиповДляРеквизита,,"",ЛОЖЬ); //Имя реквизита
                    ДобавляемыеРеквизиты = Новый Массив;
                    ДобавляемыеРеквизиты.Добавить(ДинамическийСписок);        
                    
                    <span class="з">//Задаем свойства реквизиту</span>
                    ИзменитьРеквизиты(ДобавляемыеРеквизиты);        
                    РеквизитДинамическийСписок = ЭтаФорма[ИмяСписка]; //Имя реквизита
                    Если ТекстЗапроса = "" Тогда
                        РеквизитДинамическийСписок.ПроизвольныйЗапрос = ЛОЖЬ;
                        РеквизитДинамическийСписок.ОсновнаяТаблица = ТаблицаСписка;
                    Иначе
                        РеквизитДинамическийСписок.ПроизвольныйЗапрос = ИСТИНА;
                        РеквизитДинамическийСписок.ТекстЗапроса = ТекстЗапроса;
                        Если ТаблицаСписка &lt;> "" Тогда РеквизитДинамическийСписок.ОсновнаяТаблица = ТаблицаСписка; КонецЕсли;		
                    КонецЕсли;
                    
                    <span class="з">//Заполняем параметры если они были указаны</span>
                    Если ПараметрыЗапроса &lt;> Неопределено Тогда
                        Для Каждого Параметра из ПараметрыЗапроса Цикл
                            РеквизитДинамическийСписок.Параметры.УстановитьЗначениеПараметра(Параметра.Ключ,Параметра.Значение);	
                        КонецЦикла;		 
                    КонецЕсли;
                    
                    <span class="з">//Размещаем реквизит на форме</span>
                    Если ЛОЖЬ
                        ИЛИ ВставитьПеред = "" 
                        ИЛИ СвояКоманднаяПанель //Если своя командная панель тогда нет логики уже в параметре ВставитьПеред
                        Тогда
                        ТаблицаФормы = Элементы.Добавить(ИмяСписка,Тип("ТаблицаФормы"),?(СвояКоманднаяПанель,ГруппаДинамическогоСписка,?(ДобавитьВ = "",ЭтаФорма,ЭтаФорма.Элементы[ДобавитьВ])));
                    Иначе
                        ТаблицаФормы = Элементы.Вставить(ИмяСписка,Тип("ТаблицаФормы"),?(ДобавитьВ = "",ЭтаФорма,ЭтаФорма.Элементы[ДобавитьВ]),ЭтаФорма.Элементы[ВставитьПеред]);	
                    КонецЕсли;		
                    ТаблицаФормы.ПутьКДанным = ИмяСписка; //Имя реквизита 
                    
                    <span class="з">//Если своя панель тогда скрываем стандартную</span>
                    Если СвояКоманднаяПанель Тогда
                        Элементы[ИмяСписка].ПоложениеКоманднойПанели = ПоложениеКоманднойПанелиЭлементаФормы.Нет;
                    КонецЕсли;
    
                    <span class="з">//Создание колонок на основание МассивКолонок</span>
                    Для Каждого Элемента Из МассивКолонок Цикл
                        ПараметрыКолонки = СтрЗаменить(Элемента,",",Символы.ПС);
                        Если СтрЧислоСтрок(ПараметрыКолонки) > 1 Тогда
                            Заголовок = СтрПолучитьСтроку(ПараметрыКолонки, 1);
                            ИмяКолонки = СтрПолучитьСтроку(ПараметрыКолонки, 2);
                        Иначе
                            Заголовок = "";
                            ИмяКолонки = ПараметрыКолонки; 
                        КонецЕсли;	
                        НоваяКолонкаТаблицы = Элементы.Добавить(ИмяСписка + ИмяКолонки, Тип("ПолеФормы"), ТаблицаФормы);
                        Если Заголовок &lt;> "" Тогда НоваяКолонкаТаблицы.Заголовок = Заголовок; КонецЕсли;
                        НоваяКолонкаТаблицы.ПутьКДанным = ИмяСписка + "." + ИмяКолонки; 	
                    КонецЦикла;
                    
                    <span class="з">//Задаем действия (События) на основание СписокДействий, если он определен</span>
                    Если СписокДействий &lt;> Неопределено Тогда 	
                        ПереченьСвойств = "ПриИзменении
                                        |Выбор
                                        |ПриАктивизацииСтроки
                                        |ВыборЗначения
                                        |ПриАктивизацииПоля
                                        |ПриАктивизацииЯчейки
                                        |ПередНачаломДобавления
                                        |ПередНачаломИзменения
                                        |ПередУдалением
                                        |ПриНачалеРедактирования
                                        |ПередОкончаниемРедактирования
                                        |ПриОкончанииРедактирования
                                        |ОбработкаВыбора
                                        |ПередРазворачиванием
                                        |ПередСворачиванием
                                        |ПослеУдаления
                                        |ПриСменеТекущегоРодителя
                                        |ОбработкаЗаписиНового
                                        |ПриСохраненииПользовательскихНастроекНаСервере
                                        |ПередЗагрузкойПользовательскихНастроекНаСервере
                                        |ПриЗагрузкеПользовательскихНастроекНаСервере
                                        |ПриОбновленииСоставаПользовательскихНастроекНаСервере
                                        |ОбработкаЗапросаОбновления
                                        |ПриПолученииДанныхНаСервере
                                        |НачалоПеретаскивания
                                        |ПроверкаПеретаскивания
                                        |ОкончаниеПеретаскивания
                                        |Перетаскивание";
                        Для Счетчик = 1 по 28 Цикл
                            ИмяСвойства = СтрПолучитьСтроку(ПереченьСвойств, Счетчик);
                            Элементы[ИмяСписка].УстановитьДействие(ИмяСвойства,?(СписокДействий.Свойство(ИмяСвойства),СписокДействий[ИмяСвойства],""));
                        КонецЦикла;
                    КонецЕсли;	
                КонецПроцедуры 
                
                <span class="з">//Но если мы что-то создаем программно, то должны уметь и удалять это программно. Поэтому вытекающая процедура это удаление списка:</span>
    
                &НаСервере
                Процедура УдалениеДинамическогоСписка(ИмяСписка);	
                    
                    Если ЭтаФорма.Элементы.Найти(ИмяСписка) &lt;> Неопределено Тогда
                        <span class="з">//Удаляем реквизиты формы</span>
                        МассивУдаляемыхРеквизитов = Новый Массив;
                        МассивУдаляемыхРеквизитов.Добавить(ИмяСписка);
                        ИзменитьРеквизиты(,МассивУдаляемыхРеквизитов); 	
                        
                        <span class="з">//Удаляем эелементы формы</span>
                        Элементы.Удалить(Элементы[ИмяСписка]);	
                    КонецЕсли;
                    
                    <span class="з">//Удаляем командную панель свою, если есть</span>
                    Если Элементы.Найти(ИмяСписка + "КоманднаяПанель2") &lt;> Неопределено Тогда
                        Элементы.Удалить(Элементы[ИмяСписка + "КоманднаяПанель2"]);
                    КонецЕсли;
                    
                    <span class="з">//Удаляем группу созданую при условие если нужна своя командная панель</span>
                    Если Элементы.Найти("Группа" + ИмяСписка + "CоСвоейКоманднойПанелью") &lt;> Неопределено Тогда
                        Элементы.Удалить(Элементы["Группа" + ИмяСписка + "CоСвоейКоманднойПанелью"]);		
                    КонецЕсли;
    
                КонецПроцедуры     
            </pre>
        </div>





        <p class="title-size16"><b id="work-forms-in5">Условное оформление списка из объекта формы и условное оформление списка из динамического списка</b></p>
        <p>1способ. Есть задача расскрасить счета плана счетов в красный цвет, у которых в булевом реквизите "ЗапретитьИспользованиеВПроводках" стоит Истина.</p>
        <p>Можно это сделать 3мя способами. У самой формы есть свойство "УсловноеОформление" и также программно можно обратиться к условному оформлению самого динамического списка. Сначала напишу через динамический список, вот код:</p>
        <div class="code-style">
            <pre>
                <span class="светло-синий">&НаКлиенте
                Процедура ПриОткрытии(Отказ)
                    УО = Список.КомпоновщикНастроек.Настройки.УсловноеОформление.Элементы;
                            
                    ЭлементУО = УО.Добавить();
                    
                    <span class="з">// Оформление: цвет фона светлый лосось</span>
                    ЭлементУО.Оформление.УстановитьЗначениеПараметра(<span class="серый">"ЦветФона"</span>, WebЦвета.КрасноФиолетовый);
                    ЭлементУО.Оформление.УстановитьЗначениеПараметра(<span class="серый">"ЦветТекста"</span>, WebЦвета.Белый);
                    
                    <span class="з">// Условие: поле НаКонтроле равно Истина</span>
                    ЭлементУсловия = ЭлементУО.Отбор.Элементы.Добавить(Тип(<span class="серый">"ЭлементОтбораКомпоновкиДанных"</span>));
                    ЭлементУсловия.ЛевоеЗначение = Новый ПолеКомпоновкиДанных(<span class="серый">"ЗапретитьИспользованиеВПроводках"</span>);
                    ЭлементУсловия.ВидСравнения = ВидСравненияКомпоновкиДанных.Равно;
                    ЭлементУсловия.ПравоеЗначение = Истина;
    
                    <span class="з">//Оформляемые поля не назначаем, оставил просто для примера
                    // Оформляемое поле: Номер 
                    //ОформляемоеПоле = ЭлементУО.Поля.Элементы.Добавить();
                    //ОформляемоеПоле.Поле = Новый ПолеКомпоновкиДанных("Номер");</span>
                    
                    Список.КомпоновщикНастроек.ЗагрузитьНастройки(Список.КомпоновщикНастроек.Настройки);
                КонецПроцедуры </span>  
            </pre>
        </div>
        <p><span class="светло-красный">Случился один прикол с этим оформлением через динамический список. Написал код, но потом удалил обработчик "ПриОткрытии", чтобы сделать через оформление формы, но офрмление удалённое не уходило. Уже почистил кеш, но не помогало, тогда в пользовательской части зашёл в "Настройка списка" и там висело моё формление видимо оставшееся от кода, удалил его и всё</span>.</p>
        <p>2й способ. Далее опишу как через свойство формы оформить список. В общем там описывать нечего, просто открываем оформление, добавляем и выбираем всё нам нужное.</p>
        <p>Есть ещё один подводный камень. Мы ставим условие красить поля по реквизиту "ЗапретитьИспользованиеВПроводках", который мы не выносим в элементы формы, а значит при получении данных в динамический список попадают только те поля, которые есть в элементах формы. Значит нам для реквизита списка "ЗапретитьИспользованиеВПроводках" нужно поставить галочку "Использовать всегда", чтобы система захватывала из базы значение этого реквизита.</p>
        <p>3й способ. Если выбелить основной реквизит формы Список и перейти в его свойства, то выше на выбором основной таблицы для отображения её данных есть свойство "Настройка списка", там можно точно также настроить оформление списка как и через оформление у формы.</p>




        <p class="title-size16"><b id="work-forms-in6">Передача данных между формами</b></p>
        <p>Тут просто буду перечислять способы передачи данных:</p>
        <ul class="list">
            <li>Метод ПоказатьВводЗначения()</li>
            <li>Метод ОткрытьФорму()</li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
        <p>Есть разные способы передачи данных между формами, в этом разделе рассмотрим многие из них.</p>

        <p><b>Способ 1. Метод ПоказатьВводЗначения()</b></p>
        <p>Есть такой механизм, когда у нас на форме есть поле ввода с типом, например, СправочникСсылка.Номенклатура и при нажатии на кнопку выбора(стрелочка вниз) вылетает окошко, в котором по кнопке "Показать все" открывается форма выбора справоника Номенклатура, в этой форме выбираем ссылку и жмём "Выбрать" и эта ссылка попадает в поле ввода, т.е. передаётся какое то значение от формы к форме. Вот похожий механизм мы опишем сами. Создадим обработку, в обработке создадим реквизит формы с типом СправочникСсылка.Номенклатура, вынесем в элементы. Затем создадим команду, по которой будет открываться форма выбора номенклатуры и выбрав номенклатуру она появится в поле ввода. Получается мы передаём данные из формы выбора в форму обработки:</p>
        <img src="img/1С-Курс(IronSkills)/2025-08-12_19-40-07.png" class="screen-2" alt="">
        <p>Создаём для команды обработчик:</p>
        <div class="code-style">
            <pre>
                --модуль формы обработки 

                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> ВыбратьНоменклатуру()
                    <span class="з">// 1. Нужно открыть форму выбора справочника Номенклатура, есть разные способы это сделать
                    // 1.1 через метод "ПоказатьВводЗначения"</span>
                    ЧтоДелатьПосле = Новый ОписаниеОповещения(<span class="с">"ПослеВыбораНоменклатуры"</span>, ЭтотОбъект);

                    <span class="з">// последний параметр определяет, что откроется для выбора значения, в данном случае
                    // мы указали тип "СправочникСссылка.Номенклатура", значит откроется форма выбора номенклатур</span>
                    ПоказатьВводЗначения(ЧтоДелатьПосле, Неопределено, <span class="с">"Выберете номенклатуру"</span>, Тип(<span class="с">"СправочникСссылка.Номенклатура"</span>));
                <span class="ск">КонецПроцедуры</span>

                <span class="з">// Значение - это то значение, которое было выбранно</span>
                <span class="ск">&НаКлиенте
                Процедура</span> ПослеВыбораНоменклатуры(Значение, ДополнительныеПараметры) Экспорт
                    Если Значение = Неопределено Тогда
                        Возврат;
                    КонецЕсли;

                    Номенклатура = Значение;
                <span class="ск">КонецПроцедуры</span></span>
            </pre>
        </div>
        <img src="img/1С-Курс(IronSkills)/2025-08-12_21-11-19.png" class="screen" alt="">
        <p>Этот метод один из самых простых способов передачи данных между формами, но чем он плох. Он сильно ограничен, при открытии формы выбора нельзя накладывать отборы. Другой недостаток в том, что мы не можем открывать другие формы выбора. Например, мы для справочника Номенклатура создали другую форму выбора, но не выбрали её основной. Этот метод будет открывать только основную форму выбора, т.е. у нас нет возможности выбирать какую форму выбора открыть.</p>

        <p><b>Способ 2. Метод ОткрытьФорму()</b></p>
        <p>Этот способ в отличии от способа выше более гибче и универсальнее, потому что может открывать любую форму. И плюс у нас появляется возможность передать в открываемую форму параметры, по которым мы можем накладывать отборы и другие вещи тоже.</p>
        <div class="code-style">
            <pre>
                --модуль формы обработки 

                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> ВыбратьНоменклатуру()
                    <span class="з">// 1. Нужно открыть форму выбора справочника Номенклатура, есть разные способы это сделать
                    // 1.2 через метод ОткрытьФорму()</span>
                    ЧтоДелатьПосле = Новый ОписаниеОповещения(<span class="с">"ПослеВыбораНоменклатуры"</span>, ЭтотОбъект);

                    <span class="з">// вот тут мы выбрали не основную форму выбора. Чтобы получить данные из открытой формы
                    // используем 7й параметр метода "ОписаниеОповещенияОЗакрытии", т.е. после закрытия формы она передаст
                    // значение. Насколько я помню можно самим закрывать форму методом Закрыть() и самим указать значение
                    // которое хотим вернуть, но это форма выбора, тут система сама определяет, что она вернёт то, что выбрали
                    // Позже, когда дойдём до такого спосба, когда мы сами определяем что вернуть, то допишу.</span>
                    ОткрытьФорму(<span class="с">"СправочникСссылка.Номенклатура.Форма.ФормаВыбораУпрощенная"</span>,,,,,, ЧтоДелатьПосле);
                <span class="ск">КонецПроцедуры</span>

                <span class="з">// Значение - это то значение, которое было выбранно</span>
                <span class="ск">&НаКлиенте
                Процедура</span> ПослеВыбораНоменклатуры(Значение, ДополнительныеПараметры) Экспорт
                    Если Значение = Неопределено Тогда
                        Возврат;
                    КонецЕсли;

                    Номенклатура = Значение;
                <span class="ск">КонецПроцедуры</span></span>
            </pre>
        </div>
        <p>Оба способа считаются простыми в плане передачи значений между формами. Например, более сложные случае это с формой подбора, которые рассмотрим позже. Там передаётся не одно значение, а целая таблица.</p>

        <p><b>Способ 3. Через временное хранилище.</b></p>
        <p>Допустим в одной форме мы вызываем сервер и на сервере создаём таблицу значений, что то там делаем и нужно эту таблицу передать в другую форму. Можно конечно заморочится и переделать ТЗ в структуры и передать на клиент и в другую форму, но можно поместить во временное харнилище, получить адрес и передать этот адрес в другую форму, а та другая форма пойдёт у себя на сервере по этому адресу получит ТЗ и начнет с ним работать. Как попадётся объяснение подробное с примером, то опишу.</p>

        <p><b>Способ 4. Через метод Оповестить и ОбработкаОповещения()</b></p>
    </div>








    <div class="table-part">
        <h2 class="header-style" id="table-part">Работа с табличной частью формы</h2>

        <h3 class="header-style2" id="table-part1">Работа с табличной частью документа в форме. Подвал, итоги.</h3>
        <p>Есть табличная часть в документе "ПоступлениеТоваров". Чтобы в этой табличной части снизу отобразать строку с итогами по сумме, то выбираем в форме табличную часть и открываем её свойства. На вкладке "Использование" есть такое свойство как "Подвал", включаем его. Появится пока пустая строка закрашенная так же как и шапка таблицы. Строка подвал делится на столько же колонок, сколько их в шапке. Например, если в шапке колонки - Товар, Количество, Цена и Сумма, то и в подвале будет 4 колонки. Для каждой колонки мы можем что то показать в подвале. Для колонки Товар выберем палитру свойств и в свойстве "ТекстПодвала" напишем ИТОГО. Для колонок Цена и Количество ничего не указываем.</p>
        <p>Дальше мы хотим, чтобы в колонке Сумма в подвале подсчитывалась автоматом сумма всех товаров. Для этого выделяем колонку Сумма и в палитре свойств есть свойство "ПутьКДаннымПодвала" вкладки "Основные". У этого свойства жмём на кнопку выбора и откроется окошко "Выбор реквизита". Видим 2 объекта формы: 1)Основной реквизит формы Объект, 2)Объект коллекция элементов формы Элементы. Нам нужен основной реквизит Объект, раскрываем его и проходим до табличной части Товары, раскрываем его и под буквой Е внизу есть такое вычисление как ИтогСумма, выбираем его. Всё, теперь в подвале в колонке Сумма будут суммироваться все суммы денег товаров.</p>



        <h3 class="header-style2" id="table-part2">Как заблокировать некоторые колонки в табличной части.</h3>
        <p>Как то не мог найти, как заблокировать колонку табличной части для изменений. Пытался через Элементы найти колонки в табличной части, заблокировать их при открытии формы, но не получалось. Оказалось просто нужно выбрать поле табличной части и в палитре свойств поставить галочку "Только просмотр".</p>



        <h3 class="header-style2" id="table-part3">Размещаем в ком. панели таб. части кнопку "Подбор" и по ней открываем форму выбора справочника Номенклатура. Из формы выбора выбираем товар и он добавляется в таб. часть</h3>
        <p>Опишу здесь просто для тренировки программирования. Но такое встречается на практике, когда размещают кнопку Подбор в табличной части формы документа и по ней из формы выбирают товары и эти товары попадают в табличную часть сразу скопом. Вот такую форму видел на ютубе, но как её делать, пока не знаю:</p>
        <img src="img/1С-1/2023-07-19_09-48-06.png" class="screen" alt="">
        <p>Как видно, форма разделена на 3 части, как такое сделать я пока не знаю, но давай сделаем простенький способ. Тут опишу как по кнопке Подбор открыть просто форму выбора Справочника Номенклатура, там выбрать товар и вставить этот товар в созданную строку табличной части.</p>
        <p>Чтобы добавить новую строку с товаром в табличную часть можно использовать 2 способа. Первый это через добавление строки табличной части через основной реквизит формы Объект, а второй через Элементы формы. Второй способ больше по коду, сам его сочинял. Всё ради тренировки.</p>
        <p><span class="vue-d-b">При первом способе</span>, чтобы добавить товар нужна кнопка и обработчик этой кнопки, а также событие "ОбработкаВыбора" у табличной части.</p>
        <div class="code-style">
            <pre>
                --модуль формы
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> Подбор<span class="ск">(</span>Команда<span class="ск">)</span>
                    <span class="з">//тут важно указать владельца(табличная часть Товары) открываемой формы, иначе событие
                    //"ОбработкаВыбора" у табличной части не сработает</span>
                    ОткрытьФорму<span class="ск">(</span>"Справочник.Номенклатура.ФормаВыбора"<span class="ск">,,</span>Элементы<span class="ск">.</span>Товары<span class="ск">);
                КонецПроцедуры

                &НаКлиенте
                Процедура</span> ТоварыОбработкаВыбора<span class="ск">(</span>Элемент<span class="ск">,</span> ВыбранноеЗначение<span class="ск">,</span> СтандартнаяОбработка<span class="ск">)</span>
                    <span class="з">//этим способом проще добавлять товар, потому что метод Добавить() возвращает добавленную строку</span>
                    СтрокаТабЧасти <span class="ск">=</span> Объект<span class="ск">.</span>Товары<span class="ск">.</span>Добавить<span class="ск">();</span>
                    СтрокаТабЧасти<span class="ск">.</span>Товар <span class="ск">=</span> ВыбранноеЗначение<span class="ск">;
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <p><span class="vue-d-b">При втором способе</span> будем использовать таблицу из окна Элементов формы. Там нет у таблицы метода Добавить(), но есть метод ДобавитьСтроку(). Проблема в том, что этот метод не возвращает добавляему строку, а значит просто так в строку не добавить товар в колонку Товар. При добавлении строки в табличную часть таким способом происходит её добавление в таб. часть и сразу система ставит на ней фокус, а значит можно использовать событие "ПриАктивизацииСтроки". Дальше просто отлавливаем эту строку и вставляем в неё выбранный товар из другого обработчика. А чтобы из другого обработчика получить товар используем промежуточную переменную. Для этого добавим глобальную перепенную, глобальная в подтексте формы конечно же. Если просто объявить переменную через ключевое слово Перем, то ничего не сработает, как я вычитал тут - https://its.1c.ru/db/v8std/content/639/hdoc, если все обработчики и события выполняются на клиенте, то глобальную переменную тоже нужно объявлять на клиенте, чтобы с её помощью передавать промежуточные результаты между процедурами и функциями.</p>
        <div class="code-style">
            <pre>
                --модуль формы
                
                <span class="сс"><span class="ск">&НаКлиенте
                Перем</span> НаименованиеТовара<span class="ск">;</span>

                <span class="ск">&НаКлиенте
                Процедура</span> Подбор<span class="ск">(</span>Команда<span class="ск">)</span>
                    <span class="з">//тут важно указать владельца(табличная часть Товары) открываемой формы, иначе событие
                    //"ОбработкаВыбора" у табличной части не сработает</span>
                    ОткрытьФорму<span class="ск">(</span>"Справочник.Номенклатура.ФормаВыбора"<span class="ск">,,</span>Элементы<span class="ск">.</span>Товары<span class="ск">);
                КонецПроцедуры

                &НаКлиенте
                Процедура</span> ТоварыОбработкаВыбора<span class="ск">(</span>Элемент<span class="ск">,</span> ВыбранноеЗначение<span class="ск">,</span> СтандартнаяОбработка<span class="ск">)</span>
                    НаименованиеТовара <span class="ск">=</span> ВыбранноеЗначение<span class="ск">;</span>
                    Элементы<span class="ск">.</span>Товары<span class="ск">.</span>ДобавитьСтроку<span class="ск">();
                КонецПроцедуры</span>

                <span class="ск">&НаКлиенте
                Процедура</span> ТоварыПриАктивизацииСтроки<span class="ск">(</span>Элемент)
                    ТекДанные <span class="ск">=</span> Элемент<span class="ск">.</span>ТекущиеДанные<span class="ск">;</span>
                    <span class="з">//первая проверка, на случай когда мы создаём новый документ, 
                    //то система автоматом ставит на на строку табличной части фокус
                    //а строки нет, значит занчение будет Неопределено
                    //вторая проверка, когда мы открываем существующий документ и в таб. части есть товары</span>
                    <span class="ск">Если</span> ТекДанные <span class="ск">= Неопределено</span> <span class="ск">Тогда</span>
                        <span class="ск">Возврат;</span>
                    <span class="ск">ИначеЕсли</span> ЗначениеЗаполнено<span class="ск">(</span>ТекДанные<span class="ск">.</span>Товар<span class="ск">) Тогда</span>
                        <span class="ск">Возврат;</span>
                    <span class="ск">Иначе</span>
                        ТекДанные<span class="ск">.</span>Товар <span class="ск">=</span> НаименованиеТовара<span class="ск">;
                    КонецЕсли;
                КонецПроцедуры</span></span>
            </pre>
        </div>




        <h3 class="header-style2" id="table-part4">Свойство "Проверка заполнения" для табличной части</h3>
        <p>В свойствах для табличной части есть свойство "Проверка заполнения" на вкладке Представление. Если выбрать значение "Выдавать ошибку", то это значит, что нельзя будет сохранить документ или элемент справочника не заполнив его табличную часть. Будет проверяться табличная часть в целом и по каждой колонке.</p>      
    </div>
    






    <div class="din-list">
        <h3 class="header-style2" id="din-list1">Пока моё видение, что такое динамический список</h3>
        <p><span class="ск">Замечание. Где то в телеграмме увидел, что динамический список отображаемый на форме с помощью элемента формы типа "ТаблицаФормы", может обновляться по нажатию кнопки  F5 или программно: "Элементы.Список.Обновить()". А вот если таблица формы отображает таблицу значений или другую коллекцию, то список уже так не получится обновить, придётся наверно делать запрос и обновлять список из запроса самому. Это надо ещё проверять. Проверил. Так и есть. Элемент формы "ТаблицаФормы" в зависимости от того, что она показывает пользователю, расширяется свойствами, методами и событиями отображаемой сущности.</span></p>
        <p><span class="ск">Например, если она отображает динамический список, то свойство "Элементы.Список.ТекущаяСтрока" будет возвращать ссылку на объект в текущей выделенной строке. А если таблица формы отображает таблицу значений, то это свойство уже ссылку не возвращает, а вернёт идентификатор текущей строки таблицы.</span></p>
        <p>Такой тип данных(класс) как "Динамический список" позволяет выводить в форму списки объектов какой то таблицы или таблиц.</p>
        <p>Например, если в пользовательской части открыть форму списка документа "ПродажаТоваров", то система сама откроет форму списка по умолчанию и мы увидим список всех документов этого вида. Форма списка по умолчанию уже имеет основной реквизит "Список" типа "ДинамическийСписок". По умолчанию также уже настроенно, данные какой таблицы будет выводит форма с помощью этого класса. Это указанно в палитре свойств во вкладке "Объект" свойства "Основная таблица":</p>
        <img src="img/1С-1/2024-02-01_18-55-38.png" class="screen" alt="">
        <p>Если же нужно получить из таблицы не весь список, а по отбору, то ставим галочку у свойства "Произвольный запрос" и настраиваем этот запрос. Как передать параметры в этот запрос я описывал где то про форму выбора и в книге "Разработка интерфейсов" также в 3 части книги в главе 3.3.10.</p>
        <p>Можно создать форму совсем чистую без основных реквизитов в виде списка и самому добавить реквизит формы, назвать его как то и дать ему тип данных "Динамический список". Только тут уже самому нужно указать таблицу в свойстве "Основная таблица" или также настроить произвольный запрос.</p>
        <p>Как происходит это всё дело с открытием формы и получением динамического списка на сервере? Я раньше предполагал, что при методе ОткрытьФорму() мы идём на сервер, получаем из базы какой то динамический список, затем создаётся форма, в неё помещается этот динамический список и отправляется на сервер. Но это не похоже на правду. Скорее всего срабатывает метод ОткрытьФОрму(), мы идём на сервер, создаётся форма, к ней присоединяется объект "ДинамическийСписок". В зависимости от того, что за основная таблица выбрана для динамического списка, идёт запрос в БД на получение списка объектов этой таблицы.</p>
        <p>Если же для динамического списка определён в конфигураторе произвольный запрос с параметрами, то выполняется всё то же самое, только в метод ОткрытьФорму() передаём параметры формы, а затем в обработчике события "ПриСозданииНаСервере" мы берём пришедшие параметры формы и записываем их в параметры динамического списка, затем идёт запрос на получение списка объектов по этому запросу. Как это делать опять же показано в книге про разработку интерфейсов в главе 3.3.10.</p>
        <p><b>В чём отличие типа данных "Динамический список" от типов данных показанных на этой картинке:</b></p>
        <img src="img/1С-1/2024-02-01_19-45-30.png" class="screen-2" alt="">
        <p>Типы данных с наборами записей уже сами по себе ничего из базы не покажут в таблице формы. Для них программно нужно получать набор записей какого то регистра и выводить в эту таблицу с этим типом данных.</p>
    
    
    
        <h3 class="header-style2" id="din-list2">Как по реквизиту в форме, отображающей дин. список менять содержимое этого списка</h3>
        <p>Допустим мы выбирая значение для поля ввода открываем формы выбора и эта форма выбора содержит динамический список каких то значений. Я хочу чтобы в форме был булевый реквизит, по значению которого менялось содержимое динамического списка.</p>
        <p>Например, список отображает план счетов и есть реквизит "Забалансовые", при указании галочки список сам обновляется и список отображает только забалансовые счета. Как это сделать. Во такой код:</p>
        <div class="code-style">
            <pre>
                <span class="з">//а эта процедура отрабатывает при изменении булевого реквизита формы Забалансовые
                //и при истином значении мы указываем, что нужно перезапросить данные с новым 
                //значением параметра Забалансовые. Для меня было новым то, что вот так просто
                //с клиента мы устанавливаем в динамический список новое значение параметра
                //и система сама пойдёт и запросит данные по этому параметру</span>
                &НаКлиенте
                Процедура ЗабалансовыеПриИзменении(Элемент)
                    Список.Параметры.УстановитьЗначениеПараметра("Забалансовые",Забалансовые);
                КонецПроцедуры
    
                <span class="з">//эта процедура при открытии формы установит параметр запроса Забалансовые в ложно значение,
                //чтобы отображались только балансовые счета</span>
                &НаСервере
                Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
                    ЗабалансовыеСчета = Ложь;
                    Список.Параметры.УстановитьЗначениеПараметра("Забалансовые",Забалансовые);	
                КонецПроцедуры   
            </pre>
        </div>
    
    
    
        <h3 class="header-style2" id="din-list3">Как условно оформить ДС</h3>
        <p>Описывать тут не буду, это уже описал тут - <a href="work-forms-in5">перейти</a></p>
    </div>






    <div class="work-buttons">
        <h2 class="header-style" id="">Работа с кнопками для поля ввода</h2>
    
        <p class="title-size16"><b id="work-buttons1">Основы</b>.</p>
        <p>Когда мы создаём реквизит формы, то он по умолчанию создаётся с видом "Поле ввода". Это наверно самый распространнёный вид поля. Для этого поля предусмотренны расширения из разных кнопок. Эти кнопки можно подключить в палитре свойств для этого поля, но только после того как это поле перенесём в окно элементов формы. В палитре свойств эти кнопки находятся на закладке "Использование".</p>
        <img src="img/1С-1/2023-07-07_09-17-31.png" alt="">
        <p>Чтобы подключить одну из кнопок нужно в списке напротив кнопки выбрать значение Да. Также для каждой из кнопок предусмотренны события, которые находятся на вкладке "События".</p>
        <p>Как я узнал, на данный миг событие "Начало выбора из списка" не работает. По идеи оно должно срабатывать по нажатию на кнопку "КнопкаВыпадающегоСписка", но не работает. Раньше, как говорят, была другая кнопка - "Кнопка списка выбора", вот для неё работало это событие.</p>
        <p>В зависимости от того какой тип данных мы назначим полю ввода, то такие кнопки и подключатся к ней и у кнопок будут свои заранее написанные действия. Например, указывая тип Дата, появится кнопка выбора даты и по нажатию на неё сработает событие "НачалоВыбора" и откроется по умолчанию календарь. Стандартное поведение можно отключить указав аргументу "СтандартнаяОбработка" значение Ложь.</p>
        <p>Начну по неменогу описывать кнопки и их события. Начну с "КнопкаВыбора" и её событий "НачалоВыбора" и "ОбработкаВыбора".</p>
    
        <p class="title-size16"><b id="work-buttons2">Кнопка выбора</b>.</p>
    </div>







    <div class="reg-copy">
        <h2 class="header-style" id="reg-copy-0">Отдельно об регистре накопления</h2>
    
        <div class="reg-theory">
            <p class="title-size16"><b id="reg-theory">Теория</b>.</p>
            <p>Регистр накопления предназначен для описания структуры накопления данных. На основе объекта конфигурации <i style="text-decoration:underline">Регистр накопления</i> платформа создает в базе данных таблицы, в которых будут накапливаться данные, поставляемые различными объектами базы данных. Эти данные будут храниться в таблицах в виде отдельных записей, каждая из которых имеет одинаковую заданную в конфигураторе структуру:</p>
            <img src="img/1С-1/2022-11-10_16-50-07.png" class="screen" alt="">
            <p>На основании таблицы движений регистра накопления система рассчитывает таблицу итогов регистра, которая хранит в базе данных итоги на момент времени последнего движения (актуальные итоги).</p>
            <p>Отличительной особенностью регистра накопления является то, что он не предназначен для интерактивного редактирования пользователем.</p> 
            <p>Разработчик может при необходимости предоставить пользователю возможность редактировать регистр накопления. Но предназначение регистра накопления заключается в том, чтобы его изменение(модификация) производилось на основе алгоритмов работы других объектов базы данных, а не в результате непосредственных действий пользователя.</p>
            <p>Основным назначением регистра накопления является накопление числовой информации в разрезе нескольких <i style="text-decoration:underline">измерений</i>, которые описываются разработчиком в соответствующем объекте конфигурации Регистр накопления и являются подчиненными объектами конфигурации.</p>
            <p>Виды числовой информации, накапливаемой регистром накопления, называются <i style="text-decoration:underline">ресурсами</i>, также являются подчиненными объектами и описываются в конфигураторе.</p>
            <p>Например, регистр накопления может накапливать информацию о количестве и сумме товаров на складах. В этом случае он будет иметь измерения Товар и Склад и ресурсы Количество и Сумма.</p>
            <p>Изменение состояния регистра накопления происходит, как правило, при проведении документа и заключается в том, что в регистр добавляется некоторое количество записей. Каждая запись содержит значения измерений, значения приращений ресурсов, ссылку на документ, который вызвал эти изменения (регистратор), и «направление» приращения (приход или расход). Такой набор записей называется <i style="text-decoration:underline">движениями</i> регистра накопления. Каждому движению регистра накопления всегда должен соответствовать <i style="text-decoration:underline">регистратор</i> – объект информационной базы (как правило, документ), который произвёл эти движения. </p>
            <img src="img/1С-1/2023-08-04_08-02-12.png" class="screen" alt="">
            <p>Кроме этого, регистр накопления может хранить дополнительную информацию, описывающую каждое движение. Набор такой дополнительной информации задаётся разработчиком при помощи <i style="text-decoration:underline">реквизитов</i> объекта конфигурации Регистр накопления.</p>
            <p>Когда мы создадим какой нибудь регистр накопления, дадим ему имя, заполним измерения и ресурсы и попытаемся запустить пользовательский режим, то система выдаст предупреждение, что не указан регистратор для этого регистра. Это сообщение еще раз подтверждает тот факт, что назначение регистра накопления в том, чтобы накапливать данные, поставляемые различными документами.</p>
            <p>Уникальность записей регистра обеспечивается полем Регистратор и Номер строки.</p>
            <p>Поэтому нужно сформировать движения по регистру накопления документами. <i style="text-decoration:underline">Движения документа</i> – это записи в регистрах, которые создаются в процессе проведения документа и отражают изменения, производимые документом.</p>
            <p>Движения формируются в обработчике события ОбработкаПроведения модуля объекта.</p>
            <div class="code-style">
                <pre>
                    --модуль объекта
                    <span class="сс"><span class="ск">Процедура</span> ОбработкаПроведения<span class="ск">(</span>Отказ<span class="ск">,</span> Режим<span class="ск">)</span>
                        Движения<span class="ск">.</span>ОстаткиМатериалов<span class="ск">.</span>Записывать <span class="ск">=</span> Истина<span class="ск">;</span>
                        <span class="ск">Для Каждого</span> ТекСтрокаМатериалы <span class="ск">Из</span> Материалы <span class="ск">Цикл</span>
                            //создаём записи в регистре ОтстаткиМатериалов
                            Движение <span class="ск">=</span> Движения<span class="ск">.</span>ОстаткиМатериалов<span class="ск">.</span>Добавить<span class="ск">();</span>
                            Движение<span class="ск">.</span>ВидДвижения <span class="ск">=</span> ВидДвиженияНакопления<span class="ск">.</span>Приход<span class="ск">;</span>
                            <span class="з">//поле Период обязательно должно быть заполнено</span>
                            Движение<span class="ск">.</span>Период <span class="ск">=</span> Дата<span class="ск">;</span>
                            Движение<span class="ск">.</span>Материал <span class="ск">=</span> ТекСтрокаМатериалы<span class="ск">.</span>Материал<span class="ск">;</span>
                            Движение<span class="ск">.</span>Склад <span class="ск">=</span> Склад<span class="ск">;</span>
                            Движение<span class="ск">.</span>Количество <span class="ск">=</span> ТекСтрокаМатериалы.Количество<span class="ск">;
                        КонецЦикла;
                    КонецПроцедуры</span></span>
                </pre>
            </div>
            <p>Объект встроенного языка ДокументОбъект.ПриходнаяНакладная имеет свойство Движения, возвращающее объект КоллекцияДвижений, который содержит коллекцию набора записей регистров, по которым этот документ может делать движения. К конкретному набору записей этой коллекции можно обратиться, указав через точку имя регистра, которому принадлежит этот набор записей. Например, Движения.ОстаткиМатериалов. В результате мы получим набор записей принадлежащий именно текущему документу, этот набор может быть пустой, а может уже заполненный раньше.</p>
            <p>Затем через точку можно использовать различные методы набора записей регистра, например, Движения.ОстаткиМатериалов.Добавить(). Метод Добавить() добавляет новую запись в набор записей.</p>
            <p>В первой строке процедуры мы устанавливаем свойство Записывать набора записей регистра в значение Истина. То есть в явном виде указываем, что после завершения обработки проведения платформа должна будет записать этот набор записей в базу данных. Т.е. когда исполнение кода подойдёт до конца обработчика, то система видя этот флаг сама запишет набор записей в регистр.</p>
            <p>Свойство Движения, то что система сама запишет данные в регистр, то что система сама добавит поле Регистратор и запишет в него текущий документ - это всё помошники именно в контексте ДокументОбъект(в модуле объекта). Если мы будем писать в регистр из других мест, то таких помошников там не будет и нужно будет самому всё это писать и указывать.</p>
            <p>Система по умолчанию также добавляет команду открытия регистра накопления в командную панель раздела, но делает её невидимой. Чтобы её сдклать видимой в разделе, нужно перейти в командный интерфейс подсистемы и там включить её видимость.</p>
        </div>
    
        <div class="reg-copy-0.1">
            <p class="title-size16"><b id="reg-copy-0.1">Команда перехода к движениям в форме документа</b>.</p>
            <p>Для примера возьмём регистр накопления "Остатки материалов".</p>
            <p>При реальной работе записей в регистре накпления "Остатки материалов" будет много, и будет трудно понять, какие записи относятся к определенному документу. </p>
            <p>Поэтому наряду с общим списком регистра хотелось бы иметь возможность вызывать из формы документа список регистра, в котором показаны движения, произведённые только этим документом.</p>
            <p>Для этого нужно в конфигураторе открыть форму документа и перейти во вкладку "Командный интерфейс" окна элементов формы. В разделе Панель навигации раскроем группу Перейти и увидим команду для открытия списка регистра накопления "Остатки материалов". Эта команда была автоматически помещена в панель навигации формы документа, так как он является регистратором, то есть создаёт движения в нашем регистре. </p>
            <img src="img/1С-1/2023-08-04_09-32-49.png" class="screen" alt="">
            <p>Нужно установить свойство Видимость для регистра. У команды "Остатки материалов" рядом в скобках указано (Объект.Ссылка) это параметр для запроса в таблицу регистра накопления "Остатки материалов" в БД. Объект это основной реквизит формы, т.е. это почти объект данных документа "Приходная накладная", а Ссылка это идентификатор этого объекта данных в БД. И этот параметр говорит как бы, что хочу получить из регистра "Остатки материалов" записи, где поле Регистратор = Объект.Ссылка. Вот так мы переходя по команде "Остатки материалов" получаем список записей для текущего документа.</p>
            <p>Если это команда не добавляется автоматически в форму документа, то можно самому её туда добавить. Для этого нужно в конфигураторе в форме документа перейти в редактор команд во вкладку Команды - Глобальные команды, в окошко параметризуемых команд и там выбрать:</p>
            <img src="img/1С-1/2023-08-04_09-48-15.png" class="screen" alt="">
            <p>Теперь если посмотреть в пользовательском режиме в форме документа, то появилась гиперссылка в панели навиации на список записей регистра для текущего документа:</p>
            <img src="img/1С-1/2023-08-04_09-51-43.png" class="screen" alt="">
            <p>Если ни одной команды нет в панели навигации, то она не будет отображаться.</p>
        </div>
    
        <div class="reg-copy-1">
            <p class="title-size16"><b id="reg-copy-1">Основная таблица регистра накопления в БД</b>.</p>
            <p>У этой таблицы есть такие стандартные реквизиты как ВидДвижения, Активность и др. ВидДвижения для каждой записи содержит слово Приход или Расход. Активность говорит системе о том, будет ли запись, у которой Активность стоит ДА учавствовать в построении виртуальных таблиц этого регистра и в построении итоговой таблицы. Про итоговую в инете посмотрел, а вот про то что влияет на построение виртуальных таблиц не уверен. Иногда проще поставить записи значение НЕТ в поле Активность чем её удалять.</p>
        </div>
    
        <div class="reg-copy-2">
            <p class="title-size16"><b id="reg-copy-2">Виртуальная таблица регистра накопления Остатки</b>.</p>
            <p>Эта таблица не содержит уже левых полей, в полях только измерения и ресурсы. Ресурсы подсчитываются и вычисляется остаток заданного ресурса(количество, сумма и т.д.). Вирт. таб. <span class="сс">Остатки имеет всего 2 параметра: Период и Условие</span>.</p>
            <div class="code-style">
                <pre>
                    <span class="сс">ВЫБРАТЬ
                        *
                    ИЗ
                        РегистрНакопления.ОстаткиНоменклатуры.Остатки(
                            &Период,
                            Номенклатура = &Товар
                            //Номенклатура В ИЕРАРХИИ(&Номенклатура)
                        )
                    </span>
                </pre>
            </div>
        </div>
    
        <div class="reg-copy-3">
            <p class="title-size16"><b id="reg-copy-3">Виртуальная таблица регистра накопления Обороты</b>.</p>
            <p>Вирт. таблица Обороты подсчитывает ресурс в возрастающем направлении. Обычно считают деньги потраченные на закупку товаров или заработанные с продажи. Обороты отбираются за какой-то отрезок времени, т.е. нужно начало даты и конец даты. <span class="сс">Обороты имеет 4 параметра: начало периода, конец периода, периодичность и условие</span>. Периодичность задаёт отезки, на которые будут биться обороты, например, Месяц, тогда появится дополнительное поле Период, в котором будут по месяцам разбиты обороты ресурса. Условие как и у всех таблиц такое же. Т.е. периодичность нужна для детализации записей по выбранному периоду. Все эти параметры необязательны.</p>
            <div class="code-style">
                <pre>
                    <span class="сс">ВЫБРАТЬ
                        *
                    ИЗ
                        РегистрНакопления.Продажи.Обороты(
                            &НачалоПериода,
                            &КонецПериода,
                            Месяц,
                            Номенклатура = &Товар
                        )
                    </span>
                </pre>
            </div>
            <p>Если параметр Периодичность задать Авто, то тогда периодичность оборотов будет зависить от полей отбора. Там есть такие поля как ПериодГод, ПериодДекада, ПериодДень и т.д. Виртуальные таблицы не нужно группировать, там уже предусмотрено системой такое поведение. Например если мы хотим получить только поле КоличествоОборот, то указываем в отборе только это поле и система сама сгруппирует и просуммирует записи этого поля и выдастся одна колонка с одной записью - какое то число.</p>
        </div>
    
        <div class="reg-copy-4">
            <p class="title-size16"><b id="reg-copy-4">Виртуальная таблица регистра накопления ОстаткиИОбороты</b>.</p>
            <p>Хочу отметить, что тут КоличествоОборот отличается от КоличествоОборот в вирт. таблице Оборот. Потому что в этой таблице КоличествоОборот подсчитывает оборот оставшегося количества товаров, тогда как в таблице Оборот подсчитывается количество проданных, поступивших и т.д. товаров.</p>
            <p>Эта таблица имеет уже 5 параметров: НачалоПериода, КонецПериода, Периодичность, Метод дополнения периодов, Условие. Не буду описывать все параметры, можно посмотреть это в справочнике. Эту таблицу используют когда нужны остатки на начало и конец периода и обороты за этот период.</p>
            <div class="code-style">
                <pre>
                    <span class="сс">ВЫБРАТЬ
                        *
                    ИЗ
                        РегистрНакопления.ОстаткиНоменклатуры.ОстаткиИОбороты(
                            &НачалоПериода,
                            &КонецПериода,
                            Месяц,
                            Движения,
                            Номенклатура = &Товар
                        )
                    </span>
                </pre>
            </div>
        </div>
    
        <div class="reg-copy-5">
            <p class="title-size16"><b id="reg-copy-5">Выборка из виртуальной таблицы Остатки объектным и табличным способом</b>.</p>
            <p>Этот обработчик выполняется при наступлении события "ПриАктивизацииСтроки". Это когда мы в табличной части в форме выделяем строку. В форме под таб. частью есть реквизит "ОстатокТовара" с видом "Поле надписи", куда мы и записываем результат запроса. Мы выделяем строку с товаром, а в поле "ОстатокТовара" выводится остаток этого товара.</p>
            <div class="code-style">
                <pre>
                    --модуль формы документа "ПродажаТоваров"
                    <span class="сс"><span class="ск">&НаКлиенте
                    Процедура</span> ТоварыПриАктивизацииСтроки<span class="ск">(</span>Элемент<span class="ск">)</span>
                        СсылкаНаТовар <span class="ск">=</span> Элементы<span class="ск">.</span>Товары<span class="ск">.</span>ТекущиеДанные<span class="ск">.</span>Товар<span class="ск">;</span>
                        ТоварыПриАктивизацииСтрокиНаСервере<span class="ск">(</span>СсылкаНаТовар<span class="ск">);
                    КонецПроцедуры</span>
        
                    <span class="ск">&НаСервере
                    Процедура</span> ТоварыПриАктивизацииСтрокиНаСервере<span class="ск">(</span>СсылкаНаТовар<span class="ск">)</span>
                        <span class="з">//объектная модель запроса 
                        //так как этот регистр имеет 2 измерения, то их и указываем</span>
                        Отбор <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Номенклатура, Склад"</span><span class="ск">,</span> СсылкаНаТовар<span class="ск">,</span> Объект<span class="ск">.</span>Склад<span class="ск">);</span>
        
                        <span class="фиолетовый">Ниже коментарий важно почитать, чтобы понимать что возвращает метод Остатки()</span>
                        <span class="з">//мы обращаемся к виртуальной таблице остатков через метод Остатки() 
                        //поэтому вернётся таблица с типом "ТаблицаЗначений".
                        //Если мы не указываем 3й и 4й парметры, которые задают в строковом виде
                        //измерения и ресурсы, которые мы ходим видеть в таблице, то таблица вернётся
                        //со всеми измерениями и ресурсами. Из-за этого может быть очень много
                        //строк с одним и тем же товаром и система не сможет его свернуть
                        //потому что другие измерения не дают этого сделать, потому что разные значения в них.
                        //Например в данном случаем таким измерением будет "Партия", там для каждого 
                        //товара будет разное значение этого измерения и поэтому будет много строк.
                        //но мы можем 3й и 4й параметром задать "Номенклатура" и "Количество" и тогда
                        //вернётся таблица только с этими двумя полями и свёрнутая по ним.
                        //Но метод Итог()в этом случае всё равно можно оставить, потому как он уберегает от ошибки,
                        //если таблица пустая, этот метод вернёт "0". А если мы будем получать поле "Количество"
                        //вот так - ОстатокТовара[0].Количество, а таблица будет пуста, то будет ошибка и чтобы
                        //избавиться от ошибки нам нужно будет делать условие, поэтому проще написать
                        //через метод Итог()</span>
                        ТаблицаОстатков <span class="ск">=</span> РегистрыНакопления<span class="ск">.</span>ОстаткиНоменклатуры<span class="ск">.</span>Остатки<span class="ск">(,</span> Отбор<span class="ск">);</span> 
        
                        ОстатокТовара <span class="ск">=</span> ТаблицаОстатков<span class="ск">.</span>Итог<span class="ск">(</span>"Количество"<span class="ск">);</span>
                        
        
        
                        <span class="з">//табличная модель запроса
                        //Запрос = Новый Запрос;
                        //Запрос.Текст = 
                        //	"ВЫБРАТЬ
                        //	|	ОстаткиНоменклатурыОстатки.КоличествоОстаток КАК КоличествоОстаток
                        //	|ИЗ
                        //	|	РегистрНакопления.ОстаткиНоменклатуры.Остатки(, Номенклатура = &Номенклатура) КАК ОстаткиНоменклатурыОстатки";
                        //
                        //Запрос.УстановитьПараметр("Номенклатура", СсылкаНаТовар);
                        //РезультатЗапроса = Запрос.Выполнить();
                        //Выборка = РезультатЗапроса.Выбрать();
                        //Выборка.Следующий();
                        //ОстатокТовара = Выборка.КоличествоОстаток;</span>
                    <span class="ск">КонецПроцедуры</span></span>
                </pre>
            </div>
        </div>
    
        <div class="reg-copy-6">
            <p class="title-size16"><b id="reg-copy-6">Для чего поле "Активность" в таблице регистра накопления а БД</b>.</p>
            <p>Мы можем в документе сформировать движения и их выключить, тем самым делать какое то планирование. Т.е. документ проведён, но хотим, чтобы движения не нашли отражение в учёте. Например, мы подготовили документ заранее, провели его, но заказчик за товаром ещё не приехал, мы выключаем его, указав полю Активность Ложь. Движения есть, но на остатках это никак не влияет. Приехал заказчик, забрал товар, кладовщик нажал на галочку "Забрали", движения включились, на остатки оборотов они повлияли. Это первый практический смысл.</p>
            <p>Второй смысл. Удалить что либо быстро за большой период мы не можем, это повлечёт к существенным трудозатратам, а вот выключить большое количество движений можно довольно быстро.</p>
            <p>Пока не совсем понятно как это на практике работает.</p>
        </div>
    
        <div class="reg-copy-7">
            <p class="title-size16"><b id="reg-copy-7">Как не записывать одинаковые товары в регистр при проведении</b>.</p>
            <p>Мой способ скорее всего не понадобится, потому что обычно в этом обработчике делают запрос в БД не только для группировки, но и для получения всех необходиммых данных, а потому скорее всего будет испольховаться именно запрос. Но как пример группировки товаров в табличной части может когда нибудь пригодится.</p>
            <div class="code-style">
                <pre>
                    <span class="сс"><span class="ск">Процедура</span> ОбработкаПроведения(Отказ, Режим)
                        <span class="з">//Сделаем проверку на наличие строк в табличной части.
                        //Если строк нет, то и документ проводить не надо и стоит вообще остановить код.
                        //Отказ это параметр в котором лежит булево значение Ложь и если мы в него установим Истина по какому то условию, то документ не будет
                        //проведён, но код продолжит выполнение, чтобы и код остановить, чтобы не тратить ресурсы на исполнение, напишем слово Возврат</span>
                        <span class="ск">Если</span> Материалы<span class="ск">.</span>Количество<span class="ск">() =</span> 0 <span class="ск">Тогда</span>
                            Отказ <span class="ск">=</span> Истина<span class="ск">;
                            Возврат;
                        КонецЕсли;</span>
        
                        <span class="з">//Бывает что вносится в документ поступления товаров несколько строк одного и того же товара и при проведении в регистр также вносится один и тот же товар
                        //в нескольких записях. Такой подход быстро затормозит БД. Нужно один и тот же товар подсчитать и занести его одной строкой. Есть способ, который предложил
                        //человек из курса Техподдержка. Этот способ через запрос в БД к таблице(табличной части документа). В запросе группируем одинаковый товар подсчитывая его количество
                        //и сумму цен товара, потом запрос возвращает уже сгруппированные данные и записывает эти данные в регистр.
                        //Я написал свой способ без запроса. Сразу на месте получаем строки табличной части и подсчитываем сумму и количество одинакового товара и записываем в регистр.
                        //Будет ли мой способ работать нормально в дальнейшем пока не знаю, оставлю его и буду проверять на деле. И какой способ работает быстрее тоже пока не знаю.
                        
                        //мой способ</span>
                        СтруктураДляПродукта <span class="ск">= Новый</span> Структура<span class="ск">;</span>
                        МассивНаименованийПродуктов <span class="ск">= Новый</span> Массив<span class="ск">;</span>
                        
                        <span class="ск">Для каждого</span> ТекСтрокаПродукты <span class="ск">Из</span> Продукты <span class="ск">Цикл</span>
                            СтруктураДляПродукта<span class="ск">.</span>Вставить<span class="ск">(</span><span class="серый">"Продукт"</span><span class="ск">,</span> ТекСтрокаПродукты<span class="ск">.</span>Продукт<span class="ск">);</span>
                            СтруктураДляПродукта<span class="ск">.</span>Вставить<span class="ск">(</span><span class="серый">"Количество"</span><span class="ск">,</span> ТекСтрокаПродукты<span class="ск">.</span>Количество<span class="ск">);</span>
                            СтруктураДляПродукта<span class="ск">.</span>Вставить<span class="ск">(</span><span class="серый">"СуммаЦенПродукта"</span><span class="ск">,</span> ТекСтрокаПродукты<span class="ск">.</span>Количество <span class="ск">*</span> ТекСтрокаПродукты.Цена<span class="ск">);</span>
                            
                            <span class="ск">Если</span> МассивНаименованийПродуктов<span class="ск">.</span>Найти<span class="ск">(</span>СтруктураДляПродукта<span class="ск">.</span>Продукт<span class="ск">) =</span> Неопределено <span class="ск">Тогда</span>
                                
                                <span class="ск">Для каждого</span> ТекСтрокаПродукты2 <span class="ск">Из</span> Продукты <span class="ск">Цикл</span>
                                    <span class="ск">Если</span> ТекСтрокаПродукты<span class="ск">.</span>НомерСтроки <span class="ск">=</span> ТекСтрокаПродукты2<span class="ск">.</span>НомерСтроки <span class="ск">Тогда
                                        Продолжить;	
                                    КонецЕсли;</span>
                                    <span class="ск">Если</span> ТекСтрокаПродукты<span class="ск">.</span>Продукт <span class="ск">=</span> ТекСтрокаПродукты2<span class="ск">.</span>Продукт <span class="ск">Тогда</span>
                                        СтруктураДляПродукта<span class="ск">.</span>Количество <span class="ск">=</span> СтруктураДляПродукта<span class="ск">.</span>Количество <span class="ск">+</span> ТекСтрокаПродукты2<span class="ск">.</span>Количество<span class="ск">;</span>
                                        СтруктураДляПродукта<span class="ск">.</span>СуммаЦенПродукта <span class="ск">=</span> СтруктураДляПродукта<span class="ск">.</span>СуммаЦенПродукта <span class="ск">+ (</span>ТекСтрокаПродукты2<span class="ск">.</span>Количество <span class="ск">*</span> ТекСтрокаПродукты2<span class="ск">.</span>Цена<span class="ск">);
                                    КонецЕсли;
                                КонецЦикла;</span>
                            
                            
                                МассивНаименованийПродуктов<span class="ск">.</span>Добавить<span class="ск">(</span>СтруктураДляПродукта<span class="ск">.</span>Продукт<span class="ск">);</span>
                                
                                Движения<span class="ск">.</span>ОстаткиПродуктов<span class="ск">.</span>Записывать <span class="ск">=</span> Истина<span class="ск">;</span>	
                                Движение             <span class="ск">=</span> Движения<span class="ск">.</span>ОстаткиПродуктов<span class="ск">.</span>Добавить<span class="ск">();</span>
                                Движение<span class="ск">.</span>ВидДвижения <span class="ск">=</span> ВидДвиженияНакопления<span class="ск">.</span>Приход<span class="ск">;</span>
                                Движение<span class="ск">.</span>Период      <span class="ск">=</span> Дата<span class="ск">;</span>
                                Движение<span class="ск">.</span>Продукт     <span class="ск">=</span> СтруктураДляПродукта<span class="ск">.</span>Продукт<span class="ск">;</span>
                                Движение<span class="ск">.</span>Количество  <span class="ск">=</span> СтруктураДляПродукта<span class="ск">.</span>Количество<span class="ск">;</span>
                                Движение<span class="ск">.</span>Сумма       <span class="ск">=</span> СтруктураДляПродукта<span class="ск">.</span>СуммаЦенПродукта<span class="ск">;	
                            КонецЕсли;
                        КонецЦикла;</span>
        
                        
                        <span class="з">//второй способ через запрос
                        //Запрос = Новый Запрос;
                        //Запрос.Текст = 
                        //    "ВЫБРАТЬ
                        //    |	Материалы.Материал КАК Материал,
                        //    |	СУММА(Материалы.Количество) КАК Количество,
                        //    |	СУММА(Материалы.Количество * Материалы.Цена) КАК ОбщаяСумма
                        //    |ИЗ
                        //    |	Документ.ПриходнаяНакладная.Материалы КАК Материалы
                        //    |ГДЕ
                        //    |	Материалы.Ссылка = &Ссылка
                        //    |
                        //    |СГРУППИРОВАТЬ ПО
                        //    |	Материалы.Материал";
                        //
                        //Запрос.УстановитьПараметр("Ссылка", Ссылка);
                        //
                        //РезультатЗапроса = Запрос.Выполнить();
                        //
                        //ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
        
                        //далее тут движения заполнить из выборки</span>
        
                    <span class="ск">КонецПроцедуры</span></span>
                </pre>
            </div>
        </div>
    
        <div class="reg-copy-8">
            <p class="title-size16"><b id="reg-copy-8">Регистр "Взаиморасчеты" и отчёт по нему</b>.</p>
            <p>Пишу из курса Чистова 8.2. Видео https://www.youtube.com/watch?v=_l3Z5Ek6XCc&list=PLkdnTy1CsgR0y5QgkDfsgYJsETriuKK3f&index=18, с 00:27:10</p>
            <p>Регистр "Взаиморасчеты" это запись долгов наших и перед нами. Нужно сделать отчёт с 3мя колонками - Контрагент, НашДолг, ДолгКонтрагента.</p>
            <p>Добавим новый регистр "Взаиморасчеты" в режиме остатки, ресурс будет один - Сумма. Положительный ресурс это нам должны, отрицательный это мы должны. Измерением будет Контрагент. Документы, которые будут писать в этот регистр это документы поступления и продажи товаров, но это не все документы. Ещё будут документы "оплачивающие" эти долги, мы же в регистре должны же сводить в ноль и наши долги и перед нами.</p>
            <p>В обработке проведения документа "ПоступлениеТоваров" запишем данные в регистр. У нас нет реквизита "СуммаДокумента", поэтому мы можем вычислить итог у табличной части документа. Я бы наверно добавил такой рекизит в документ, как говорил Гилёв, пусть такой реквизит будет избыточным, но в итоге от него больше положительного. Где то Чисто уже показывал как в форме списка документа на лету создать виртуальное поле "СуммаДокумента" и показывать это поле с вычисленным значением при открытии этого списка, но это затратно по ресурсам компьютера. Проще добавить такой реквизит и затем в списке не надо на лету его создавать и тут в обработке не надо итог выислять. Но чисто в опытных целях оставлю так как Чистов делает.</p>
            <p>У нас сумма документа может быть в иностранной валюте, потому что так расчитываемся с контрагентом. Нам же нужно для отчета рубли, значит сделаем проверку и переведём в рубли если это нужно. Будем смотреть на поле "Валюта", если оно заполнено, то произведём пересчёт в рубли:</p>
            <div class="code-style">
                <pre>
                    --модуль объекта документа "ПоступлениеТоваров"
        
                    <span class="сс"><span class="ск">Процедура</span> ОбработкаПроведения<span class="ск">(</span>Отказ<span class="ск">,</span> Режим<span class="ск">)</span>
                        Движения<span class="ск">.</span>Взаиморасчеты<span class="ск">.</span>Записывать <span class="ск">=</span> Истина<span class="ск">;</span>
        
                        СуммаДокумента <span class="ск">=</span> Товары<span class="ск">.</span>Итог<span class="ск">(</span><span class="серый">"Сумма"</span><span class="ск">);</span>
        
                        <span class="ск">Если НЕ</span> Валюта<span class="ск">.</span>Пустая<span class="ск">() Тогда</span>
                            <span class="з">//тут код по переводу в рубли. Для этого можно сделать процедуру
                            //в общем модуле, которая получает регистр сведений с указанной валютой
                            //и производим пересчёт в рубли</span>
                        <span class="ск">КонецЕсли;</span>
        
                        Движение <span class="ск">=</span> Движения<span class="ск">.</span>Взаиморасчеты<span class="ск">.</span>Добавить<span class="ск">();</span> 
                        Движение<span class="ск">.</span>ВидДвижения <span class="ск">=</span> ВидДвиженияНакопления<span class="ск">.</span>Расход<span class="ск">;</span>
                        Движение<span class="ск">.</span>Период <span class="ск">=</span> Дата<span class="ск">;</span>
                        Движение<span class="ск">.</span>Контрагент <span class="ск">=</span> Контрагент<span class="ск">;</span>
                        Движение<span class="ск">.</span>Сумма <span class="ск">=</span> СуммаДокумента<span class="ск">;
                    КонецПроцедуры</span></span>
                </pre>
            </div>
            <p>Точно такой же код добавим в обработку проведения документа "ПродажаТоаров", только вид движения изменим на приход. Далее нужно сделать отчёт, который будет показывать остатки долга наши и контрагента.</p>

            <p><b>Отступление. Тут немного о пользовательских полях в отчёте</b></p>
            <p><b>Пример 1</b>.</p>
            <p>Разновидность пользовательского поля - <i style="text-decoration: underline;">"Новое поле выбор"</i>.</p>
            <p>Создаём отчёт "СостояниеВзаиморасчетов", выбираем запрос в наборе данных и что же нам выбрать в запросе, чтобы было 3 колонки описанные выше? Давайте выберем таблицу РегистрНакопления.Взаиморасчеты.Остатки. В ней всего 2 поля, это Контрагент и СуммаОстаток, в поле СуммаОстаток у нас и приходы и расходы, а нам нужно чтобы приходы были отдельно в своей колонке "ДолгКонтрагента", а расходы в своей "НашДолг". Можно выбрать и эту таблицу, тогда мы получим отчет с 2мя колонками - "Контрагент" и "Сумма долга контрагента" и у пользователя в пользовательском режиме будет возможность самому добавить свои пользовательские поля, назвать их как он хочет и вывести в них через условие приходные и расходные значения. Такой вариант конечно лучше пользователю не предоставлять, потому что это дополнительная нагрузка на него, но в целях обучения помотрим как вообще пользователь может создавать такие поля сам.</p>
            <p>Создадим простенький отчет в СКД по таблице остатков с 2мя полями. Зайдём в пользовательский режим, откроем "Ещё" -> "Изменить вариант". Откроется окно похожее на окно вкладки "Настройка" в СКД, в этом окне находим вкладку "Пользовательские поля" и жмём "Добавить" -> "Новое поле выбор", откроется ещё окно "Редактирование пользоватеьского поля", в заголовке пишем имя поля - НашДолг, а ниже добавляем отбор.</p> 
            <p>Отбор это условие для отбора записей нашено пользовательского поля. В колонке "Отбор" по кнопке выбора откроется ещё одно окно для написания условия отбора, условие будет таким: слева указываем сумму долга, по середине указываем сравнение - Меньше, справа указываем 0. Условие звучит так - "Выбрать все долги меньше нуля", жмём ОК и выходим из окна отбора.</p> 
            <img src="img/1С-1/2025-02-12_19-41-35.png" class="screen" alt="">
            <p>Теперь в колонке "Значение" нужно указать то поле из отчёта, к которому мы применяем  условие отбора, поэтому в окне выбора выбираем "Поле компоновки данных", а далее "Сумму долга". Всё тоже самое проделываем и со вторым пользовательским полем "ДолгКонтрагента", только там условие отбора больше нуля.Вот так выглядит настройка пользовательских полей. Но мы не будем так делать, мы сразу в запросе выберем поля с соответстующими значениями.</p>
            <p>Закрываем окна с пользовательскими настройками полей и идём ко вкладке "Поля" и в ней слева в пункте "Пользовательскте поля" выносим вправо наши поля для отображения их в отчёте.</p>
        
            <p><b>Пример 2</b>.</p>
            <p>Разновидность пользовательского поля - <i style="text-decoration: underline;">"Новое поле выражение"</i>.</p>
            <p><span class="сс">Раз тут начал про пользовательские поля, то приведу ещё один пример с их применением, с другим отчётом.</span> Предположим мы создали в СКД и вывели отчёт с 3мя полями:</p>
            <img src="img/1С-1/2023-09-13_13-10-23.png" class="screen-2" alt="">
            <p>Пользователь захотел ещё одно поле, например, с прибылью. Выбираем у отчёта из подменю "Ещё" пункт "Изменить вариант", находим вкладку "Пользовательские поля" и жмём "Добавить" -> "Новое поле выражение...". Откроется окошко вида:</p>
            <img src="img/1С-1/2023-09-13_13-16-34.png" class="screen-2" alt="">
            <p>В верхнем поле пишем название поля - Прибыль, в среднем выражение для этого поля: Выручка - Себестоимость и нижнем поле пишем выражение для итоговой строки таблицы: СУММА(Выручка) - Сумма(Себестоимость).</p> 
            <img src="img/1С-1/2023-09-13_13-25-22.png" class="screen-2" alt="">
            <p>После переходим на закладку "Поля" и слева из группы "Пользовательские поля" перетащим поле "Прибыль" вправо, чтобы система отобразила новое поле в отчёте:</p>
            <img src="img/1С-1/2023-09-13_13-21-03.png" class="screen" alt="">
            <p>В результате получаем:</p>
            <img src="img/1С-1/2023-09-13_13-26-44.png" class="screen-2" alt="">
        
            <p><b>Пример 3</b>.</p>
            <p>В этом примере будем использовать обе разновидности пользовательских полей. Возьмём отчёт "АнализПродажПравильный" из конфы "Курс Павла Чистова - 8.3". Откроем пользовательский режим и запустим отчёт. Вот так он выглядит:</p>
            <img src="img/1С-1/2023-10-24_14-45-06.png" class="screen" alt="">
            <p>Хочу добавить поле "Ценовое определение", в котором на каждый товар будет запись: "недорого", "средне" и "дорого". Поле будет смотреть на себестоимость товара и отбирать по категориям. Но нам нужно иметь себестоимость 1 шт. товара, как видно из таблицы в поле "себестоимость" числа указаны сразу за несколько штук. Поэтому создадаим пользовательское поле. Будем использовать "Новое поле выражение", в заголовке напишем "Себестоимость за 1шт", в выражении детальных записей запишем выражение - "Себестоимость / Количество", в заклдаке "Поля" вынесем поле "Себестоимость за 1шт" вправо, завершим редактирование, получится такая таблица:</p>
            <img src="img/1С-1/2023-10-24_17-08-54.png" class="screen" alt="">
            <p>Всё, у нас имеется поле, чтобы по нему отбирать к какой ценовой категории относится товар. Открываем опять "Изменить вариант" - "Пользвательские поля", добавляем "Новое поле выбор". В заголовке указываем "Ценовое определение", так будет называться поле. Затем нужно создать 3 отбора. <span class="ск">Тут остановимся. Оказывается, когда хочу сделать отбор по полю созданному чуть ранее "Себестоимость 1 шт", то это поле не доступно для выбора, видмо потому что оно пользовательское. Итак пришлось пойти в конфигуратор и добавить новое вычисляемое поле "Себестоимость за 1 шт".</span></p>
            <p>Далее даём нашему полю название "Ценовое определение" в поле заголовка и делаем 3 отбора:</p>
            <img src="img/1С-1/2023-10-24_19-47-56.png" class="screen" alt="">
            <p>Жмём Да и на закладвке "Поля" вынесем наше пользовательское поле вправо в отображаемые поля:</p>
            <img src="img/1С-1/2023-10-24_19-52-28.png" class="screen" alt="">
            <p>Хоть мы и поставили поле последним в списке, но система определила наше поле в измерение и оно будет последним в полях измерениях, а потом идут поля ресурсы:</p>
            <img src="img/1С-1/2023-10-24_19-56-42.png" class="screen" alt="">
            <p>Мы выполнили задачу, дальше расскажу немного про отборы.</p>
            <p>Когда мы в отборах указывали условия - [себестоимость 1 шт] меньше или равно 20 и другие, то число 20 пишется в поле "Значение". В этом поле мы можем указывать не только число, но и другое поле. Для этого уберём фокус этого поля и в контекстном меню этого поля выберем пункт "Использовать в качестве значения поле":</p>
            <img src="img/1С-1/2023-10-24_20-01-11.png" class="screen" alt="">
            <p>Отменить можно обратным же способом убрав галочку с этого пункта.</p>
            <p>Также мы можем сгруппировать условия по логическому И, ИЛИ, НЕ. Например, для первого отбора я создам 2 условия: [себестоимость 1 шт] меньше или равно 14 И "Количество" меньше или равно 5. Затем на первом условии вызываем контекстное меню и выбираем пункт "Сгруппировать условия" и выбираем "Группа И":</p>
            <img src="img/1С-1/2023-10-24_20-14-12.png" class="screen" alt="">
            <p>Смотрим на таблицу:</p>
            <img src="img/1С-1/2023-10-24_20-16-54.png" class="screen" alt="">
            <p>Стрелочкой я указал на запись, в которой изменилось ценовое определение с "Недорого" на "Среднее", почему это произошло? Во-первых сработало двойное условие и для этой записи не выполняется: [себестоимость 1 шт] меньше или равно 14 И "Количество" меньше или равно 5, потому что "Количество" больше 5. Ну а почему же подставилось значение "Среднее"? Потому что оно попало под условие 2го отбора, где указано: [себестоимость 1 шт] меньше или равно 20.</p>
            <p>И да поле "Себестоимость 1 шт" теперь отображается в конце таблицы, видимо потому, что в условии отбора участвует поле-ресурс.</p>
            <p>На этой картинке есть поле "Значение", там вместо простых типов данных можно подставлять поля компоновки данных. Для чего это поле пока не понял:</p>
            <img src="img/1С-1/2023-10-24_19-47-56.png" class="screen" alt="">
            <p>Вроде немного понял для чего это поле, автоматом система проставляет  числа сверху вниз, это значит что условия будут выполняться сверху вниз. Например, если одна запись попадает под несколько условий, то это поле расставит приорететы. Будет применено условие по числовому значению. Допустим запись с полем [себестоимость 1 шт] и значением 14 подходим под 2 условия: [себестоимость 1 шт] меньше или равно 14, и второе условие: [себестоимость 1 шт] меньше или равно 20. И какое представление - "недорого" или "средне" системе выбрать? Она посмотрит на поле "Значение" и даст приоритет тому условию, которое выше по списку. В нашем случае будет приоритет у условия со значением 1.</p>
            <p>Если ни одно условие к записи не подошло, то представление будет пустым.</p>
            <p>Далее рассмотрим пример с <b>"Новое поле выражение"</b>.</p>
            <p>Давайте теперь создадим поле "Вид продажи". Это поле будет показывать к какому виду продажи относится проданный товар: к оптовой или розничной. В поле заголовка пишем "Вид продажи". Во-втором поле нужно написать выражение, по которому будет определяться этот вид. Используем из языка выражений СКД такой оператор как ВЫБОР:</p>
            <img src="img/1С-1/2023-10-24_20-56-22.png" class="screen-2" alt="">
            <p>Последнее поле итоговых записей не заполняем, потому что у нас значения не числовые и система воспримет наше поле как измерение. Выносим наше поле в отображаемые поля и смотрим:</p>
            <img src="img/1С-1/2023-10-24_20-57-01.png" class="screen" alt="">
            <p>Наверно этот пример не совсем удачный, потому что такое поле можно сделать и с отбором по условию.</p>
            <p>Кстати, если мы составляем пользовательские поля, то в выражении доступные нам поля мы используем по их заголовку, а не по названию переменной в конфе, потому что название переменных нам не доступны. Если поле имеет в названии несколько слов через пробел, то такое поле нужно брать в квадратные кавычки. И наоборот, когда мы в конфигурации, и перенесём настройки пользовательских полей в конфу через сохранение в файле, то там система сама изменить заголовки на названия переменных..</p>
            <p>Вот ещё пример выражения: Окр([Сумма Приход] / [Количество Приход], 2). Одно поле делим на другое и округляем до 2 знаков после точки. И чтобы система восприняла наше поле как ресурс, то в итоговых записях нужно просуммировать наже выражение, например, Сумма([Сумма Приход] / [Количество Приход]). Если не сделать этого, то сисема воспримет поле как измерение.</p>
        
            <p><b>Продолжаем дальше тему</b></p>
            <p>В запросе мы берём ту же таблицу с 2мя полями, только для поля "СуммаОстаток" мы применим условие ВЫБОР КОГДА из языка запросов. Вот так будет выглядеть запрос:</p>
            <div class="code-style">
                <pre>
                    <span class="сс"><span class="ск">ВЫБРАТЬ</span>
                        <span class="з">ВзаиморасчетыОстатки</span><span class="ск">.</span>Контрагент <span class="ск">КАК</span> Контрагент<span class="ск">,</span>
                        <span class="ск">ВЫБОР
                            КОГДА</span> <span class="з">ВзаиморасчетыОстатки</span><span class="ск">.</span>СуммаОстаток <span class="ск">&lt;</span> 0
                                <span class="ск">ТОГДА</span> ВзаиморасчетыОстатки<span class="ск">.</span>СуммаОстаток
                        <span class="ск">КОНЕЦ КАК</span> НашДолг<span class="ск">,</span>
                        <span class="ск">ВЫБОР
                            КОГДА</span> <span class="з">ВзаиморасчетыОстатки</span><span class="ск">.</span>СуммаОстаток <span class="ск">></span> 0
                                <span class="ск">ТОГДА</span> ВзаиморасчетыОстатки<span class="ск">.</span>СуммаОстаток
                        <span class="ск">КОНЕЦ КАК</span> ДолгКонтрагента
                    <span class="ск">ИЗ</span>
                        РегистрНакопления<span class="ск">.</span>Взаиморасчеты<span class="ск">.</span>Остатки <span class="ск">КАК</span> <span class="з">ВзаиморасчетыОстатки</span></span>
                </pre>
            </div>
            <p>По этому запросу составляем в СКД несложный отчёт и результат будет таким:</p>
            <img src="img/1С-1/2023-06-19_15-44-57.png" class="screen" alt="">
            <p>Теперь усложним отчёт, нужно показать контрагентов с географической привязкой. Поставщики из Москвы в одной группе, поставщики из Самары в другой группе. Для этого используются Планы видов характеристик.</p>
        </div>
    
        <div class="reg-copy-ostatki-itogi">
            <p class="title-size16"><b id="reg-copy-ostatki-itogi">Таблица итогов в режиме "Остатки"</b>.</p>
            <p>Посмотреть видео - <a href="https://rutube.ru/video/e991cdfc3a4230de98399a6b53cf81a5/?playlist=223916">тут</a> с начала.</p>
            <p>Выпишу тут только значимые моменты.</p>
            <p>Итоги в режиме остатков хранятся на начало и конец КАЖДОГО месяца.</p>
            <p>А также есть итоги на оперативную отметку времени, т.е. на 30.11.3999. Это самые последние остатки.</p>
            <p>Если же пользователь захочет остатки на 10 число месяца, то система возмёт из таблицы итогов ближайший остаток, а это к началу месяца ближайшее, т.е. возьмёт остаток на 1 число и до 10 числа уже расчитает по основной таблице регистра.</p>
            <p>Также по стандартной обработке "Управление итогами" описано в разделе работы с документами у Камкова в шпоре выше.</p>
            <img src="img/1С-1/2025-04-17_16-47-38.png" class="screen" alt="">
        </div>
    
        <div class="reg-copy-oboroti-itogi">
            <p class="title-size16"><b id="reg-copy-oboroti-itogi">Таблица итогов в режиме "Обороты"</b>.</p>
        </div>
    
        <div class="reg-copy-9">
            <p class="title-size16"><b id="reg-copy-9">Отличие оборотного регистра накопления от остаточного. Управление итогами. Таблица итогов</b>.</p>
            <p>Всё это взято из видео Чистова - https://www.youtube.com/watch?v=t0DfNs8JK6s&list=PLkdnTy1CsgR1phYcN8Ts1HD2AugrAVgRd&index=44.  СпецКурс 014</p>
            <p>Здесь постараюсь описать отличия регистра накопления в режиме "остатки" от регистра накопления в режиме "обороты".</p>
            <p><b>В режиме "остатки"</b></p>
            <p>В этом режиме регистр имеет возможность создать 3 виртуальные таблицы: Обороты, Остатки и ОборотыИОстатки. Дополнительно будет создана таблица с итогами, которая будет хранить ОСТАТКИ по ресурсам. По умолчанию в итогах хранятся подсчитанные остатки на начало каждого месяца. Как я понял эту дату можно сместить на любое число месяца. Сделать это можно в пользовательском режиме в стандартной обработке "Управление итогами".</p>
            <p>Итоговой таблицы для виртуальной таблицы с оборотами нет у регистра в этом режиме. Поэтому если мы в запросе обращаемся к каким то оборотным ресурсным полям из этих виртуальных таблиц, то при подсчёте оборотного ресурса(ну например, СебестоимостьРасход, СебестоимостьПриход, СебестоимостьОборот) система начнёт подсчёт по всем движениям основной таблицы регистра, т.к. у неё нет итогов для оборотов. Т.е. это будет занимать какое то время. А вот для остаточных показателей есть итоговая таблица и получение данных из неё будет намного быстрее.</p>
            <p>Поэтому если нужно частое обращение к полям виртуальной таблицы с оборотами, то стоит рассмотреть создание другого регистра, но уже в режиме обротов. Чтобы запросы выполнялись быстрее.</p>
            <p><b>В режиме "обороты". Свойство "Использование в итогах", "Агрегаты"</b></p>
            <p>В этом режиме есть только одна виртуальная таблица - "Обороты". Для этой таблицы теперь есть итоговая таблица с промежуточными подсчитанными ресурсами.</p>
            <p>Когда мы создали такой регистр в режиме оборотов, то при добавлении измерения в его свойствах есть такое свойство как "Использовать в итогах".</p> 
            <img src="img/1С-1/2023-09-16_18-30-44.png" class="screen" alt="">
            <p>О чём это свойство? Допустим мы продали несколько товаров разным контрагентам и итоговая таблица для оборотного регистра выглядит так, кстати в отличии от итоговой таблицы остатков, здесь итоговая таблица содержит подсчёты за месяц, а остатки на начало месяца или на конец:</p>
            <img src="img/1С-1/2023-09-16_10-42-22.png" class="screen" alt="">
            <p>Для каждого измерения(Товар и Контрагент) стоит галочка у этого свойства, это значит что нужно отображать и учитывать данные измерения в итоговой таблице. Но если мы уберём например галочку у измерения Контрагент, то таблица схлопнется по товарам и поле Контрагент не будет отображаться, таблица станет такой:</p>
            <img src="img/1С-1/2023-09-16_10-50-04.png" class="screen" alt="">
            <p>Таким образом у нас уменьшится таблица итогов, что скажется хорошо на объёме занимаемой информации. Но тогда, когда мы захотим в отчёте получить данные и по контрагенту в том числе, то системе придётся пробежать по всем движениям регистра и пересчитать все ресурсы для поля Контрагент. Вот если мы будет получать ресурсы по товару за квартал или месяц, система возмёт из итоговой таблицы подсчитанные данные за месяц, а если добавить в запрос ещё и контрагента, то итоговая таблица не поможет и придётся считать по всем движениям заново.</p>
            <p>Так что трогая эту галочку нужно хорошо понимать как будут использоваться измерения в регистре, будут по ним запросы или нет. По умолчанию галочка стоит, разработчики как бы намекают, что так лучше.</p>
            <p><i style="text-decoration: underline;">Агрегаты</i></p>
            <p>В окне редактора регистра накопления в режиме обороты на закладке "Данные" внизу есть кнопка "Агрегаты". Агрегаты позволяют самому построить итоговую таблицу и указать за какой период будут накапливаться ресурсы и какие измерения мне нужны. Вот на этой картинке с помощью механизма агрегатов создано 2 итоговые таблицы:</p>
            <img src="img/1С-1/2023-09-17_08-41-45.png" class="screen" alt="">
            <p>В первой итоговой таблице будет одно измерение "Контрагент" и все ресурсы. В поле "Периодичность" установили значение "Непериодический", это значит, что ресурсы для этого измерения будут накапливаться за всё время. Мы можем получить ресурс для контрагента из этой таблицы для указания скидки этому контрагенту. Нам не нужна информация на сколько купил этот контрагент за недулю или за месяц или за год, нам нужно знать сколько он купил за всё время.</p>
            <p>Во второй итоговой таблице будут накапливаться ресурсы для товара за квартал.</p>
            <p>Вообще как говрит Чистов нужно сделать в начале использования нашей конфигурации 4 таблицы, которые будут отражает все возможные способыведения статистики по этим измерениям, вот так:</p>
            <img src="img/1С-1/2023-09-17_08-54-51.png" class="screen" alt="">
            <p>Система сама по собранной статистике решит будут ли накапливаться ресурсы по этим таблицам и когда. Остальное нужно смотреть по видео. Тема не простая. Агрегаты нужно использовать при больших нагрузках на оборотные показатели. До конца Тему не понял.</p>
        
            <p class="title-size16"><b id="reg-copy-10">Отличие оборотного регистра накопления от остаточного в выборе измерений</b>.</p>
            <p>Регистры накопления могут быть регистрами остатков и регистрами оборотов.</p>
            <p>При создании оборотного регистра накопления нет особой сложности в определении того, какие именно данные должны являться измерениями регистра – мы можем назначить в качестве его измерений любые нужные нам данные</p>
            <p>Совсем иная ситуация в случае регистра накопления, поддерживающего накопление остатков. Для него выбор измерений должен выполняться исходя из того, что движения регистра могут быть осуществлены в две стороны: приход и расход. Таким образом, в качестве измерений нужно выбирать те данные, по которым движения точно будут осуществляться как в одну, так и в другую сторону.</p>
            <p>Например, если ведётся учет материалов в разрезах номенклатуры и склада, очевидно, что и номенклатура, и склад могут быть измерениями, поскольку как приход, так и расход материалов всегда будут осуществляться с указанием конкретной номенклатуры и конкретного склада. Если же в этой ситуации появляется желание отразить учет материалов еще и в разрезе поставщика, то здесь уже нужно исходить из конкретной схемы учета, принятой на предприятии.</p>
            <p>Скорее всего, при поступлении материалов поставщик будет указан, а вот при расходовании материалов с большой долей вероятности поставщик указываться не будет. В большинстве случаев это совершенно лишняя информация. Значит, поставщика следует добавить не как измерение, а как реквизит регистра накопления.</p>
            <p>Если же при расходе материалов поставщик будет указываться наверняка, имеет смысл добавить поставщика в измерения регистра.</p>
            <p>Иными словами, по каждому из измерений регистра накопления остатков ресурсы обязательно должны изменяться в обе стороны: приход и расход. Не должно существовать таких измерений, по которым осуществляется только приход или только расход.</p>
            <p><span class="ск">Нарушение этого принципа построения регистров накопления будет вести к непроизводительному использованию ресурсов системы и как следствие к замедлению работы и падению производительности.</span></p>
            <p>Для реквизитов же регистра этот принцип не важен. По реквизитам регистра ресурсы могут только приходоваться или только расходоваться. </p>
        
            <p class="title-size16"><b id="reg-copy-11">Свойство "Разрешить разделение итогов" регистра накопления на вклвдке "Прочее"</b>.</p>
            <p>Допустим 2 пользователя одновременно пытаются провести документ "ПриходнаяНакладная" и записать в БД покупку товара Ложка. В базе существует таблица итогов, которая сразу подсчитывает количество товаров. При проведении документа товар записывается в эту таблицу и подсчитывается количество. При проведении записи блокируются, в которые пишет документ. Первый пользователь проводит документ и запись заблокировалась, но при проведении документа вторым пользователем, система увидит, что запись с таким товаром заблокирована, она просто допишет рядом такой же товар с количеством. Такое возможно при установленной галочке "Разрешить разделение итогов", по умолчанию она стоит.</p>
            <p>Таких записей с одинаковым товаром может собраться не мало в таблице итогов, если много пользователей одновременно пишут один и тот же товар, но потом система сама улучшит эту таблицу и уберёт повторы, а количество подсчитает.</p>
            <p>Так что если убрать эту галочку, то пользователи будут стоять в транзакционной очереди на запись. Включить или выключить разделение итогов можно и в пользовательском режиме в стандартной обработке "Управление итогами".</p>
            <p>Но если в обработке проведения "РасходнойНакладной" мы использовали строку кода <b>Движения.ОстаткиТоваров.БлокироватьДляИзменения = Истина;</b>, то эта строка запрещает разделение итогов.</p>
        



            <p class="title-size16"><b id="reg-copy-11.1">Итоговая таблица остатков и оборотов</b>.</p>
            <p>Вот в этом видео в начале Чистов рассказывает подробно про итоговую таблицу остатков - https://www.youtube.com/watch?v=r_XX10f5nQ0&list=PLkdnTy1CsgR1phYcN8Ts1HD2AugrAVgRd&index=50.  СпецКурс 007</p>
            <p>Вот тут тоже статья про итоговые таблицы остатков и оборотов - https://ausevich.ru/ekspert/chto-takoe-itogi-registrov-nakopleniya/</p>



            <p class="title-size16"><b id="reg-copy-12">Что такое "Период рассчитанных итогов" у регистра накопления в режиме остатки</b>.</p>
            <p><strong>Для чего нужен "Период рассчитанных итогов" у остаточного регистра накопления</strong></p>
            <p>Если сказать совсем просто, <strong>"Период рассчитанных итогов" — это расписание, по которому 1С делает "контрольные точки" с остатками, чтобы в будущем не пересчитывать всю историю с самого начала.</strong></p>          
            <p>Представь себе кассира в магазине, который работает уже много лет. У него есть огромная тетрадь, куда он записывает каждую операцию: <code>+100 руб</code>, <code>-20 руб</code>, <code>+500 руб</code> и так далее.</p>         
            <p>Сегодня 15 июня. Директор спрашивает: "Сколько денег было в кассе на конец дня 10 июня?".</p>         
            <p><strong>Вариант 1: Плохой кассир (без рассчитанных итогов)</strong></p>         
            <p>Плохой кассир вздыхает и начинает делать так:</p>
            <ul class="list">
                <li>Берет тетрадь.</li>
                <li>Открывает ее на самой первой странице (несколько лет назад).</li>
                <li>Начинает на калькуляторе складывать и вычитать <strong>каждую операцию</strong> с самого первого дня работы до вечера 10 июня.</li>
            </ul>         
            <p>Это долго, мучительно, и есть большой шанс ошибиться. Именно так работала бы 1С, если бы у нее не было механизма итогов.</p>         
            <p><strong>Вариант 2: Умный кассир (с рассчитанными итогами)</strong></p>        
            <p>Умный кассир делает по-другому. В конце <strong>каждого месяца</strong> он подводит черту, считает итоговую сумму в кассе и записывает ее на отдельный листок. Этот листок — его <strong>таблица итогов</strong>.</p>        
            <p>На листке у него написано:</p>
            <ul class="list">
                <li>На конец января: 150 000 руб.</li>
                <li>На конец февраля: 185 000 руб.</li>
                <li>...</li>
                <li><strong>На конец мая: 210 000 руб.</strong></li>
            </ul>       
            <p>Теперь, когда директор задает тот же вопрос ("Сколько было на 10 июня?"), кассир делает так:</p>
            <ul class="list">
                <li>Берет свой листок с итогами и смотрит на последнюю "контрольную точку" перед 10 июня. Это 31 мая, остаток — <strong>210 000 руб</strong>.</li>
                <li>Берет основную тетрадь и смотрит операции <strong>только с 1 по 10 июня</strong>. Их совсем немного.</li>
                <li>К сумме 210 000 руб прибавляет и вычитает операции за эти 10 дней.</li>
            </ul>           
            <p>Результат получен в 100 раз быстрее и с меньшим риском ошибки.</p>          
            <hr>          
            <p><strong>Как это связано с 1С?</strong></p>           
            <p><strong>Период рассчитанных итогов</strong> — это и есть то, как часто наш "умный кассир" подводит черту. В 1С это свойство регистра накопления.</p>           
            <ul class="list">
                <li><strong>Значение по умолчанию: <code>Месяц</code></strong>.
                    <p>Это самый частый и сбалансированный вариант. Он говорит платформе 1С: "В конце каждого месяца, пожалуйста, рассчитай и сохрани итоговый остаток по всем товарам, на всех складах (по всем измерениям регистра)".
                    Именно поэтому, когда вы запрашиваете остатки на середину месяца, 1С берет готовый остаток на начало этого месяца и добавляет к нему движения только за несколько дней, а не за все годы.</p>
                </li>
                <li><strong>Возможные значения:</strong> <code>День</code>, <code>Неделя</code>, <code>Месяц</code>, <code>Квартал</code>, <code>Год</code>.</li>
            </ul>           
            <p><strong>Пример на регистре "Товары на складах"</strong>:</p>          
            <p>Если <code>Период рассчитанных итогов</code> = <strong><code>Месяц</code></strong>, то в специальной таблице итогов (<code>_AccumRgTots</code>) будут храниться записи вида:</p>          
            <table border="1" style="border-collapse: collapse; width: 100%;">
                <thead>
                    <tr>
                        <th style="padding: 8px; text-align: left;">Период (Дата)</th>
                        <th style="padding: 8px; text-align: left;">Товар</th>
                        <th style="padding: 8px; text-align: left;">Склад</th>
                        <th style="padding: 8px; text-align: left;">КоличествоОстаток</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 8px;">01.01.2023</td>
                        <td style="padding: 8px;">Молоко</td>
                        <td style="padding: 8px;">Основной</td>
                        <td style="padding: 8px;">50</td>
                    </tr>
                    <tr>
                        <td style="padding: 8px;"><strong>01.02.2023</strong></td>
                        <td style="padding: 8px;"><strong>Молоко</strong></td>
                        <td style="padding: 8px;"><strong>Основной</strong></td>
                        <td style="padding: 8px;"><strong>80</strong></td>
                    </tr>
                    <tr>
                        <td style="padding: 8px;">01.03.2023</td>
                        <td style="padding: 8px;">Молоко</td>
                        <td style="padding: 8px;">Основной</td>
                        <td style="padding: 8px;">65</td>
                    </tr>
                </tbody>
            </table>            
            <p>Теперь, если вы запросите остаток "Молока" на "Основном складе" на <strong>15 февраля 2023 года</strong>, 1С сделает следующее:</p>
            <ul class="list">
                <li>Быстро найдет в таблице итогов ближайшую прошлую "контрольную точку" — на <strong>01.02.2023</strong>, остаток был <strong>80</strong>.</li>
                <li>Просмотрит таблицу движений <strong>только</strong> в интервале с 01.02.2023 по 15.02.2023.</li>
                <li>Сложит остаток на начало месяца с движениями за эти 15 дней и даст вам результат.</li>
            </ul>           
            <p><strong>Вывод:</strong></p>
            <p>Этот параметр — ключевая настройка производительности для регистров остатков. Он позволяет находить баланс между скоростью получения отчетов и размером базы данных (ведь таблица итогов тоже занимает место). В 99% случаев значение <strong><code>Месяц</code></strong> является оптимальным.</p>




            <p class="title-size16"><b id="reg-copy-12">Для чего галочка "Разрешить разделение итогов" у регистра накопления</b>.</p>
            <p><strong>Для чего нужна галочка "Разрешить разделение итогов" у регистра накопления</strong></p>
            <p>Отличный вопрос! Это одна из самых мощных, но и самых "невидимых" настроек для повышения производительности в 1С.</p>         
            <p>Если в двух словах, <strong>"Разрешить разделение итогов" — это как открыть в супермаркете несколько касс вместо одной, чтобы не было очередей.</strong></p>          
            <p><strong>Ситуация 1: Обычный регистр (галочка СНЯТА)</strong></p>           
            <p>Представь себе огромный супермаркет в час пик. Но в нем работает <strong>только ОДНА касса</strong>. Эта касса — это наша <strong>таблица итогов</strong> регистра накопления (например, "Товары на складах").</p>           
            <ul class="list">
                <li>Бухгалтер Мария проводит документ "Поступление товаров". Она "подходит к кассе", чтобы записать, что молока стало на 100 пачек больше. Касса занята.</li>
                <li>Кладовщик Петр проводит "Перемещение товаров". Он тоже "подходит к этой же кассе", чтобы записать, что хлеб уехал с одного склада и приехал на другой.</li>
                <li>Менеджер по продажам Василий проводит "Реализацию". Ему нужно "подойти к кассе", чтобы списать 10 пачек молока.</li>
            </ul>           
            <p>Что происходит? Они все выстраиваются в <strong>очередь</strong> к этой единственной кассе. Пока Мария не закончит свою операцию (транзакцию), Петр и Василий будут ждать. В мире 1С это называется <strong>"ожидание на блокировках"</strong>. Если очередь слишком длинная, система может выдать ошибку "Таймаут ожидания блокировки".</p>            
            <p>Вся работа стопорится из-за одного узкого места — единственной таблицы итогов.</p>           
            <p><strong>Ситуация 2: Регистр с разделением итогов (галочка УСТАНОВЛЕНА)</strong></p>           
            <p>Директор супермаркета видит эту проблему и дает команду: <strong>"Откройте все 16 касс!"</strong></p>           
            <p>Это и есть то, что делает галочка "Разрешить разделение итогов". Платформа 1С вместо <strong>одной</strong> большой таблицы итогов (<code>_AccumRgTots</code>) создает <strong>несколько</strong> (обычно 16) маленьких, идентичных по структуре таблиц итогов (<code>_AccumRgTots_1</code>, <code>_AccumRgTots_2</code>, ... <code>_AccumRgTots_16</code>).</p>            
            <p>Теперь, когда наши сотрудники проводят документы:</p>           
            <ul class="list">
                <li>Мария подходит со своим молоком. Специальный "распределитель" (хэш-функция) смотрит на ее товар ("Молоко", "Основной склад") и говорит: "Вам на кассу №5".</li>
                <li>Петр подходит со своим хлебом. Распределитель смотрит на его товар ("Хлеб", "Склад №2") и говорит: "Вам на кассу №12".</li>
                <li>Василий подходит со своим молоком (тем же самым, что у Марии). Распределитель смотрит на товар ("Молоко", "Основной склад") и тоже отправляет его <strong>на ту же кассу №5</strong>.</li>
            </ul>           
            <p><strong>Что мы получили?</strong></p>
            <ul class="list">
                <li>Мария и Петр обслуживаются <strong>одновременно и параллельно</strong>, потому что они пошли на разные кассы. Они не блокируют друг друга.</li>
                <li>А вот Мария и Василий, так как их операции касаются одного и того же товара, все равно попадут в небольшую очередь на "своей" кассе №5. Но эта очередь будет гораздо короче, и она не будет мешать всем остальным.</li>
            </ul>            
            <p><strong>Как это работает технически?</strong></p>
            <ul class="list">
                <li><strong>При записи:</strong> Платформа берет значения измерений регистра (Товар, Склад и т.д.), вычисляет из них специальное число (хэш) и по этому числу определяет, в какую из 16 таблиц-итогов положить запись. Записи по одному и тому же товару/складу всегда попадут в одну и ту же "кассу".</li>
                <li><strong>При чтении (в отчетах):</strong> Когда вы строите отчет по остаткам, система понимает, что итоги "размазаны" по 16 таблицам. Она автоматически делает запрос ко всем этим таблицам и суммирует результаты, чтобы вы увидели общую, правильную картину.</li>
            </ul>           
            <p><strong>Когда это нужно использовать?</strong></p>
            <p>Эту галочку нужно ставить на самых "горячих" регистрах, где постоянно возникают блокировки при одновременной работе множества пользователей.</p>           
            <p><strong>Классические кандидаты:</strong></p>
            <ul class="list">
                <li><code>ТоварыНаСкладах</code></li>
                <li><code>Продажи</code> (если это регистр остатков, например, для расчетов с клиентами)</li>
                <li><code>ДенежныеСредства</code></li>
                <li>Любой другой регистр, который является "узким горлышком" при массовом проведении документов.</li>
            </ul>           
            <p><strong>Вывод:</strong></p>
            <p><strong>Разделение итогов</strong> — это мощнейший инструмент для увеличения <strong>параллельности работы</strong> и снижения блокировок при записи в регистры накопления. Это не ускоряет работу одного пользователя, но позволяет десяткам пользователей работать одновременно, не мешая друг другу.</p>


        </div>
    </div>








    <div class="reg-info">
        <h2 class="header-style">Отдельно об регистре сведений</h2>
    
        <p class="title-size16"><b id="reg-info-theory">Теория</b></p>
        <p>У регистра сведений может быть несколько физических таблиц. В чистой базе без настроек будет одна физическая таблица - Основная, с названием таким же как и имя регистра. </p>
        <p><span class="ск">Обязательно описать все физ. таблицы, их 5 может быть, вот подсказка от ИИ: У регистра сведений 5 физических таблиц: основная (_INFORG), регистрация изменений (_INFORGCHNGR), итоги среза первых (_INFORGSF), итоги среза последних (_INFORGSL) и настройки хранения итогов (_INFORGOPT). Второе пересмотреть первое видео прогона по проекту Билайн, там Чермянин вкратце рассказывает про эти таблицы.</span></p>




    
        <p class="title-size16"><b id="reg-info-example">Примеры использования регистра сведений</b></p>
        <p>Примеры использования этого регистра:</p>
        <ul class="list">
            <li>Для хранения истории цен на товары</li>
            <li>Можно хранить состояния заказа: выполнен, заторможен, в работе и т.д. И последнее значение будет актуальное состояние заказа</li>
            <li>Можно хранить цвета покраски машины, и последнее значение будет цвет, в который сейчас покрашена машина</li>
            <li>Хранение сведений о сотрудниках</li>
        </ul>
        <p>Мне казалось, что для хранения, например, цвета машин или состояния заказов может подойти и объект Перечисление. Выбрали в поле нужное значние, записали в базу и потом получили это значение, но есть один минус, мы не можем записать новое значение, ведь у пользователя нет возможности задать новое значение в перечисление, он может пользоваться только тем, что там заранее задал разработчик. А вот в регистр сведений можно добавлять новые цвета машин и состояния заказов.</p>
        <p>Ну и конечно же это история хранения цветов машины на протяжении времени, что бывает часто удобно просмотреть, когда и в какой цвет была покрашена.</p>
    
    


        <p class="title-size16"><b id="reg-info-0">СрезПервых и СрезПоследних своим запросом</b></p>
        
        <p>СрезПервых:</p>
        <div class="code-style">
            <pre>
                ВЫБРАТЬ
                МИНИМУМ(КурсыВалют.Период) КАК Период,
                КурсыВалют.Валюта КАК Валюта
                ПОМЕСТИТЬ ВТ_МинимальныйПериод
                ИЗ
                    РегистрСведений.КурсыВалют КАК КурсыВалют 

                СГРУППИРОВАТЬ ПО
                    КурсыВалют.Валюта 
                ;
                ////////////////////////////////////////////////
                ВЫБРАТЬ
                    ВТ_МинимальныйПериод.Период КАК Период,
                    ВТ_МинимальныйПериод.Валюта КАК Валюта,
                    КурсыВалют.Курс КАК Курс
                ИЗ
                    ВТ_МинимальныйПериод КАК ВТ_МинимальныйПериод
                    ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют КАК КурсыВалют
                    ПО ВТ_МинимальныйПериод.Период = КурсыВалют.Период
                    И ВТ_МинимальныйПериод.Валюта = КурсыВалют.Валюта
            </pre>
        </div>
        <p>СрезПервых на указанную дату и измерение:</p>
        <div class="code-style">
            <pre>
                ВЫБРАТЬ
                    МИНИМУМ(КурсыВалют.Период) КАК Период,
                    КурсыВалют.Валюта КАК Валюта
                ПОМЕСТИТЬ ВТ_ПервыйПериодНаДату
                ИЗ
                    РегистрСведений.КурсыВалют КАК КурсыВалют 
                ГДЕ
                    КурсыВалют.Период >= &Дата И  КурсыВалют.Валюта.Наименование = "USD"

                СГРУППИРОВАТЬ ПО
                    КурсыВалют.Валюта
                ;
                ////////////////////////////////////////////////       
                ВЫБРАТЬ
                    ВТ_ПервыйПериодНаДату.Период КАК Период,
                    ВТ_ПервыйПериодНаДату.Валюта КАК Валюта,
                    КурсыВалют.Курс КАК Курс
                ИЗ
                    ВТ_ПервыйПериодНаДату КАК ВТ_ПервыйПериодНаДату
                    ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют КАК КурсыВалют
                    ПО ВТ_ПервыйПериодНаДату.Период = КурсыВалют.Период
                    И ВТ_ПервыйПериодНаДату.Валюта = КурсыВалют.Валюта
            </pre>
        </div>
        <p>СрезПоследних:</p>
        <div class="code-style">
            <pre>
                ВЫБРАТЬ
                    МАКСИМУМ(КурсыВалют.Период) КАК Период,
                    КурсыВалют.Валюта КАК Валюта
                ПОМЕСТИТЬ ВТ_МаксимальныйПериод
                ИЗ
                    РегистрСведений.КурсыВалют КАК КурсыВалют 

                СГРУППИРОВАТЬ ПО
                    КурсыВалют.Валюта 
                ;
                ////////////////////////////////////////////////
                ВЫБРАТЬ
                    ВТ_МаксимальныйПериод.Период КАК Период,
                    ВТ_МаксимальныйПериод.Валюта КАК Валюта,
                    КурсыВалют.Курс КАК Курс
                ИЗ
                    ВТ_МаксимальныйПериод КАК ВТ_МаксимальныйПериод
                    ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют КАК КурсыВалют
                    ПО ВТ_МаксимальныйПериод.Период = КурсыВалют.Период
                    И ВТ_МаксимальныйПериод.Валюта = КурсыВалют.Валюта
            </pre>
        </div>
        <p>СрезПоследних на указанную дату и измерение:</p>
        <div class="code-style">
            <pre>
                ВЫБРАТЬ
                    МАКСИМУМ(КурсыВалют.Период) КАК Период,
                    КурсыВалют.Валюта КАК Валюта
                ПОМЕСТИТЬ ВТ_ПоследнийПериодНаДату
                ИЗ
                    РегистрСведений.КурсыВалют КАК КурсыВалют 
                ГДЕ
                    КурсыВалют.Период &lt;= &Дата И  КурсыВалют.Валюта.Наименование = "USD"

                СГРУППИРОВАТЬ ПО
                    КурсыВалют.Валюта
                ;
                ////////////////////////////////////////////////       
                ВЫБРАТЬ
                    ВТ_ПоследнийПериодНаДату.Период КАК Период,
                    ВТ_ПоследнийПериодНаДату.Валюта КАК Валюта,
                    КурсыВалют.Курс КАК Курс
                ИЗ
                    ВТ_ПоследнийПериодНаДату КАК ВТ_ПоследнийПериодНаДату
                    ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют КАК КурсыВалют
                    ПО ВТ_ПоследнийПериодНаДату.Период = КурсыВалют.Период
                    И ВТ_ПоследнийПериодНаДату.Валюта = КурсыВалют.Валюта
            </pre>
        </div>




        <p class="title-size16"><b id="reg-info-0.1">Приёмы чтения/записи/удаления в регистр сведений записей из обработки</b></p>
        <p>Допустим у нас есть Справочник Валюты, где перечисляются названия заграничных денег. И есть регистр сведений, где мы храним курсы и кратности этих денег во времени(переодический). Нам нужно как то читать и писать в этот регистр.Мы можем писать в него из пользовательской части, можем писать с помощью документа, а бывает нужно писать в него программно, например, из обработки, чтобы загрузить из инета курсы валют и записать в регистр. Создадим обработку, добавим в неё кнопку и по кнопке будем писать в регистр. Код находится в модуле формы обработки.</p>
        <p><b>1й способ записать через метод СоздатьНаборЗаписей() из полей ввода формы</b>. Этот способ позволяет заполнить набор и записать его сразу весь.</p>
        <div class="code-style">
            <pre>
                --модуль формы обработки
                <span class="vue-g">//эти 2 процедуры обработчики кнопки ЗаписатьКурс</span>
                <span class="vue-b"><span class="vue-r">&НаКлиенте
                Процедура</span> ЗаписатьКурс<span class="vue-r">(</span>Команда<span class="vue-r">)</span>
                    ЗаписатьКурсНаСервере<span class="vue-r">();
                КонецПроцедуры

                &НаСервере
                Процедура</span> ЗаписатьКурсНаСервере<span class="vue-r">()</span>
                    НаборЗаписей <span class="vue-r">=</span> РегистрыСведений<span class="vue-r">.</span>КурсыВалют<span class="vue-r">.</span>СоздатьНаборЗаписей<span class="vue-r">();</span>

                    <span class="vue-g">//метод Добавить() добавляет новую запись в этот набор и возвращает ссылку на эту запись</span>
                    Запись <span class="vue-r">=</span> НаборЗаписей<span class="vue-r">.</span>Добавить<span class="vue-r">();</span>

                    <span class="vue-g">//заполняем измерения и ресурсы записи из полей ввода(из реквизитов формы)</span>
                    Запись<span class="vue-r">.</span>Период <span class="vue-r">=</span> Период<span class="vue-r">;</span>
                    Запись<span class="vue-r">.</span>Валюта <span class="vue-r">=</span> Валюта<span class="vue-r">;</span>	
                    Запись<span class="vue-r">.</span>Курс <span class="vue-r">=</span> Курс<span class="vue-r">;</span>
                    Запись<span class="vue-r">.</span>Кратность <span class="vue-r">=</span> Кратность<span class="vue-r">;</span>

                    <span class="vue-g">//даём команду записать набор записей в БД. У метода Записать() по умолчанию стоит
                    //булево значение Истина(Замещать), т.е. при добавлении записи мы замещаем предыдущую запись
                    //а нам надо добавлять, поэтому ставим Ложь</span>
                    НаборЗаписей<span class="vue-r">.</span>Записать<span class="vue-r">(</span>Ложь<span class="vue-r">);</span>
                КонецПроцедуры</span></span>
            </pre>
        </div>

        <p><b>2й способ записать через метод СоздатьМенеджерЗаписи() из полей ввода формы</b>. Этот способ позволяет записать только по одной записи. Можно в цикле.</p>
        <div class="code-style">
            <pre>
                --модуль формы обработки
                <span class="vue-g">//эти 2 процедуры обработчики кнопки ЗаписатьКурс</span>
                <span class="vue-b"><span class="vue-r">&НаКлиенте
                Процедура</span> ЗаписатьКурс<span class="vue-r">(</span>Команда<span class="vue-r">)</span>
                    ЗаписатьКурсНаСервере<span class="vue-r">();
                КонецПроцедуры

                &НаСервере
                Процедура</span> ЗаписатьКурсНаСервере<span class="vue-r">()</span>
                    <span class="vue-g">//В первом способе записывается весь набор, а тут по одной записи</span>
                    НоваяЗапись <span class="vue-r">=</span> РегистрыСведений<span class="vue-r">.</span>СведенияОСотрудниках<span class="vue-r">.</span>СоздатьМенеджерЗаписи<span class="vue-r">();</span>
                    НоваяЗапись<span class="vue-r">.</span>Период <span class="vue-r">=</span> Период<span class="vue-r">;</span>
                    НоваяЗапись<span class="vue-r">.</span>Валюта <span class="vue-r">=</span> Валюта<span class="vue-r">;</span>	
                    НоваяЗапись<span class="vue-r">.</span>Курс <span class="vue-r">=</span> Курс<span class="vue-r">;</span>
                    НоваяЗапись<span class="vue-r">.</span>Кратность <span class="vue-r">=</span> Кратность<span class="vue-r">;</span>
                    НоваяЗапись<span class="vue-r">.</span>Записать<span class="vue-r">(</span>Ложь<span class="vue-r">);
                КонецПроцедуры</span></span>
            </pre>
        </div>

        <p><b>Способ заполнения нобора записей из ТЗ</b>. </p>
        <p>Сделаем рекизит формы "ТЗНабора" типа "Таблица значений", создадим в ней колонки, такие же как и в регистре и перетащим её в элементы формы, в элементах формы таблица значений станет таблицей формы. Затем в пользовательской части мы будем заполнять строки в табличной части. Заполнив строку мы жмём кнопку "Записать" и в коде в цикле мы перебираем таблицу значений и с помощью метода заполняем из неё значения в наборе:</p>
        <div class="code-style">
            <pre>
                --модуль формы обработки
                <span class="vue-b"><span class="vue-r">&НаКлиенте
                    Процедура</span> ЗаписатьНабор<span class="vue-r">(</span>Команда<span class="vue-r">)</span>
                        ЗаписатьКурсНаСервере<span class="vue-r">();
                    КонецПроцедуры
        
                    &НаСервере
                    Процедура</span> ЗаписатьНаборНаСервере<span class="vue-r">()</span>
                        НабоЗаписей <span class="vue-r">=</span> РегистрСведений<span class="vue-r">.</span>КурсыВалют<span class="vue-r">.</span>СоздатьНаборЗаписей<span class="vue-r">();</span>

                        <span class="vue-g">//заполняем набор с использованием цикла</span>
                        <span class="vue-r">Для каждого</span> СтрокаТЧ <span class="vue-r">Из</span> ТЗНабора <span class="vue-r">Цикл</span>
                            НоваяЗапись <span class="vue-r">=</span> НоборЗаписей<span class="vue-r">.</span>Добавить<span class="vue-r">();</span>
                            ЗаполнитьЗначениеСвойств<span class="vue-r">(</span>НоваяЗапись<span class="vue-r">,</span> СтрокаТЧ<span class="vue-r">);
                        КонецЦикла;</span>

                        <span class="vue-g">//или без использования цикла</span>
                        НаборЗаписей<span class="vue-r">.</span>Загрузить<span class="vue-r">(</span>ТЗНабора<span class="vue-r">.</span>Выгрузить<span class="vue-r">());</span>

                        НаборЗаписей<span class="vue-r">.</span>Записать<span class="vue-r">();
                    КонецПроцедуры</span></span>
            </pre>
        </div>

        <p><b>Получение записей регистра по отбору</b></p>
        <p>Здесь немного другой пример регистра.</p>
        <div class="code-style">
            <pre>
                --модуль формы обработки
                <span class="vue-b"><span class="vue-r">&НаСервере
                Процедура</span> ПолучитьСОтборомНаСервере<span class="vue-r">()</span>
                    НаборЗаписей <span class="vue-r">=</span> РегистрыСведений.СведенияОСотрудниках<span class="vue-r">.</span>СоздатьНаборЗаписей<span class="vue-r">();</span>
                    НаборЗаписей<span class="vue-r">.</span>Отбор<span class="vue-r">.</span>Сотрудник<span class="vue-r">.</span>Установить<span class="vue-r">(</span>СотрудникДляОтбора<span class="vue-r">);</span>   
                    НаборЗаписей<span class="vue-r">.</span>Отбор<span class="vue-r">.</span>Период<span class="vue-r">.</span>Установить<span class="vue-r">(</span>Период<span class="vue-r">);</span>
                    
                    НаборЗаписей<span class="vue-r">.</span>Прочитать<span class="vue-r">();</span>
                    
                    ТЗ<span class="vue-r">.</span>Загрузить<span class="vue-r">(</span>НаборЗаписей<span class="vue-r">.</span>Выгрузить<span class="vue-r">());
                КонецПроцедуры


                &НаКлиенте
                Процедура</span> ПолучитьСОтбором<span class="vue-r">(</span>Команда<span class="vue-r">)</span>
                    ПолучитьСОтборомНаСервере<span class="vue-r">();
                КонецПроцедуры</span></span>
            </pre>
        </div>

        <p><b>Запись набора записей в регистр по отбору</b></p>
        <p>Пока не сильно понимаю для каких случаев у нас будет запись по отбору. Предположу такой пример. У нас в базе есть много записей в регистре. Нам нужно подправить какую-то запись и чтобы не переписывать все записи заново, как на закладке "Пример1", мы можем по отбору получить нужную запись, сделать в ней изменения и записать заменив её в базе. Если бы мы всё это делали как на закладке "Пример1", то мы бы получили все записи, изменили бы какую-то одну и записали весь набор, т.е. перезаписываются все записи, а это может быть очень долго. Если мы отберём запись из базы по сотруднику и выведем её в таблицу, а потом добавим в таблице ещё одну запись с другим сотрудником, то записать такой набор уже не получится. Система скажет, что вторая запись не проходит по отбору.</p>
        <div class="code-style">
            <pre>
                <span class="vue-b"><span class="vue-r">&НаСервере
                Процедура</span> ЗаписатьСОтборомНаСервере<span class="vue-r">()</span>
                    НаборЗаписей <span class="vue-r">=</span> РегистрыСведений<span class="vue-r">.</span>СведенияОСотрудниках<span class="vue-r">.</span>СоздатьНаборЗаписей<span class="vue-r">();</span>
                    НаборЗаписей<span class="vue-r">.</span>Отбор<span class="vue-r">.</span>Сотрудник<span class="vue-r">.</span>Установить<span class="vue-r">(</span>СотрудникДляОтбора<span class="vue-r">);</span>
                    НаборЗаписей<span class="vue-r">.</span>Отбор<span class="vue-r">.</span>Период<span class="vue-r">.</span>Установить<span class="vue-r">(</span>Период<span class="vue-r">);</span>
                    
                    <span class="vue-r">Для каждого</span> СтрокаТЗ <span class="vue-r">Из</span> ТЗ <span class="vue-r">Цикл</span>
                        НоваяЗапись <span class="vue-r">=</span> НаборЗаписей<span class="vue-r">.</span>Добавить<span class="vue-r">();</span>
                        ЗаполнитьЗначенияСвойств<span class="vue-r">(</span>НоваяЗапись<span class="vue-r">,</span> СтрокаТЗ<span class="vue-r">);</span>
                    КонецЦикла; 

                    НаборЗаписей<span class="vue-r">.</span>Записать<span class="vue-r">();</span>
                КонецПроцедуры

                &НаКлиенте
                Процедура ЗаписатьСОтбором<span class="vue-r">()</span>
                    ЗаписатьСОтборомНаСервере<span class="vue-r">();	
                КонецПроцедуры</span></span>
            </pre>
        </div>

        <p><b>Удаление выбранной записи в табличной части</b></p>
        <p>Пока я придумал такой способ, правильный или нет надо проверять.</p>
        <div class="code-style">
            <pre>
                <span class="vue-b"><span class="vue-r">&НаСервере
                Процедура</span> УдалитьЗаписьНаСервере<span class="vue-r">()</span>
                    НаборЗаписей <span class="vue-r">=</span> РегистрыСведений<span class="vue-r">.</span>СведенияОСотрудниках<span class="vue-r">.</span>СоздатьНаборЗаписей<span class="vue-r">();</span>  
                    НаборЗаписей<span class="vue-r">.</span>Прочитать<span class="vue-r">();</span>

                    <span class="vue-g">//удаляем всегда первую запись в массиве, находящимся в свойстве "ВыделенныеСтроки"</span>
                    НаборЗаписей<span class="vue-r">.</span>Удалить<span class="vue-r">(</span>Элементы<span class="vue-r">.</span>ТЗ2<span class="vue-r">.</span>ВыделенныеСтроки<span class="vue-r">[</span>0<span class="vue-r">]);</span>
                    ТЗ<span class="vue-r">.</span>Загрузить<span class="vue-r">(</span>НаборЗаписей<span class="vue-r">.</span>Выгрузить<span class="vue-r">());</span>
                    НаборЗаписей<span class="vue-r">.</span>Записать<span class="vue-r">();
                КонецПроцедуры


                &НаКлиенте
                Процедура</span> УдалитьЗапись<span class="vue-r">(</span>Команда<span class="vue-r">)</span>
                    УдалитьЗаписьНаСервере<span class="vue-r">();
                КонецПроцедуры</span></span>
            </pre>
        </div>

        <p><b>Удаление всех записей зависимого регистра сведений</b></p>
        <div class="code-style">
            <pre>
                --модуль формы списка РС
                &НаСервереБезКонтекста
                Процедура ОчиститьНаСервере() 
                    //получение всех ссылок регистраторов
                    Запрос = Новый Запрос;
                    Запрос.Текст = 
                        "ВЫБРАТЬ
                        |	AST_N10_ЛидыССайта.Ссылка КАК Ссылка
                        |ИЗ
                        |	Документ.AST_N10_ЛидыССайта КАК AST_N10_ЛидыССайта
                        |
                        |СГРУППИРОВАТЬ ПО
                        |	AST_N10_ЛидыССайта.Ссылка";
                    
                    РезультатЗапроса = Запрос.Выполнить();
                    
                    Выборка = РезультатЗапроса.Выбрать();
                    
                    Пока Выборка.Следующий() Цикл
                        НаборЗаписей = РегистрыСведений.AST_N10_ИсторияСтатусовЛидов.СоздатьНаборЗаписей();
                        НаборЗаписей.Отбор.Регистратор.Установить(Выборка.Ссылка); 
                        НаборЗаписей.Прочитать();
                        
                        Для каждого Запись Из НаборЗаписей Цикл
                            НаборЗаписей.Удалить(Запись);	
                        КонецЦикла;

                        НаборЗаписей.Записать();
                    КонецЦикла;

                КонецПроцедуры

                &НаКлиенте
                Процедура Очистить(Команда)
                    ОчиститьНаСервере();
                КонецПроцедуры
            </pre>
        </div>

        <p><b>Удаление одной записи независимого непериодического регистра сведений</b></p>
        <div class="code-style">
            <pre>
                --способ 1
                <span class="сс">...
                ОднаЗапись = РегистрыСведений.ПроизводственныйКалендарь.СоздатьМенеджерЗаписи();

                <span class="з">//тут Отбора нет, отбор мы делаем конкретно по измерениям</span>
                ОднаЗапись.Дата = 'дата'; <span class="з">//указываем зимерению Дата значение даты, запись которой хотим удалить</span>
                ОднаЗапись.Удалить();
                ...</span>


                --способ 2
                <span class="сс">...
                НаборЗаписей = РегистрыСведений.ПроизводственныйКалендарь.СоздатьНаборЗаписей();

                <span class="з">//а тут Отбор есть и по нему отбираем записи</span>
                НаборЗаписей.Отбор.Дата.Установить('дата');

                <span class="з">//так как созданный набор пустой, то нам достаточно просто его записать и запись перезапишет те наборы, по которым установили отбор</span>
                НаборЗаписей.Записать();</span>
            </pre>
        </div>

        <p><b>Чтобы узнать о количестве записей в наборе есть метод Количество()</b>.</p>

        <p><b>Можно выгружать и загружать значения колонок или колонки, выгружаются значения в массив и загружаются из массива</b>. Это можно почитать в помошнике или посмотреть в обработке "РаботаСРегистромСведений" в 5м примере. Обработка лежит в папке "Всё об 1С" - "Обработки, отчёты ...". Также в этой обработке можно посмотреть и другие примеры, например разные способы удаления записей и изменения.</p>

    
    
    
    
        <p class="title-size16"><b id="reg-info-1">Что такое регистр сведений. Галочка "Основной отбор по периоду" и "Основной отбор"</b>.</p>
        <p>Объект конфигурации Регистр cведений предназначен для описания структуры хранения данных в разрезе нескольких измерений. На основе объекта конфигурации Регистр сведений платформа создает в базе данных таблицу, в которой может храниться произвольная информация, «привязанная» к набору измерений.</p>
        <img src="img/1С-1/2022-12-06_08-23-15.png" class="screen" alt="">
        <p>Принципиальное отличие регистра сведений от регистра накопления заключается в том, что каждое движение регистра сведений устанавливает новое значение ресурса, в то время как движение регистра накопления изменяет существующее значение ресурса. По этой причине регистр сведений может хранить любые данные (а не только числовые, как регистр накопления).</p>
        <p>Следующей важной особенностью регистра сведений является его способность (при необходимости) хранить данные с привязкой ко времени. Благодаря этому регистр сведений может хранить не только актуальные значения данных, но и историю их изменения во времени. Регистр сведений, использующий привязку ко времени, называют <i style="text-decoration:underline">периодическим регистром сведений</i>.</p>
        <p>Периодичность регистра сведений можно определить одним из следующих значений:</p>
        <ul class="list">
            <li>в пределах секунды;(в на какую дату и время создали цену, такая дата с временем и будет стоять, не сбрасываясь никуда)</li>
            <li>в пределах дня;(вводим дату и время и она сбрасывается на начало заданного дня)</li>
            <li>в пределах месяца;(сбрасывается на начало заданного месяца)</li>
            <li>в пределах квартала;(сбрасывается на начало квартала заданной даты, например добавил цену 04.03.2022, а сбросится до 01.01.2022)</li>
            <li>в пределах года;(ну тут будет сбрасываться всё на 1 января)</li>
            <li>в пределах регистратора (если установлен режим записи Подчинение регистратору).</li>
        </ul>
        <p>Периодический регистр сведений всегда содержит служебное поле Период, добавляемое системой автоматически. Оно имеет тип Дата и служит для указания факта принадлежности записи к какому-либо периоду. При записи данных в регистр платформа всегда приводит значение этого поля к началу того периода, в который он попадает. Например, если в регистр сведений с периодичностью в пределах месяца записать данные, в которых период указан как 08.04.2022, то регистр сохранит эти данные со значением периода, равным 01.04.2022.</p>
        <p>Как и для других регистров, система контролирует уникальность записей для регистра сведений. Однако если для прочих регистров уникальным идентификатором записи является регистратор и номер строки, то для регистра сведений применяется другой принцип формирования ключевого значения.</p>
        <p><i style="text-decoration:underline">Ключом записи</i>, однозначно идентифицирующим запись, является в данном случае совокупность значений измерений регистра и периода (в случае, если регистр сведений периодический). Например, для периодического регистра сведений с измерением Товар и ресурсом Цена ключом записи будет набор значений полей Период и Товар. Регистр сведений не может содержать несколько записей с одинаковыми ключами.</p>
        <p>Если продолжать сравнение с регистром накопления, то можно сказать, что регистр сведений предоставляет больше свободы в редактировании хранимых данных. Наряду с возможностью использования в режиме подчинения регистратору (когда записи регистра сведений «привязаны» к документу-регистратору) регистр сведений может применяться и в независимом режиме, в котором пользователю предоставляется полная свобода интерактивной работы с данными регистра. Регистр сведений, не использующий подчинение регистратору, называют <i style="text-decoration:underline">независимым регистром сведений</i>.</p>
    
    
    
    
    
    
        <p class="title-size16"><b id="reg-info-2">Что такое измерение и ресурс</b></p>
        <p>Я взял этот кусочек объяснения из книги Радченко. Он мне показался самым лучшим объяснением. Как пример, будет прикладное решение - Дневник. Мы документом записываем в каждый день недели расписание и оценки и проводим его по регистру сведений Оценки. В этом регистре сведений Предмет(Урок) это измерение, а Оценка - ресурс.</p>
        <p>Попробуем сформулировать: зачем мы создавали регистр Оценки? Чтобы, например, узнать оценки по математике. Теперь слово "оценки" замените на "ресурс", а слово "математика" замените на "измерение". И вам всё сразу станет понятно.</p>
        <img src="img/1С-1/2023-05-02_20-49-39.png" alt="">
        <p><i style="text-decoration:underline">Измерения</i> это уточняющая информация, которую вы передадите регистру, когда будете его о чём-то спрашивать. А <i style="text-decoration:underline">ресурсы</i> это то, что регистр вам ответит. То, что выхотите узнать в результате своего вопроса.</p> 
        <p>Вы хотите знать оценки, поэтому создали ресурс Оценка. Если бы кроме этого выхотели знать продолжительность ответов на вопрос учителя, вы бы создали ещё один реквизит "ПродолжительностьОтвета". И тогда ваш вопрос звучал бы так: "Какие оценки и сколько времени я потратил на ответы по математике?"</p>
        <p>Вы хотите знать оценки по каждому предмету. Поэтому вы создали измерение Предмет. Если бы вы хотели кроме этого знать, за устный ответ получена оценка или за письменную работу, вы бы создали ещё одно измерение "ВидОтвета". И тогда ваш вопрос звучал бы так: "Какие оценки у меня за устные ответы по математике?"</p>
    
    
    
    
    
    
        <p class="title-size16"><b id="reg-info-3">Рассмотрим переодический регистр сведений</b>.</p>
        <p>Предположим наше предприятие оказывает услуги. У нас имеется справочник Номенклатура, в котором описаны товары и услуги. У наших услуг должны быть цены. Казалось бы логично разместить цены как реквизит "Цена" у каждой услуги в справочнике, однако стоимость услуг имеет особенность меняться со временем. И может сложиться такая ситуация, когда нам потребуется внести изменения или уточнения в один из ранее проведенных документов Оказание услуги. В этом случае мы не сможем получить правильную стоимость услуги, поскольку в реквизите "Цена" справочника будет храниться последнее введенное значение. Что это значит? Приведу пример. Вот завели мы в спрвочнике Номенклатура реквизит Цена и указали стоимость для услуги Диагностика - 5000 руб. Затем мы создали документ Оказание услуги и начали заполнять его. Указали в документе сотрудника(Иванов), который выполнял диагностику, указали цену из справочника - 5000, провели документ. Проходит время, у нас на предприятии поменялась цена на диагностику и теперь услуга стоит 6000 руб. Мы идём в справочник "Номенклатура" и меняем в реквизите "Цена" на услугу Диагностика стоимость с 5000 на 6000. Опять проходит время и мы вдруг понимаем, что когда то мы проводили документ, где Иванов оказал услугу Диагностика, а на самом деле услугу как оказалось выполнил Петров и мы идём в документ и меняем Иванова на Петрова. Нам снова нужно провести документ, но при заполнении документа автоматически возьмётся последняя цена из справочника - 6000 руб. Но нам так нельзя, нам нужна та старая цена в 5000 руб., а её уже не существует ни в каких БД и хранилищах. Вот для этих случаев цены и заполняются в периодических регистрах сведений, которые могут хранить цены на одну и ту же услугу во времени.</p>
        <p>Также предприятие вдруг захочет видеть зависимость прибыли от изменения стоимость услуг, то тогда спрвочники опять же не помогут, а помогут регистры сведений, которые позволяют анализировать изменение стоимости услуг во времени. И тогда просто необходимо будет иметь возможность анализировать изменение стоимости услуг во времени.</p>
    
    
    
    
    
        <p class="title-size16"><b id="reg-info-4">Добавление переодического регистра сведений. Свойство "Ведущее". Свойство "Основной отбор по периоду" и "Основной отбор"</b>.</p>
        <p>Приступим к созданию периодического регистра сведений, который будет хранить развернутые во времени розничные цены материалов и стоимости услуг, оказываемых нашим предприятием.</p>
        <p>Добавим в конфигураторе новый регистр сведений с именем Цены, установим преодичность - В пределах секунды. Такую периодичность мы выбрали для того, чтобы иметь возможность отслеживать цены несколько раз в течение дня. Если же так часто не предполагается изменять цены, то можно выбрать в пределах дня.</p>
        <p>Обратим внимание на свойство Режим записи. По умолчанию оно имеет значение – Независимый, то есть мы создаем независимый регистр сведений и сможем в дальнейшем вводить в него данные без использования регистратора, вручную.</p>
        <p>Далее перейдём на закладку Данные и создадим измерение Номенклатура с типом СправочникСсылка.Номенклатура. В свойствах этого измерения укажем, что оно будет Ведущим, поставив галочку. Свойство <b>Ведущее</b> имеет смысл использовать лишь тогда, когда измерение имеет тип ссылки на объект базы данных. Установка свойства Ведущее будет говорить о том, что запись регистра сведений представляет интерес, пока существует тот объект, ссылка на который выбрана в качестве значения этого измерения в этой записи. При удалении объекта все записи регистра сведений по этому объекту тоже будут автоматически удалены. Проще говоря, если мы из справочника удалим услугу или товар, то и в регистре удалятся записи связанные с этой услугой и товаром, конечно если такая связь существует с помощью свойства Ведущий.</p>
        <p>А если свойство "Ведущий" не установить, то при попытке удаления объекта из справочника, например, товара, ссылка на который есть в регистре, нам не удастья удалить этот товар из справочника, пока мы не почистим записи в регистре.</p>
        <p>Также в результате того, что это измерение регистра мы сделали ведущим, в форме элемента справочника Номенклатура, в панели навигации в группе Перейти появится ссылка. По ней возможен переход к записям этого регистра, которые содержат в измерении Номенклатура ссылку на этот элемент справочника.</p>
        <p>Затем создадим ресурс Цена, тип Число, длина 15, точность 2, неотрицательное.</p>
        <p>Если зайти в пользовательский режим, то увидим команду вызова регистра сведений Цены в тех разделах, куда мы их поместили. В отличии от регистра накопления система по умолчанию не прячет этот регистр от глаз пользователя, потому что он независимый и может пользователем напрямую заполняться.</p>
        <p>В консрукторе объекта регистра сведений ниже полей "Периодичность" и "Режим записей" есть галочка <b>"Основной отбор по периоду"</b>, она установлена по умолчанию. Этот пункт говорит о том, что поле "Период" будет индексироваться, а значит и поиск по этому полю регистра будет быстрее, но и запись будет происходить дольше в базу.</p>
        <p>Также при создании измерения, для каждого из них можно убрать или поставить галочку <b>"Основной отбор"</b>. Это тоже самое, что и для периода, измерения будут индексироваться. По умолчанию галочка стоит. Как более подробнее узнаю про индексацию допишу.</p>
    
    
    
    
    
        <p class="title-size16"><b id="reg-info-5">Создание записей в регистре сведений</b>.</p>
        <p>В пользовательском режиме выберем наш регистр сведений и надмём команду Создать. Какой укажем период? Если у нас уже есть проведённые раньше документы по оказанию услуг, то надо задать дату задним числом,т.е. чтобы она была меньше(раньше) или равна дате документа.</p>
        <img src="img/1С-1/2022-12-06_09-12-23.png" alt="">
        <p>Итак, мы с вами имеем очень полезную возможность в нашей программе – установка цен на услуги и материалы. Поскольку цены хранятся с привязкой к дате, мы можем заранее установить новые цены и быть уверены в том, что новые цены вступят в действие не раньше указанного для них времени. Например, создам новую запись для услуги Диагностика с новой ценой 300 руб. Укажу дату 4 января 2023 года, так как у меня стоит в пределах месяца, то дата сбросится на 01.01.2023. И теперь когда услуга Диагностика будет выполнена в январе, то уже возьмётся стоимость этой услуге равной 300 р.</p>
    
    
    
    
    
        <p class="title-size16"><b id="reg-info-6">Автоматическая подстановка цены в документ при выборе номенклатуры. Используется объектная модель запроса</b>.</p>
        <p>Наша задача заключается в следующем. Цена номенклатуры у нас теперь хранится в отдельном регистре сведений. Когда мы создаём или изменяем документ ОказаниеУслуги и добавляем в табличную часть какую-либо номенклатуру, нам хочется, чтобы одновременно с этим в документ подставлялась бы сразу и актуальная цена этой номенклатуры, полученная из регистра сведений и соответствующая дате документа. Для этого сделаем 2 вещи.</p> 
        <p>Сначала напишем некую функцию, которая будет возвращать нам актуальную цену номенклатуры, а затем вызовем эту функцию в тот миг, когда в документ добавляется номенклатура, и подставляется в поле табличной части цена номенклатуры, которую вернет эта функция.</p> 
        <p>Поскольку такой код понадобится нам, скорее всего, не только в этом, но и в других документах, которые содержат в табличной части номенклатуру, мы поместим функцию в некоторое общедоступное место – в общий модуль.</p>
        <p>Создадим Общий модуль "РаботаСоСправочниками" и в нём создадим функцию ПолучитьРозничнуюЦену. В палитре свойств этого модуля мы видим, что стоит по умолчанию галочка <i style="text-decoration:underline">Сервер</i>, это значит что объекты данного модуля будут собраны и выполнены на стороне сервера. <b>(ВАЖНО)</b> Кроме этого, установим флажок <i style="text-decoration:underline">Вызов сервера</i> для того, чтобы экспортные процедуры и функции этого модуля можно было вызывать с клиента.</p>
        <img src="img/1С-1/2022-12-06_10-04-16.png" alt="">
        <p>Вот такой код будет в функции ПолучитьРозничнуюЦену() общего модуля "РаботаСоСправочниками":</p>
        <div class="code-style">
            <pre>
                <span class="сс"><span class="ск">Функция</span> ПолучитьРозничнуюЦену<span class="ск">(</span>УказаннаяДата<span class="ск">,</span> Номенклатура<span class="ск">) Экспорт</span>
                    <span class="з">//создаём структуру Отбор, где укажем измерения, по которым хотим отобрать цены</span>
                    Отбор <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Номенклатура"</span><span class="ск">,</span> Номенклатура<span class="ск">);</span>
    
                    <span class="з">//Получаем значение ресурса регистра.</span>
                    <span class="з">//Регистр всегда по запросу возвращает значения ресурсов, не измерений</span>
                    <span class="з">//Также есть метод Получить(УказаннаяДата, Отбор). В чём разница? Допустим в регистре есть запись</span>
                    <span class="з">//на дату 01.12.2022, а мы указываем Получить('03.12.2022', Отбор), нам вернётся структура с пустыми значениями, потому что конкретно на эту дату нет ничего</span>
                    <span class="з">//а метод ПолучитьПоследнее('03.12.2022', Отбор) вернёт последнее значение цены, которое там есть рядом до этой даты</span>
                    <span class="з">//в ЗначениеРесурсов вернётся структура. В ключе - имя ресурса, в значении значение ресурса</span>
                    ЗначенияРесурсов <span class="ск">=</span> РегистрыСведений<span class="ск">.</span>Цены<span class="ск">.</span>ПолучитьПоследнее<span class="ск">(</span>УказаннаяДата<span class="ск">,</span> Отбор<span class="ск">);</span>
    
                    <span class="ск">Возврат</span> ЗначенияРесурсов<span class="ск">.</span>Цена<span class="ск">;
                КонецФункции</span></span>
            </pre>
        </div>
        <p>Для получения розничной цены мы будем передавать в функцию два параметра:</p>
        <ul class="list">
            <li>УказаннаяДата - параметр типа Дата, определяет точку на оси времени, в которой нас интересует значение розничной цены;</li>
            <li>Номенклатура - ссылка на элемент справочника Номенклатура, для которого мы хотим получить розничную цену.</li>
        </ul>
        <p>В теле функции мы сначала создаем вспомогательный объект Отбор. Это структура, содержащая отбор по измерениям регистра. С его помощью определяем, что нас будут интересовать записи регистра, в которых измерение регистра "Номенклатура" равно переданной в функцию ссылке на элемент справочника.</p>
        <p>Имя ключа структуры («Номенклатура») должно совпадать с именем измерения регистра, заданного в конфигураторе, а значение элемента структуры (Номенклатура) задает отбираемое по данному измерению значение. Во второй строке мы обращаемся к менеджеру регистра сведений Цены (РегистрыСведений.Цены) и выполняем метод ПолучитьПоследнее(), который возвращает нам значения ресурсов самой поздней записи регистра, соответствующей передаваемой в функцию дате (УказаннаяДата) и значениям измерений регистра (Отбор).</p>
        <p>Метод ПолучитьПоследнее() возвращает структуру, содержащую значения ресурсов, которая сохраняется в переменной ЗначенияРесурсов. Вообще говоря, у регистра может быть несколько ресурсов. В нашем регистре ресурс один, но все равно будет возвращена структура, содержащая единственный элемент. Поэтому в следующей строке мы получаем искомую нами розничную цену, просто указав имя нужного нам ресурса регистра через точку (ЗначенияРесурсов.Цена), и возвращаем ее при выполнении функции.</p>
        <p>Теперь эту функцию нужно вызвать в некоторый момент работы документа.</p>
        <p>Откроем форму документа ОказаниеУслуги и для поля Номенклатура табличной части ПереченьНоменклатуры задаим обработчик для события ПриИзменении на клиенте. В модуле формы появится процедура, внесём в неё такой код:</p>
        <div class="code-style">
            <pre>
                --модуль формы документа "ОказаниеУслуг"
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> ПереченьНоменклатурыНоменклатураПриИзменении<span class="ск">(</span>Элемент<span class="ск">)</span>
                    <span class="з">// Получить текущую строку табличной части.</span>
                    СтрокаТабличнойЧасти <span class="ск">=</span> Элементы<span class="ск">.</span>ПереченьНоменклатуры<span class="ск">.</span>ТекущиеДанные<span class="ск">;</span>
                    СтрокаТабличнойЧасти<span class="ск">.</span>Цена <span class="ск">=</span>  РаботаСоСправочниками<span class="ск">.</span>ПолучитьРозничнуюЦену<span class="ск">(</span>Объект<span class="ск">.</span>Дата<span class="ск">,</span> СтрокаТабличнойЧасти<span class="ск">.</span>Номенклатура<span class="ск">);</span>
    
                    <span class="з">//Пересчитаем сумму строки табличной части</span>
                    РаботаСДокументами<span class="ск">.</span>РассчитатьСумму<span class="ск">(</span>СтрокаТабличнойЧасти<span class="ск">);
                КонецПроцедуры</span></span>
            </pre>
        </div>
    
    
    
    
    
        <p class="title-size16"><b id="reg-info-7">Запись в регистр сведений из документа числовых значений</b></p>
        <p>Создадим регистр сведений "ЦеныПоставщиков", укажем переиодичность "в течении секунды" и укажем регистратором документ "ПоступлениеТоваров". Затем в документе во вкладке Движения через констркутор напишем код движений.</p>
        <div class="code-style">
            <pre>
                Процедура ОбработкаПроведения(Отказ, Режим)
                <span class="сс"><span class="з">// регистр ЦеныПоставщиков 
                //Свойство Записывать указывает записать новую запись в инфобазу или нет</span>
                Движения.ЦеныПоставщиков.Записывать = Истина;
                Для Каждого ТекСтрокаТовары Из Товары Цикл
                    <span class="з">//Движения это коллекция наборов записей регистров
                    //ЦеныПоставщиков это набор записей регистра с данным именем
                    //Метод Добавить() добавляет в набор записей новую запись и возвращает ссылку на неё
                    //Ну а далее мы заполняем эту новую запись Движение значениями</span>
                    Движение = Движения.ЦеныПоставщиков.Добавить();
                    Движение.Период = Дата;
                    Движение.Номенклатура = ТекСтрокаТовары.Товар;
                    Движение.Контрагент = Контрагент;
                    Движение.Цена = ТекСтрокаТовары.Цена;
                КонецЦикла;
            КонецПроцедуры</span>
            </pre>
        </div>
    
    
    
    
        <p class="title-size16"><b id="reg-info-8">Запись в регистр сведений из документа не числовых значений</b></p>
        <p>Бывает когда переодические регистры используют не только для установления новых ЧИСЛОВЫХ значений во времени, но и других значений. Как пример, у нас есть сотрудники в справочнике Сотрудники и есть справочник Подразделения. Мы могли бы установить в Сотрудники реквизит Подразделения и указывать для каждого сотрудника где он работает, но сотрудники могут перемещаться внутри производства по разным подразделениям и тогда в справочнике мы сможем отследить только последние нахождение сотрудника в подразделении и будем лишены возможности проследить в каких подразделениях он работал в течении, например, месяца, что повлияет на зарплату и драугие отчёты. Поэтому нам нужна возможность отследить его перемещения во времени по подразделениям. Для этого можно завести новый регистр сведений и в Измерение добавить Сотрудник, а в ресурс добавить Подразделение и можно ещё в ресурс добавить Оклад. Также заводится документ, например, КадровыйПриказ, который записывает перемещение сотрудника и делает записи в регистре сведений. Добавим этому документу рекизиты - Сотрудник, Подразделение, Оклад, и ДатуПриёма(дата когда сотрудник перевёлся в новое подразделение). Чтобы делать записи в регистр сведений, в этом регистре нужно выбрать режим записи "подчинение регистратору" на вкладке Основные. Режим записи "независимый" позволяет пользователю открыть регистр и заполнять его от руки.</p>
        <p>Далее либо через конструктор , либо сам надо добавить код движения в модуле объекта документа. Там будет запись одного движения(записи). В пользовательской части мы теперь не увидим регистр, потому что режим "подчинение регистратору" скрыл его. Чтобы увидеть регистр откроем в подсистемах ту подсистуму, куда я установил регистр и правой кнопкой по полсистеме и выбираем "открыть командный интерфейс". В окне поставим галочку видимости нашего регистра.</p>
        <p>В регистре появились новые 2 поля - "Регистратор" и "Номер строки". Пока всё.</p>
    
    
    
    
        <p class="title-size16"><b id="reg-info-10">Читаем данные из регистра сведений с помощью табличной модели(пишем запрос)</b></p>
        <p>Выше я уже описывал как читать данные из регистра через объектную модель, теперь тут опишу как с помощью запросов получить данные. Вот такой код всё для тех же курсов валют:</p>
        <div class="code-style">
            <pre>
                <span class="сс">&НаКлиенте
                Процедура ПолучитьКурсЗапросом(Команда)
                    ПолучитьКурсЗапросомНаСервере();
                КонецПроцедуры
    
    
                &НаСервере
                Процедура ПолучитьКурсЗапросомНаСервере()
                    Запрос = Новый Запрос;
                    Запрос.Текст = 
                        "ВЫБРАТЬ
                        |	КурсыВалютСрезПоследних.Курс КАК Курс,
                        |	КурсыВалютСрезПоследних.Кратность КАК Кратность
                        |ИЗ
                        |	РегистрСведений.КурсыВалют.СрезПоследних(&Период, Валюта = &Валюта) КАК КурсыВалютСрезПоследних";
                    
                    Запрос.УстановитьПараметр("Валюта", Валюта);
                    Запрос.УстановитьПараметр("Период", Период);
                    РезультатЗапроса = Запрос.Выполнить();
                    ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
                    
                    ВыборкаДетальныеЗаписи.Следующий();
                    Курс = ВыборкаДетальныеЗаписи.Курс;
                    Кратность = ВыборкаДетальныеЗаписи.Кратность;
                КонецПроцедуры</span>
            </pre>
        </div>
        <p>Для регистра сведений в БД вычисляются ещё 2 виртуальные таблицы: а)СрезПервых, б)СрезПоследних. Эти таблицы соответствуют методам объектной модели ПолучитьПервое() и ПолучитьПоследнее(). У виртуальных таблиц есть свои параметры и условия, задаются в скобках.</p>
    
    
    
    
        <p class="title-size16"><b id="reg-info-11">Дополнение от меня.</b></p>
        <p>Как я заметил, уникальность записей в непереодическом регистре сведений основывается только на полях измерения. Например есть 2 измерения: Номенклатура и Контрагент и ресурс Цена. Мы можем задать 2 записи: Холодильник от Поставщика1 и Холодильник от Поставщика2 и всё будет нормально, уникальность записей обеспечивается 2мя полями  - Номенклатура и Контрагент. А вот если взять и перенести Контрагент в ресурс и попробовать снова задать эти 2 записи, то уже не получится, потому что теперь уникальность записей обеспечивает только одно поле измерения Номенклатура. Мы в первой записи зададим Холодильник от Поставщика1, а на второй записи нам скажут, что запись с именем Холодильник уже есть.</p>
        <p>В переодическом регистре сведений такое прокатит(когда контрагента перенесу в ресурс)только если период выбран в "В пределах секунды", потому что тут уже уникальность записи обеспечивается датой(а дата будет каждую секунду разная) и полем измерения. Поэтому наверное измерений должно быть как минимум 2.</p>
    
    
    
    
        <p class="title-size16"><b id="reg-info-12">Виртуальная таблица РегистраСведений - СрезПервых и СрезПоследних</b>.</p>
        <p>Эта виртуальная таблица(будем брать СрезПоследних, потому что СрезПервых встречается крайне редко) возвращает данные на последнюю дату то, что мы запрашиваем. Таблица умеет принимать свои собственные параметры. <span class="сс">У этой вирт. таблицы всего 2 параметра - Период и Условие</span>.</p> 
        <p>Период имеет тип параметра: Дата, МоментВремени, Граница. Указывается дата, момент времени или граница, на которые будут получены сведения. Если параметр не задан, будут выбираться наиболее поздние записи, без ограничения по дате.</p>
        <p>По условию мы ограничиваем отбор записей по аргументу. Оба параметра не обязательны. Желательно для витруальных таблиц параметры задавать именно для них, потому что если параметры задавать через слово ГДЕ, то будет делаться лишняя работа. Сначала вирт. таблица построится, а потом к ней будут применены ограничения отбора и она снова будет перестраиваться. Вот пример такой таблицы.</p>
        <div class="code-style">
            <pre>
                <span class="сс">ВЫБРАТЬ
                    Номенклатура,
                    Контрагент,
                    Цена,
                    Период
                ИЗ
                    РегистрСведений.ЦеныПоставщиков.СрезПоследних(
                        &Период,
                        Номенклатура = &Товар
                        //Контрагент = &Поставщик
                    )</span>
            </pre>
        </div>
        <img src="img/1С-1/2025-04-17_16-17-16.png" class="screen" alt="">
    
    
    
    
        
        <p class="title-size16"><b id="reg-info-12a">Что под капотом у метода <b>СрезПоследних()</b> виртуальной таблицы. Как он ищет ближайшие записи на дату?</b>.</p>
        <p>При вызове виртуальной таблицы РегистрСведений.Имя.СрезПоследних система выполняет вот такие действия. Она на самом деле строит несколько запросов к базе. Вот что под капотом у этого метода:</p>
        <div class="code-style">
            <pre>
                ВЫБРАТЬ
                    МАКСИМУМ(Период),
                    НаборПродуктов,
                    Продукт
                ПОМЕСТИТЬ ВТ1
                ИЗ
                    РегистрСведений.СоставНаборовПродуктов_Билет10
                ГДЕ
                    Период &lt;= &Период
                    И НаборПродуктов = &НаборПродуктов 
    
                СГРУППИРОВАТЬ ПО
                    НаборПродуктов,
                    Продукт	
    
                ИНДЕКСИРОВАТЬ ПО
                    Период,
                    НаборПродуктов,
                    Продукт
                ;
                //////////////////////////////////////
                ВЫБРАТЬ
                    СоставНаборовПродуктов_Билет10.Период,
                    СоставНаборовПродуктов_Билет10.НаборПродуктов,
                    СоставНаборовПродуктов_Билет10.Продукт,
                    СоставНаборовПродуктов_Билет10.Количество
                ИЗ
                    РегистрСведений.СоставНаборовПродуктов_Билет10 КАК СоставНаборовПродуктов_Билет10
                    ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ1 КАК ВТ1
                    ПО СоставНаборовПродуктов_Билет10.Период = ВТ1.Период
                        И СоставНаборовПродуктов_Билет10.НаборПродуктов = ВТ1.НаборПРодуктов
                        И СоставНаборовПродуктов_Билет10.Продукт = ВТ1.Продукт
            </pre>
        </div>
        <p>Тут для примера взят какой-то регистр сведений, в котором задан состав наборов продуктов. У этого регистра 4 поля: Период, НаборПродуктов, Продукт и Количество. Количество это ресурс. Сначала система берёт основную таблицу этого регистра и выбирает записи по 3м измерениям кроме ресурса Количество. В секции ГДЕ у нас будут данные, которые мы задаём параметрами внутри метода СрезПоследних(). Конечно эта секция будет выглядеть так, как мы назадаём условия в этом методе. Записи далее нужно сгруппировать по измерениям, а период найти максимальный для каждого состава измерений. Количество мы сюда не выбираем, потому что все агрегатные функции не подходят, чтобы выбрать количество для продуктов соответсвующее выбранной максисальной дате, нет такой функции, поэтому мы пока опустили количество.</p>
        <p>Далее помещаем во временную таблицу полученную табицу. Затем внутренним соединением опять содеиняем её с основной таблицей регистра сведений. Соединение происходит по всем измерениям. И выбираем поля из основной таблицы сведений, теперь уже и количество выбираем. В итоге получим то, что и сделает метод СрезПоследних() при его вызове.</p>
        <p>У метода СрезПервых() скорее всего выполняется агрегатная функция МИНИМУМ() для указанной даты.</p>
    
    
    
    
        <p class="title-size16"><b id="reg-info-13">Выводим текущие цены из регистра сведений на начальную страницу</b></p>
        <p>У нас есть регистр сведений "ЦеныПоставщиков" и мы хотим видеть в пользовательской части на начальной странице форму списка из текущих(последних) цен на товары. Вывести на начальную страницу можно только форму, поэтому создаём форму списка у этого регистра. У нас в форме есть оснойвной реквизит Список, который нам доставляет данные из БД. Если посмотреть его свойства в палитре во вкладке "Объект", то увидим такое свойство как <b>"ОсновнаяТаблица"</b>, там стоит значение РегистрСведений.ЦеныПоставщиков, это таблица, записи которой выводит этот список. Можем поменять таблицу вывода на РегистраСведений.ЦеныПоставщиков.СрезПоследних.</p>
        <p>Ну и дальше меню на главном объекте конфигурации и выбираем пункт "Открыть рабочую область начальной страницы" и в открывшемся окне указываем форму списка реигстра сведений "ЦеныПоставщиков".</p>
        <p class="vue-r">Важно! При создании формы списка в регистре нужно убрать галочку, что это основная форма списка, а то при открытии регистра "ЦеныПоставщиков" в другом месте кроме начальной страницы, тоже будет выводить срез последних, а не все записи из этого регистра.</p>
        <p>Там же рядом есть свойство "Произвольный запрос", который позволяет описать запрос по нашему смотрению.</p>
    
    
    
    
        <p class="title-size16"><b id="reg-info-14">Разница между методами Получить(), ПолучитьПервое() и ПолучитьПоследнее(). Также разница между ПолучитьПоследнее() и виртуальной таблицей СрезПоследних</b>.</p>
        <p>Разница в том, что метод Получить() требует параметр Период обязательно и ищет ресурс именно на эту дату и если на эту дату ничего нет, то вернёт структуру с пустыми значениями. А вот метод ПолучитьПоследнее() не требует обязатально параметра Период, но даже если мы передали период и на него ничего нет, то метод всё равно вернёт ресурс на последнюю ближайшую дату, которая была записана до переданной даты. ПолучитьПервое() получает ресурс либо на переданную дату, либо на первую после этой даты.</p>
        <img src="img/1С-1/2023-05-29_22-17-33.png" alt="">
        <img src="img/1С-1/2023-05-29_22-18-09.png" alt="">
        <img src="img/1С-1/2023-05-29_22-18-45.png" alt="">
        <p>По методу ПолучитьПоследнее() можно получить только один ресурс в его разрезе, а по виртуальной таблице СрезПоследних можно получить все последние ресурсы в своих разрезах.</p>
    
    
    
    
        <p class="title-size16"><b id="reg-info-14a">Разница между методами ПолучитьПоследнее() и СрезПоследних() у менеджера регистра сведений при попытке получить ресурс из БД.</b>.</p>
    
        <p><b>Метод ПолучитьПоследнее()</b></p>
        <p>Получает значения ресурсов наиболее поздней записи регистра, соответствующей указанным периоду и значениям измерений регистра. Этот метод возвращает тип данных Структура с элементом "ИмяРесурса": "ЗначениеРесурса". Если вызвать этот метод без параметров, то вернётся структура со значением ресурсов самой последней записи в регистре:</p>
        <div class="code-style">
            <pre>
                &НаСервере
                ... 
                Данные = РегистрыСведений.ЦеныПоставщиков.ПолучитьПосленее();
                ...
            </pre>
        </div>
        <img src="img/1С-1/2023-11-15_17-11-22.png" class="screen" alt="">
        <p>Т.е. запись всегда будет возвращена одна, последняя на указанный период и измерения, а вот в структуре могут быть несколько элементов в зависимости от количества ресурсов в регистре. В примере выше элемент в структуре один, потому что ресурс один - "Цена".</p>
    
        <p><b>Метод СрезПоследних()</b></p>
        <p>Получает наиболее поздние записи регистра, соответствующие установленным в параметрах метода значениям ключевых полей. Метод возвращает уже не структуру с ресурсами одной записи, а таблицу значений со всеми записями, имеющими уникальные наборы измерений. Конечно, если задать в параметре отбор по конкретным измерениям, то вернётся одна запись в таблице значений:</p>
        <div class="code-style">
            <pre>
                &НаСервере
                ... 
                ДанныеТЗ = РегистрыСведений.ЦеныПоставщиков.СрезПоследних();
                ...
            </pre>
        </div>
        <img src="img/1С-1/2023-11-15_17-01-42.png" class="screen" alt="">
        <p>В таблице значений выбраны записи на последнюю дату для каждого уникального сочетания измерений. Например, если в регистре есть 2 записи "01.01.2023 - Апельсины - Поставщик2 - 130" и "02.01.2023 - Апельсины - Поставщик2 - 150", то метод вернёт вторую запись, потому что по времени она последняя и так по всем записям.</p>
        <p>Как подставлять параметры что для первого, что для второго метода, вопросов не должно возникнуть, смотрим в помошнике.</p>
        <p><span class="ск">ЗАМЕТКА!!! Если я захочу получить последнюю цену мандарин и задам в этот метод структуру с отбором по мандарину, то вернутся 2 записи мандарин по 50 рублей, потому что у них разные поставщики. Казалось бы что должна вернутся одна запись товара на самую последнюю дату, но чисто по товару не смотрит система, она смотрит на уникальность по всем измерениям видимо. Поэтому и возвращаются мандарины на самую последнюю дату от разных поставщиков.</span></p>
    
    
    
    
    
        <p class="title-size16"><b id="reg-info-15">Миг связанный с получением цены из регистра сведений при добавлении товара в табличной части документа.</b></p>
        <p>Есть документ "Поступление товара", в документе есть табличная часть, в ней мы при выборе Товара в поле Товар срабатывает наш обработчик, который раньше делал запрос к справочнику Номенклатура и получал цену из поля ЦенаТовара из этого справочника, но теперь есть периодический регистр сведений с ценами и нам надо получать из него цену. Для получения цены нам нужно передать дату документа, но есть одно замечание, когда мы создаём новый документ, то у него в поле Дата установленна текущая дата, а время стоит по нулям, потому что время подставляется в миг записи или проведения документа. Из-за этого когда мы начинаем заполнять товары, а ведь в миг выбора товара(выполняется обработчик) мы же делаем запрос в БД к таблице регистра сведений и нам нужна там дата с временем то мы там передаём дату документа с нулевым временем, что не очень хорошо. Мы можем сделать проверку в обработчике новый мы создали документ или нет. Если документ новый, то мы берём поле Ссылка(она нам на клиенте в обработчике доступна) и вызываем у неё метод Пустая(), если вернул Истина, то документ новый. Если документ новый, то можно передать дату с помощью метода ТекущаяДата() или просто передать вместо даты значение Неопределено. Система если увидить что переиод Неопределено, то она сама вернёт последнюю актуальную цену для товара, т.е. это то же самое, что мы ничего не передаём и система отрабатывает по умолчанию, возвращая последнее значение. Ну а если документ не новый, то передаём дату документа без проблем.</p>
    
    
    
    
    
        <p class="title-size16"><b id="reg-info-16">Изменяем данные в независимом переиодическом регистре сведений по отбору по поставщикам(по измерению)</b>.</p>
        <p>Ссылка на статью <a href="https://www.1s-up.ru/primenenie-otbora-v-nabore-zapisej-registra-svedenij/">вот</a>.</p>
        <p>Ссылка на статью <a href="https://www.koderline.ru/expert/programming/article-otbor-zapisey-registra-svedeniy-v-1s/">вот</a>.</p>
    
    
    
    
    
        <p class="title-size16"><b id="reg-info-17">Записываем и изменяем данные в периодическом зависимом регистре сведений в обработчике "ПриЗаписи". Что такое Отбор. Отбор по регистратору</b>.</p>
        <p>Тут я опишу, как мы читаем и записываем данные в регистр сведений без помощи платформы 1С. О какой помощи платформы я говорю? Когда мы пишем в регистр сведений в обработчике "ОбработкаПроведения", то там система берёт на себя часть функций. Она например сама определяет кто регистратор и сама записывает его в соответсвующее поле регистра. Мы же будем писать в регистр в другом обработчике события. Сначала немного теории. В конце статьи есть подраздел, в котором описано чем ещё отличаются эти 2 подхода записи в регистр.</p>
        <p>Есть <i>объектные данные</i>(справочники, документы) и <i>необъектные данные</i>(регистры).</p> 
        <p>Объектные данные можно сравнить с гостями, которых мы пригласили на свой день рождения. В этом случае для нас важно, чтобы к нам в гости пришёл именно Серёжа Соколов, который учится и работает вместе с нами. А не какой-то его тёзка и однофамилец. Который, может быть, и одет так же, и внешне на него похож. Каждый из таких гостей уникален и важен сам по себе. Даже если он оделся в другую одежду и сильно вырос за то время, что вы его не видели. Всё равно он остался Серёжей Соколовым, а не стал кем-то другим.</p>
        <p>Необъектные данные мы сравним с людьми в автобусе. Нам совершенно не важно, какие именно люди находятся в автобусе, как их зовут. Не важно, кто именно стоит в проходе с большими сумками, Сергей Николаевич или Марья Ивановна. Важно только то, что проход занят и дальше пройти нельзя.</p>
        <p>Как мы работаем с объектными данными? У каждого из них есть ссылка. По этой ссылке мы получаем объект. Изменяем его реквизиты. Записываем его в базу данных. То есть с каждым объектом мы "возимся" индивидуально. Каждому гостю, который пришёл к нам, мы уделяем внимание, называем его по имени, говорим: "Здравствуй, Серёжа Соколов, дорогой! Проходи, садись!".</p>
        <p>А в автобусе мы никого не называем по имени. Если проход занят и нам не хватает места, то мы обращаемся сразу ко всем, кто стоит в проходе: "Граждане, стоящие в проходе, пройдите дальше в салон". То же самое с необъектными данными. Когда нам нужно с ними что-то сделать, мы не работаем с каждой записью отдельно, а берём сразу несколько записей и изменяем их. Вот эти несколько записей называются <i>набор записей</i>. А чтобы платформа знала, какие именно записи нужно взять, у каждого набора записей есть <i>отбор</i>.</p>
        <p>Отбор - это условие, по которому нужно отобрать записи. Например, "граждане, стоящие в проходе" - это отбор. С таким отбором получится один набор записей. Он будет состоять из всех людей, которые стоят в проходе. А "женщины, сидящие на первом сиденье" - это тоже отбор. С таким отбором получится уже другой набор записей. Он будет состоять из двух женщин.</p>
        <p>Во встроенном языке, когда мы хотим ПРОЧИТАТЬ необъектные данные, нужно создать набор записей, установить ему какой-то отбор и прочитать этот набор записей. Платформа заполнит набор записей данными из базы данных.</p>
        <p>Когда мы хотим ЗАПИСАТЬ необъектные данные, тоже нужно создать набор записей и установить ему отбор. После этого заполнить набор теми записями, которые вам нужны,и записать этот набор записей. Платформа поместит ваши данные в базу данных.</p>
        <p>Я это писал из книги Радченко "1С программмирование для начинающих" и поэтому пример тоже будет из этой книги. Пример там дневник школьника. В конфигураторе есть документ "УчебныеДни", этот документ уже пишет в другие регистры инфу через событие "ОбработкаПроведения". Т.е. когда прошёл учебный день, оценки выставлены, мы проводим документ для изменения состояния учёта. Но нам нужно создать регистр сведений "ДомашнееЗадание" и писать в него задания на разные дни. Создаём этот регистр, у него будет одно измерение - "Предмет"(тип СправочникСсылка.Предметы) и 2 ресурса: "ДомашнееЗадание"(тип Строка) и "Выполнено"(тип Булево). Мы хотим знать домашнее задание и выполнено ли оно у такого то предмета. Вспоминаем вот это правило на картинке:</p>
        <img src="img/1С-1/2023-05-02_20-49-39.png" alt="">
        <p>Ресурс "Выполнено" нам нужно для того, чтобы в будущем состовлять список домашних заданий, которые ещё нужно сделать.</p>
        <p>Отмечаем на закладке Регистраторы документ "УчебныеДни".</p>
        <p><i>Запись в регистр "ДомашниеЗадания"</i></p>
        <p>Теперь интересный вопрос. В какой миг информация должна записываться в этот регистр? До сих пор мы записывали данные в регистр в момент проведения документа. То есть тогда, когда учебный день фактически завершён. Все занятия прошли, все полученные оценки мы занесли в документ. Но домашние задания нужно записывать гораздо раньше, ещё до того, как начался соответствующий им учебный день. Единственный подходящий миг, который есть для этого, это запись документа. То есть мы узнали, что нам задали, занесли эту информацию в нужный учебный день и нажали кнопку "Записать". Вот в этот момент и нужно записать домашние задания в регистр.</p>
        <p>У объекта документа есть два подходящих события: <i>"ПередЗаписью"</i> и <i>"ПриЗаписи"</i>.</p>
        <img src="img/1С-1/2023-05-04_16-48-20.png" alt="">
        <p>Событие "ПередЗаписью" возникает до того, как данные записываются в базу данных.А событие "ПриЗаписи" возникает уже после того, как данные записаны.</p>
        <p>Записывать домашние задания в регистр нужно уже после того, как записан сам документ. Потому что это дополнительная информация, связанная с этим документом. И она не имеет смысла без самого документа. Это значит, что если вдруг по каким-то причинам не удалось записать документ в базу данных, то и движения в регистрах, связанные с этим документом, тоже не должны быть записаны. Одно без другого не имеет смысла. Поэтому в событиях, которые выполняются до записи документа в базу, нужно подготовить все данные самого документа. А в событиях, которые выполняются после записи документа, нужно подготовить те данные, которые связаны с этим документом и зависят от него, например движения в регистрах.</p>
        <img src="img/1С-1/2023-05-04_19-28-12.png" class="screen" alt="">
        <p>Если мы откроем описание любого из этих событий в синтакс-помощнике, то увидим, что везде говорится о том, что эти события выполняются в <i>транзакции</i> записи.Транзакция - это способ, которым изменяются данные в базе данных. Этот способ прекрасно известен нам из обычной жизни. Просто мы не знаем, что называется он именно так. Представьте, что база данных это автобус. А семья это данные. Как поступает семья, если ей нужно куда-то доехать на автобусе? Родители обязательно проконтролируют, чтобы дети сели в автобус вместе с ними. Не может такого быть, что родители зашли, а дети замешкались и остались на остановке. Наоборот, также не может быть, что дети сели в автобус, а родителям места не хватило и они остались. Если едут, то все вместе. Если у кого-то не получается, то все не едут и ждут следующего автобуса. Транзакция работает точно так же.</p>
        <p>Во-первых, не может случиться так, что документ не записался в базу данных, а движения записались. Если в процессе записи документа возникла какая-то проблема, то и все последующие события выполнены не будут, а именно события "ПриЗаписи" и "ОбработкаПроведения".</p>
        <p>Во-вторых, не может быть так, что документ записался в базу данных, а движения нет. Если проблема возникла в процессе записи движений (уже после того, как документ записан в БД), то все изменения, которые были сделаны в БД до этого в этой же транзакции (запись документа), будут отменены.</p>
        <p>Другими словами, будет записано либо всё, либо ничего. Выполнение транзакций обеспечивает база данных. Вам как разработчикам не нужно предпринимать никаких специальных действий для того, чтобы при записи данных началась транзакция. Платформа делает это автоматически. Единственное, что вам нужно,это правильно выбрать событие, в котором записывать данные в регистр.</p>
        <p>Поскольку при проведении документа уже поздно записывать домашние задания, мы будем записывать их при записи документа. Откроем модуль документа УчебныйДень и добавим в него обработчик события "ПриЗаписи". В этом обработчике нам нужно будет сначала создать набор записей, потом установить ему отбор, затем заполнить его нужными записями и в конце записать в базу данных. Создать набор записей можно с помощью менеджера регистра сведений. А добраться до менеджера регистра сведений можно так же, как и до менеджера документа. Через свойство глобального контекста и указание нужного регистра. Метод менеджера <i>СоздатьНаборЗаписей()</i> создаст нам пустой набор записей. Об этом мы можем прочитать в синтакс-помощнике.</p>
        <p>Если поставить точку останова на наборе записей и в отладчике посмотреть на этот объект, то увидим там свойство Отбор, которое является коллекцией значений. И в этой коллекции уже есть один элемент с именем Регистратор. Этот элемент платформа добавила самостоятельно, потому что знает, что регистр подчиняется регистратору. А раз так, то отбор должен быть установлен по регистратору и никак иначе.</p>
        <p>Заметка! Если бы регистр был независимым, то нам нужно было бы самостоятельно выбрать поля, по которым осуществляется отбор. Например, по каким-нибудь его измерениям. Такой пример находится в статье выше, там ссылка на статью в интернете про то как делать отбор по измерениям.</p>
        <p>Раз элемент отбора уже есть, нам осталось только установить правильное его значение. Как это сделать, мы можем посмотреть в синтакс-помощнике. Нажав на возвращаемое значение РегистрСведенийНаборЗаписей, мы перейдём к набору записей. Через его свойство Отбор к объекту Отбор. Этот объект является коллекцией, состоящей из объектов ЭлементОтбора. А у элемента отбора есть метод Установить().</p>
        <div class="code-style">
            <pre>
                <span class="сс"><span class="ск">Процедура</span> ПриЗаписи<span class="ск">(</span>Отказ<span class="ск">)</span>
                    <span class="з">// Регистр ДомашниеЗадания.</span>
                    НаборЗаписей <span class="ск">=</span> РегистрыСведений<span class="ск">.</span>ДомашниеЗадания<span class="ск">.</span>СоздатьНаборЗаписей<span class="ск">();</span>
                    НаборЗаписей<span class="ск">.</span>Отбор<span class="ск">.</span>Регистратор<span class="ск">.</span>Установить<span class="ск">(</span>Ссылка<span class="ск">);
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <p>Здесь Ссылка это свойство документа. Того документа, в котором мы сейчас находимся. Теперь нужно обойти табличную часть документа и заполнить набор записями. Как добавить запись в набор? Набор записей это тоже коллекция значений, которая состоит из отдельных записей. Если мы посмотрим его описание в синтакс-помощнике то увидим, что у набора записей есть метод Добавить(). Он добавит пустую запись.</p>
        <div class="code-style">
            <pre>
                <span class="сс"><span class="ск">Процедура</span> ПриЗаписи<span class="ск">(</span>Отказ<span class="ск">)</span>
                    <span class="з">// Регистр ДомашниеЗадания.</span>
                    НаборЗаписей <span class="ск">=</span> РегистрыСведений<span class="ск">.</span>ДомашниеЗадания<span class="ск">.</span>СоздатьНаборЗаписей<span class="ск">();</span>
                    НаборЗаписей<span class="ск">.</span>Отбор<span class="ск">.</span>Регистратор<span class="ск">.</span>Установить<span class="ск">(</span>Ссылка<span class="ск">);</span>
    
                    <span class="ск">Для Каждого</span> СтрокаТабличнойЧасти <span class="ск">Из</span> Уроки <span class="ск">Цикл</span>
                        <span class="ск">Если</span> ЗначениеЗаполнено<span class="ск">(</span>СтрокаТабличнойЧасти<span class="ск">.</span>ДомашнееЗадание<span class="ск">) Тогда</span>
                            НоваяЗапись <span class="ск">=</span> НаборЗаписей<span class="ск">.</span>Добавить<span class="ск">();
                        КонецЕсли;
                    КонецЦикла;
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <p>Теперь вам нужно заполнить поля этой записи. Какие у неё есть поля, можем посмотреть в синтакс-помощнике или, для разнообразия, прямо в модуле в режиме отладки. Для этого не забудем поставить точку останова на конец инструкции Если. И в том документе, который вы будете записывать в режиме 1С:Предприятие, ввести какое-нибудь домашнее задание по одному из предметов.</p>
        <img src="img/1С-1/2023-05-04_23-19-48.png" class="screen" alt="">
        <p>Поля Активность и НомерСтроки "служебные", их платформа заполнит сама. Поле Регистратор платформа тоже заполнит сама  она возьмёт то значение, которое мы установили в отборе. Предмет, ДомашнееЗадание и Выполнено это те данные, которые мы хотели записать в регистр. Остаётся поле Период. В это поле нам нужно будет записать дату документа. Причём, поскольку у нас не может быть нескольких документов в один день, удобнее будет записать дату начала дня, то есть с нулевым временем.</p>
        <p>И последнее действие, которое нужно выполнить, это запись набора данных в БД.</p>
        <div class="code-style">
            <pre>
                <span class="сс"><span class="ск">Процедура</span> ПриЗаписи<span class="ск">(</span>Отказ<span class="ск">)</span>
                    <span class="з">// Регистр ДомашниеЗадания.</span>
                    НаборЗаписей <span class="ск">=</span> РегистрыСведений<span class="ск">.</span>ДомашниеЗадания<span class="ск">.</span>СоздатьНаборЗаписей<span class="ск">();</span>
                    НаборЗаписей<span class="ск">.</span>Отбор<span class="ск">.</span>Регистратор<span class="ск">.</span>Установить<span class="ск">(</span>Ссылка<span class="ск">);</span>
                    
                    <span class="з">//если мы данные из регистра хотим прочитать, то используем метод Прочитать()
                    //НаборЗаписей.Прочитать();</span>
    
                    <span class="ск">Для Каждого</span> СтрокаТабличнойЧасти <span class="ск">Из</span> Уроки <span class="ск">Цикл</span>
                        <span class="ск">Если</span> ЗначениеЗаполнено<span class="ск">(</span>СтрокаТабличнойЧасти<span class="ск">.</span>ДомашнееЗадание<span class="ск">) Тогда</span>
                            НоваяЗапись <span class="ск">=</span> НаборЗаписей<span class="ск">.</span>Добавить<span class="ск">();</span>
                            НоваяЗапись<span class="ск">.</span>Период          <span class="ск">=</span> НачалоДня<span class="ск">(</span>Дата<span class="ск">);</span>
                            НоваяЗапись<span class="ск">.</span>Предмет         <span class="ск">=</span> СтрокаТабличнойЧасти<span class="ск">.</span>Предмет<span class="ск">;</span>
                            НоваяЗапись<span class="ск">.</span>ДомашнееЗадание <span class="ск">=</span> СтрокаТабличнойЧасти<span class="ск">.</span>ДомашнееЗадание<span class="ск">;</span>
                            НоваяЗапись<span class="ск">.</span>Выполнено       <span class="ск">=</span> СтрокаТабличнойЧасти<span class="ск">.</span>Выполнено<span class="ск">;
                        КонецЕсли;
                    КонецЦикла;</span>
    
                    НаборЗаписей<span class="ск">.</span>Записать<span class="ск">();
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <p><i>Отличия этого способа записи в регистр от того, как происходит запись при событии "ОбработкаПроведения"</i></p>
        <p>В обработке проведения почему-то не создаются и не записываются никакие наборы данных. Хотя средняя часть алгоритма очень похожа. В обработке проведения добавляется какое-то движение и присваиваются значения его полям. Здесь всё очень просто. Когда мы находимся в модуле документа, платформа знает, по каким регистрам документ может делать движения. Вы указывали это в дереве конфигурации. Поэтому платформа предоставляет нам услугу, облегчающую нашу работу. В свойстве документа Движения она уже хранит для нас пустые наборы данных для каждого из регистров, по которым мы можем захотеть записывать движения. И в этих наборах данных уже установлен нужный отбор. Таким образом, если мы используем эти наборы данных, то всё, что нам нужно сделать, это просто добавить в них те записи, которые нам нужны.</p>
        <p><span class="ск">ВАЖНО!!! К чему я рассказываю всё это? А к тому, что тот алгоритм, который мы написали в процедуре "ПриЗаписи", мы можем использовать в любом модуле конфигурации. Именно так и записываются данные в регистр. Но если мы находимся в модуле документа, мы можем поступить проще и использовать готовые наборы данных, которые есть в свойстве Движения. Т.е. даже а этом обработчике "ПриЗаписи", который находится в контексте текущего документа, мы можем спокойно воспользоваться свойством Движения и также как и в "ОбработкеПроведения" записать данные в регистр. Алгоритм, который мы написали в обработчике "ПриЗаписи" это лишь пример как можно в других модулях записывать в регистр, не имея под рукой свойство Движения. Ведь в других модулях не будет этого свойства и платформа уже не облегчит нам запись данных.</span></p>
    
    
    
    
    
        <p class="title-size16"><b id="reg-info-18">Отличие метода РегистрСведенийМенеджер.&lt;Имя регистра сведений>.СоздатьНаборЗаписей() от РегистрСведенийМенеджер.&lt;Имя регистра сведений>.СоздатьМенеджерЗаписи()</b>.</p>
        <p>Метод СоздатьМенеджерЗаписи() создает объект для управления записью регистра сведений. Этот объект будет создавать <i>уникальные</i> записи в регистре.</p>
        <p>Метод СоздатьНаборЗаписей() создает набор записей регистра сведений. У конкретного набора записей будет общий ключ, например, Регистратор, чтобы потом была возможность по этому ключу отобрать именно этот набор записей для редактирования.</p>
    
    
    
    
    
        <p class="title-size16"><b id="reg-info-19">Строим из данных регистра сведений "Дежурства" пересечённую таблицу и выводим её в табличный документ.</b></p>
        <p>Эта обработка находится в инфобазе "ОбщаяУчебная".</p>
        <p>Заполняем регистр сведений данными:</p>
        <img src="img/1С-1/2023-12-18_10-03-09.png" class="screen" alt="">
        <p>Нужно теперь пользователю показать данные в виде пересечённой таблицы:</p>
        <img src="img/1С-1/2023-12-18_10-05-17.png" class="screen" alt="">
        <p>Сделаем внуттреннюю обработку с кнопкой "Вывести" и реквизитом формы "ТабДок с типом "Табличный документ", в который и будем выводить данные. Запросом получим данные из регистра и выберем их в таблицу значений. В таком виде данные в таблице значений нас не устраивают, создадим ещё одну таблицу значений и заполним его по другому, а затем новую ТЗ будем использовать для заполнения параметром в областях макета:</p>
        <div class="code-style">
            <pre>
                --модуль формы обработки
    
                <span class="сс"><span class="ск">&НаСервере
                Процедура</span> ВывестиНаСервере<span class="ск">()</span>
                    Запрос <span class="ск">= Новый</span> Запрос<span class="ск">;</span>
                    Запрос<span class="ск">.</span>Текст <span class="ск">=</span> 
                        <span class="серый">"ВЫБРАТЬ
                        |	ПРЕДСТАВЛЕНИЕ(Дежурства.Сотрудник) КАК Сотрудник,
                        |	Дежурства.ДниНедели КАК ДниНедели,
                        |	Дежурства.ВремяДежурства КАК ВремяДежурства
                        |ИЗ
                        |	РегистрСведений.Дежурства КАК Дежурства"</span><span class="ск">;</span>
                    
                    РезультатЗапроса <span class="ск">=</span> Запрос<span class="ск">.</span>Выполнить<span class="ск">();</span>
                    ТЗ <span class="ск">=</span> РезультатЗапроса<span class="ск">.</span>Выгрузить<span class="ск">();</span>
                    
                    <span class="з">//Создаём новую таблицу значений, чтобы перезаполнить данные так как нам нужно</span>
                    ТаблицаДежурств <span class="ск">= Новый</span> ТаблицаЗначений<span class="ск">;</span> 
    
                    ТаблицаДежурств<span class="ск">.</span>Колонки<span class="ск">.</span>Добавить<span class="ск">(</span><span class="серый">"Сотрудник"</span><span class="ск">);</span>
                    ТаблицаДежурств<span class="ск">.</span>Колонки<span class="ск">.</span>Добавить<span class="ск">(</span><span class="серый">"Пн"</span><span class="ск">);</span>
                    ТаблицаДежурств<span class="ск">.</span>Колонки<span class="ск">.</span>Добавить<span class="ск">(</span><span class="серый">"Вт"</span><span class="ск">);</span>
                    ТаблицаДежурств<span class="ск">.</span>Колонки<span class="ск">.</span>Добавить<span class="ск">(</span><span class="серый">"Ср"</span><span class="ск">);</span>
                    ТаблицаДежурств<span class="ск">.</span>Колонки<span class="ск">.</span>Добавить<span class="ск">(</span><span class="серый">"Чт"</span><span class="ск">);</span>
                    ТаблицаДежурств<span class="ск">.</span>Колонки<span class="ск">.</span>Добавить<span class="ск">(</span><span class="серый">"Пт"</span><span class="ск">);</span>
                    ТаблицаДежурств<span class="ск">.</span>Колонки<span class="ск">.</span>Добавить<span class="ск">(</span><span class="серый">"Сб"</span><span class="ск">);</span>
                    ТаблицаДежурств<span class="ск">.</span>Колонки<span class="ск">.</span>Добавить<span class="ск">(</span><span class="серый">"Вс"</span><span class="ск">);</span> 
                    
                    КолонкиТД <span class="ск">=</span> ТаблицаДежурств<span class="ск">.</span>Колонки<span class="ск">;</span>
    
                    <span class="ск">Для каждого</span> СтрокаТЗ <span class="ск">Из</span> ТЗ <span class="ск">Цикл</span> 
                        <span class="з">//Чтобы не плодить одинаковых сотрудников в колонке, проверяем записывали ли уже такого сотрудника.
                        //Если да, то ищмем строку с таким сотрудником и заполняем дни недели
                        //Если нет, то добавляем новус троку с таким сотрудником и заполняем</span>
                        <span class="ск">Если</span> ТаблицаДежурств<span class="ск">.</span>Найти<span class="ск">(</span>СтрокаТЗ<span class="ск">.</span>Сотрудник<span class="ск">,</span> <span class="серый">"Сотрудник"</span><span class="ск">) = Неопределено Тогда</span>
                            НоваяСтрока <span class="ск">=</span> ТаблицаДежурств<span class="ск">.</span>Добавить<span class="ск">();</span>
                            НоваяСтрока<span class="ск">.</span>Сотрудник <span class="ск">=</span> СтрокаТЗ<span class="ск">.</span>Сотрудник<span class="ск">;</span>
                            <span class="ск">Для каждого</span> КолонкаТД <span class="ск">Из</span> КолонкиТД <span class="ск">Цикл</span>  
                                <span class="ск">Если</span> КолонкаТД<span class="ск">.</span>Имя <span class="ск">=</span> <span class="серый">"Сотрудник"</span> <span class="ск">Тогда
                                    Продолжить;
                                КонецЕсли;   
                                Если</span> Строка<span class="ск">(</span>СтрокаТЗ<span class="ск">.</span>ДниНедели<span class="ск">)</span> = КолонкаТД<span class="ск">.</span>Имя <span class="ск">Тогда</span>
                                    НоваяСтрока<span class="ск">[</span>КолонкаТД<span class="ск">.</span>Имя<span class="ск">] =</span> СтрокаТЗ<span class="ск">.</span>ВремяДежурства<span class="ск">;
                                Иначе  
                                    Если</span> НоваяСтрока<span class="ск">[</span>КолонкаТД<span class="ск">.</span>Имя<span class="ск">] &lt;></span> <span class="серый">""</span> <span class="ск">Тогда
                                        Продолжить;
                                    КонецЕсли;</span>
                                    НоваяСтрока<span class="ск">[</span>КолонкаТД<span class="ск">.</span>Имя<span class="ск">] =</span> <span class="серый">""</span><span class="ск">;
                                КонецЕсли;
                            КонецЦикла;
                        Иначе</span> 
                            СтрокаТД <span class="ск">=</span> ТаблицаДежурств<span class="ск">.</span>Найти<span class="ск">(</span>СтрокаТЗ<span class="ск">.</span>Сотрудник<span class="ск">,</span> <span class="серый">"Сотрудник"</span><span class="ск">);</span>
                            <span class="ск">Для каждого</span> КолонкаТД <span class="ск">Из</span> КолонкиТД <span class="ск">Цикл</span>  
                                <span class="ск">Если</span> КолонкаТД<span class="ск">.</span>Имя <span class="ск">=</span> <span class="серый">"Сотрудник"</span> <span class="ск">Тогда
                                    Продолжить;
                                КонецЕсли;   
                                Если</span> Строка<span class="ск">(</span>СтрокаТЗ<span class="ск">.</span>ДниНедели<span class="ск">) =</span> КолонкаТД<span class="ск">.</span>Имя <span class="ск">Тогда</span>
                                    СтрокаТД<span class="ск">[</span>КолонкаТД<span class="ск">.</span>Имя<span class="ск">] =</span> СтрокаТЗ<span class="ск">.</span>ВремяДежурства<span class="ск">;
                                Иначе
                                    Если</span> СтрокаТД<span class="ск">[</span>КолонкаТД<span class="ск">.</span>Имя<span class="ск">] &lt;></span> <span class="серый">""</span> <span class="ск">Тогда
                                        Продолжить;
                                    КонецЕсли;</span>
                                    СтрокаТД<span class="ск">[</span>КолонкаТД<span class="ск">.</span>Имя<span class="ск">] =</span> <span class="серый">""</span><span class="ск">;
                                КонецЕсли;
                            КонецЦикла;	
                        КонецЕсли;	
                    КонецЦикла;</span>
    
                    <span class="з">//Таблица значений заполнена так как нужно, теперь получаем области
                    //и заполняем в ней параметры из строк этой таблицы значений</span>
                    Макет <span class="ск">=</span> Обработки<span class="ск">.</span>ГраффикРабот<span class="ск">.</span>ПолучитьМакет<span class="ск">(</span><span class="серый">"Макет"</span><span class="ск">);</span>
                    ОбластьШапкаТаблицы <span class="ск">=</span> Макет<span class="ск">.</span>ПолучитьОбласть<span class="ск">(</span><span class="серый">"ШапкаТаблицы"</span><span class="ск">);</span>
                    ОбластьДетали <span class="ск">=</span> Макет<span class="ск">.</span>ПолучитьОбласть<span class="ск">(</span><span class="серый">"Детали"</span><span class="ск">);</span>
    
                    ТабДок<span class="ск">.</span>Вывести<span class="ск">(</span>ОбластьШапкаТаблицы<span class="ск">);</span>
    
                    <span class="ск">Для каждого</span> СтрокаТД <span class="ск">Из</span> ТаблицаДежурств <span class="ск">Цикл</span>
                        ОбластьДетали<span class="ск">.</span>Параметры<span class="ск">.</span>Заполнить<span class="ск">(</span>СтрокаТД<span class="ск">);</span>
                        ТабДок<span class="ск">.</span>Вывести<span class="ск">(</span>ОбластьДетали<span class="ск">);		
                    КонецЦикла;
    
                КонецПроцедуры
    
                &НаКлиенте
                Процедура</span> Вывести<span class="ск">(</span>Команда<span class="ск">)</span>
                    ВывестиНаСервере<span class="ск">();
                КонецПроцедуры</span></span>
            </pre>
        </div>



        <p class="title-size16"><b id="reg-info-20">Архитектура регистра на уровне СУБД.</b></p>
        <p>Спустимся с уровня абстракции "конфигуратор" на уровень "СУБД" и вспомним, в очередной раз, что все данные базы хранятся именно в СУБД. Это может быть файловая база (тут в роли СУБД платформа 1С), PosgreSQL, IBM DB2, Oracle и MS SQL Server.</p>
        <p>Регистр сведений на уровне СУБД представляет собой обычную плоскую таблицу, в которой колонки это наши измерения, ресурсы и реквизиты, а строки - записи регистра. Узнать какая таблица СУБД соответствует конкретному регистру, можно используя метод платформы <b>ПолучитьСтруктуруХраненияБазыДанных()</b>, либо воспользоваться одной из множества обработок, уже опубликованных на <a href="https://infostart.ru/public/all/?public-filter%5Bsearch%5D=%F1%F2%F0%F3%EA%F2%F3%F0%E0+%F5%F0%E0%ED%E5%ED%E8%FF">INFOSTART</a>.</p>
        <p>Отличия ресурсов от реквизитов на уровне хранения данных отсутствуют, это сугубо логическое разделение. Предполагается, что реквизит это некая дополнительная информация, а ресурс - основное значение, которое нам и требуется хранить в разрезе комбинаций измерений.</p>
        <p>Отличие измерений от ресурсов и реквизитов в том, что измерения в полном составе присутствуют во всех индексах таблицы. Порядок следования измерений в индексе такой же, как в конфигураторе. Если у ресурса (реквизита) установлено свойство "Индексировать", то будет создан индекс, в котором на первом месте этот ресурс (реквизит), а далее все наши измерения. Установить свойство "Индексировать" можно и у измерения, в этом случае будет создан дополнительный индекс, в котором на первом месте "проиндексированное" поле, а следом за ним оставшиеся измерения.</p>
        <p>Индексы с ИТС:</p>
        <img src="img/1С-1/2025-07-08_08-26-42.png" class="screen" alt="">
        <img src="img/1С-1/2025-07-08_08-27-05.png" class="screen" alt="">
        <img src="img/1С-1/2025-07-08_08-27-18.png" class="screen" alt="">
        <p>До версии 8.2.15 непериодический регистр сведений не имел кластерного индекса, начиная с этой версии, платформа создает кластерный индекс, состоящий из измерений (в том порядке, как они заданы в конфигураторе).</p>
        <p>Версия 8.3 принесла еще несколько важных изменений:</p>
        <ul class="list">
            <li>для периодических регистров кластерным стал индекс, в котором сначала следуют все измерения, а на последнем месте колонка Период (в 8.2 кластерным будет являться индекс, в котором на первом месте стоит Период, а затем перечислены все измерения);</li>
            <li>появились физические таблицы итогов для хранения среза первых и среза последних. Создавать или нет эти таблицы - решает разработчик, установив соответствующее свойство в конфигураторе.</li>
        </ul>
        <p>Давайте посмотрим, какие индексы создаются в зависимости от версии платформы, периодичности и подчиненности регистра. Сразу оговорюсь, что информация на ИТС не точна в части кластерных индексов, верить написанному ниже:</p>
        <p><b>Непериодический, независимый регистр</b></p>
        <img src="img/1С-1/2025-07-08_08-34-42.png" class="screen" alt="">
        <p><b>Непериодический, подчиненный регистр</b></p>
        <img src="img/1С-1/2025-07-08_08-35-59.png" class="screen" alt="">
        <p><b>Периодический, независимый регистр</b></p>
        <img src="img/1С-1/2025-07-08_08-37-05.png" class="screen" alt="">
        <p><b>Периодический, подчиненный регистр</b></p>
        <img src="img/1С-1/2025-07-08_08-38-15.png" class="screen" alt="">
        <p><b>Периодический, с периодичностью "По позиции регистратора"</b></p>
        <img src="img/1С-1/2025-07-08_08-39-18.png" class="screen" alt="">
        <p><b>Индексы таблицы итогов среза первых и среза последних. Только для 8.3.</b></p>
        <img src="img/1С-1/2025-07-08_08-40-24.png" class="screen" alt="">
        <p>Можно сказать, что в 8.3 структура индексов продумана лучше - в индексы добавлена "Активность", использование в качестве кластерных индексов вида "Измерение1 + [Измерение2 +...] + Период" снижают ресурсоемкость запросов (это ни в коем разе не панацея, но ниже рассмотрим примеры запросов и еще раз затронем тему эффективности индексов). При этом к 8.3 есть и вопросы, например не понятно, почему при индексировании ресурса в периодическом регистре в индекс не добавляется "Активность" и почему нет кластерного индекса в таблицах срезов.</p>
        <p><b>Выводы:</b></p>
        <ul class="list">
            <li>Порядок измерений, заданный в конфигураторе, влияет на структуру индексов и, как следствие, может влиять на скорость выборки данных. Дело в том, что индекс "не работает" если нет фильтра по первому его полю, при этом поля, по которым накладываются фильтры, должны идти в индексе друг за другом.
                <hr>
                Например, есть непериодический, независимый регистр со следующими измерениями: <b>Организация</b>, <b>Склад</b>, <b>Номенклатура</b>. В СУБД получаем таблицу с одним индексом Организация + Склад + Номенклатура. Теперь рассмотрим различные варианты запросов к этому регистру:
                <ul class="list">
                    <li>запрос с условием отбора только по Номенклатуре ...<b>ГДЕ Номенклатура = &Номенклатура</b> - индекс "работать" не будет.</li>
                    <li>запрос с фильтром ...<b>ГДЕ Склад = &Склад И Номенклатура = &Номенклатура</b> - индекс так же не будет "работать" т.к. и в том и в другом случае нет отбора по Организации.</li>
                    <li>запрос с отбором ...<b>ГДЕ Организация = &Организация И Номенклатура = &Номенклатура</b> - индекс будет работать, но не эффективно - все данные по Организации будут получены быстро, но потом все они будут просканированы (построчно просмотрены), проверяя та ли Номенклатура в этой строке. А т.к. организаций обычно всего одна, а Номенклатур очень много, то прочитаны будут все строки регистра. </li>
                </ul>
                Для этого набора запросов самым оптимальным будет поменять местами измерения Организация и Номенклатура (получим индекс <b>Номенклатура + Склад + Организация</b>), тогда вопрос с эффективным использованием индекса будет только для запроса ...<b>ГДЕ Организация = &Организация И Номенклатура = &Номенклатура</b>. Если в базе только одна организация, то индекс можно назвать подходящим т.к. условие по номенклатуре уже вернет малое число строк, которые очень быстро проверятся на соответствие условию по организации. Если организаций много, то правильным решением будет дополнительно создать индекс Организация + Номенклатура [+ Склад].<br>
                Итоговый универсальный вариант: измерения в порядке следования <b>Номенклатура, Склад, Организация</b>, у измерения Организация ставим свойство Индексировать.
            </li>
            <li><b>Стремитесь к тому, что бы кластерный индекс регистра покрывал потребности самых частых запросов</b>. Кластерный индекс содержит в себе все данные таблицы, для простоты понимания можно сказать, что кластерный индекс это надстройка над данными. Некластерный содержит только значения тех полей, из которых он состоит. Например, есть периодический независимый регистр сведений "ЦеныТоваров" с измерениями Товар + ВидЦены и ресурсом Цена. Самая частая задача - зная товар и вид цены получить актуальную цену товара, т.е. по значениям измерений получить значение ресурса "Цена". Для этой цели идеально подходит типовой индекс "Товар + ВидЦены + Период". В 8.3 этот индекс будет кластерным и значение цены будет получено сразу. В 8.2 этот индекс некластерный, что означает необходимость дополнительно "залезть" в таблицу данных и получить нужное значение.</li>
            <li><b>Не желательно создавать регистры с большим числом измерений</b>. Обратная сторона индексов - накладные расходы на их содержание. Чем "легче" индекс, т.е. чем меньше полей в него входит и чем меньше места занимают данные в этих полях, тем быстрее происходит запись и поиск данных. Это не стоит расценивать как табу, задачи бывают разные, но если вы проектируете регистр, для которого важна быстрая вставка больших объемов данных, то старайтесь снизить и число измерений и число индексов в этой таблице.<br> Особо отмечу, что индекс не может содержать более 16 полей и периодический регистр с 16ю измерениями платформа усечет поля в индексах - создаст без последнего измерения: [Период + Измерение1 + ... + Измерение15], а второй индекс не будет содержать поле Период: [Измерение1 + ... + Измерение16]. Работа с таким регистром может вызвать проблемы со скоростью получения данных, хотя с прикладной точки зрения ошибок не будет. Стоит учитывать составные типы, одно измерение составного типа в СУБД будет состоять из нескольких полей (в самом жестком случае - до 7 полей на одно измерение).</li>
        </ul>





        <p class="title-size16"><b id="reg-info-21">Запись регистра.</b></p>
    </div>







    <div class="reg-buh">
        <p class="title-size16"><b id="reg-buh-1">Создание регистра бухгалтерии и его свойства. Синтетический учет.</b></p>
        <p>Почитать про этот регистр можно на сайте "Курсы по 1С РФ" - https://курсы-по-1с.рф/courses/dev-att/accounting-startpage/jsorrskd-chapter-03/. ОЧЕНЬ ХОРОШО ОПИСАНО.</p>
        <p>Создадим регистр "РегистрБухгалтерии". Делаю по курсу Чистова 8.3. Из видео "30 СпецКурс 018".</p>
        <p>У регистра есть стандартное измерение <b>"Счет"</b>, которое не активно, пока мы не выберем для свойства "ПланСчетов" объект конфигурации ПланСчетов, созданный нами.</p>
        <p>Есть свойство <b>"Корреспонденция"</b>, которое обозначает в каком виде мы будем вводить данные в регистр. Есть два формата записи. Первый, когда галочка стоит, выглядит так:</p>
        <img src="img/1С-Бух/2025-02-16_09-24-58.png" class="screen-2" alt="">
        <p>Это формат с кореспонденцией, когда два счёта кореспондируют друг с другом.</p>
        <p>Если же галка не установленная, то форма записи будет другой. Та же самая запись будет выглядеть уже так:</p>
        <img src="img/1С-Бух/2025-02-16_09-28-40.png" class="screen-2" alt="">
        <p>Вторая форма напоминает регистр накопления, только там "Приход/Расход", а тут "Дебет/Кредит".</p>
        <p>В чём разница между двумя этими формами записи. Только по первой форме записи мы можем прочить какие были кореспондирующие обороты между двумя счетами. В СНГ везде ветётся первая форма записи. Вторую можно увидеть в западных странах. Поэтому мы всегда ставим эту галку. Странно, что она по умолчанию не стоит. Кстати установленная галка корреспонденции теперь разделила стандартное измерние "Счет" на два измерения: "СчетДт" и "СчетКт", а измерение "ВидДвижения" теперь исчезло.</p>
        <p>Следующее сойство <b>"Длина уточнения периода"</b>. Появилось недавно, в старых версиях его нет. Но в 8.3.13 ещё была. Итак это свойство нужно для того, чтобы выбирать остатки учитывая обороты, включая точку, на которую мы получаем остатки. Вобщем там какая то муть с этим свойством. Оно позволяет раздробить 1 секунду на 1000 частей и получать отчёт не точно на какую то секунду. а на какую то часть этой секунды. Зачем такое нужно пока не знаю. В жизни это редко используется.</p>
        <p>Далее создадим ресурс, это будет "Сумма". У ресурса есть такое свойство как <b>"Балансовый"</b>, по умолчанию оно установленно. Если снять галку, то ресурс "Сумма" в регисре разделится на 2 ресурса: "СуммаДт" и "СуммаКт". Мы не будем убирать галку. Позже разберёмся для чего такая возможность.</p>
        <p>На примере регистра бухгалтерии рассмотрим для чего нужны реквизиты. Реквизит это дополнительное пояснение к движению в регистре, к любому регистру. Так как мы делаем такой регистр, в который пользователь сам будет вводить проводки, то реквизит назовём "Содержание проводки", куда пользователь, если захочет, может что то ввести. На остатки и обороты это никак не влияет, но зато в таблице будет видно, что же он имел ввиду.</p>
        <p>Так как регистр требует регистратор, то мы создадим новый документ, в котором мы отобразим этот регистр и пользователь сам будет вводить проводки. Создадим документ "ОперацияБух", в движениях документа мы отметим галочку для регистра бухгалтерии "РегистрБухгалтерии", чтобы в форме документа у основного реквизита Объект было свойство Движения, из которого мы на форму вынесем этот регистр. Т.е. мы реквизитов создавать в нём не будем, чтобы потом в проводке записать из регистр, мы сразу вынесем регистр пользователю и всё.</p>
        <p>Уберём поле Период, но в модуле объекта поле Период заполним сами в обработке "ПередЗаписью".</p>
        <p>Перейдём в ПР и введём в документе проводки:</p>
        <img src="img/1С-Бух/2025-02-16_18-54-33.png" class="screen" alt="">
        <p>Кратко расшифрую что тут написано. Мы получили товар от поставщика, затем передали товар покупателю, занесли выручку и списали себестоимость и покупатель заплатил нам часть денег. Если смущает счёт "Прибыль", то это как у Милькина счёт "90 Продажи". Учли выручку это подсчёт "90.1 Выручка", а списали себестоимость это подсчёт "90.2 Себестоимость".</p>
        <p>Теперь составим отчёт "Оборотно-сальдовая ведомость" по получившимся проводкам.</p>
    
    
    
        <p class="title-size16"><b id="reg-buh-2">Отчёт "Оборотно-сальдовая ведомость" при синтетическом учёте</b></p>
        <p>Вот так выглядит такой отчёт. Его можно посмотреть в базе основных объектов Камкова:</p>
        <img src="img/1С-Бух/2025-02-16_19-02-22.png" class="screen" alt="">
        <p>Для получения данных нам понадобится виртуальная таблица регистра бухгалтерии(РБ) - "ОстаткиИОбороты". В конструкторе выбираем нужные поля:</p>
        <img src="img/1С-Бух/2025-02-17_08-22-01.png" class="screen" alt="">
        <p>На закладке "Ресурсы" нажмём на >>, чтобы выбрать все ресурсы по которым мы хотим видеть итоги. На закладке "настройки" выведем просто детальные записи.</p>





        <p class="title-size16"><b id="reg-buh-3">Для чего галочка "Корреспонденция"</b></p>
        <p>Конечно! Это фундаментальное свойство регистра бухгалтерии.</p>      
        <p>Если говорить совсем просто: <strong>галочка "Корреспонденция" — это то, что включает механизм двойной записи и превращает простой список остатков в полноценный бухгалтерский журнал.</strong></p>       
        <p>Это то, что отвечает на вопрос не только "Сколько?", но и "<strong>Почему изменилось?</strong>".</p>       
        <p>Давай на классическом примере с кассой и банком.</p>       
        <p><strong>Ситуация 1: Галочка "Корреспонденция" СНЯТА (теоретический случай)</strong></p>       
        <p>Представь, что этой галочки нет. Тогда у регистра бухгалтерии было бы только <strong>одно</strong> поле "Счет". Мы могли бы делать только такие записи:</p>       
        <table border="1" style="border-collapse: collapse; width: 100%;">
            <thead>
                <tr>
                    <th style="padding: 8px; text-align: left;">Счет</th>
                    <th style="padding: 8px; text-align: left;">Сумма</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 8px;">Касса</td>
                    <td style="padding: 8px;">+10 000</td>
                </tr>
                <tr>
                    <td style="padding: 8px;">Банк</td>
                    <td style="padding: 8px;">-10 000</td>
                </tr>
            </tbody>
        </table>        
        <p>Что мы видим из этих записей? Мы видим, что в кассе денег стало больше, а в банке — меньше. Но мы <strong>не знаем, связаны ли эти два события</strong>. Может, деньги в кассу принес клиент, а деньги из банка ушли на оплату аренды. Эти две операции могли произойти в разное время и по разным причинам.</p>       
        <p>Такой регистр похож на два отдельных регистра накопления. Он не показывает <strong>взаимосвязь</strong> операций.</p>       
        <p><strong>Ситуация 2: Галочка "Корреспонденция" УСТАНОВЛЕНА (стандартный режим)</strong></p>      
        <p>Когда мы ставим эту галочку, платформа 1С кардинально меняет структуру регистра. Вместо одного поля "Счет" появляются два обязательных поля:</p>
        <ul class="list">
            <li><strong>Счет Дебета (<code>СчетДт</code>)</strong> — отвечает на вопрос "КУДА пришли активы/ценности?" или "ГДЕ уменьшились обязательства?".</li>
            <li><strong>Счет Кредита (<code>СчетКт</code>)</strong> — отвечает на вопрос "ОТКУДА ушли активы/ценности?" или "ГДЕ увеличились обязательства/капитал?".</li>
        </ul>        
        <p>Теперь, чтобы отразить ту же операцию (сняли деньги в банке и положили в кассу), мы делаем <strong>одну-единственную запись</strong>, которая называется <strong>проводка</strong>:</p>        
        <table border="1" style="border-collapse: collapse; width: 100%;">
            <thead>
                <tr>
                    <th style="padding: 8px; text-align: left;">Счет Дебета</th>
                    <th style="padding: 8px; text-align: left;">Счет Кредита</th>
                    <th style="padding: 8px; text-align: left;">Сумма</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 8px;"><strong>Касса (50)</strong></td>
                    <td style="padding: 8px;"><strong>Банк (51)</strong></td>
                    <td style="padding: 8px;">10 000</td>
                </tr>
            </tbody>
        </table>        
        <p>Что говорит нам эта запись?</p>
        <ul class="list">
            <li><strong>Дебет счета "Касса"</strong>: Деньги <strong>пришли</strong> в кассу.</li>
            <li><strong>Кредит счета "Банк"</strong>: Деньги <strong>ушли</strong> из банка.</li>
        </ul>        
        <p>Теперь мы видим полную картину в одной строке! Мы точно знаем, что деньги в кассе увеличились именно потому, что их сняли с расчетного счета в банке. Мы видим <strong>корреспонденцию</strong> (взаимосвязь) счетов.</p>        
        <p>Это и есть фундаментальный принцип <strong>двойной записи</strong>, на котором стоит весь бухгалтерский учет. Каждая операция отражается одновременно по дебету одного счета и кредиту другого на одну и ту же сумму, поддерживая баланс.</p>        
        <p><strong>Итог в виде таблицы</strong></p>        
        <table border="1" style="border-collapse: collapse; width: 100%;">
            <thead>
                <tr>
                    <th style="padding: 8px; text-align: left;">Свойство</th>
                    <th style="padding: 8px; text-align: left;">Галочка "Корреспонденция" СНЯТА</th>
                    <th style="padding: 8px; text-align: left;">Галочка "Корреспонденция" УСТАНОВЛЕНА (Норма)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 8px;"><strong>Поля для счета</strong></td>
                    <td style="padding: 8px;">Одно поле: <code>Счет</code></td>
                    <td style="padding: 8px;">Два поля: <code>СчетДт</code>, <code>СчетКт</code></td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><strong>Что отражает</strong></td>
                    <td style="padding: 8px;">Простое изменение остатка на счете.</td>
                    <td style="padding: 8px;"><strong>Проводку</strong> — взаимосвязанное изменение на двух счетах.</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><strong>На какой вопрос отвечает</strong></td>
                    <td style="padding: 8px;">"Сколько денег стало в кассе?"</td>
                    <td style="padding: 8px;">"Почему денег в кассе стало больше?" - "Потому что их взяли из банка."</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><strong>Аналогия</strong></td>
                    <td style="padding: 8px;">Регистр накопления остатков.</td>
                    <td style="padding: 8px;">Классическая двойная запись.</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><strong>Использование</strong></td>
                    <td style="padding: 8px;">Практически никогда не используется. Это экзотика для специфических задач.</td>
                    <td style="padding: 8px;"><strong>99.9%</strong> всех случаев использования регистра бухгалтерии.</td>
                </tr>
            </tbody>
        </table>        
        <p><strong>Вывод:</strong></p>
        <p>Не ставьте эту галочку, только если вы на 100% уверены, что вам нужен небухгалтерский учет (например, управленческий учет по МСФО, где могут быть операции без корреспонденции). Во всех остальных случаях для ведения бухгалтерского учета по российским стандартам (и большинству мировых) <strong>эта галочка должна быть всегда установлена</strong>. Она — сердце регистра бухгалтерии.</p>





        <p class="title-size16"><b id="reg-buh-4">Для чего нужен признак "балансовый" у измерений и ресурсов</b></p>   
        <p>Если говорить очень просто, <strong>признак "Балансовый" — это приказ для 1С вести отдельный, полноценный бухгалтерский баланс для каждого значения этого измерения.</strong></p>       
        <p>Это как сказать: "Я хочу видеть не только общий баланс всей компании, но и <code>персональный баланс</code> по каждому нашему контрагенту, по каждому договору и т.д.".</p>       
        <p>Давай рассмотрим на самом понятном примере — измерении (субконто) <strong>"Контрагенты"</strong>.</p>        
        <hr style="margin: 20px 0;">        
        <p><strong>Ситуация 1: Признак "Балансовый" у "Контрагентов" СНЯТ (неправильно)</strong></p>        
        <p>Представь, что мы не поставили эту галочку. Что это значит? 1С не обязана следить за тем, чтобы по каждому контрагенту сходился дебет с кредитом по <strong>всем счетам учета</strong>.</p>       
        <p>Мы делаем две операции:</p>
        <ol class="list" style="list-style-type: decimal;">
            <li>
                <strong>Получили товары от ООО "Ромашка" на 10 000 руб.</strong>
                <ul class="list2">
                    <li>Проводка: <strong>Дт</strong> 41 (Товары) | <strong>Кт</strong> 60 (Расчеты с поставщиками) [Контрагент = Ромашка] | Сумма: 10 000</li>
                    <li><em>Что это значит:</em> У нас появился товар, и мы стали должны "Ромашке".</li>
                </ul>
            </li>
            <li>
                <strong>Мы оказали "Ромашке" консультационную услугу на 3 000 руб.</strong>
                <ul class="list2">
                    <li>Проводка: <strong>Дт</strong> 62 (Расчеты с покупателями) [Контрагент = Ромашка] | <strong>Кт</strong> 90 (Продажи) | Сумма: 3 000</li>
                    <li><em>Что это значит:</em> Теперь "Ромашка" должна нам за услугу.</li>
                </ul>
            </li>
        </ol>       
        <p>Теперь директор спрашивает: <strong>"Какой у нас итоговый баланс с ООО "Ромашка"?"</strong></p>       
        <p>Без признака "Балансовый" 1С не сможет дать прямой ответ. Она видит две несвязанные вещи:</p>
        <ul class="list">
            <li>Мы должны "Ромашке" 10 000 по счету 60.</li>
            <li>"Ромашка" должна нам 3 000 по счету 62.</li>
        </ul>        
        <p>Чтобы узнать итоговый баланс, бухгалтеру придется вручную строить отчет по счету 60, потом по счету 62, и в уме или на калькуляторе вычислять сальдо (10 000 - 3 000 = 7 000 нашего долга). Система не видит "Ромашку" как единую сущность, по которой должен сходиться баланс.</p>        
        <hr style="margin: 20px 0;">
        <p><strong>Ситуация 2: Признак "Балансовый" у "Контрагентов" УСТАНОВЛЕН (правильно)</strong></p>       
        <p>Когда мы ставим эту галочку, мы даем 1С команду: "<strong>Для каждого контрагента</strong> сумма всех операций по дебету должна быть равна сумме всех операций по кредиту". Система начинает вести и хранить в таблицах итогов отдельный баланс по "Ромашке", "Васильку" и т.д.</p>       
        <p>Теперь, когда директор задает тот же вопрос: <strong>"Какой у нас итоговый баланс с ООО "Ромашка"?"</strong>, мы можем получить ответ одним запросом или стандартным отчетом (например, "Анализ субконто").</p>      
        <p>Система сама посмотрит на все счета, где фигурирует "Ромашка":</p>
        <ul class="list">
            <li>Кредитовое сальдо по счету 60: <strong>-10 000</strong></li>
            <li>Дебетовое сальдо по счету 62: <strong>+3 000</strong></li>
        </ul>       
        <p>И мгновенно выдаст итоговый результат: <strong>-7 000</strong>. Это значит, что с учетом всех наших взаимоотношений, мы должны "Ромашке" 7 000 рублей.</p>
        <hr style="margin: 20px 0;">
        <p><strong>Для чего это нужно?</strong></p>        
        <p>Этот признак ставится у тех измерений и ресурсов, которые представляют собой <strong>независимые объекты учета</strong>, по которым важно контролировать сквозной баланс.</p>        
        <p><strong>Классические "балансовые" измерения:</strong></p>
        <ul class="list">
            <li><strong>Контрагенты:</strong> Чтобы видеть общий долг/переплату по каждому клиенту/поставщику.</li>
            <li><strong>Договоры:</strong> Чтобы видеть баланс в разрезе конкретных договоров с контрагентами.</li>
            <li><strong>Основные средства:</strong> Чтобы отслеживать первоначальную стоимость и амортизацию по каждому объекту.</li>
            <li><strong>Номенклатура (на счетах учета ТМЦ):</strong> Чтобы видеть остаток по каждой товарной позиции.</li>
        </ul>       
        <p><strong>А вот пример НЕбалансового измерения:</strong></p>
        <ul class="list">
            <li><strong>Статьи затрат.</strong> Нам не нужно, чтобы по статье "Аренда офиса" сходился дебет с кредитом. Мы просто накапливаем на ней затраты.</li>
        </ul>        
        <p><strong>Про ресурсы (например, "Количество"):</strong></p>
        <p>Признак "Балансовый" у ресурса "Количество" означает, что по нему тоже должен сходиться баланс. Нельзя, чтобы со склада ушло 5 стульев (Кредит счета 41), а на другой склад пришло 4 стула (Дебет счета 41). Если количество балансовое, то и по количеству дебет должен быть равен кредиту.</p>       
        <p><strong>Вывод в виде таблицы:</strong></p>
        <table border="1" style="border-collapse: collapse; width: 100%;">
            <thead>
                <tr>
                    <th style="padding: 8px; text-align: left;">Свойство</th>
                    <th style="padding: 8px; text-align: left;">Признак "Балансовый" СНЯТ</th>
                    <th style="padding: 8px; text-align: left;">Признак "Балансовый" УСТАНОВЛЕН</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="padding: 8px;"><strong>Цель</strong></td>
                    <td style="padding: 8px;">Просто дополнительная аналитика к счету.</td>
                    <td style="padding: 8px;">Ведение полноценного, независимого баланса по каждому значению аналитики.</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><strong>Контроль платформы</strong></td>
                    <td style="padding: 8px;">Нет контроля сквозного баланса по аналитике.</td>
                    <td style="padding: 8px;">Платформа следит, чтобы для каждого значения (например, для "Ромашки") итоговый дебет по всем счетам был равен кредиту.</td>
                </tr>
                <tr>
                    <td style="padding: 8px;"><strong>Возможности отчетов</strong></td>
                    <td style="padding: 8px;">Можно посмотреть остатки по счету в разрезе аналитики.</td>
                    <td style="padding: 8px;">Можно посмотреть общий баланс по аналитике в разрезе всех счетов (например, отчет "Анализ субконто").</td>
                </tr>
            </tbody>
        </table>

    </div>








    <div class="enumeration">
        <h2 class="header-style" id="enumeration">Перечисления</h2>
        <p>Перечисления можно представить как те же справочники, но справочники дают возможность создавать, удалять, изменять свои элементы спрвочника, то перечисления не дают такой возможности. Разработчик как ввёл значения, так они и останутся.</p>
        <p>Для объяснения объекта конфигурации "Перечисления" продолжу тему из учебника Хрусталёвой "Пособие для разработчика". Все нижние статьи это одно целое повествование из книги. Хотя многое тут и не относится к перечислениям, но в той или иной мере связанно с ними.</p>
        <p>У нас есть справочник "Номенклатура", в справочнике есть и материалы и услуги, они разнесены по группам. Нам в дальнейшем нужно будет как то отличать материал от услуги. Можно было бы использовать для отличий группы, в которых они лежат, но это не надёжный способ, потому что группы можно удалить, переименовать, сгруппировать элементы по другим принципам и т.д.</p>
        <p>Поэтому нам требуется некоторый признак, позволяющий однозначно определять принадлежность элемента справочника к материалам или услугам, независимо от изменения иерархической структуры справочника.</p>
        <p>Для этого мы создадим у справочника Номенклатура ещё один реквизит, тип значения которого образуется объектом конфигурации Перечисление. Это поможет нам в дальнейшем легко определять, чем является элемент справочника Номенклатура: услугой или материалом.</p>
    
        <p class="title-size16"><b id="enumeration-1">Что такое Перечисление</b></p>
        <p>Объект конфигурации Перечисление предназначен для описания структуры хранения <i style="text-decoration:underline;">постоянных</i> наборов значений, не изменяемых в процессе работы конфигурации. На основе объекта конфигурации Перечисление платформа создает в базе данных таблицу, в которой может храниться набор некоторых постоянных значений.</p>
        <p>В настоящей жизни этому объекту может соответствовать, например, перечисление разновидностей указания цены - "включая НДС", "без НДС". Набор всех возможных значений, которые содержит перечисление, задается при конфигурировании системы, и пользователь не может изменять их, удалять или добавлять новые.</p>
        <p>Из этого следует важная особенность перечисления: значения  перечисления не "обезличены" для конфигурации, на них могут опираться алгоритмы работы программы. Это чем то похоже по работе на предопределеённые элементы справочника.</p>
    
        <p class="title-size16"><b id="enumeration-2">Добавление перечисления и привязка его значений к реквизиту "Вид номенклатуры" справочника "Номенклатура"</b></p>
        <p>Создадим новый объект конфигурации Перечисление с именем "ВидыНоменклатуры". На закладке Данные добавим два значения перечисления: Материал и Услуга.</p>
        <p>Далее в режиме Конфигуратор создадим у справочника Номенклатура реквизит "Вид номенклатуры" с типом данных - ПеречислениеСсылка.ВидыНоменклатуры, который будет хранить значение перечисления. В режиме 1С:Предприятие проставим нужные значения этого реквизита для всех элементов справочника Номенклатура.</p>
        <p><span class="ск">Напомню, у реквизита справочника "Вид номенклатуры" есть свойство в палитре свойств - <i style="text-decoration:underline;">"Значение запонения"</i>, которое позволяет в конфигураторе установить значение по умолчанию для этого реквизита. Насколько я знаю, если для реквизита установлен тип ПеречислениеСсылка, то в этом свойстве можно выбрать значения из этого перечисления, а если для реквизита установлен тип СправочникСссылка, то в значении этого свойства можно выбрать предопределённые элементы из этого справочника, если они есть конечно.</span></p>
    
        <p class="title-size16"><b id="enumeration-3">Произвольное представление номенклатуры</b></p>
        <p>Теперь, используя реквизит "Вид номенклатуры", зададим произвольное представление номенклатуры в интерфейсе "1С:Предприятия".</p>
        <p>Представление номенклатуры используется везде, где отображаются поля, ссылающиеся на элементы справочника Номенклатура. Такие поля мы видим в табличной части наших документов, в регистре сведений, регистре накопления и т.д.</p>
        <p>Стандартное представление номенклатуры (как и любого другого элемента справочника) определяется свойством справочника <i style="text-decoration:underline;">Основное представление</i>. По умолчанию это свойство установлено в значение <i style="text-decoration:underline;">В виде наименования</i>.</p>
        <img src="img/1С-1/2023-08-05_12-53-30.png" class="screen" alt="">
        <p><span class="ск">Представление для ссылки справочника, плана видов характеристик, плана счетов отображается в виде наименования, если задано в виде наименования. Представление для ссылки документов, бизнес-задач платформа составляет из синонима документа, его номера и даты("ПриходнаяНакладная 000000002 от 2023.04.01 00:00:00").</span></p>
        <p>Поэтому, например, в табличной части документов в колонке Номенклатура мы видим не ссылку(12:kj9d8f03rlsdif78923hkf что типо этого) на номенклатуру, а ее наименование.</p>
        <p>Было бы удобно, чтобы при отображении ссылок на номенклатуру в интерфейсе "1С:Предприятия" рядом с наименованием номенклатуры показывался бы и ее вид (материал или услуга).</p>
        <img src="img/1С-1/2023-08-05_13-15-49.png" alt="">
        <p><b>Механизм формирования представления объекта</b></p>
        <p>Механизм формирования представления объекта конфигурации состоит из двух этапов: определение полей, участвующих в формировании представления, и собственно формирование представления. Для формирования представления используются обработчики событий "ОбработкаПолученияПолейПредставления" и "ОбработкаПолученияПредставления" менеджера соответствующего объекта.</p>
        <p>Эти события срабатывают всегда при открытии любой формы, где будут показаны представления ссылки на элементы справочника Номенклатура. Вот при открытии формы документа "Оказание услуг" в табличной части отображаются представления ссылок на номенлатуру, значит при открытии формы отработают эти события.</p>
        <p><span class="ск">Ещё добавлю, когда срабатывают эти события. Платформа когда для ссылки хочет получить представление, то она вызывает виртуальное поле "Представление" для ссылки, запускаются сразу же эти 2 события, которые и формируют представление для ссылки.</span></p>
        <p>В конфигураторе, выделим в дереве объектов конфигурации справочник Номенклатура, вызовем контекстное меню и выберем пункт "Открыть модуль менеджера" и добавим эти обработчики.</p>
        <p>Первый обработчик имеет первым параметром массив, который мы заполняем теми реквизитами справочника Номенклатуры, значениями которых хотим составить представление для ссылки. Мы хотим составить представление в виде "Подключение воды(услуга)". "Подключение воды" это представление берётся из реквизита "Наименование", а слово "услуга" можно взять из реквизита "Вид номенклатуры". Значит массив Поля нужно заполнить строковыми названиями этих реквизитов:</p>
        <div class="code-style">
            <pre>
                --модуль менеджера
                <span class="сс"><span class="ск">Процедура</span> ОбработкаПолученияПолейПредставления<span class="ск">(</span>Поля, СтандартнаяОбработка<span class="ск">)</span>
                    <span class="з">//указываем, что стандарное отображение в виде "наименования" не нужно</span>
                    СтандартнаяОбработка <span class="ск">=</span> Ложь<span class="ск">;</span>
    
                    <span class="з">//добавляем в массив строковые имена полей справочника "Номенклатура",
                    //значения которых и сформируют представление</span>
                    Поля<span class="ск">.</span>Добавить<span class="ск">(</span><span class="серый">"Наименование"</span><span class="ск">);</span>
                    Поля<span class="ск">.</span>Добавить<span class="ск">(</span><span class="серый">"ВидНоменклатуры"</span><span class="ск">);
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <p>Во втором обработчике параметр-структура "Данные" уже будет создана по полям из первого обработчика и будет содержать в ключе имя поля(реквизита), а в значении - значение поля. Вот в таком виде: Данные: "Наименование" -> "Подключение воды", "Вид номенклатуры" -> "Услуга". Если в табличной части несколько строк с номенклатурой, значит вторая процедура будет вызываться по кругу столько раз, сколько строк в табличной части. И на каждом круге в параметр Данные будут попадать соответствующие значения:</p>
        <div class="code-style">
            <pre>
                --модуль менеджера
                <span class="сс"><span class="ск">Процедура</span> ОбработкаПолученияПредставления<span class="ск">(</span>Данные, Представление, СтандартнаяОбработка<span class="ск">)</span>
                    СтандартнаяОбработка <span class="ск">=</span> Ложь<span class="ск">;</span>
    
                    <span class="з">//мы хотим своё представление сформировать используя поле "ВидНоменклатуры", значение
                    //которого хотим присоединить к наименованию, для этого и проверяем заполнени ли 
                    //это поле значением, если да, то формируем с ним, если нет, без него</span>
                    <span class="ск">Если</span> ЗначениеЗаполнено<span class="ск">(</span>Данные<span class="ск">.</span>ВидНоменклатуры<span class="ск">) Тогда</span>
                        <span class="з">//параметр Представление это строка, в которую надо поместить конечную строку
                        //представляющую ссылку</span>
                        Представление <span class="ск">=</span> Данные<span class="ск">.</span>Наименование <span class="ск">+</span> <span class="серый">" ("</span> <span class="ск">+</span>
                        НРег<span class="ск">(</span>Строка<span class="ск">(</span>Данные<span class="ск">.</span>ВидНоменклатуры<span class="ск">))</span> <span class="ск">+</span> <span class="серый">")"</span><span class="ск">;
                    Иначе</span>
                        Представление <span class="ск">=</span> Данные<span class="ск">.</span>Наименование<span class="ск">;
                    КонецЕсли;
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <img src="img/1С-1/2023-08-05_20-15-26.png" class="screen" alt="">
        <p>В обработчике события ОбработкаПолученияПредставления мы описываем алгоритм составления представления и запись его в параметр "Представление" из массива полей, заданных нами в предыдущем обработчике. Данные, необходимые для формирования представления, передаются с помощью параметра Данные типа Структура. Для этого сначала мы устанавливаем параметр СтандартнаяОбработка в значение Ложь, а затем получаем представление номенклатуры путем добавления к ее наименованию вида номенклатуры, заключенного в скобки. Если параметр СтандартнаяОбработка в обработчике не установлен в значение Ложь, то система попытается сформировать стандартное представление объекта, исходя из переданных данных.</p>
        <p>По аналогии с рассмотренным примером произвольные представления объектов конфигурации можно задавать не только для справочников, но и для документов, планов видов характеристик, планов счетов и т.п. </p>
        <p>Теперь даже если мы будем получать представление ссылки номенклатуры запросом, то также будут отрабатывать эти 2 события и в результате запроса мы также получим представление ссылки номенклатуры  ввиде соединённых слов: "Подключение воды(услуга)".</p>
        <div class="code-style">
            <pre>
                ВЫБРАТЬ
                    Ссылка.Представление
                ИЗ
                    Справочник.Номенклатура
            </pre>
        </div>
    
        <p class="title-size16"><b id="enumeration-4">Запись в движения только той номенклатуры, которая является материалом</b></p>
        <p>В предыдущей статье мы научились создавать свои представления ссылок номенклатуры. Далее при проведении документа "Оказание услуг" нам нужно записывать в регистр накопления "Остатки материалов" только ту номенклатуру, которая является материалом, а не услугой. Ведь когда мы заполняем номенклатурой табличную часть документа, мы пишем всё подряд и услугу и материалы. Поэтому при проведении нам нужно отделить материалы и списывать их.</p>
        <p>В книге предлагается временное решение, которое по производительности не очень хорошое. Мы просто пишем условие, где берём на каждом круге цикла номенклатуру. Номенклатура это ссылка и по этой ссылке мы можем получить поле "ВидНоменклатуры", а в этом поле будет одно из значений перечисления "ВидыНоменклатуры". НО получение поля таким способом это неявный запрос в БД, а мы находимся в цикле. Вот по этой причине этот способ не очень производительный:</p>
        <div class="code-style">
            <pre>
                --модуль объекта документа "Оказание услуги"
    
                <span class="сс"><span class="ск">Процедура</span> ОбработкаПроведения<span class="ск">(</span>Отказ<span class="ск">,</span> Режим<span class="ск">)</span>
                    Движения<span class="ск">.</span>ОстаткиМатериалов<span class="ск">.</span>Записывать <span class="ск">=</span> Истина<span class="ск">;</span>
                    <span class="ск">Для Каждого</span> ТекСтрокаПереченьНоменклатуры <span class="ск">Из</span> ПереченьНоменклатуры <span class="ск">Цикл</span>
                        <span class="ск">Если</span> ТекСтрокаПереченьНоменклатуры<span class="ск">.</span>Номенклатура<span class="ск">.</span>ВидНоменклатуры <span class="ск">=</span> Перечисления<span class="ск">.</span>ВидыНоменклатуры<span class="ск">.</span>Материал <span class="ск">Тогда</span>
                            Движение <span class="ск">=</span> Движения<span class="ск">.</span>ОстаткиМатериалов<span class="ск">.</span>Добавить<span class="ск">();</span>
                            Движение<span class="ск">.</span>ВидДвижения <span class="ск">=</span> ВидДвиженияНакопления<span class="ск">.</span>Расход<span class="ск">;</span>
                            Движение<span class="ск">.</span>Период <span class="ск">=</span> Дата<span class="ск">;</span>
                            Движение<span class="ск">.</span>Материал <span class="ск">=</span> ТекСтрокаПереченьНоменклатуры<span class="ск">.</span>Номенклатура<span class="ск">;</span>
                            Движение<span class="ск">.</span>Склад <span class="ск">=</span> Склад<span class="ск">;</span>
                            Движение<span class="ск">.</span>Количество <span class="ск">=</span> ТекСтрокаПереченьНоменклатуры<span class="ск">.</span>Количество<span class="ск">;
                        КонецЕсли;
                    КонецЦикла;
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <p>Более правильным способом было бы сделать запрос в БД, получить в результате только ту номенклатуру, которая является материалом и в цикле перебрать выборку из результата и записать в движения. Вот так:</p>
        <div class="code-style">
            <pre>
                --модуль объекта документа "Оказание услуги"
    
                <span class="сс"><span class="ск">Процедура</span> ОбработкаПроведения<span class="ск">(</span>Отказ<span class="ск">,</span> Режим<span class="ск">)</span>
                    Запрос <span class="ск">= Новый</span> Запрос<span class="ск">;</span>
                    Запрос<span class="ск">.</span>Текст <span class="ск">=</span> 
                        <span class="серый">"ВЫБРАТЬ
                        |	ОказаниеУслугиПереченьНоменклатуры.Номенклатура КАК Номенклатура,
                        |   ОказаниеУслугиПереченьНоменклатуры.Количество КАК Количество
                        |ПОМЕСТИТЬ ВТ
                        |ИЗ
                        |	Документ.ОказаниеУслуги.ПереченьНоменклатуры КАК ОказаниеУслугиПереченьНоменклатуры
                        |ГДЕ
                        |	ОказаниеУслугиПереченьНоменклатуры.Ссылка = &Ссылка
                        |;
                        |////////////////////////////////////////////////////////////////////////////////
                        |ВЫБРАТЬ
                        |	СправочникНоменклатура.Ссылка КАК Материал,
                        |   ВТ.Количество КАК Количество
                        |ИЗ  
                        |	ВТ КАК ВТ
                        |	ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Номенклатура КАК СправочникНоменклатура 
                        |	ПО ВТ.Номенклатура = СправочникНоменклатура.Ссылка
                        |ГДЕ
                        |	НЕ СправочникНоменклатура.ЭтоГруппа
                        |	И СправочникНоменклатура.ВидНоменклатуры = &ВидНоменклатуры"</span><span class="ск">;</span>
    
                    Запрос<span class="ск">.</span>УстановитьПараметр<span class="ск">(</span><span class="серый">"Ссылка"</span><span class="ск">,</span> Ссылка<span class="ск">);</span>
                    Запрос<span class="ск">.</span>УстановитьПараметр<span class="ск">(</span><span class="серый">"ВидНоменклатуры"</span><span class="ск">,</span> Перечисления<span class="ск">.</span>ВидыНоменклатуры<span class="ск">.</span>Материал<span class="ск">);</span>
                    РезультатЗапроса <span class="ск">=</span> Запрос<span class="ск">.</span>Выполнить<span class="ск">();</span>
    
                    Движения<span class="ск">.</span>ОстаткиМатериалов<span class="ск">.</span>Записывать <span class="ск">=</span> Истина<span class="ск">;</span>
    
                    Выборка <span class="ск">=</span> РезультатЗапроса<span class="ск">.</span>Выбрать<span class="ск">();</span>
    
                    <span class="ск">Пока</span> Выборка<span class="ск">.</span>Следующий <span class="ск">Цикл</span>
                        Движение <span class="ск">=</span> Движения<span class="ск">.</span>ОстаткиМатериалов<span class="ск">.</span>Добавить<span class="ск">();</span>
                        Движение<span class="ск">.</span>ВидДвижения <span class="ск">=</span> ВидДвиженияНакопления<span class="ск">.</span>Расход<span class="ск">;</span>
                        Движение<span class="ск">.</span>Период <span class="ск">=</span> Дата<span class="ск">;</span>
                        Движение<span class="ск">.</span>Материал <span class="ск">=</span> Выборка<span class="ск">.</span>Материал<span class="ск">;</span>
                        Движение<span class="ск">.</span>Склад <span class="ск">=</span> Склад<span class="ск">;</span>
                        Движение<span class="ск">.</span>Количество <span class="ск">=</span> Выборка<span class="ск">.</span>Количество<span class="ск">;
                    КонецЦикла;
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <p>Этот 2й способ с запросом писал сам, когда дойду в книге до мига, когда исправлять будут, то добавлю исправления если будут.</p>
    
    
    
        <p class="title-size16"><b id="enumeration-5">Как получить значения перечисления несколькими способами</b></p>
        <p>3 способа на сервере, но не все, получить значения перечисления можно посмотреть в инфобазе "КомнатаКрасоты" в модуле объекта справочника "Подразделения".</p>
    </div>
    







    <div class="11b">
        <h3 class="header-style2" id="11b">Крестики-нолики</h3>
        <p class="title-size16"><b>Крестики-нолики</b></p>
        <p>Когда создаём форму мы добавляем в неё Команды, которые становятся кнопками при переносе команды в элементы формы. При клике по кнопке обычно выполняется код. Код пишется в модуле формы(правая вкладка снизу формы). Вот такой код говорит, что обращаемся к текущей нажатой кнопке и тут же меняем заголовок кнопки при нажатии:</p>
        <div class="code-style">
            <pre>
                <span class="ск">&НаКлиенте
                Процедура <span class="сс">НажатиеНаКнопку</span>()
                    <span class="з">//как только будет нажата кнопка с которой свазяна эта процедура
                    //то процедура отработает и мы можем тут же обратиться к нажатому
                    //элементу формы(кнопке) по объекту "ТекущийЭлемент" и запишем в кнопку новый заголовок
                    //, это что то по типу this в js при срабатывании обработчика события</span>
                    <span class="сс">ТекущийЭлемент</span>.<span class="сс">Заголовок</span> = <span class="сс">"0"</span>;
                    
    
                    <span class="з">//чтобы обратиться к любому элементу-кнопке формы есть
                    //такая коллекция как "Элементы" и в эту коллекуию как к массиву 
                    //обращаемся к элементу через [] по имени элемента или через точку</span>
                    <span class="сс">Элементы</span>[<span class="сс">ИмяЭлемента</span>].<span class="сс">Заголовок</span> = <span class="сс">"0"</span>;
    
                    <span class="з">//например у кнопки во вкладке "Элементы формы" имя "Кнопка1"
                    //тогда обращение будет таким</span>
                    <span class="сс">ИмяЭлемента <span class="ск">=</span> "Кнопка1"</span><span class="ск">;</span>
                    <span class="сс">Элементы</span>[<span class="сс">ИмяЭлемента</span>].<span class="сс">Заголовок</span> = <span class="сс">"0"</span>;
                КонецПроцедуры</span>
            </pre>
        </div>
        <p>Вот пример обработчиков для кнопок крестики-нолики. На всех элементах кнопках висит один обработчик - НажатиеНаКнопку:</p>
        <img src="img/1С-1/2022-10-19_11-25-06.png" class="screen" alt="">
        <p>Модуль формы</p>
        <div class="code-style">
            <pre>
                &НаКлиенте
                Перем Поле;//тут хранятся наши ячейки
    
    
                &НаКлиенте
                Процедура ПриОткрытии(Отказ)
                    //когда обработка "Крестики-нолики" откроется у пользователя
                    //наступит событие и сработает этот обработчик
                    
                    //итак, присвоим начальное значение для переменной Поле
                    //установим двухмерный массив 3х3
                    Поле = Новый Массив;
                    Поле.Добавить(Новый Массив(3));
                    Поле.Добавить(Новый Массив(3));
                    Поле.Добавить(Новый Массив(3));
                    
                    //пробежимся по массиву и в каждую его ячейку установим " "
                    //это будет сигналом того, что ячейки свободны
                    Для Шаг1 = 0 По 2 Цикл
                        Для Шаг2 = 0 По 2 Цикл
                            Поле[Шаг1][Шаг2] = " ";
                        КонецЦикла;
                    КонецЦикла;
                КонецПроцедуры
    
                &НаКлиенте
                Процедура НажатиеНаКнопку(Команда)
                    //эта процедура сработает как только будет нажата любая кнопка
                    //связанная с этой процедурой, это 9 кнопок для крестиков-ноликов
                    ТекущийЭлемент.Заголовок = "0";
                    ИмяЭлемента = ТекущийЭлемент.Имя;
                    Позиция1 = Сред(Прав(ИмяЭлемента, 2), 1, 1);
                    Позиция2 =  Прав(ИмяЭлемента, 1);
                    Поле[Число(Позиция1)][Число(Позиция2)] = "0";
                    
                    Если ИграОкончена() Тогда
                    
                        Сообщить("Вы победили компьютер");
                    
                    Иначе
                        ХодКомпьютера();
                        Если ИграОкончена() Тогда
                            Сообщить("Компьютер победил");
                        КонецЕсли;
                    КонецЕсли;
                КонецПроцедуры
    
                &НаКлиенте
                Процедура ХодКомпьютера()
                    //тут 2 способа работы компа, это первый, он просто проверяет 
                    //поле на пустоту и заполняет её, идёт последовательно
                    //сделаем обход всех ячеек массива Поле
                    //КомпПоходил = Ложь;
                    //Для Шаг1 = 0 По 2 Цикл
                    //	Если КомпПоходил Тогда
                    //		Прервать
                    //	КонецЕсли;
                    //
                    //	Для Шаг2 = 0 По 2 Цикл
                    //		 //если в очередной ячейке массива хранится пустая строка
                    //		 Если Поле[Шаг1][Шаг2] = " " Тогда
                    //		    //это значит, что ячейка свободна и комп может 
                    //			//в неё походить, записав "Х"
                    //			Поле[Шаг1][Шаг2] = "Х";
                    //			
                    //			//составим имя кнопки прибавив текущий элемент массива
                    //			ИмяКнопки = "Кнопка" + Шаг1 + Шаг2;
                    //		 	Элементы[ИмяКнопки].Заголовок = "Х";
                    //			КомпПоходил = Истина;
                    //		    Прервать;
                    //		 КонецЕсли;
                    //	
                    //	КонецЦикла;
                    //
                    //КонецЦикла;
                    //КомпПоходил = Ложь;
                    
                    
                    //это 2й способ работы компа, выбираются элементы поля случайно
                    ГСЧ = Новый ГенераторСлучайныхЧисел;
                    
                    Пока Истина Цикл
                        СЧСтроки = ГСЧ.СлучайноеЧисло(0, 2);
                        СЧСтолбца = ГСЧ.СлучайноеЧисло(0, 2);
                        ИмяЭлемента = "Кнопка" + СЧСтроки + СЧСтолбца;
                        
                        Если Поле[СЧСтроки][СЧСтолбца] = " " Тогда
                            Поле[СЧСтроки][СЧСтолбца] = "Х";
                            Элементы[ИмяЭлемента].Заголовок = "Х";
                            Прервать;
                        КонецЕсли;
                    КонецЦикла;	
                КонецПроцедуры
    
    
                &НаКлиенте
                Функция ИграОкончена()
    
                    Если
                        Поле[0][0] &lt;> " " И
                        Поле[0][0] = Поле[0][1] И
                        Поле[0][0] = Поле[0][2]
                    Тогда
                        Возврат Истина;
                    ИначеЕсли
                        Поле[1][0] &lt;> " " И
                        Поле[1][0] = Поле[1][1] И
                        Поле[1][0] = Поле[1][2]
                    Тогда
                        Возврат Истина;
                    ИначеЕсли
                        Поле[2][0] &lt;> " " И
                        Поле[2][0] = Поле[2][1] И
                        Поле[2][0] = Поле[2][2]
                    Тогда
                        Возврат Истина;
                    ИначеЕсли
                        Поле[0][0] &lt;> " " И
                        Поле[0][0] = Поле[1][0] И
                        Поле[0][0] = Поле[2][0]
                    Тогда
                        Возврат Истина;
                    ИначеЕсли
                        Поле[0][1] &lt;> " " И
                        Поле[0][1] = Поле[1][1] И
                        Поле[0][1] = Поле[2][1]
                    Тогда
                        Возврат Истина;
                    ИначеЕсли
                        Поле[0][2] &lt;> " " И
                        Поле[0][2] = Поле[1][2] И
                        Поле[0][2] = Поле[2][2]
                    Тогда
                        Возврат Истина;
                    ИначеЕсли
                        Поле[0][0] &lt;> " " И
                        Поле[0][0] = Поле[1][1] И
                        Поле[0][0] = Поле[2][2]
                    Тогда
                        Возврат Истина;
                    ИначеЕсли
                        Поле[0][2] &lt;> " " И
                        Поле[0][2] = Поле[1][1] И
                        Поле[0][2] = Поле[2][0]
                    Тогда
                        Возврат Истина;
                    ИначеЕсли
                        Поле[0][1] &lt;> " " И
                        Поле[0][1] = Поле[1][0] И
                        Поле[0][1] = Поле[2][0]
                    Тогда
                        Возврат Истина;
                    Иначе
                        Возврат Ложь;
                    КонецЕсли;
                КонецФункции
            </pre>
        </div>
    </div>








    <div class="12">
        <h3 class="header-style2" id="12">Объектная модель запросов к БД</h3>
        <p>Существует 2 способа сделать запрос к БД. Это через объектную модель и через табличную модель. Тут про объектную модель.</p>
        <p>Если в конфигураторе зайти в синтакс помошник и набрать в поиске ДокументМенеджер.ИмяДокумента или СправочникМенеджер.ИмяСправочника, то найдём целую пачку методов запроса данных из этих объектов конфигурации.</p>
        <p>У объектной модели запросов есть существенные недостатки.</p>
        <ul class="list">
            <li>Нельзя с помощью одного метода получить данные из нескольких таблиц. Например, есть таблица с товарами и есть таблица с ценами этих товаров и нет такого метода, который за одно обращение к БД сможет прочитать данные из 2х этих таблиц. Чтобы получить данные этих таблиц нужно выполнить 2 запроса с выборкой из Справочники.Товары.Выбрать(); и РегистрыСведений.ЦеныТоваров.Выбрать();. И как следствие чем больше запросов к БД, тем дольше будет это всё работать.</li>
            <li>Ограниченные возможности фильтрации. Например, в табличной модели запросов есть разные способы выборки с разными условиями. При объектной модели такого не сделать. Вернее фильтры есть кое-какие, но их недостаточно</li>
            <li>Методы не позволяют группировать данные и формировать итоги.</li>
            <li>Избыточность чтения. То есть выборка будет всего что есть по указанному объекту, а нужно было всего лишь вернуть данные по одному полю.</li>
        </ul>
    </div>







    <div class="common_obj">
        <h3 class="header-style" id="common_obj"><b>Объекты из дерева "Общие"</b></h3>
    
        <p><b id="func_options">Функциональные опции</b></p>
        <p>Пишу из курса Чистова 8.2</p>
        <p>ФО влияют на интерфейс пользователя.</p>
        <p>Функциональные опции нужны, чтобы что-то включить или выключить в системе. Например, можно включать ведение многоскладского учёта или выключать. Допустим наша конфигурация будет испльзоваться на разных предприятиях и мы может на одном предприятии включить такой учёт, а на другом выключить. Мы можем создать настройку, с помощью которой пользователь сможет включать или выключать учёт.</p>
        <p>Нужно определить место, где можно включать или выключать. Настройку будем делать сразу для всей конфигурации. Хранить булево значение будем в константе. Добавим константу "СкладскойУчет" и выберем тип булево. Добавим новую функциональную опцию "СкладскойУчет", в поле "Хранение" укажем константу "СкладскойУчет". Поле "Хранение" означает место где эта опция будет хранится. На вкладке "Состав" мы выбираем те прикладные объекты, которые нужно включить или выключить. Ставим галочку на справочнике "Склады", у документа "ПоступлениеТоваров" реквизит Склад, у документа "ПродажаТоварв" реквизит Склад, на регистре "ОстаткиПоСкладам" измерение склад. Добавим константу в подсистему. Всё, в пользовательском режиме в меню Сервис доступна константа, включаем выключаем учёт. Если мы выключаем измерение Склад в регистре, то нужно заранее программно предусмаривать, есть такое измерение или нет.</p>
        <p>Можно обойтись и без этих опций, а использовать константу и написать код, который будет проверять что там в константе и по проверке включать или выключать доступностьи или видимость объектов, реквизитов и прочего. Можно сказать "Функциональная опция" это уже заранее написанная процедура, которая по входящим параметрам(где хранить опции и что включать и отключать) включает и отключает из отображения объекты.</p>
        <p>Если с помощью ФО мы скрываем целый справочник, то при запуске системы 1Спредприятие справочник скроется, но если в контсанте поставить галочку, что зотим видеть справочник, то придётся перезапускать 1СПредприятие. Но можно и программно перезапускать 1Спредприятие. Далее тут опишу как это делать.</p>
        <p>Функциональные опции могут быть более сложными. У нас есть в документах поступления и продажи реквизиты Контрагент и Договор, мы хотим добавить возможность учёта валюты в этих документах в зависимости от типа договора(доллары это будут или рубли). Заранее нужно добавить реквизит "Валюта" в документы приходные и расходные. В элементе справочника Договоры, при выборе договора, мы можем сделать поле с галочкой, по которой мы будем включать или выключать валютный учёт(показывать в документах приходная и расходная реквизит "Валюта"). Отсюда следует что хранить опцию мы будем в справочнике ДоговорыКонтрагентов. Добавим в этот справочник реквизит "ВалютныйУчет" с типом булево. Затем добавим новую функциональную опцию "ВалютныйУчетВДоговорах" и в поле хранение выберем реквизит "ВалютныйУчет" справочника "ДоговорыКонтрагентов". На вкладке Состав выберем реквизиты документов "Валюта". В таком виде, если мы включим галочку в каком то элементе договора, то включатся все реквизиты "Валюта" во всех этих документах. Нам же нужно, чтобы на каждый договор была отдельное включение или выключение учета в своём объекте документа. В этом нам поможет объект "Параметры функциональных опций", он находится под объектом "Функциональные опции".</p>
        <p>Добавим новый параметр опций и назовём его "Договор". В поле "Использование" палитры свойств указываем справочник "ДоговорыКонтрагентов". Теперь когда мы поставим галочку в элементе справочника(выберем договор), то потом при открытии формы документа надо, чтобы форма узнала нужно ли ей отобразить реквизит "Валюта" или нет. Для этого в модуле формы нам нужно событие "ПриСозданииНаСервере". Вот такой код пишем. В этом коде вообще не понятно что происходит, куда то передаём структуру:</p>
        <div class="code-style">
            <pre>
                --модуль формы документа "ПоступлениеТоваров"
                <span class="сс"><span class="ск">&НаСервере
                Процедура</span> ПриСозданииНаСервере<span class="ск">(</span>Отказ<span class="ск">,</span> СтандартнаяОбработка<span class="ск">)</span>
                    ПараметрыФО <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Договор"</span><span class="ск">,</span> Объект<span class="ск">.</span>ДоговорКонтрагента<span class="ск">);</span>
                    УстановитьПараметрыФункциональныхОпцийФормы<span class="ск">(</span>ПараметрыФО<span class="ск">);
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <p>Дальше нужно также создать обработчик события "ПриИзменении" у реквизита Договор и там такой же код, как и при создании формы на сервере.</p>
        <div class="code-style">
            <pre>
                --модуль формы документа "ПоступлениеТоваров"
                <span class="сс"><span class="ск">&НаСервере
                Процедура</span> ПриСозданииНаСервере<span class="ск">(</span>Отказ<span class="ск">,</span> СтандартнаяОбработка<span class="ск">)</span>
                    ПараметрыФО <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Договор"</span><span class="ск">,</span> Объект<span class="ск">.</span>ДоговорКонтрагента<span class="ск">);</span>
                    УстановитьПараметрыФункциональныхОпцийФормы<span class="ск">(</span>ПараметрыФО<span class="ск">);
                КонецПроцедуры</span></span>
    
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> ДоговорКонтрагентаПриИзменении<span class="ск">(</span>Элемент<span class="ск">)</span>
                    ПараметрыФО <span class="ск">= Новый</span> Структура<span class="ск">(</span><span class="серый">"Договор"</span><span class="ск">,</span> Объект<span class="ск">.</span>ДоговорКонтрагента<span class="ск">);</span>
                    УстановитьПараметрыФункциональныхОпцийФормы<span class="ск">(</span>ПараметрыФО<span class="ск">);
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <p>Теперь если в объекте документа при открытии формы выбора справочника выбрать какой то договор и поставить галочку "ВалютныйУчет", то сразу после выбора появится реквизит "Валюта". Ну мы например, работаем всё время в рублях, а тут выбрали договор с иностранцами и включили "Валютный учет", всё, появился реквизит "Валюта", где мы выбираем, например, EUR.</p>
        <p>Ещё Чистов упомянул, что можно эти опции использовать где то в регистре сведений, но примера не показал.</p>
        <p><span class="ск">Ещё подробный пример про параметризуемые функциональные опции показан в разделе "Разработка интерфейсов" в главе 3.11.5</span></p>
    
        <p><b id="roli">Роли</b></p>
    
        <p>Пишу с курса Чистова 8.2. Видео - https://www.youtube.com/watch?v=CpnHPs4sX0I&list=PLkdnTy1CsgR0y5QgkDfsgYJsETriuKK3f&index=17   с 00:37:40</p>
        <p>Роли также влияют на интерфейс пользователя, от них зависит отображение данных. Роли разрешают или запрещают доступ к БД того или иного пользователя.</p>
        <p>Первая роль это администратор, которому доступно почти всё. Добавим новую роль - "АдминистративныеФункции", откроется конструктор роли. Слева вверху есть подменю "Действие", в ней выберем пункт "Установить все права" и ещё внизу поставим галочку "Устанавливать права для новых объектов".</p>
        <p>Ограничение или разрешение производится либо ко всей таблице, либо к её реквизитам по отдельности в окне "Объекты" слева, справа как раз права. Справа в правах "Чтение" от "Просмотр" отличаются тем, что одно из них интерактивное(Просмотр), другое программное(Чтение). Кроме таблиц права настраиваются также ко всей конфигурации. Далее Чистов рассказывает немного про пункты в правах для всей конфигурации.</p>
        <p>далее нет смысла всё записывать, лучше посмотреть видео, также можно посмотреть про роли в курсе Камкова, на временных метках найти про роли и посмотреть.</p>
    </div>







    <div class="command">
        <h3 class="header-style" id="command">Справка по запросам</h3>
    
        <p class="title-size16"><b id="query1">Как в результате запроса сделать, чтобы в отсортированном списке одну нужную мне запись поставить вверху списка или внизу</b></p>
        <p>Для наглядности приведу пример. У нас есть регистр накопления с измерением "СрокГодности", в это измерение пишется из реквизита таб. части "Товары" документа "ПоступлениеТоваров". Это измерение своего рода партия, только вместо ссылки на документ, пишем срок годности товара в виде даты.</p>
        <p>Когда мы проводим документ "ПродажаТоваров", то при списании количества и себестоимости измпользуем партионное списание, а значит и результат запроса отсортирован по полю "СрокГодности", т.е. мы списываем сначала товары, у которых ранний срок годности и по возрастающей. Но у пользователя мы сделали поле в табличной части - "СрокГодности", в котором он может выбрать для товара срок годности на его усмотрение, из тех что имеются в БД для товара. Он выбирает этот срок годности и нужно при проведении списать сначала товар с этим сроком годности, а затем по остальным партиям в порядке возрастания. Как получить такой запрос, чтобы поле "СрокГодности" было отсортированно по возрастанию, но запись со сроком годности выбранной пользователем была вверху, чтобы списать её первой? Это можно сделать так. Добавим в запрос дополнительное поле "СрокГодностиВыбранный", это поле мы возьмём из левой таблицы с полями табличной части документа. Затем в языке запроса используем условие ВЫБОРКА КОНЕЦ:</p>
        <div class="code-style">
            <pre>
                ВЫБРАТЬ
                    ПродажаСкоропортящихсяТоваровТовары.Товар КАК Товар,
                    ПродажаСкоропортящихсяТоваровТовары.СрокГодности КАК СрокГодности,
                    СУММА(ПродажаСкоропортящихсяТоваровТовары.Количество) КАК Количество,
                    СУММА(ПродажаСкоропортящихсяТоваровТовары.Сумма) КАК Сумма
                ПОМЕСТИТЬ ВТ
                ИЗ
                    Документ.ПродажаСкоропортящихсяТоваров.Товары КАК ПродажаСкоропортящихсяТоваровТовары
                ГДЕ
                    ПродажаСкоропортящихсяТоваровТовары.Ссылка = &Ссылка
    
                СГРУППИРОВАТЬ ПО
                    ПродажаСкоропортящихсяТоваровТовары.Товар,
                    ПродажаСкоропортящихсяТоваровТовары.СрокГодности
                ;
    
                ////////////////////////////////////////////////////////////////////////////////
                ВЫБРАТЬ
                    ВТ.Товар КАК Товар,
                    ПРЕДСТАВЛЕНИЕ(ВТ.Товар) КАК ТоварП, 
                    ВТ.СрокГодности КАК СрокГодностиВыбранный,
                    ВТ.Количество КАК Количество,
                    ВЫБОР
                        КОГДА ВТ.СрокГодности = ОстаткиСкоропортящихсяТоваровОстатки.СрокГодности ТОГДА
                            1
                        ИНАЧЕ
                            0
                    КОНЕЦ КАК Поле1,
                    ВТ.Сумма КАК Сумма,
                    ОстаткиСкоропортящихсяТоваровОстатки.СрокГодности КАК СрокГодности,
                    ЕСТЬNULL(ОстаткиСкоропортящихсяТоваровОстатки.КоличествоОстаток, 0) КАК КоличествоОстаток,
                    ЕСТЬNULL(ОстаткиСкоропортящихсяТоваровОстатки.СебестоимостьОстаток, 0) КАК СебестоимостьОстаток
                ИЗ
                    ВТ КАК ВТ
                        ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ОстаткиСкоропортящихсяТоваров.Остатки(
                                &ДатаДокумента,
                                Товар В
                                    (ВЫБРАТЬ
                                        ВТ.Товар КАК Товар
                                    ИЗ
                                        ВТ КАК ВТ)) КАК ОстаткиСкоропортящихсяТоваровОстатки
                        ПО ВТ.Товар = ОстаткиСкоропортящихсяТоваровОстатки.Товар
                УПОРЯДОЧИТЬ ПО 
                    Поле1 УБЫВ,
                    СрокГодности
                ИТОГИ
                    МИНИМУМ(Количество),
                    МИНИМУМ(Сумма),
                    СУММА(КоличествоОстаток)
                ПО
                    Товар
            </pre>
        </div>
        <p>Через условие ВЫБОРКА КОНЕЦ мы указываем, что если сроки равны, то записываем 1 в новое поле с именем Поле1, если нет, то 0. Затем упорядычиваем сначала по Поле1 УБЫВ, а потом и по сроку и получится, что выбранный срок пользователем оказался первым, а ниже уже идут отсортированные по возрастанию:</p>
        <img src="img/1С-1/2023-06-30_15-19-07.png" class="screen" alt="">
    
        <p class="title-size16"><b id="query2">Как получить 2 таблицы с данными в одном запросе</b></p>
        <p>Мы можем в кострукторе запроса сделать 2 пакета с запросом. Например, в одном пакете будет запрос к таблице документа, чтобы выбрать данные из шапки документа, а второй пакет будет с запросом к таблице табличной части этого документа. И получится текст запроса с двумя пакетами запроса:</p>
        <div class="code-style">
            <pre>
                <span class="сс">Запрос <span class="ск">= Новый</span> Запрос<span class="ск">;</span>
                Запрос<span class="ск">.</span>Текст <span class="ск">=</span> 
                    <span class="серый">"ВЫБРАТЬ
                    |	ПродажаТоваровИУслуг.Покупатель КАК Покупатель,
                    |	ПродажаТоваровИУслуг.Склад КАК Склад
                    |ИЗ
                    |	Документ.ПродажаТоваровИУслуг КАК ПродажаТоваровИУслуг
                    |ГДЕ
                    |	ПродажаТоваровИУслуг.Ссылка = &Ссылка
                    |;
                    |
                    |////////////////////////////////////////////////////////////////////////////////
                    |ВЫБРАТЬ
                    |	ПродажаТоваровИУслугТовары.Товар КАК Товар,
                    |	ПродажаТоваровИУслугТовары.Количество КАК Количество,
                    |	ПродажаТоваровИУслугТовары.Цена КАК Цена,
                    |	ПродажаТоваровИУслугТовары.Сумма КАК Сумма
                    |ИЗ
                    |	Документ.ПродажаТоваровИУслуг.Товары КАК ПродажаТоваровИУслугТовары
                    |ГДЕ
                    |	ПродажаТоваровИУслугТовары.Ссылка = &Ссылка"</span><span class="ск">;</span>
    
                Запрос<span class="ск">.</span>УстановитьПараметр<span class="ск">(</span><span class="серый">"Ссылка"</span><span class="ск">,</span> Ссылка<span class="ск">);</span>
                РезультатЗапроса <span class="ск">=</span> Запрос<span class="ск">.</span>ВыполнитьПакет<span class="ск">();</span></span>            
            </pre>
        </div>
        <p>При методе Выполнить() у запроса мы получим только данные последнего запроса в пакете. А при методе ВыполнитьПакет() у нас появляется возможность обращаться как к данным первого запроса, так и к данным второго запроса. Метод ВыполнитьПакет() возвращает массив, в котором в первом элементе будет лежать РезультатЗапроса по первому пакету, а во втором элементе второй результат.</p>
    
        <p class="title-size16"><b id="query3">Как заполнить реквизит "Коментарий" в документах "ПриходнаяНакладная", если в их табличных частях есть определённый товар</b></p>
        <p>Чтобы посмотреть код с таким решением, то в конфе "УчебнаяБаза(Курс Камков - Основные объекты)" есть 3 обработки "ИзменениеДокументовПоступления1-2-3" где опсаны разные способы как это сделать</p>
    
        <p class="title-size16"><b id="query4">Как заполнить реквизит "Коментарий" в документах "ПриходнаяНакладная", если в их табличных частях есть вообще хоть один товар</b></p>
        <p>Для начала нужно решить как написать такой запрос. Описывать запрос не буду, просто опишу решение. Во временную таблицу выбираем все ссылки на документ из таблицы с товарами из табличных частей документа этого вида, в следующем пакете запроса выбираем те ссылки документов из уже таблицы документа этого вида, которые есть во временной таблице. Так мы узнаем в табличных частях каких документов есть хоть один товар. Всё таки напишу запрос:</p>
        <div class="code-style">
            <pre>
                <span class="сс">ВЫБРАТЬ
                    ПоступлениеТоваровТовары.Ссылка КАК Ссылка 
                ПОМЕСТИТЬ ВТ
                ИЗ
                    Документ.ПоступлениеТоваров.Товары КАК ПоступлениеТоваровТовары
                ;
                /////////////////////
                ВЫБРАТЬ
                    ПоступлениеТоваров.Ссылка КАК Ссылка
                ИЗ
                    Документ.ПоступлениеТоваров КАК ПоступлениеТоваров
                ГДЕ
                    ПоступлениеТоваров.Ссылка НЕ В (ВЫБРАТЬ Ссылка ИЗ ВТ)</span>
            </pre>
        </div>
    
    
        <p class="title-size16"><b id="query5">Как пронумеровать записи в запросе</b></p>
        <p>Вот ссылка на статью - https://infostart.ru/1c/articles/1171188/</p>
    </div>









    <div class="command">
        <h3 class="header-style" id="command">Работа с командами</h3>
        <p>Более подробно про произвольные команды написано в разделе "Разработка интерфейса прикладного решения" -> Глава 1.11 Создаём произвольные команды</p>
    
        <p class="title-size16"><b id="command1">В общем о командах</b></p>
        <p><i>Команды</i> в дереве объектов конфигурации расположены в разных местах. Если команда выполняет общие действия, не связанные с конкретными объектами конфигурации, то такие команды вы можете добавлять в ветке Общие - Общие команды. Общие команды могут открыть общие формы, открыть браузер. А если команда связана с определённым объектом конфигурации, то такие команды добавляются в ветку <i>Команды</i>, которая есть у каждого объекта конфигурации.</p>
    
        <p class="title-size16"><b id="command2">Пример. Зададим команду(кнопку) в списке документов вида "ПоступлениеТоваров" для их копирования</b></p>
        <p>Мы хотим, чтобы по нажатию по кнопке у нас создалось автоматом несколько документов на всю следующую неделю. Предположим к нам каждую неделю привозять одни и те же товары в одном и том же количестве и лень заполнять документы. Если вдруг что то поменяется в привозе, то можно вручную подправить созданные документы.</p>
        <p>Итак, добавим новую команду в ветке документа "ПоступлениеТоваров" и назовём её "Заполнить документы". Платформа сразу же откроет модуль команды с обработчиком заготовкой и также откроется палитра свойств. В палитре нужно заполнить два важных свойства команды: <i>Группа</i> и <i>Тип параметра команды</i>.</p>
        <p>Дело в том, что платформа самостоятельно размещает команды в нужных местах интерфейса нашей программы. Чтобы понять, в каком месте нужно отобразить нашу команду, она анализирует именно эти два свойства. Свойство <i>Тип параметра команды</i> определяет, какие данные нужны нашей команде. Платформа поместит нашу команду в те формы, где есть данные этого типа. Например, если команда создаёт копию документа "ПоступлениеТоваров", то ей нужно знать, какой именно документ следует скопировать. То есть ей нужно знать ссылку на конкретный документ. Значит, в этом свойстве мы укажем тип ДокументСсылка.ПоступлениеТоваров. Тогда платформа поместит эту команду в те формы, где есть такие данные: в форму списка документов и в форму документа.</p>
        <p>Почему команде нужно указать это свойство? Потому, что у команды есть обработчик и 1й параметр этого обработчика это массив и когда мы жмём на кнопку, то автоматом в этот массив добавляется ссылка на документ, в котором эта кнопка находится или много ссылок если кнопка в форме списка и выделено несколько документов.</p>
        <p>Если мы нажмём её в форме документа, она скопирует нам этот документ. А если мы нажмём её в форме списка, то она скопирует тот документ, который в данный момент выделен в списке. Вот так это работает.</p>
        <p>Указав тип ДокументСсылка.ПоступлениеТоваров в этом свойстве система сама добавит кнопку на 2 формы документа. Но нам по логике кнопка нужна только в форме списка, потому как нет смысла размещать в форме документа. Нам удобно в форме списка выделить нужные элементы и скопировать. Пока оставим так как есть, уберем кнопку из формы документа чуть позднее.</p>
        <p>А пока узнаем про второе свойство <i>Группа</i>. В этом свойстве указываем место, где будет распологаться кнопка. Вот картинка того, что откроется по кнопке выбора в группе. Под цифрой 1 это расположение для общих команд, т.е. для команд не принадлежащих к конкретной форме, это например, панель команд основного раздела. Оставшиеся пункты это панель навигации и командная панель формы. Нам нужно указать "Командная панель формы.Важное". В панели навигации обычно располагают команды, которые "переносят" пользователя в другую точку программы: открывают ему список других объектов, показывают список вспомогательных данных и так далее. В командной панели обычно размещают команды, которые не меняют положение пользователя в программе, но выполняют какие-то действия с данными.</p>
        <p>Ну а теперь уберем отображение кнопки у формы документа. Для этого откроем форму документа и перейдём на закладку <i>Командный интерфейс</i> и в командной панали в разделе Важное найдём нашу команду и уберем ей видимость сняв галочку.</p>
        <p>Модуль команды, в отличие от других модулей, с которыми вы уже работали, существует и на клиенте, и на сервере. Поэтому в нём для каждой процедуры в отдельности нужно указывать, в каком контексте она будет исполняться указав директиву компиляции: &НаКлиенте, &НаСервере или &НаКлиентеНаСервере. Заготовку обработчик, которую платформа нам создала по умолчанию уже имеет директиву &НаКлиенте. Про директивы мы можем прочитать в синтакс-помощнике в разделе Общее описание встроенного языка - Директивы компиляции.</p>
        <p>Любая команда - это интерактивное действие, которое всегда инициируется пользователем. Это значит, что "начинается" команда на клиенте. Именно поэтому платформа и указала, что обработчик команды должен исполняться на клиенте. Но наша команда должна будет прочитать данные из базы данных и записать в неё новые документы. А с базой данных можно работать только на сервере. Поэтому первое, что нам нужно сделать, это передать исполнение программного кода на сервер. Делается это просто, мы в обработке команды на клиенте вызываем процедуру с директивой на сервере.</p>
        <p>Далее в серверной процедуре нужно написать программу, которая будет копировать выделенные документы.</p>
    
        <p class="title-size16"><b id="command3">Общая команда, которая открывает параметры учёта.</b></p>
        <p>Например, у нас есть константы, которые через функциональные опции включают или выключают разные учёты. Мы объединим эти константы в одно место и место назовём "ПараметрыУчета". Как объединить константы, выберем главный объект "Константы" в контекстном меню есть "Создать форму констант", так как у констант нет своих форм, то создастся общая форма. И общую команду, которую мы создадим и будет открывать эту общую форму "ПараметрыУчета".</p>
        <p>Итак, создадим форму констант, откроется конструктор общих форм, выбираем "Форма констант", жмём далее, выбираем все константы для отображения учёта и готово. Дальше создаём общую команду "ОткрытьПараметрыУчета". В палитре свойств задаём имя и есть поле Группа, которое позволяет задать место, куда будет входить команда. Выбираем панель действий "Сервис". У нас также открылся модуль команды и там уже есть заготовка процедуры "ОбработкаКоманды". В процедуре закоментирован код, который открывает общую форму, это частое действие общей команды, поэтому и вынесен сразу системой такой код. Раскоментируем, потому что мы и будем открывать общую форму "ФормаКонстант", параметры формы пропустим, их не будет, да и остальных аргументов не будет, поэтому уберем их:</p>
        <div class="code-style">
            <pre>
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> ОбработкаКоманды<span class="ск">(</span>ПараметрКоманды<span class="ск">,</span> ПараметрыВыполненияКоманды<span class="ск">)</span>
                    ОткрытьФорму<span class="ск">(</span><span class="серый">"ОбщаяФорма.ФормаКонстант"</span><span class="ск">);
                КонецПроцедуры</span></span>
            </pre>
        </div>
        <p>Добавим общую команду в подсистему, у меня это единственная подсистема Курс. Теперь эту команду мы найдём в меню "Сервис", куда мы её и определяли в поле Группа, нажав на команду откроется форма с теми константами, которые мы в неё поместили. Всё.</p>
        <p>С помощью общих команд можно запускать файлы, производственное оборудование, в общем выполнять какие то ощие действия.</p>
    
        <p class="title-size16"><b id="command4">Сделаем команду печать для документа "ПродажаТоваров" без конструктора.</b></p>
        <p>Пишу по курсу Чистова 8.2</p>
        <p>Когда мы добавим новую команду для документа "ПродажаТоваров", то откроется палитра свойств этой команды, в этой палитре есть свойство Группа, в нём нужно указать где размещать команду. Обычно команд для распечатывания разных документов несколько, поэтому создают меню-группу, в которую мы соберем все команды вместе для данного документа. Для таких целей есть объект "Группа команд" в дереве "Общие", создадим его, назовём "Печать" и разместим эту группу в "командной панели формы" свойства Категории. Это значит что теперь в командных панелях форм появилась группа Печать, пока она естественно не показывается в этих формах, но уже создался в системе такой путь как "Командндная панель формы.Печать".</p>
        <p>Дальше при создании подчинённой команды документа продажи откроется палитра свойств. У свойства Группа  появится тот самый путь "Командная панель формы.Печать", в него и разместим нашу команду. Назовём команду "ПечатьТорг12", синоним - "Печать накладной".</p>
        <p>Затем для свойства "Тип парметра команды" зададим тип ДокументСсылка.ПродажаТоваров. Это свойство указывает тип для первого параметра процедуры ОбработкаКоманды. Когда мы кликнем по кнопке печати в форме документа, то в этот параметр попадёт ссылка на этот документ, а если мы в форме списка нажмём на кнопку печати, то попадёт массив выделенных ссылок документов.</p>
        <p>Значение свойства "Тип параметра документа" говорит также системе, что нужно разместить кнопку именно в формах тех объектов конфигурации, у которых есть хоть один реквизит с таким же типом данных, в нашем случае тип данных - ДокументСсылка.ПродажаТоваров.</p>
        <p>Автоматом при создании команды у нас откроется модуль команды с заготовкой, открывать форму нам не нужно, удалим в заготовке закоментированный код.</p>
        <p><span class="сс">ВНИМАНИЕ!!!</span> Первый параметр процедуры ОбработкаКоманды - ПараметрыКоманды содержит источник, в котром находится эта команда, обычно это ссылка на объект данных справочника или документа или  массив с ссылкой, если в поле "Режим использования параметра" выбрано "Множественный". Да это тот самый массив со ссылками из формы списка. Почему то раньше где то встречал, что если создать команду в форме списка, то автоматом в ПарметрыКоманды попадал массив с ссылками выделенных в списке, а тут нужно именно включить этот множественный выбор, иначе даже в списке при выделении нескольких объектов попадёт в параметр только первая ссылка. Видимо система сама проставляет значение "Множественный" когда мы делаем печать через конструктор.</p>
        <p>Рядом создадим ещё одну процедуру "ПечатьТорг12", которая будет выполняться на сервере и запрашивать данные из БД и размещать их в табличном документе. Чтобы вручную всё не писать в конструкторе запроса поставим галочку "Выводить в табличный документ".</p>
        <p>Код модуля команды:</p>
        <div class="code-style">
            <pre>
                <span class="сс"><span class="ск">&НаКлиенте
                Процедура</span> ОбработкаКоманды<span class="ск">(</span>ПараметрКоманды<span class="ск">,</span> ПараметрыВыполненияКоманды<span class="ск">)</span>
                    ТабДок <span class="ск">= Новый</span> ТабличныйДокумент<span class="ск">;</span>
                    ПечатьТорг12<span class="ск">(</span>ПараметрКоманды<span class="ск">,</span> ТабДок<span class="ск">);</span>
                    ТабДок<span class="ск">.</span>Показать<span class="ск">();		
                КонецПроцедуры 
    
                &НаСервере
                Процедура</span> ПечатьТорг12<span class="ск">(</span>ПараметрКоманды<span class="ск">,</span> ТабДок<span class="ск">)</span>
                    Макет <span class="ск">=</span> Документы<span class="ск">.</span>ПродажаТоваров<span class="ск">.</span>ПолучитьМакет<span class="ск">(</span><span class="серый">"МакетТорг12"</span><span class="ск">);</span>
                    Запрос <span class="ск">= Новый</span> Запрос<span class="ск">;</span>
                    Запрос<span class="ск">.</span>Текст <span class="ск">=</span> 
                        <span class="серый">"ВЫБРАТЬ
                        |	ПродажаТоваровТовары.Номенклатура КАК Номенклатура,
                        |	ПРЕДСТАВЛЕНИЕ(ПродажаТоваровТовары.Номенклатура) КАК НоменклатураПредставление,
                        |	ПродажаТоваровТовары.Цена КАК Цена,
                        |	ПродажаТоваровТовары.Количество КАК Количество,
                        |	ПродажаТоваровТовары.Всего КАК Всего
                        |ИЗ
                        |	Документ.ПродажаТоваров.Товары КАК ПродажаТоваровТовары
                        |ГДЕ
                        |	ПродажаТоваровТовары.Ссылка = &Ссылка"</span><span class="ск">;</span>
                    
                    <span class="з">//если мы кликаем на кнопку "ПечатьТорг12" из формы документа, то в параметре
                    //ПараметрКоманды лежит ссылка на этот объект документа</span>
                    Запрос<span class="ск">.</span>УстановитьПараметр<span class="ск">(</span><span class="серый">"Ссылка"</span><span class="ск">,</span> ПараметрКоманды<span class="ск">);</span> 
                    РезультатЗапроса <span class="ск">=</span> Запрос<span class="ск">.</span>Выполнить<span class="ск">();</span>
                    
                    ОбластьЗаголовок <span class="ск">=</span> Макет<span class="ск">.</span>ПолучитьОбласть<span class="ск">(</span><span class="серый">"Заголовок"</span><span class="ск">);</span>
                    ОбластьПодвал <span class="ск">=</span> Макет<span class="ск">.</span>ПолучитьОбласть<span class="ск">(</span><span class="серый">"Подвал"</span><span class="ск">);</span>
                    ОбластьШапкаТаблицы <span class="ск">=</span> Макет<span class="ск">.</span>ПолучитьОбласть<span class="ск">(</span><span class="серый">"ШапкаТаблицы"</span><span class="ск">);</span>
                    ОбластьПодвалТаблицы <span class="ск">=</span> Макет<span class="ск">.</span>ПолучитьОбласть<span class="ск">(</span><span class="серый">"ПодвалТаблицы"</span><span class="ск">);</span>
                    ОбластьДетальныхЗаписей <span class="ск">=</span> Макет<span class="ск">.</span>ПолучитьОбласть<span class="ск">(</span><span class="серый">"Детали"</span><span class="ск">);</span>
                    
                    ТабДок<span class="ск">.</span>Очистить<span class="ск">();</span>
                    ТабДок<span class="ск">.</span>Вывести<span class="ск">(</span>ОбластьЗаголовок<span class="ск">);</span>
                    ТабДок<span class="ск">.</span>Вывести<span class="ск">(</span>ОбластьШапкаТаблицы<span class="ск">);</span>
                    ТабДок<span class="ск">.</span>НачатьАвтогруппировкуСтрок<span class="ск">();</span>
                    
                    ВыборкаДетальныеЗаписи <span class="ск">=</span> РезультатЗапроса<span class="ск">.</span>Выбрать<span class="ск">();</span>
                    
                    <span class="ск">Пока</span> ВыборкаДетальныеЗаписи<span class="ск">.</span>Следующий<span class="ск">() Цикл</span>
                        ОбластьДетальныхЗаписей<span class="ск">.</span>Параметры<span class="ск">.</span>Заполнить<span class="ск">(</span>ВыборкаДетальныеЗаписи<span class="ск">);</span>
                        ТабДок<span class="ск">.</span>Вывести<span class="ск">(</span>ОбластьДетальныхЗаписей<span class="ск">,</span> ВыборкаДетальныеЗаписи<span class="ск">.</span>Уровень<span class="ск">());
                    КонецЦикла;</span>
                    
                    ТабДок<span class="ск">.</span>ЗакончитьАвтогруппировкуСтрок<span class="ск">();</span>
                    ТабДок<span class="ск">.</span>Вывести<span class="ск">(</span>ОбластьПодвалТаблицы<span class="ск">);</span>
                    ТабДок<span class="ск">.</span>Вывести<span class="ск">(</span>ОбластьПодвал<span class="ск">);
                КонецПроцедуры</span></span>
            </pre>
        </div>
    </div>

    





    <div class="obj-data">
        <h3 class="header-style" id="obj-data">Объектные и не объектные данные в БД</h3>
        <p>Все данные, которые 1С:Предприятие сохраняет в базе данных, можно разделить на две большие группы: <i>объектные данные</i> и <i>не объектные данные</i>. Разницу между ними легко будет понять, если взять пример с комнатами, в которых находятся люди. Каждая комната это объект конфигурации(Справочник, Документ), а люди в комнатах это объекты данных(Элемент справочника или объект документа). Так вот. Бывают ситуации, когда для вас важно, какие именно это люди. Например,вы позвали гостей на день рождения. В этом случае для вас важно, чтобы к вам в гости пришёл именно Серёжа Соколов, который учится или работает вместе с вами. А не какой-то его тёзка или однофамилец. Который, может быть, и одет так же, и внешне на негопохож. В этом случае ваши гости являются объектными данными. Каждый из них уникалени важен сам по себе. Даже если он оделся в другую одежду и сильно вырос за то время,что вы его не видели. Всё равно он остался Серёжей Соколовым, а не стал кем-то другим.</p>
        <p>Другая ситуация. Вы заходите в маршрутку или автобус, и вам нужно понять, много там пассажиров или нет. Поедете вы на этом автобусе или подождёте следующего. В этом случае вам совершенно не важно, какие именно люди находятся в автобусе, как их зовут. Не важно, кто именно стоит в проходе с большими сумками, Сергей Николаевич или Марья Ивановна. Важно только то, что проход занят и дальше пройти нельзя.В этом случае пассажиры автобуса являются не объектными данными. Их уникаль-ность не имеет для вас никакого значения. Важно лишь, что они есть и что они занимают место в автобусе.</p>
        <p>Какие данные в 1С:Предприятии объектные, а какие не объектные, понять очень просто. Это зависит от того объекта конфигурации, которому они принадлежат.Если это справочник или документ, то в них всегда хранятся только объектные данные.Если это регистр сведений или регистр накопления, то в них бывают только не объектные данные.</p>
        <p>Кроме справочников и документов для описания объектных данных используются планы видов характеристик, планы счетов, планы видов расчёта, бизнес-процессы, задачи, планы обмена. Для описания не объектных данных кроме перечисленных регистров используются регистры бухгалтерии, регистры расчёта, последовательности и перерасчёты регистров расчёта.
        </p>
    </div>








    <div class="14">
        <h3 class="header-style" id="14">Объект встроенного языка УправляемаяФорма</h3>
        <p>Поскольку мы находимся в модуле формы, то в нём доступны все свойства и методы объекта встроенного языка <b>УправляемаяФорма</b>. Поэтому мы можем обращаться к ним напрямую. Чтобы получить коллекцию элементов формы, используем одно из свойств объекта УправляемаяФорма – свойство <b>Элементы</b>. Свойство Элементы содержит коллекцию всех элементов управляемой формы для прямого доступа вне зависимости от иерархии. Доступно только для чтения. Коллекция имеет тип - ВсеЭлементыФормы, содержащая все элементы формы. То есть это программный аналог корня дерева элементов формы. Каждый элемент формы можно получить, указав его имя в качестве свойства этого объекта, то есть через точку от него.</p>
        <p>Назначение обработчика для формы и её элементов может выполняться интерактивно, при работе с формой в конфигураторе, или программно, используя методы формы и ее элементов – <b>УстановитьДействие()</b>.</p>
        <p>Помимо того что форма внутри своего модуля предоставляет доступ к различным частям конфигурации, она также доступна из других частей конфигурации как программный объект. Например, если в модуле формы ФормаДокумента(имя созданной формы документа) документа ПриходнаяНакладная описана экспортируемая процедура ИмяПроцедуры(), то мы можем вызвать эту процедуру из других частей конфигурации. Ну например, откроем модуль управляемого приложения и там напишем вызов этой процедуры:</p>
        <p>Помимо описания переменных и основной программы, модуль формы может содержать описание процедур – обработчиков событий, связанных с формой. Основными событиями, которые могут обрабатываться в модуле формы, являются события открытия и закрытия окна формы.</p>
        <div class="code-style">
            <pre>
                //в переменную Форма вернётся объект УправляемаяФорма
                //и у этого объекта мы можем вызвать нашу пользовательскую процедуру, описанную в модуле формы
                <span class="сс"><b>Форма = ПолучитьФорму("Документ.ПриходнаяНакладная.Форма.ФормаДокумента");
                Форма.ИмяПроцедуры();
                </b></span>
            </pre>
        </div>
        <p>В примере ниже мы выбираем из коллекции элементов(сво-во Элементы объекта УправляемаяФорма) табличную часть и считываем из неё данные для работы с ними.</p>
    
        <p class="title-size16"><b id="14a">Получение данных полей табличной части из элементов формы документа</b></p>
        <p>Табличная часть документа представляет собой объект встроенного языка <b>ТаблицаФормы</b>. Получить ту строку, в которой в настоящее время осуществляется редактирование, можно при помощи свойства программного объекта ТаблицаФормы – <b>ТекущиеДанные</b>.</p>
        <p>Допустим создали объект конфигурации документ ПоступлениеТоваров. В пользовательской части мы хотели бы создать документ пришедшего товара, откуда и куда, его стоимость и количество, а также общая сумма. Таких полей у нас в форме документа пока нет. Идё во вкладку "Данные" и создадим 2 реквизита - Фирма(откуда) и Подразделение(Куда), ниже реквизитов добавим табличную часть и в ней добавим также поля - Товар, Цена, Количнство, Сумма. Всё, идём в пользовательскую часть и заполним первый товар. При заполнении табличной части мы указали Цена и Количество, но при заполнении Сумма нужно самому посчитать общую сумму товаров, т.е. цену нужно умножить на количество. Мы хотим автоматизировать этот участок, чтобы при изменении либо Цены, либо Количества Сумма менялась и подсчитывалась автоматом. Для этого идё в форму редактирования документа(не в форму списка документа) и во вкладке "Элементы" Находим нашу табличную часть, которая называется "ПереченьТоваров" и в ней находим элемент ПереченьТоваровКоличество(название поля табличной части автоматом добавляется именем табличной части), заходим в свойства этого элемента и в самом низу будут события элемента. Надо найти событие "ПриИзменении" и жмём лупу у него, откроется модуль формы.В процедуре на клиенте нужно получить данные поля Цена и Количества, посчитать их и записать в поле Сумма. Вот 2 способа найти эти данные:</p>
        <div class="code-style">
            <pre>
                <span class="ск">&НаКлиенте</span>
                <span class="сс"><b>Процедура ПереченьТоваровКоличествоПриИзменении(Элемент)
                    <span class="з"><b>//первый способ получение данных через элементы формы
                    //в элементах есть табличная часть ПереченьТоваров, в этой таблице есть строки
                    //с данными товара, при срабатывании события "ПриИзменении" мы будем находиться
                    //на одной из этих строк, а значит нам надо получить данные текущей строки
                    //и для этого есть свойство ТекущиеДанные
                    //в итоге возвращается объект, который имеет тип ДанныеФормыЭлементКоллекции
                    //Элементы.Материалы вернёт объект ТаблицаФормы, у которой вызываем свойство Текущие данные
                    //какие ещё есть свойства и методы у ТаблицаФормы смотрим с помошнике</b></span>
                    СтрокаТабЧасти = Элементы.ПереченьТоваров.ТекущиеДанные;
                    СтрокаТабЧасти.Сумма = СтрокаТабЧасти.Цена * СтрокаТабЧасти.Количество;
                    
                    
                    <span class="з"><b>//второй способ через реквизиты	
                    //Объект.ПереченьТоваров[0] также возвращает ДанныеФормыЭлементКоллекции
                    //ВАЖНО!!! Этот способ не совсем верный. Как оказалось при добавлении в табличную
                    //часть ещё одного товара и заполнении Цены и Количества Сумма уже автоматом не 
                    //считается, потому как я получаю только первую строку из таблицы и считываю только в ней
                    //можно конечно сделать цикл и пробежать по всем элементам и посчтитать
                    //Для каждого СтрокаТабЧасти Из Объект.ПереченьТоваров Цикл
                    //    СтрокаТабЧасти.Сумма = СтрокаТабЧасти.Количество * СтрокаТабЧасти.Цена;	
                    //КонецЦикла;
                    //Кстати у табличной части есть метод <span class="сс">Итог(колонка)</span>, который подсчитывает сумму значений переданной колонки.
                    //Например, есть у нас колонка Количество или Цена и передав имя колонки нам метод сам подсчитает их сумму</b></span>
                КонецПроцедуры</b></span>
            </pre>
        </div>
        <p>Также не забываем повесить на элемент таблицы ПереченьТоваровЦена обработчик, который выше в процедуре по событию "ПриИзменении". Согласно стандартам 1С, то на каждое событие ннужно вешать свой обработчик, поэтому для поля Цена повесим также отдельный обработчик, но внутри у этой процедуры будет тоже что и для Количества.</p>
    
        <p class="title-size16"><b id="14b">Выносим процедуру подсчёта суммы в Общие Модули</b></p>
        <p>Так как такая процедура, подсчитывающая сумму может понадобиться не только для документа ПоступлениеТоваров, но также и для других объектов, то лучше всего вынести эту процедуру в Общие Модули.</p>
        <p>Зайдём в Общие Модули и добавим Общий Модуль, дадим имя ему "РаботаСДокументами", поставим галочку "Клиент(управляемое приложени)", а с "Сервер" галочку снимем. Это означает, что объекты этого модуля будут собраны в контексте тонкого клиента и веб-клиента(что это значит, пока не знаю, из учебника предложение взял). Напишем нашу процедуру:</p>
        <div class="code-style">
            <pre>
                <span class="сс"><b>
                    Процедура РассчитатьСумму(СтрокаТабЧасти) Экспорт
                        СтрокаТабЧасти.Сумма = СтрокаТабЧасти.Количество * СтрокаТабЧасти.Цена;
                    КонецПроцедуры
                </b></span>
            </pre>
        </div>
        <p>Теперь перепишем нашу процедуру в форме документа:</p>
        <div class="code-style">
            <pre>
                <span class="сс"><b>
                    &НаКлиенте
                    Процедура ПереченьТоваровКоличествоПриИзменении(Элемент)
                        СтрокаТабЧасти = Элементы.Материалы.ТекущиеДанные;
                        РаботаСДокументами.РассчитатьСумму(СтрокаТабЧасти);
                    КонецПроцедуры
    
                    &НаКлиенте
                    Процедура ПереченьТоваровЦенаПриИзменении(Элемент)
                        СтрокаТабЧасти = Элементы.Материалы.ТекущиеДанные;
                        РаботаСДокументами.РассчитатьСумму(СтрокаТабЧасти);
                    КонецПроцедуры
    
                </b></span>
            </pre>
        </div>
    
        <p class="title-size16"><b id="14c">Свойства и методы управляемой формы</b></p>
        <div class="code-style">
            <pre>
                <span class="з">//делает доступным или нет поле Контрагент</span>
                <span class="vue0b"><b>Элементы.Контрагент.Доступность = Истина</b></span>
    
                <span class="з">//делает видимым или нет поле Контрагент</span>
                <span class="vue0b"><b>Элементы.Контрагент.Видимость = Истина</b></span>
            </pre>
        </div>
    </div>








    <div class="15">
        <h3 class="header-style" id="15">Модули</h3>
        <p class="title-size16"><b id="gc">Глобальный контекст</b></p>
        <p>Глобальный контекст это набор свойств, процедур и функций, которые доступны в любых модулях конфигурации. Какие то наборы доступны на клиенте, какие то на сервере, а какие то и там и там. На сервере, например, доступны такие свойства как Справочники, Документы, РегистрыНакопления и т.д. Эти свойства возвращают объект, который сам по себе практически никогда не используется. Он содержит в себе коллекцию менеджеров, управляющих конкретными справочниками, документами и так далее.</p>
    
        <p>В конфигурации существуют различные виды модулей. Они могут принадлежать некоторым объектам конфигурации (например, формам), а могут существовать сами по себе (принадлежать всей конфигурации в целом). Текст программы, содержащийся в модулях, будет использоваться платформой в заранее известные моменты работы системы «1С:Предприятие»</p>
    
        <p class="title-size16"><b id="15a">Модуль управляемого приложения.</b></p>
        <p>Модуль управляемого приложения выполняется при начале и окончании работы системы «1С:Предприятие» в режимах тонкого клиента и веб-клиента.</p>
        <p>В нем возможно объявление переменных, а также объявление и описание процедур и функций, которые будут доступны в любом модуле конфигурации (кроме модуля внешнего соединения). Их доступность также обеспечивается для неглобальных общих модулей с установленным свойством Клиент (управляемое приложение). В контексте модуля управляемого приложения доступны экспортируемые процедуры и функции общих модулей. В контексте модуля управляемого приложения доступны экспортируемые процедуры и функции общих модулей.</p>
        <p>Также модуль управляемого приложения всегда исполняется на клиенте(в контексте клиента)</p>
        <p>В модуле приложения нет свойства "ЭтотОбъект". "Дело в том, что у глобального контекста нет свойства, позволяющего сослаться на него самого (ЭтотОбъект). А значит процедуру, обрабатывающую оповещение, нельзя разместить тут же, в модуле управляемого приложения. Её можно разместить, например, в каком-нибудь общем модуле. Эти действия вам нужно будет выполнить вручную"- из форума.</p>
    
        <p class="title-size16"><b id="15b">Общие модули.</b></p>
        <p>В общих модулях хранятся процедуры и функции, которые вызываются из других модулей системы. Сам по себе общий модуль не исполняется. Исполняются отдельные его процедуры/ функции в момент их вызова из других модулей. </p>
        <p>Общие модули не существуют в конфигурации заранее. Мы их создаём сами. Столько, сколько нам нужно. Общие модули доступны из всех других модулей конфигурации. В общих модулях мы можем описывать собственные алгоритмы, которые мы используем в разных местах конфигурации. Общему модулю можно указать, где он будет исполняться: на клиенте или на сервере. Поэтому ещё одно назначение общих модулей заключается в том, что именно с их помощью вы можете перейти на сервер. Например, чтобы получить какие-то данные из базы данных.</p>
        <p>После добавления своего общего модуля мы хотим, чтобы он исполнялся на сервере, значит в палитре свойств нужно поставить галочку "Сервер". Также если нам нужно вызвать процедуру общего модуля из клиентского модуля, например, модуля управляемого приложения, то нужно ещё поставить галочку "Вызов сервера" в свойствах общего модуля(ЭТО ВАЖНО, иначе будет ошибка и мы не сможем вызвать процедуру из клиентского модуля). Для процедур общего модуля нужно указать слово <i>Экспорт</i>. Ключевое слово Экспорт позволяет расширить область видимости этой процедуры. Без этого слова процедура видна только в пределах этого модуля. А с этим словом процедура станет видна и из других модулей нашей конфигурации.</p>
        <p>Чтобы вызвать из клиентского модуля приложения процедуру из общего модуля нужно указать имя общего модуля, затем через точку имя процедуры.</p>
        <p>Вот пример работы с общим модулем - <a href="#konst2">сюда</a>.</p>
    
        <p class="title-size16"><b id="15c">Модуль объекта. Что такое ДокументМенеджер и ДокументОбъект</b></p>
        <p>Модули всех объектов существуют только на сервере. Поэтому в них можно использовать только те процедуры, функции и объекты встроенного языка, которые доступны в контексте сервера.</p>
        <p>Модуль объекта собирается и исполняется тогда, когда программно создается элемент справочника или документа средствами встроенного языка, например, методами <span class="сс"><b>СоздатьЭлемент()</b></span> менеджера справочника или <span class="сс"><b>СоздатьДокумент()</b></span> менеджера документа, либо когда пользователь создает новый элемент справочника или документа при нажатии на кнопку Создать в пользовательской части. Также модуль исполняется при открытии формы уже созданного документа, пометке/снятии документа на удаление в форме списка документа.</p>
        <p>При записи измененных данных объекта в базу данных вызываются различные обработчики событий, которые располагаются в модуле объекта. </p>
        <p>Также в модуле объекта документа мы можем просто описывать свои процедуры и функции. Указав этим процедурам ключевое слово Экспорт, эти процедуры становятся методами данного документа, который и вызвал этот модуль. Пока я понял это так, если не прав перепишу. Чтобы вызывать эти процедуры и функции из модуля, ну например, из формы документа, нам нужен сам документ объект. Как его получить в форме? Есть метод, который позволяет это сделать. Этому методу нужно передать в строке реквизит формы - Объект. Если в форме во вкладке реквизиты посмотреть тип реквизита Объект(справа написан), то там в скобках написано, что это ДокументОбъект.&lt;ИмяДокумента>, но это не так. На самом деле тип у этого реквизита - ДанныеФормыСтруктура. Так вот мы с помощью этого метода можем перевести этот реквизит Объект в настоящий тип ДокументОбъект:</p>
        <div class="code-style">
            <pre>
                <span class="з">//переводим ревизит в другой тип</span>
                <span class="сс">ДокументОбъект = РеквизитФормыВЗначение("Объект");
    
                <span class="з">//затем вызываем нашу процедуру из модуля объекта
                //которая изменяет данные и записываем их в БД</span>
                ДокументОбъект.ЗаполнитьЦеныТоваровПоПоставщику();
    
                <span class="з">//мы изменили табличную часть документа на сервере
                //и записали новые данные в таблицу
                //и нам нужно вернуть изменёные данные обратно на форму
                //для этого на сервере переводим реквизит Объект
                //назад в тип понятный форме(ДанныеФормыСтруктура) и возвращаем его форме с новыми данными</span>
                ЗначениеВРеквизитФормы(ДокументОбъект, "Объект");</span>
            </pre>
        </div>
        <p>Когда ещё появляется ДокументОбъект? Вроде на первый мой взгляд казалось, что можно получить ДокументОбъект через Документы.&lt;ИмяДокумента>, но возвращается объект типа ДокументМенеджер. Что такое ДокументМенеджер? Описываю как я пока понимаю. Вот создали мы новый объект конфигурации - документ "ПоступлениеТоваров", мы создали, если можно так выразиться, оболочку, которая называется ДокументМенеджер. Эта оболочка содержит свойства и методы для управления внутри себя объектами данных документа этого вида. Можно сказать, что ДокументМенеджер это таблица в целом, а документ объекты это записи(строки) в этой таблице. Отсюда вывод, что можно создать программно ДокументОбъект через встроенный метод ДокументМенеджера:</p>
        <div class="code-style">
            <pre>
                <span class="з">//этот ДокументОбъект, в отличии от примера выше, пустой и его можно заполнять</span>
                <span class="сс">ДокументОбъект = Документы.ПоступлениеТоваров.СоздатьДокумент();
                ДокументОбъект.Дата = ТекущаяДата();
                ДокументОбъект.Номер = "000000001";
                и т.д.
                ДокументОбъект.ЗаполнитьЦеныТоваровПоПоставщику();
                ДокументОбъект.Записать();  - если хотим просто записать в базу
                ДокументОбъект.Движения...;  -  если хотим начать записывать в регистр</span>
            </pre>
        </div>
        <p>Чтобы открыть модуль объекта, нужно в окне редактирования объекта конфигурации перейти на закладку Прочее и нажать кнопку Модуль объекта. Или, выделив нужный объект в дереве объектов конфигурации, вызвать из контекстного меню команду Открыть модуль объекта.</p>
    
        <p class="title-size16"><b id="15d">Модули форм.</b></p>
        <p>Каждая форма, определенная в конфигурации, имеет свой собственный модуль. Этот модуль исполняется при создании объекта от класса <i style="text-decoration:underline;">ФормаКлиентскогоПриложения</i> встроенного языка. Этот объект создается системой в режиме 1С:Предприятие в тот момент, когда мы программно (методами  <span class="сс"><b>ПолучитьФорму()</b></span> или <span class="сс"><b>ОткрытьФорму()</b></span>) или интерактивно открываем форму некоторого элемента.</p>
    
        <p class="title-size16"><b id="15e">Модуль сеанса</b>.</p>
        <p>Модулем сеанса называется модуль, который автоматически выполняется при старте системы «1С:Предприятие» в момент загрузки конфигурации. Модуль сеанса предназначен для инициализации параметров сеанса и отработки действий, связанных с сеансом работы. Модуль сеанса не содержит экспортируемых процедур и функций и может использовать процедуры из общих модулей конфигурации.</p>
    
        <p class="title-size16"><b id="15f">Модуль внешнего соединения</b></p>
        <p>Предназначен для размещения в нем текстов функций и процедур, которые могут вызываться в сессии внешнего соединения.</p>
    
        <p class="title-size16"><b id="15g">Модуль менеджера</b></p>
        <p>В этом модуле содержатся вспомогательные процедуры и функции.</p>
        <p> Для каждого прикладного объекта существует менеджер, предназначенный для управления этим объектом как объектом конфигурации. С помощью менеджера можно создавать объекты, работать с формами и макетами. Модуль менеджера позволяет расширить функциональность менеджеров, предоставляемых системой, за счет написания процедур и функций на встроенном языке.</p>
        <p>Фактически это позволяет описать собственные методы для объекта конфигурации (например, справочника), которые относятся не к конкретному экземпляру объекта базы данных, а к самому объекту конфигурации. Например, в модуле менеджера можно задать произвольное представление объекта в интерфейсе «1С:Предприятия».</p>
        <p>Открыть этот модуль можно там же где и модуль объекта - Прочее - Модуль менеджера.</p>
        <p>Тут ещё немного объясняется про модуль менеджера, прочитать там надо всё, чтобы понять. <a href="#21">Тут</a>.</p>
    
        <p class="title-size16"><b id="15h">Модуль команды</b>.</p>
        <p>Модуль команды, в отличие от других модулей, существует и на клиенте, и на сервере. Поэтому в нём для каждой процедуры в отдельности нужно указывать, в каком контексте она будет исполняться.</p>
        <p>Как в самой конфигурации, так и у многих прикладных объектов, могут существовать подчиненные объекты конфигурации – Команды. У каждой команды существует модуль команды, в котором можно описать предопределенную процедуру <span class="сс"><b>ОбработкаКоманды()</b></span> для выполнения этой команды. Чтобы открыть модуль команды, подчиненной некоторому объекту конфигурации, нужно в окне редактирования объекта конфигурации перейти на закладку Команды и дважды щелкнуть мышью на нужной команде. Или, выделив нужную команду в дереве объектов конфигурации, вызвать из контекстного меню команду Добавить.</p>
        <p>Если создать объект(кнопку) объекта конфигурации Команды у справочника Номенклатура и назвать его, например, Печать, то для этой команды есть событие "ОбработкаКоманды" и одноимённый обработчик, который мы можем описать в модуле этой команды. У этого обработчика по умолчанию есть 2 параметра - "ПараметрыКоманды" и "ПараметрыВыполненияКоманды". 2й параметр я пока не знаю, что там, а вот 1й парамет это массив, в который попадают ссылки. Например, открыли мы форму элемента справочника и там уже есть команда Печать, нажимаем на неё и срабатывает наш обработчик и в параметр "ПараметрыКоманды" в массив попадает ссылка на этот элемент справочника. Когда мы откроем форму списка этого справочника и выделим несколько элементов справочника в списке и нажмём Печать, то в параметр "ПараметрыКоманды" попадут все выделенные ссылки.</p>
    </div>








    <div class="17">
        <h3 class="header-style" id="17">Анализ кода с помощью синтакс-помощника</h3>
        <p>На странице 177 учебника Хрусталёвой есть описание того, как если бы мы увидели незнакомый код и как в нём разобраться с помощью синтакс помошника</p>
    </div>







    <div class="18">
        <h3 class="header-style" id="18">Анализ кода с помощью отладчика</h3>
        <p>В том же учебнике, страница 192</p>
    </div>







    <div class="copy-base">
        <h3 class="header-style" id="copy-base">Как сделать копию базы 1с(бекап). Два способа. Как создать новую базу 1с.</h3>
        <p>В этом видео копии - https://www.youtube.com/watch?v=Bqw33dI3i0k</p>
        <p>В этом новая - https://www.youtube.com/watch?v=TxRgBzjENnU</p>
    </div>







    <div class="24">
        <h3 class="header-style" id="24">Директивы &НаСервере, &НаСервереБезКонтекста</h3>
        <p>Когда мы вызываем процедуру с директивой &НаСервере, то на сервер система сама передаёт все данные формы. На сервере будут доступны свойства и методы объектов ЭтаФорма, Элементы и основного реквизита формы(Список, Объект, НаборКонстант и т.д.), на сервере операции применятся если нужно и форма вернётся уже обновлённой.</p>
        <p>Чтобы в синтакс помошнике отображать только те объекты, которые рабаотаеют на сервере или на клиенте можно нажать на "гаечный ключ" по середине в помошнике, либо Сервис - Параметры - Справка.</p>
        <p>Про директивы мы можем прочитать в синтакс-помощнике в разделе Общее описание встроенного языка - Директивы компиляции.</p>
    </div>







    <div class="how">
        <h3 class="header-style" id="how">Заметки</h3>
        <p><b id="how1">Как добавлять и удалять строки таблицы формы, которая отображает таблицу значений</b></p>
        <p>Эта задача отняла много времени, при добавлении(копировании) строки таблицы формы, которая содержала одно поле "Ссылка" с типом ДокументСсылка.ПродажаТоваров, нужно было скопировать объект базы данных и отобразить новый объект в таблице формы. Всё нормально добавлялось и удалялось, но после повторного добавления и при попытке удалить добавленный объект, не правильно получал идентификатор строки. В общем код есть в обработке "Копирование документа" в базе Камкова "Основные объекты".</p>
    </div>

</div>
