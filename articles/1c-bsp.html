<div class="wrap">
   
    <h2 class="header-style">БСП</h2>

    <ul class="list">
        <li><a href="#1">Начальная информация</a>
            <ul class="list2">
                <li><a href="#1.1">Какие есть подсистемы БСП</a></li>
                <li><a href="#1.2">10 функций БСП, которые нужно знать как мининмум</a></li>
                <li><a href="#1.3"></a></li>
                <li><a href="#1.4"></a></li>
            </ul>
        </li>
        <li><a href="#2">Подсистема "Дополнительные отчеты и обработки"</a>
            <ul class="list2">
                <li><b>На словах:</b></li>
                <li><a href="#2.1">Последовательность создания внешней обработки или отчёта для последующего добавления в типовую. Правила добавления.</a></li>
                <li><a href="#2.2">Виды обработок</a></li>
                <li><a href="#2.3">Далее</a></li>
                <li><a href="#2.4">Рассмотрим более подробно ключи структуры "ПараметрыРегистрации"</a>
                    <ul class="list2">
                        <li><a href="#2.4.1">Вид</a></li>
                        <li><a href="#2.4.2">Команды</a></li>
                        <li><a href="#2.4.3">Назначение</a></li>
                    </ul>
                </li>
                <li><a href="#2.5">На что влияет тип команды и вид обработки</a></li>
                <li><a href="#2.6">Заготовки дополнительных отчётов и обработок. Описал немного временные метки из видео, что рассказывал Иван.</a></li>
                
                <li><b>На деле: доп. обработки и отчёты лежат в папке на компе(в обработках в тренировках от ironskills)</b></li>
                <li><a href="#2.7">Создаём обработку для выгрузки данных справочника "Контрагенты" в файл JSON</a></li>
                <li><a href="#2.8">Создаём отчёт, отображающий контактные данные контрагентов в виде пересечённой таблицы</a></li>
                <li><a href="#2.9">В справочник "Контрагенты" добавить кнопку для заполнения реквизитов по ИНН</a></li>
                <li><a href="#2.10">В документе "Заказ поставщика" сделать расчёт скидок в табличной части по следующему алгоритму: если кол-во товара больше 50, скидка 10%</a></li>
                <li><a href="#2.11">Добавить печатную форму "Гарантийное письмо" для документа "Заказ покупателя"</a></li>
                <li><a href="#2.12">Добавить печатную форму "Гарантийное письмо" для документа "заказ покупателя" с выводом в формат Open Office XML(MS Word)</a></li>
                <li><a href="#2.13">Воплотить возможность создавать на основании документа "Заказ покупателя" документы "Счет на оплату" с разделением на товары и услуги. Если в заказе покупателя одновременно и товары и услуги, то нужно создавать 2 счёта: один на товар и один на услуги</a></li>
                <li><a href="#2.14">Как создать регламентное задание с помощью дополнительной обработки</a></li>
                <li><a href="#2.15"><span class="светло_красный">Как отлаживать код из внешней обработки при вот таком способе добавления к типовой</span></a></li>
                <li><a href=""></a></li>
            </ul>
        </li>
        <li><a href="#3">Подсистема "Настройка пользователей и прав"</a></li>
        <li><a href="#4">Подсистема "Работа с файлами"</a></li>
    </ul>



    <div class="1">
        <p class="title-size16"><b id="1">Начальная информация</b></p>
        

        <p class="title-size16"><b id="1.1">Какие есть подсистемы БСП</b></p>
        <p>Подсистемы есть разные, перечислю пока некоторые, по ходу буду добавлять о них данные:</p>
        <ul class="list">
            <li><b>Настройки программы</b> - эта подсистема содержит обработку "ПанельАдминистрированияБСП", у которой с десяток разных форм, на которых мы и настраиваем другие подсистемы БСП. Например есть форма "ПечатныеФормыОтчетыИОбработки" в "НСИ и администрировании", на этой форме можно включить подсистему "Дополнительные обработки и отчеты", чтобы появилась возможность дорабатывать типовое решение с помощью своих отчетов, обработок, печатных форм и т.д.:
                <img src="img/1С-БСП/2025-08-06_17-31-02.png" class="screen" alt=""><br>
                Также у неё есть форма "Обслуживание", которая так и видна в "НСИ и администрировании", в этой форме можно использовать регламентные задания, удаление помеченных она удаление объектов, кстати тут же есть и журнал регистрации и многое другое:
                <img src="img/1С-БСП/2025-08-06_17-36-11.png" class="screen" alt=""><br>
                И так далее, можно открыть эту обработку в конфигураторе и посмотреть её формы.
            </li>
            <li><b>Дополнительные отчеты и обработки</b></li>
            <li><b>Завершение работы пользователей</b></li>
            <li><b>Поиск и удаление дублей</b></li>
            <li><b>Удаление помеченых объектов</b></li>
            <li><b>Контактная информация</b></li>
            <li><b>Регламентные задания</b></li>
            <li><b>Печать</b></li>
            <li><b>Свойства</b></li>
            <li><b>Префиксация объектов</b></li>
            <li><b>Обновление конфигурации </b></li>
            <li><b>Управление итогами и агрегатами</b></li>
            <li><b>Пользователи</b></li>
            <li><b>Работа с файлами</b></li>
            <li><b>Обмен данными</b></li>
            <li><b>Варианты отчетов</b></li>
        </ul>


        <p class="title-size16"><b id="1.2">10 функций БСП, которые нужно знать как мининмум</b></p>
        <ul class="list">
            <li><b>Показ сообщений пользователю</b>:
                <div class="code-style">
                    <pre>
                        <span class="з">//на клиенте</span>
                        <span class="ф">ОбщегоНазначенияКлиент.СообщитьПользователю(Текст)</span>;
                        
                        <span class="з">//на сервере</span>
                        <span class="ф">ОбщегоНазначения.СообщитьПользователю(Текст)</span>;
                    </pre>
                </div>
            </li>
            <li><b>Перевод строки в число</b>:
                <div class="code-style">
                    <pre>
                        Сумма = "1 500,94";
                        Результат = <span class="ф">СтроковыеФункцииКлиентСервер.СтрокаВЧисло(Сумма)</span>;
                        ОбщегоНазначенияКлиент.СообщитьПользователю(Результат);
                    </pre>
                </div>
            </li>
            <li><b>Перевод из строки в дату</b>:
                <div class="code-style">
                    <pre>
                        ДатаСтрокой = "01.01.2025 23:17:18";

                        <span class="з">//формат даты должен быть "ДД.ММ.ГГГГ" или "ДД/ММ/ГГ" или "ДД-ММ-ГГ ЧЧ:ММ:СС"
                        //ЧастиДаты это системное перечисление, а значение ДатаВремя говорит о том, что нужно показывать и дату и время в результате</span>
                        Результат = <span class="ф">СтроковыеФункцииКлиентСервер.СтрокаВДату(ДатаСтрокой, ЧастиДатой.ДатаВремя)</span>;
                        ОбщегоНазначенияКлиент.СообщитьПользователю(Результат);
                    </pre>
                </div>
            </li>
            <li><b>Фамилия и инициалы</b>:
                <div class="code-style">
                    <pre>
                        ФИО = "Иванов Иван Иванович";

                        Результат = <span class="ф">ФизическиеЛицаКлиентСервер.ФамилияИнициалы(ФИО)</span>;
                        ОбщегоНазначенияКлиент.СообщитьПользователю(Результат); <span class="з">// Иванов И.И.</span>
                    </pre>
                </div>
            </li>
            <li><b>Склонение строк</b>:
                <div class="code-style">
                    <pre>
                        Должность = "Директор";
                        ФИО = "Иванов Иван Иванович";
                        Падеж = 2; <span class="з">// родительский</span>
                        Пол = 1; <span class="з">// мужской</span>

                        // вызываются оба эти метода только на сервере
                        ФИОРодительный = <span class="ф">СклонениеПредставленийОбъектов.ПросклонятьФИО(ФИО, Падеж, Пол)</span>;
                        ДолжностьРодительный = <span class="ф">СклонениеПредставленийОбъектов.ПросклонятьПредставление(Должность, Падеж)</span>;

                        Текст = СтрШаблон("в лице %1 %2", ДолжностьРодительный, ФИОРодительный);

                        ОбщегоНазначенияКлиент.СообщитьПользователю(Текст); <span class="з">// "в лице Директора Иванова Иван Ивановича"</span>
                    </pre>
                </div>
            </li>
            <li><b>Получить реквизиты одного объекта по ссылке</b>:
                <div class="code-style">
                    <pre>
                        <span class="сс">Товар = Справочники.Номенклатура.НайтиПоКоду(<span class="с">"ФР-000000211"</span>);
                        Если НЕ Товар.Пустая() Тогда
                            <span class="з">// значение одного реквизита одного объекта</span>
                            Артикул = <span class="ф">ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Товар, <span class="с">"Артикул"</span>)</span>;
                            ОбщегоНазначенияКлиент.СообщитьПользователю(<span class="с">"Артикул: "</span> + Артикул);

                            <span class="з">// значения нескольких реквизитов одного объекта</span>
                            РеквизитыТовара = <span class="ф">ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Товар, <span class="с">"Артикул, КатегорияНоменклатуры"</span>)</span>;

                            Текст = СтрШаблон(<span class="с">"Артикул: %1, Категория: %2"</span>, РеквизитыТовара.Артикул, РеквизитыТовара.КатегорияНоменклатуры);

                            ОбщегоНазначенияКлиент.СообщитьПользователю(Текст);
                        КонецЕсли;</span>
                    </pre>
                </div>
            </li>
            <li><b>Получить реквизиты нескольких объектов</b>:
                <div class="code-style">
                    <pre>
                        <span class="сс">МассивТоваров = Новый Массив;
                        МассивТоваров.Добавить(Справочники.Номенклатура.НайтиПоКоду(<span class="с">"ФР-000000211"</span>));
                        МассивТоваров.Добавить(Справочники.Номенклатура.НайтиПоКоду(<span class="с">"ФР-000000212"</span>));

                        <span class="з">// значение одного реквизита нескольких объектов</span>
                        АртикулыСоответствие = <span class="ф">ОбщегоНазначения.ЗначениеРеквизитаОбъектов(МассивТоваров, <span class="с">"Артикул"</span>)</span>;

                        Для каждого Товар Из МассивТоваров Цикл 
                            ОбщегоНазначенияКлиент.СообщитьПользователю(<span class="с">"Артикул: "</span> + АртикулыСоответствие[Товар]);
                        КонецЦикла;

                        <span class="з">// значения нескольких реквизитов нескольких объектов. Возвращает тоже соответствие</span>
                        РеквизитыТоваров = <span class="ф">ОбщегоНазначения.ЗначенияРеквизитовОбъектов(МассивТоваров, <span class="с">"Артикул, КатегорияНоменклатуры"</span>)</span>;

                        Для каждого Товар Из МассивТоваров Цикл 
                            Текст = СтрШаблон(<span class="с">"Артикул: %1, Категория: %2"</span>, РеквизитыТоваров[Товар].Артикул, РеквизитыТоваров[Товар].КатегорияНоменклатуры);
                            ОбщегоНазначенияКлиент.СообщитьПользователю(Текст);
                        КонецЦикла;</span>
                    </pre>
                </div>
            </li>
            <li><b>Свернуть массив</b>:
                <div class="code-style">
                    <pre>
                        <span class="сс">МассивТоваров = Новый Массив;
                        МассивТоваров.Добавить(<span class="с">"Иванов"</span>);
                        МассивТоваров.Добавить(<span class="с">"Иванов"</span>);
                        МассивТоваров.Добавить(<span class="с">"Петров"</span>);
                        МассивТоваров.Добавить(<span class="с">"Иванов"</span>);
                        МассивТоваров.Добавить(<span class="с">"Петров"</span>);
                        МассивТоваров.Добавить(<span class="с">"Иванов"</span>);

                        СвернутыйМассив = <span class="ф">ОбщегоНазначенияКлиентСервер.СвернутьМассив(МассивТоваров)</span>;
                        ОбщегоНазначенияКлиент.СообщитьПользователю(МассивТоваров.Количество);</span> // 2
                    </pre>
                </div>
            </li>
            <li><b>Таблица значений в массив</b>:
                <div class="code-style">
                    <pre>
                        <span class="сс">ВидЦен = Справочники.ВидыЦен.НайтиПоНаименованию(<span class="с">"Учетная"</span>, Истина);

                        Запрос = Новый Запрос;
                        Запрос.Текст = 
                            <span class="с">"ВЫБРАТЬ
                            |   Цены.Период КАК Период,
                            |   Цены.Номенклатура КАК Номенклатура,
                            |   Цены.Характеристика КАК Характеристика,
                            |   Цены.Цена КАК Цена,
                            |   Цены.ЕДиницаИзмерения КАК ЕдиницаИзмерения
                            |ИЗ
                            |   РегистрСведений.ЦеныНоменклатуры.СрезПоследних(, ВидЦен = &ВидЦен) КАК Цены"</span>;
                        
                        Запрос.УстановитьПараметр(<span class="с">"ВидЦен"</span>, ВидЦен);
                        РезультатЗапроса = Запрос.Выполнить();
                        ТаблицаТоваров = РезультатЗапроса.Выгрузить();

                        <span class="з">// таблица значений в массив структур</span>
                        МассивТоваров = <span class="ф">ОбщегоНазначения.ТаблицаЗначенийВМассив(ТаблицаТоваров)</span>;</span>
                    </pre>
                </div>
            </li>
            <li><b>Получение описание типов</b>:
                <div class="code-style">
                    <pre>
                        <span class="сс">ТипЧисло = <span class="ф">ОбщегоНазначения.ОписаниеТипаЧисло(10, 3)</span>;
                        ТипСтрока = <span class="ф">ОбщегоНазначения.ОписаниеТипаСтрока(100)</span>;
                        ТипДата = <span class="ф">ОбщегоНазначения.ОписаниеТипаДата(ЧастиДаты.ДатаВремя)</span>;
                        ТипВсеСсылки = <span class="ф">ОбщегоНазначения.ОписаниеТипаВсеСсылки()</span>;

                        Таблица = Новый ТаблицаЗначений;
                        Таблица.Колонки.Добавить(<span class="с">"Наименование"</span>, ТипСтрока);
                        Таблица.Колонки.Добавить(<span class="с">"Остаток"</span>, ТипЧисло);
                        Таблица.Колонки.Добавить(<span class="с">"ДатаПоступления"</span>, ТипДата);
                        Таблица.Колонки.Добавить(<span class="с">"ДокументПоступления"</span>, ТипВсеСсылки);</span>
                    </pre>
                </div>
            </li>
        </ul>
        
    </div>





    <div class="2">
        <p class="title-size16"><b id="2">Подсистема "Дополнительные отчеты и обработки"</b></p>
        <p>С помощью внешних обработок добавляемых в справочник "ДополнительныеОтчетыИОбработки" удобнее добавлять в типовую регламентные задания, печатные формы по сравнению с добавлением их через механизм расширения.</p>
        <p>Записываю по видео от айронскилс - "Доработка типовых конфигураций 1С. Дополнительные отчеты и обработки". На <a href="https://www.youtube.com/watch?v=FZvg2WJrbRs&t=4561s">ютубе</a>. Также это видео есть у меня на компе.</p>
        <p>В каждой типовой конфе есть стандартные подсистемы из БСП. Я смотрю на примере типовый УТ(11.4) и УНФ(3.0). Если посмотреть в подсистемы этих конф, то мы увидим такую подсистему как "Стандартные подсистемы", она содержит подсистемы добавленные из БСП.</p>
        <p>В этих стандартных подсистемах можно найти такую подсистему как "ДополнительныеОтчетыИОбработки". Поставим фильтр для этой подсистемы, чтобы мы в дереве конфигурации видели только те объекты, которые связаны с ней:</p>
        <img src="img/1С-Расширения типовых/2024-11-02_19-58-20.png" class="screen-2" alt="">
        <p>С помощью этой подсистемы в типовую конфу можно добавлять внешние отчёты, внешние обработки(но не все), которые затем система встраивает в определённые участки конфигурации и как следствие пользователь может вызывать эти отчёты и обработки в типовой конфигурации. Изменения в типовой мы никаких не делаем, мы просто добавляем к функционалу типовой наш функционал.</p>
        <p>В каждой типовой есть подсистема "Администрирование" или "НСИ и Администрирование" или что то подобное. Там есть команда "Печатные формы, отчеты и обработки", по команде откроем эту обработку (это обработка БСП под названием "ПанельАдминистрированияБСП") и увидим панель настроек этих объектов. В панели увидим такую константу как "Дополнительые отчеты и обработки", которая через функциональную опцию включает отображение справочника "Дополнительные отчеты и обработки". Этот справочник из стандартной подсистемы БСП - "ДополнительныеОтчетыИОбработки":</p>
        <img src="img/1С-Расширения типовых/2024-11-02_21-26-52.png" class="screen" alt="">
        <p>Этот справочник предназначен для того, чтобы в него можно было добавлять файлы внешних отчётов и обработок. Файлы с расширением .erf и .epf, но не любой файл внешнего отчёта или обработки сюда может быть добавлен, потому что должен соответствовать определённым правилам. Эти правила мы ниже разберём.</p>
        <p>Как добавить такие файлы в справочник? Мы создаём в конфигураторе внешний отчёт или обработку, разрабатываем там какой то алгоритм(например, печатную форму или заполнение документа). Сохраняем и после этого этот файл мы в пользовательском режиме добавляем в справочник "Дополнительные отчеты и обработки" и затем в нужной форме нужного документа появляется команда, которая вызывает действие прописанное нами ранее в этом внешнем объекте:</p>
        <img src="img/1С-Расширения типовых/2024-11-02_21-56-27.png" class="screen" alt="">
        <p>Этот механизм доработки типовых конфигураций ограничен. Не получится добавить все обработки и отчёты в типовую, есть ограничения. Какие обработки можно добавлять. Например, обработку для загрузки данных из файла или обработку для выгрузки данных какого-то справочника в файл. Что ещё можно добавлять можно посмотреть на 7 минуте.</p>
        <p>Что нельзя добавлять. Нельзя добавлять новые объекты конфигурации(справочники, документы). Нельзя изменять форму объекта. И нельзя изменять код в модулях конфигурации.</p>
        <p>В общем есть такое неглаcное правило, что все печатные формы в типовой созданы через добавление внешних обработок через этот механизм.</p>



        <p><b id="1.1">Последовательность создания внешней обработки или отчёта для последующего добавления в типовую. Правила добавления.</b></p>
        <p>Последовательность состоит из 3х шагов.</p>
        <p>1. Итак, если мы создадим внешнюю обработку, напишем в ней функционал и попытаемся добавить в типовую, то ничего не получится, потому что мы не описали некоторые вещи. А именно система скажет, что не обнаружила метод СведенияОВнешнейОбработке.</p>
        <p>2. Значит нам нужно в модуле объекта созданной внешней обработки описать эту экспортную функцию. Функция должна возвращать структуру "ПараметрыРегистрации" с определённым набором ключей и значениями для этих ключей. Есть функция-заготовка в общем модуле "ДополнительныеОтчетыИОбработки" подсистемы "ДополнительныеОтчетыИОбработки", которая возвращает структуру уже заполненную нужными ключами. Нам остаётся в модуле объекта вызвать эту функцию, заполнить ключами нашу структуру и заполнить ключи в структуре нужными значениями. Вот как выглядит функция заготовка:</p>
        <img src="img/1С-Расширения типовых/2024-11-05_08-59-02.png" class="screen" alt="">
        <p>Создадим в нашей внешней обработке в модуле объекта функцию СведенияОВнешнейОбработке и в ней вызовем функцию заготовку, чтобы заполнить нашу структуру ключами:</p>
        <img src="img/1С-Расширения типовых/2024-11-05_09-02-53.png" class="screen" alt="">
        <p>Мы можем и сами описать такую структуру с ключами, но разработчики побеспокоились о нас и предоставили заготовку, чтобы быстро наполнить структуру ключами.</p>
        <p>3. После того как мы описали функцию СведенияОВнешнейОбработке далее нужно описать функционал, что будет делать наша обработка. Например, процедуру для формирования печатной формы или процедуру для заполнения документа.</p>



        <p><b id="1.2">Виды обработок</b></p>
        <p>Виды обработок бывают разные:</p>
        <img src="img/1С-Расширения типовых/2024-11-05_09-16-50.png" class="screen" alt="">
        <p>Виды обработок это "Дополнительная обработка", "Дополнительный отчет", "Отчет", "Печатная форма" и т.д., а не "Глобальная" и "Назначаемая". "Глобальная" и "Назначаемая" это просто классификация видов обработок.</p>
        <p>Глобальные.</p>
        <p>Чем отличаются глобальные от назначаемых? Глобальные не привязаны к какому то отдельному документу, они просто лежат в определённом месте системы как отдельная дополнительная функциональность. В УТ 11.4 эти дополнительные обработки находятся в месте, которое вызывается командой "Дополнительные обработки" в каждом разделе:</p>
        <img src="img/1С-Расширения типовых/2024-11-05_09-31-08.png" class="screen" alt="">
        <p>А дополнительные отчёты будут лежать в отчётах в каждом разделе. Отчёты вызываются командами "Отчеты ..." в каждом разделе:</p>
        <img src="img/1С-Расширения типовых/2024-11-05_09-40-15.png" class="screen" alt="">
        <p>А для УНФ 3.0 дополнительные отчёты и обработки лежат в в указанных на картинке местах:</p>
        <img src="img/1С-Расширения типовых/2024-11-05_09-43-55.png" class="screen" alt="">
        <p>Назначаемые.</p>
        <p>У этих обработок больше видов и в отличии от глобальных они уже встраиваются в конкретные места справочников, документов и т.д.:</p>
        <img src="img/1С-Расширения типовых/2024-11-05_09-52-25.png" class="screen" alt="">
        <p>На картинке обработка вида "Печатная форма".</p>
        <p>А вот обработка вида "Создание связанных объектов". Они попадают в подменю "Создать на основании":</p>
        <img src="img/1С-Расширения типовых/2024-11-05_09-55-05.png" class="screen" alt="">
        <p>Следующий вид это "Заполнение объекта". Команды связанные с такими обработками будут находится в формах документа и будут собираться в подменю "Заполнение":</p>
        <img src="img/1С-Расширения типовых/2024-11-05_09-58-06.png" class="screen" alt="">
        <p>Ещё одна назначаемая обработка имеет вид "Отчет":</p>
        <img src="img/1С-Расширения типовых/2024-11-05_10-00-46.png" class="screen" alt="">
        <p>Ещё один назначаемый отчет или обработка имеет вид "Шаблон сообщения". Как говорят это вообще редкая вещь и в жизни его встретить можно редко.</p>

        <p><b id="1.3">Далее</b></p>
        <p>Каким образом платформа понимает какой вид обработки и к какому объекту отнести её? А понимает она это как раз на основании функции СведенияОВнешнейОбработке. Вот на этой картинке, которую мы видели выше, в функции заготовке есть ключи, по которым платформа получает для себя данные, что и куда разместить:</p>
        <img src="img/1С-Расширения типовых/2024-11-05_08-59-02.png" class="screen" alt="">
        <p>Одним из важных ключей является "Команды", в который помещается таблица значений из команд, куда нужно поместить назначаемую обработку или отчет.</p>

        <p><b id="1.4">Рассмотрим более подробно ключи структуры "ПараметрыРегистрации"</b>.</p>
        <p><i id="1.4.1">Ключ "Вид"</i></p>
        <p>Вид обработки указывается в виде строки и имеет след. значения:</p>
        <ul class="list">
            <li>ДополнительнаяОбработка</li>
            <li>ДополнительныйОтчет</li>
            <li>ЗаполнениеОбъекта</li>
            <li>Отчет</li>
            <li>ПечатнаяФорма</li>
            <li>СозданиеСвязанныхОбъектов</li>
        </ul>
        <p>Начнём рассматривать пример. Создадим внешнюю обработку, назовём её "ДопОбработка" и в модуле объекта этой обработки опишем экспортную функцию СведенияОВнешнейОбработке. Чтобы самому не заполнять структуру ключами, мы вызовем из общего модуля стандартной подсистемы "ДополнительныеОтчетыИОбработки" одноимённую функцию заготовку СведенияОВнешнейОбработке:</p>
        <div class="code-style">
            <pre>
                --модуль объекта нашей внешней обработки

                Функция СведенияОВнешнейОбработке() Экспорт
                    ПараметрыРегистрации = ДополнительныеОтчётыИОбработки.СведенияОВнешнейОбработке();
                    
                    Возврат ПараметрыРегистрации;
                КонецФункции
            </pre>
        </div>
        <p>Если посмотреть на функцию заготовку, то увидим что в неё можно передать один параметр - "ВерсияБСП". Этим параметром указывается наименьшая версия БСП, для которой подойдёт наша обработка. Позже опишем что тут указывать, пока оставим пустой.</p>
        <p>Итак, нам нужно заполнить вид обработки, можно написать просто строкой</p>
        <div class="code-style">
            <pre>
                --модуль объекта нашей внешней обработки

                Функция СведенияОВнешнейОбработке() Экспорт
                    ПараметрыРегистрации = ДополнительныеОтчётыИОбработки.СведенияОВнешнейОбработке();
                    ПараметрыРегистрации.Вид = "ДополнительнаяОбработка";
                    
                    Возврат ПараметрыРегистрации;
                КонецФункции
            </pre>
        </div>
        <p>Но лучше использовать другой способ. Есть функции в другом общем модуле "ДополнительныеОтчетыИОбработкиКлиентСервер". Выбираем функцию в названии которой будет наш вид обработки. Например, мы хотим вид обработки "ДополнительнаяОбработка", значит функция будет называться ВидОбработкиДополнительнаяОбработка. Вызываем её. Она вернёт нам ту же строку, что мы и хотели написать.</p>
        <img src="img/1С-Расширения типовых/2024-11-05_19-17-13.png" class="screen" alt="">
        <div class="code-style">
            <pre>
                ПараметрыРегистрации.Вид = ДополнительныеОтчетыИОбработкиКлиентСервер.ВидОбработкиДополнительнаяОбработка();
            </pre>
        </div>
        <p>Почему же лучше использовать такой способ? Если БСП обновится и вдруг там поменяют название вида обработки, то у нас ничего не сломается, а если будет написанно нами просто строка, то придётся лезть в обработку и самому менять название вида.</p>
        <p>В таком виде нашу внешнюю обработку уже можно подключить к типовой.</p>
        <p><span class="vue-r">Столкнулся с такой ошибкой. Я попытался добавить в учебную УТ 11.4 в справочник "ДополнительныеОтчетыИОбработки", где уже были 4 добавленных учебных обработки. При нажатии кнопки "Загрузить из файла", система самостоятельно открывает первую обработку из справочника, потому что на ней стоял фокус, и при выборе моей обработки из окна диалога вылетает ошибка "Вид загружаемого объекта (Дополнительная обработка) не соответствует текущему (Проверка условия предоставления скидки (наценки)). Для загрузки нового объекта нажмите "Создать"." Дело в том, что я пытаюсь загрузить свою обработку в открытую текущую обработку, которую система сама открыла. Чтобы добавить мою обработку, нужно сначала нажать "Создать", создастся новый объект справочника и в этот пустой объект теперь можно загрузить из файла нашу внешнюю обработку. Если же справочник пуст, то можно сразу загружать из файла, система сама запустит создание нового элемента справочника, куда мы и загрузимся.</span></p>
        <p>Вот так загрузилась наша обработка в справочник:</p>
        <img src="img/1С-Расширения типовых/2024-11-05_19-53-17.png" class="screen" alt="">
        <p>Как видно заполнился только вид обработки ну и само название. А так выглядит добавление в УНФ 3.0:</p>
        <img src="img/1С-Расширения типовых/2024-11-05_19-58-53.png" class="screen" alt="">
        <p>Но пока мы не увидим отображение нашей обработки нигде, потому что мы не указали её место и нет команд.</p>

        <p><i id="1.4.2">Ключ "Команды"</i></p>
        <p>Если посмотреть на функцию заготовку, то увидем, что заранее в ключ "Команды" была загруженна таблица значений с заготовленными колонками. В нашей функции теперь нужно заполнить строки этой таблицы, одна строка одна команда.</p>
        <img src="img/1С-Расширения типовых/2024-11-06_10-44-40.png" class="screen" alt="">
        <p>Один из ключевых параметров команды это колонка "Использование". Этот параметр определяет, что должна дальше делать платформа для этой обработки. Какая процедура будет вызываться при выполнении этой команды.</p>
        <div class="code-style">
            <pre>
                --модуль объекта нашей внешней обработки

                Функция СведенияОВнешнейОбработке() Экспорт
                    ИмяОбработки = ЭтотОбъект.Метаданные().Имя;
                    Синоним = ЭтотОбъект.Метаданные().Синоним;
                    Синоним = ?(ЗначениеЗаполнено(Синоним), Синоним, ИмяОбработки);

                    ПараметрыРегистрации = ДополнительныеОтчетыИОбработки.СведенияОВнешнейОбработке();
                    ПараметрыРегистрации.Вид = ДополнительныеОтчетыИОбработкиКлиентСервер.ВидОбработкиДополнительнаяОбработка();

                    Команда = ПараметрыРегистрации.Команды.Добавить();
                    Команда.Представление = Синоним;
                    Команда.Идентификатор = ИмяОбработки;
                    Команда.Использование = ДополнительныеОтчетыИОбработкиКлиентСервер.ТипКомандыОткрытиеФормы();
                    Команда.ПоказыватьОповещение = Истина;

                    Возврат ПараметрыРегистрации;
                КонецФункции
            </pre>
        </div>
        <p>Колонка "Использование" может принимать следующие виды команд:</p>
        <img src="img/1С-Расширения типовых/2024-11-06_11-13-02.png" class="screen" alt="">
        <p>Тут также можно самому в виде строки описать тип команды, а можно вызвать функцию для этого. Второй способ предпочтительней.</p>
        <p>Тип команды "ОткрытиеФормы" просто открывает форму нашей обработки. Т.е по этой команде, платформа понимает, что при нажатии на нашу обработку, нужно открыть её форму.</p>
        <p>Сохраним нашу обработку в конфигураторе и попробуем снова обновить её в справочнике. В спраовчнике просто открываем нашу обработку до этого загруженную и снова жмём загрузить из файла и система обновит данные для неё. Теперь у нас появилось больше данных о нашей обработке, повились дополнительные страницы. Появилась кнопка "Запустить", появилась возможность разместить нашу обработку:</p>
        <img src="img/1С-Расширения типовых/2024-11-06_11-25-48.png" class="screen" alt="">
        <p>Это я делаю в УТ 11.4, для УНФ уже не буду описывать, если надо можно в ней повторить.</p>
        <p>Если нажать "не определено" в размещении, откроется формочка со всеми разделами типовой и можно указать в каком разделе будет наша обработка в команде "Дополнительные обработки". Укажем, например, "Продажи" и сохраним. Если зайтив продажи и в обработки, то не увидим нашу обработку, потому что ещё не указан "быстрый доступ". Откроем в справочнике опять нашу обработку и там есть колонка "Быстрый доступ". Откроем значения в жтом поле и увидим пользователей, нужно выбрать пользователей, которым будет доступна наша обработка. Мы администратор, можно выбрать фамилию админа и сохранить. Теперь наша обработка станет доступна.</p>
        <p>По нажатию на кнопку "Выполнить", система поймёт из нашей функции, что нужно открыть форму нашей обработки, жмём, откроется пустая форма. Дальше уже назначение обработки будет зависить от того, что мы там наваяем в форме.</p>
        <p>Но как понятно из типов команд, форму открывать необязательно, можно просто выполнить какую-то процедуру из нашей обработки при нажатии "Выполнить". Для этого будет использоваться тип команды "ВызовКлиенсткогоМетода" или "ВызовСерверногоМетода" и т.д.</p>

        <p><i id="1.4.3">Ключ "Назначение"</i></p>
        <p>Этот ключ используется только для назначаемых обработок. Например, если мы создаём печатную форму, то нужно указать для какого документа мы её добавляем. Выше у нас был пример глобальной обработки "ДополнительнаяОбработка", для этого же ключа давайте создадим другую внешнюю обработку с видом обработки - "ПечатнаяФорма".</p>
        <p>Опять описываем функцию СведенияОВнешнейОбработке и добавим теперь ключ "Назначение", в этом ключе уже содержится массив, благодаря функции заготовке. В этот массив нам нужно добавить строки с указанием объекта, куда мы хотим добавить назначаемую обработку:</p>
        <img src="img/1С-Расширения типовых/2024-11-06_15-06-56.png" class="screen" alt="">
        <div class="code-style">
            <pre>
                Функция СведенияОВнешнейОбработке() Экспорт  
                    ИмяОбработки = ЭтотОбъект.Метаданные().Имя;
                    Синоним = ЭтотОбъект.Метаданные().Синоним;
                    Синоним = ?(ЗначениеЗаполнено(Синоним), Синоним, ИмяОбработки);

                    ПараметрыРегистрации = ДополнительныеОтчетыИОбработки.СведенияОВнешнейОбработке();
                    ПараметрыРегистрации.Вид = ДополнительныеОтчетыИОбработкиКлиентСервер.ВидОбработкиПечатнаяФорма();
                    ПараметрыРегистрации.Назначение.Добавить("Документ.ЗаказПокупателя");
                    
                    <span class="vue-g">//также нужно описать команду формирования печатной формы</span>
                    Команда = ПараметрыРегистрации.Команды.Добавить();
                    Команда.Представление = Синоним;
                    Команда.Идентификатор = ИмяОбработки;
                    Команда.Использование = ДополнительныеОтчетыИОбработкиКлиентСервер.ТипКомандыВызовСерверногоМетода(); 
                    <span class="vue-g">//также если мы хотим вывести печатную форму в табличный документ, то нужно добавить 
                    //в колонку Модификатор строку "ПечатьMXL". Это описано в параметрах в функции заготовке</span>
                    Команда.Модификатор = "ПечатьMXL";
                    
                    Возврат ПараметрыРегистрации;
                КонецФункции
            </pre>
        </div>
        <p>Вот с таким описанием уже можно добавить нашу внешнюю обработку. Система при выполнении нашей обработки будет вызывать процедуру, которая создадёт и выводит печатную форму. Такой процедуры конечно же пока нет.</p>
        <p>Добавляем в справочник нашу обработку и в месте, где указано размещение, уже будет указан тот документ, куда мы назначили.</p>
        <img src="img/1С-Расширения типовых/2024-11-06_19-45-46.png" class="screen" alt="">



        <p><b id="1.5">На что влияет тип команды и вид обработки</b></p>
        <img src="img/1С-Расширения типовых/2024-11-06_19-51-47.png" class="screen" alt="">
        <p>Допустим у нас тип команды это "ВызовСерверногоМетода", то от вида обработки будет зависить какую процедуру будет запускать платформа. На картинке показано какую процедуру платформа вызовет при разных видах обработок.</p>
        <p>Далее я просто картинки буду выводить и по ним будет понятно что выплняется при каких условиях.</p>
        <img src="img/1С-Расширения типовых/2024-11-06_19-57-19.png" class="screen" alt="">
        <img src="img/1С-Расширения типовых/2024-11-06_20-01-57.png" class="screen" alt="">
        <p>При команде "ОткрытиеФормы" передаются разные параметры от вида обработки. Эти параметры передаёт сама платформа. Допустим мы создали назначаемую обработку с видом "ЗаполнениеОбъекта". Она будет распологаться в подменю "Заполнение объектов" указанного документа. При нажатии на нашу обработку в этом подменю откроется форма нашей обработки и система при открытии сама передаст параметром ссылку на этот текущий документ в массиве. Это и есть параметр "ОбъектыНазначения" на картинке.</p>
        <p>А для всех видом обработок система передаёт стандартный набор параметров: "ИдентификаторКоманды", "ДополнительнаяОбработкаСсылка" и "ИмяФормы". "ДополнительнаяОбработкаСсылка" это ссылка на элемент справочника, где находится наша обработка.</p>
        <p>И ещё один тип команды:</p>
        <img src="img/1С-Расширения типовых/2024-11-06_20-14-12.png" class="screen" alt="">
        <p>Ещё такое уточнение. Если смотреть на картинки, то только для вида обработки "ПечатнаяФорма" используется процедура с именем "Печать", для всех остальных имя процедуры "ВыполнитьКоманду". Но для каждого вида обработки параметры в эту процедуру будут свои.</p>



        <p><b id="1.6">Заготовки дополнительных отчётов и обработок</b></p>
        <p>Каждый раз описывать функцию СведенияОВнешнейОбработке довольно трудозатратная работа. Поэтому люди из айронскилс подготовили такие заготовки для использования. Я скачал архив с этими заготовками на комп и лежит в папке для 1С(в папке "Заготовки ...") и загрузил на яндекс диск.</p>
        <p>В архиве 2 папки: Глобальные и Назначаемые. В них обработки и отчёты часто используемые в жизни.</p>
        <p>Печатные формы самая частая доработка типовой через этот способ доработки. Поэтому в заготовках несколько видов печатных форм. С выводом в табличный документ, с выводом в Ворд и с вводом параметров пользователем и потом вывод в табличный документ.</p>
        <p>Дальше по видео с 49 минуты показывает эти заготовки обработки в пользовательской части, как мы их добавляем в типовую.</p>
        <p>С 59:40 переходим к делу и показывает как в жизни мы бы взяли заготовку и доработали её сами и внедрили в типовую. Вот список задач, которые нужно решить:</p>
        <img src="img/1С-Расширения типовых/2024-11-06_21-06-03.png" class="screen" alt="">



        <p><b id="1.7">Создаём обработку для выгрузки данных справочника "Контрагенты" в файл JSON</b></p>
        <p>Итак, есть условие задачи, нужно подобрать заготовку под её решение. Сначала определимся какой вид обработки будем использовать. Если это назначаемая обработка, то должна находится где то в подменю документа или справочника. Какие у нас есть подменю? "Печать", "Заполнение", "Создать на основании", "Отчеты". Вроде бы по смыслу наша обработка никуда не тулится. Значит она будет глобальная дополнительная обработка.</p>
        <p>Дальше нужно определить тип команды. Больше подходит "ВызовСерверногоМетода", потому что мы будем обращаться в БД за данными таблицы "Контрагенты". Но также подходит и тип "ОткрытиеФормы", где в форме мы разместим кнопку для выгрузки контрагентов. Иван показывает 2 способ с типом "ОткрытиеФормы". На форме у нас будет табличка, куда загрузятся все контрагенты и этих контрагентов выгрузим в JSON.</p>
        <p>Таблица будет с типом "ТаблицаЗначений". Добавим 2 кнопки, Заполнить и Выгрузить. Обработку смотреть в E:\Всё по 1С\1C обработки, отчёты и т.д\ВыгрузкаКонтрагентовВJSONСТипомКомандыЧерезОткрытиеФормы.epf</p>




        <p><b id="1.8">Создаём отчёт, отображающий контактные данные контрагентов в виде пересечённой таблицы</b></p>
        <p>Отчёт будет по табличной части справочника "Контрагенты". В табличной части выбираем 3 поля: ссылка, вид и представление. Ссылку система сама обозначит через представление и это будет наименование контрагента, и в таблице отчёта разместим её в строке. Вид разместим в колонке. Чтобы таблица что то показала, нужно обязательно ресурс, но у нас не выбор из регистров и ресурса нет, вместо ресурса возьмём поле "Представление", в нём хранится сам адрес находжения контрагента, вот он и будет ресурсом. На вкладке "Ресурс" выберем это поле впраов и на закладке "Выражение" уберём агрегатную функцию, оставим просто слово "Представление". Всё делаем таблицу и можем добавлять отчёт в справочник.</p>




        <p><b id="1.9">В справочник "Контрагенты" добавить кнопку для заполнения реквизитов по ИНН</b></p>
        <p>01:22:00. На этой временной отметке 3я задача. У меня в разделе "Работа с файлами. Диалоги" есть статья "Заполнение контрагента по ИНН. Добавляем расширение в типовую конфу. Используются HTTP объекты. Используется чтение JSON". В ней рассказывается как через расширение в типовую добавить кнопку в карточку контрагента, по которой заполняются в карточке поля по ИНН. Мы в этой задаче берём эту обработку и добавляем её в типовую, но уже не через расширение, а через добавление в справочник "ДополнительныеОбработкиИОтчеты".</p>
        <p>У нас есть заготовки. Какую заготовку нужно взять? Ну название задачи нам подсказывает, что вид обработки будет "ЗаполнениеОбъекта", но в заготовках есть 2 заготовки. Одна заполнение объекта с предварительной записью этого объекта и без записи. Возьмём вторую.</p>
        <p>Итак, мы возьмём готовый код заполнения по ИНН из статьи, которую я написал, но там мы спрашивали пользователя ввод ИНН через функцию ВвестиСтрокуАсинх(), но она работает только на клиенте, а мы находимся в модуле объекта обработки, который исполняется всегда на сервере. Значит пусть пользователь введёт ИНН в реквизит "ИНН" на форме и мы возьмём этот ИНН из этого реквизита.</p>
        <p>Если что, то обработку можно посмотреть на компе по адресу - E:\Всё по 1С\1C обработки, отчёты и т.д\Тренировочные IRONSKILS\ЗаполнениеКонтрагентаПоИНН.epf</p>




        <p><b id="1.10">В документе "Заказ поставщика" сделать расчёт скидок в табличной части по следующему алгоритму: если кол-во товара больше 50, скидка 10%</b></p>
        <p>01:34:00. Описывать не буду, если надо будет то посмотреть в видео, он в принципе быстро объясняет. Ну и обработка есть в папке E:\Всё по 1С\1C обработки, отчёты и т.д\Тренировочные IRONSKILS\РассчитатьСкидкуВЗаказеПоставщику.epf. Написана для УТ 11.4. Иван же показывает для УНФ 3.0</p>



        
        <p><b id="1.11">Добавить печатную форму "Гарантийное письмо" для документа "Заказ покупателя"</b></p>
        <p>01:45:00. Внешняя обработка лежит по адресу E:\Всё по 1С\1C обработки, отчёты и т.д\Тренировочные IRONSKILS\ЗаказКлиентаГарантийноеПисьмо.epf. Берём заготовку "ПечатнаяФорма(вывод в таб. док. без запроса параметров у пользователя).epf"</p>
        <p>01:57:00. Показывает заготовку тоже печатной формы, но с запросом параметров у пользователя. Показывает в чём отличия. Также слегка показывает как сделать с 2мя командами печатную форму.</p>




        <p><b id="1.12">Добавить печатную форму "Гарантийное письмо" для документа "Заказ покупателя" с выводом в формат Open Office XML(MS Word)</b></p>
        <p>02:01:00. Показывает как выводить гарантийное письмо в word. У меня в шпоре в разделе "Печатные формы" есть статья как выводить в word, но используем мы там макет "Active Document", а тут используем макет "Двоичные данные". Т.е. макет сделан в word, где параметры заключены в фигурные скобки и спереди добавлено "v8" и этот макет мы загружаем в макет внешней обработки в виде двоичных данных.</p>
        <p>Чтобы подправить макет, мы выгружаем его в файл и даём имя и обязательно расширение ".docx", затем открываем его в программе word, изменяем что нам нужно, сохраняем и обратно загружаем в виде двоичных данных в макет обработки. Затем при добавлении обработки в типовую, также появится имя нашей обработки в меню "Печать", вызываем и откроется печать в word с подставленными параметрами из документа. Как описать код можно посмотреть в видео.</p>
        <p>Есть также отдельное видео как этим способом выводить печать в ворд - <a href="https://vk.com/video/@ironskillsby/all?z=video-179327594_456239054%2Fclub179327594">тут</a>.</p>
        <p>Вывод в ворд посложней уже чем в таб док, пока не сильно вникал, если нужно то посмотреть по этим двум видео.</p>




        <p><b id="1.13">Воплотить возможность создавать на основании документа "Заказ покупателя" документы "Счет на оплату" с разделением на товары и услуги. Если в заказе покупателя одновременно и товары и услуги, то нужно создавать 2 счёта: один на товар и один на услуги</b></p>
        <p>02:19:20. Пропустил</p>




        <p><b id="1.14">Как создать регламентное задание с помощью дополнительной обработки</b></p>
        <p>02:39:20. Коротко рассказывает, что такое регламентные задания.</p>




        <p><b id="1.15">Как отлаживать код из внешней обработки при вот таком способе добавления к типовой</b></p>
        <p>02:47:20. Как оказалось отладить не так то просто. Нужно вдумчиво ещё не раз пересматривать.</p>
    </div>



    <div class="3">
        <p class="title-size16"><b id="3">Настройка пользователей и прав</b></p>
        <p>Тут можно создавать пользователей прикладного решения и назначать им права и многое другое.</p>
    </div>



    <div class="4">
        <p class="title-size16"><b id="4">Подсистема "Работа с файлами".</b></p>
        <p>Делаю по видео Ивана - 1С-БСП. Первое знакомство. Есть у меня скачанное. Про работу с файлами где то дальше середины видео. Также добавляю из более подробного видео про работу с файлами - "1С_БСП_Работа с файлами".</p>
        <p><b>Внедрение подсистемы "Работа с файлами" в нашу конфигурацию.</b></p>
        <p>В первую очередь нужно посмотреть есть ли зависимость этой подсистемы от других подсистем. Такая зависимость есть, но не жесткая. Работа с файлами зависит от подсистемы "Свойства" и "Управление доступом". Не жесткая зависимость означает, что мы можем внедрить работу с файлами не внедряя подсистемы, от которых она зависит.</p>
        <p>Далее нужно выполнить сравнение и объединение нашей конфигурации и конфигурации БСП. Переходим в нашу конфигурацию, в меню "Конфигурация" выбираем пунтк "Сравнить и объединить с конфигурацией из файла", в окне диалога выбираем конфигурацию БСП. В папке с конфигурацией БСП нужно выбрать файл "1Cv8.cf". Откроется окно сравнения и объединения, в меню "Действия" выбираем пункт "Отметить по подсистемам файла" и в открывшемся окошке подсистем выбираем "Работа с файлами" и нажимаем установить:</p>
        <img src="img/1С-БСП/2025-08-07_21-33-50.png" class="screen" alt="">
        <p>Важная тонкость при добавлении подсистемы, нужно заранее проверить снят ли замок со стандартной подсистемы у нас в конфигурации, потому что мы по любому ранее могли установить уже обязательные подсистемы БСП и при внедрении автоматом стандартная подсистема ставится на поддержку, если не снять замок, то получится ерунда.</p>
        <p>Можно ещё установить одну подсистему "Настройки программы", которая содержит только обработку "ПанельАдминистрированияБСП", которая потом поможет нам настроить работу с файлами.</p>
        <p>Жмём "Выполнить", появится окно с неразрешимыми ссылками, жмём "Продолжить". Может появится ещё диалог, его закрываем. Всё, объединение должно произойти и в подсистеме "Стандартные подсистемы" мы увидим наши 2 подсистемы.</p>
        <p>При первом внедрении БСП к нам в конфигурацию мы в общем модуле "ОбновлениеИнформационнойБазыИмяНашейКонфигурации" в процедуре ПриДобавленииПодсистемы добавляли в описание нашу версию конфигурации 1.0.1.1, теперь, когда мы внедрили дополнительную подсистему, нужно увеличить версию нашей конфы и изменить в общем модуле версию на новую, например, 1.0.1.2.</p>
        <p>Обновляем ИБ и перходим в ПР. Во время запуска ПР происходит анализ номера версии и если версия изменилась, то будет запущена спец. процедура, которая выполнить действия для того, чтобы мы получили корректно работающую подсистему.</p>
        <p>Теперь, если зайти в ПР, то мы не увидим обработки "ПанельАдминистрированияБСП", потому что её нужно поместить в какую-то подсистему, для этого создадим у себя в конфигурации новую подсистему, например, "Администрирование" и включаем в эту подсистему обработку "ПанельАдминистрированияБСП":</p>
        <img src="img/1С-БСП/2025-08-11_14-41-51.png" class="screen-2" alt="">
        <p>Как только мы добавили эту обработку в подсистему, то в командном интерфейсе этой подсистемы появятся все команды обработки, каждая команда вызывает свою форму:</p>
        <img src="../img/1С-БСП/2025-08-11_15-00-01.png" class="screen-2" alt="">
        <p>Далее опустим на низ созданную подсистему "Администрирование" через меню корня конфигурации в пункте "Открыть командный интерфейс конфигурации". Откроем ПР и видим все команды обработки:</p>
        <img src="../img/1С-БСП/2025-08-11_15-03-57.png" class="screen" alt="">
        <p>На этом этап внедрения подсистемы работы с файлами завершён.</p>
        <p>14м</p>

        <p>Мы начинаем свою работу и создали свой справочник "Номенклатура" и заполнили его. Нам нужно к элементам справочника присоединять файлы. Нам самим уже не нужно придумывать как присоединить файлы, мы будем использовать готовую подсистему работы с файлами.</p>
        <p>Нужно кое-что пояснить, есть подсистемы БСП, которые не требуют тесной интеграции, например, установили подсистему "Пользователи" и всё, она работает, у неё есть свой справочник, есть свои роли, уже можно работать.</p>
        <p>Но подсистема работы с файлами требует такой тесной интеграции, что это значит? Чтобы использовать полный функционал этой подсистемы нужно встроить её в тот объект конфигурации, где мы хотим использовать добавление файлов, в нашем случае нужно встроить её в справочник "Номенклатура". Может потребоваться создание дополнительных объектов конфигурации, добавление кода в определённые модули.</p>
        <p>Итак, как нам начать встраивать работу с файлами, для начала откроем инструкцию на ИТС - <a href="https://its.1c.ru/db/bsp319doc#content:4:hdoc">"Глава 3. Настройка и использование подсистем при разработке конфигурации"</a>, находим подсистему "Работа с файлами" переходим к пункту "Настройка" - "Настройка присоединения файлов к объектам" - "В случае отдельного справочника для хранения файлов". Там описано, что нам нужно создать отдельный справочник для хранения файлов, для этого нужно из конфигурации БСП перенести справочник "_ДемоПроектыПрисоединенныеФайлы" и задать ему свой префикс: &lt;Префикс>ПрисоединенныеФайлы, где Префикс – имя объекта метаданных, для которого настраиваются присоединенные файлы.</p>
        <p>Далее идём в конфигурацию БСП, которую заранее нужно развернуть в базу из шаблона, находим в справочниках такой справочник как указано в документации - "_ДемоПроектыПрисоединенныеФайлы". Копируем прям через Ctrl + C и Ctrl + V в нашу конфигурацию. Так как структуры конфигураций разные то при переносе обнаружатся некоторые ошибки, что для этого справочника отсутствуют некоторые данные, на которые она ссылается, например, у реквизита "ВладелецФайла" может стоять отсутствующий у нас справочник и система сама поставит в тип этого реквизита не ссылку на кого-то там, а просто строку.</p>
        <p>Теперь по документации меняем имя для этого скопированного справочника добавляя спереди префикс нашего справочника "Номенклатура" и получает справочник "НоменклатураПрисоединенныеФайлы", синоним тоже поменяем на Присоединенные файлы (Номенклатура). Далее по документации нужно для реквизита "ВладелецФайла" установить тип ссылку на справочник Номенклатура, потому что этот справочник является владельцом файлов. Далее 3 пункт из документации про иерархию пропускаем, у нас будет без иерархии. 4 пункт про реквизит "Служебный" тоже пропускаем.</p>
        <p>Далее, ранее при внедрении подсистемы "Работа с файлами", у нас в определяемых типах есть такой тип как "ПрисоединенныйФайл", откроем его и нужно в составном типе добавить туда наш скопированный и переименованный справочник "НоменклатураПрисоединенныеФайлы", но просто так сделать это не получится, потому что он на замке. Переходим в "Конфигурация" - "Поддержка" - "Настройка поддержки" и точечно для определяемого типа "ПрисоединенныйФайл" и "ПрисоединенныйФайлОбъект" установим "Объект поставщика редактируется с сохранением поддержки". Теперь добавим в первый определяемый тип ссылку на справочник "НоменклатураПрисоединенныеФайлы", а во втором объект справочника "НоменклатураПрисоединенныеФайлы". Для меня это удивление, что оказывается можно выбирать не только ссылки как тип, а ещё и объекты, например, СправочникОбъект.НоменклатураПрисоединенныеФайлы.</p>
        <p>Выполняем пункт 6 - Включить в состав плана обмена "ОбновлениеИнформационнойБазы" справочник, созданный на шаге 1. Находим в нашей конфигурации такой план обмена, он тоже на замке, открываем его на редактирование и в состав добьавляем справочник "НоменклатураПрисоединенныеФайлы", но запрещаем авторегистрацию.</p>
        <p>Далее нужно создать  внашей конфигурации указанные в документации две подписки на события. Названия подписок даны:</p>
        <img src="img/1С-БСП/2025-08-07_09-09-01.png" class="screen" alt="">
        <p>Указать в источнике для первой подписки нужно именно СправочниМенеджер.НоменклатураПрисоединенныеФайлы. В свойстве обработчик указываем уже существующий у нас в конфигурации общий модуль и обработчик из него. Вторую подписку решили не делать, потому что она для документов, а мы присоединяем файлы к справочнику номенклатура.</p>
        <p>Мы делали по документации по пункту  - "В случае отдельного справочника для хранения файлов", далее идёт пункт "В случае справочника Файлы для хранения файлов", пропускаем его и 3й пункт "В обоих случаях" тут к нам относится, поэтому тоже выполняем.</p>
        <p>Ищем другие определяемые типы про владельцов и в состав типов добавим в один ссылку на справочник "Номенклатура", он же у нас владелец, а в другой объект этого справочника. Также снимаем замок.</p>
        <p>2 пункт пропускаем, там про документы. 3 пункт пропускаем про автоматическое копирование присоединённых файлов. 4 пункт тоже не делаем. Там где в документации написано "Если", то это по необходимости можно добавлять.</p>
        <p>Теперь можем посмотреть в ПР на справочник "Номенклатура". Откроем любой элемент справочника и в панели навигации увидим гиперссылку "Присоединенные файлы". <span class="ск">Хотел посмотреть как в ЕРП в номенклатуре это работает, посмотрел что для номенклатуры также всё подключенно для присоединения файлов, зашёл в карточку товара, но в панели навигации не было такой гипрессылки, она выключена, включить можно в ПР в карточке товара нажать справа вверху "..." и пункт "Окна" - "Настроить панель навигации" и выносим слева команду "Файлы" в право, тут просто синоним указан как "Файлы".</span></p>
        <p>Теперь если открыть форму обработку присоединённых файлов, то можно загрузить с диска какой-нибудь файл, загружаем, закрывааем карточку товара и открываем снова, файлы на месте. Можно по кнопке "Посмотреть" открыть файл и посмотреть. Что интересно, если файл это картинка то при просмотре открывается приложение на виндовс для открытия картинок, например, Paint:</p>
        <img src="img/1С-БСП/2025-08-07_09-49-51.png" class="screen" alt="">
        <p>Получается, что мы не разрабатывали никаких алгоритмов, ничего не писали, а целый функционал по присоединению файлов работает благодаря подсистеме БСП "Работа с файлами".</p>
        <p>По такому принципу можно добавить возможность присоединения файлов к справочникам, документам и т.д. Эти операции, которые мы проделали сейчас правильнее всего делать в самой конфигурации, нежели в расширении, так сказал Иван.</p>
        <p><b>Настройки файлов</b></p>
        <p>А где теперь хранятся присоединенные файлы? Это можно настроить. Заходим (в ЕРП) "НСИ и администрирование" - "Администрирование"(подсистема) - "Настройка работы с файлами", откроется знакомая нам обработка "ПанельАдминистрированияБСП" из подсистемы БСП "Настройки программы", откроется одна из её форм "НастройкиРаботыСФайлами". И первое поле в обработке это "Хранить файлы", тут и указываем где хранятся файлы. Если установить хранить в томах на диске, то вылетит предупреждение, что пока тома не указаны, файлы будут в БД. Указание томов ниже по команде "Тома хранения файлов", тут нужно указать папку на компьютере, где будут храниться файлы. Нажимаем создать новый том, откроем карточка для тома, нужно дать название тома ("Файлы 1С"), затем нужно указать полный путь в папке, если работают несколько пользователей, то папка должна быть в общедоступном месте. Далее Иван показывает как создать такой путь с двумя косыми чертами, показывает на 01:34:10.</p>
        <p>Поле "Порядок" указывает порядок для созданного тома, чтобы если томов несколько система знала в каком порядке обращаться по томам. И поле "Предел, МБ" даёт нам возможность вписать тот размер до которых может "раздуваться" эта папка. Записываем том.</p>
        <img src="img/1С-БСП/2025-08-07_10-18-05.png" class="screen-2" alt="">
        <p>Теперь, если у нас у Инфобазе есть уже файлы, как нам их оттуда перенести на диск? В самом томе есть для этого команда "Перенести файлы":</p>
        <img src="img/1С-БСП/2025-08-07_10-24-30.png" class="screen-2" alt="">

    </div>

</div>