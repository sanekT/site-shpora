<div class="wrap">
    
    <h2 class="header-style">Wordpress -> Регистрация сайдбаров</h2>
    <p>Файл articles/wp-reg-sidebar.html</p>
    
    <h3 class="header-style2">Регистрация боковой панели</h3>
    <p>Боковые панели обычно заключают в тег &lt;aside&gt;. С админки вордпресса мы можем туда добавлять различные виджеты. Но для начала нужно зарегистрировать сайдбар. Так как мы рассматриваем это всё на примере вёрстки sparrow, то главная страница не имеет боковых панелей, но у нас есть вёрстка страницы blog.html, у которой есть эта панель. Теперь нам надо как то добавить эту страницу. В нашей теме создадим файл для вывода записей, например page.php и перенесём в него вёрстку из blog.html. Ранее мы для  пункта меню Блог создавали страницу, так вот теперь при клике по пункту Блог нас перекинет на страницу page.php. То есть если мы в вордпрессе создадим какие нибудь пустые страницы, то при их вызове будет открывать файл page.php. Так работает иерархия файлов вордпресса, которую нужно нормально выучить.</p>
    <p class="note">Создавая другие страницы мы также в них подключаем header и footer соответствующими функциями вордпресса, но есть сайты где не всегда совпадают header и footer, например у нас на странице Блог не такое меню как на главной, для этого скопируем файл header.php и назовём его например header-blog.php и в нём уже внесём нужное нам меню и в вёрстке page.php где подключается header просто указываем в функции это добавочное слово<br>
    <b>get_header('blog')</b><br>
    И теперь у нас подключится в шапку файл header-blog.php . С footer то же самое. Если что про это можно посмотреть в видео с 00:03:25</p>
    <p>Нормальной практикой считается выносить вёрстку боковых панелей в отдельный файл sidebar.php, если у нас на всех страницах будет один и тот же сайдбар. Также по примеру c header и footer можно сделать страницу sidebar-post.php или sidebar-page.php, если сайдбары немного различаются.</p> 
    <p>Итак создадим в теме файл sidebar.php и перенесём в него вёрстку. А в том месте файла page.php откуда мы вырезали сайдбар пишем код:</p>
    <p><b>&lt;?php get_sidebar(); ?&gt;</b></p>
    <p>Сохраним всё и проверим что всё нормально подключается. Теперь нам надо сделать так, чтобы можно было из админки управлять боковой панелью. Тут то и нужно зарегистрировать наш сайдбар в файле <b>functions.php</b>.</p>
    <div class="code-style">
        <pre>
           <span class="vue-g">//functions.php</span>
           
            add_action('widgets_init', 'my_sidebar');
            
            function my_sidebar(){
                register_sidebar();
            }
        </pre>
    </div>
    <p>В функцию register_sidebar() нужно передать массив с настройками:</p>
    <div class="code-style">
        <pre>
           [
                'name'          => sprintf(__('Sidebar %d'), $i ),
                'id'            => "sidebar-$i",
                'description'   => '',
                'class'         => '',
                'before_widget' => '< li id="%1$s" class="widget %2$s">',
                'after_widget'  => "< /li>\n",
                'before_title'  => '< h2 class="widgettitle">',
                'after_title'   => "< /h2>\n",
            ] 
        </pre>
    </div>
    <p>Так массив выглядит по умолчанию на wp-kama. Поле "name" и "id" обязательны для заполнения. В "name" пишем, например имя нашей панели - "Right Sidebar", оно будет отображаться в админке, в "id" пишем например  - "right_sidebar", по нему как раз в вёрстке и будем выводить панель, которую настроем в админке. В поле "description" пишем любое описание. Остальные поля пока опустим и проверим в админке появилось ли поле Виджеты в разделе внешний вид. Как видим поле появилось, зайдём в него и видим справа блок с именем нашего сайдбара и описанием. Всё, в него можно мышкой накидывать нужные виджеты.</p>
    <p>Далее нам нам отобразить в вёрстке наш сайдбар. Идём в файл sidebar.php  и пишем код:</p>
    <p><b>&lt;?php dynamic_sidebar('right_sidebar'); ?&gt;</b></p>
    <p>В скобках этой функции указываем id зарегистрированного сайдбара. Если не указать, то выведется первый попавшийся зарегистрированный сайдбар. Далее в админке закинем какой нибудь виджет, например календарь и проверим ео вывод на сайте. Видим календарь и если посмотреть DOM то увидими, что вордпресс завернул виджет в тег li. Для этого в массив наcтроек нужно добавить ещё 2 опции:</p>
    <div class="code-style">
        <pre>
            'before_widget'  =>  '< div class="widget %2$s">',
            'after_widget'  =>  '< /div>\n',
        </pre>
    </div>
    <p>Указать в этих опция тег div с классом widget и оставить эту форму - %2$s, вместо неё подставится класс соответствующего виджета, если это текстовый виджет, то widget-text, если календарь, то widget-calendar.</p>
    <p>Для заголовков также добавим 2 опции:</p>
    <div class="code-style">
        <pre>
            'before_title'  =>  '< h5 class="widgettitle">',
            'after_title'  =>  '< /h5>\n',
        </pre>
    </div>
    <p>Чтобы всё довести до конца, нужно из вёстки удалить все виджеты написанные верстальщиком и воспроизвести их из админки.</p>
    <p>Итоговый код:</p>
    <div class="code-style">
        <pre>
           <span class="vue-g">//functions.php</span>
           
            add_action('widgets_init', 'my_sidebar');
            
            function my_sidebar(){
                register_sidebar([
                    'name'          => 'Right Sidebar',
                    'id'            => 'right_sidebar',
                    'description'   => 'Пишем любое описание',
                    'before_widget' => '< div class="widget %2$s">',
                    'after_widget'  => "< /div>\n",
                    'before_title'  => '< h5 class="widgettitle">',
                    'after_title'   => "< /h5>\n",
                ] );
            }
        </pre>
    </div>
    <div class="code-style">
        <pre>
            <span class="vue-g">//в месте где хотим вывести сайдбар</span>
            &lt;?php dynamic_sidebar(id); ?&gt;
        </pre>
    </div>
    
    <iframe class="video" width="560" height="315" src="https://www.youtube.com/embed/_m1Fs7_va8E" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>