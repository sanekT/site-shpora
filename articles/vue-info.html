<div class="wrap">
   
    <h2 class="header-style">Разные заметки по Vue</h2>

    <ul class="list">
        <li><a href="#1">Как работает реактивность во Vue</a></li>
        <li><a href="#2">Как подключаются и выводятся компонеты</a></li>
    </ul>


    <h3 class="header-style2" id="1">Как работает реактивность во Vue</h3>
    <p>реактивность основана на геттерах и сеттерах. Когда мы передаём объект с данными в конструктор класса Vue, там примерно происходит то, что показано в примере ниже:</p>
    <div class="code-style">
        <pre>
            //HTML
            &lt;div id="app">
                &lt;input type="text" v-model="name">
                &lt;hr>
                &lt;h2>Привет, {{ name }}&lt;/h2>
                &lt;p>Мы вам направили письмо, {{ name }}&lt;/p>
            &lt;/div>

            //JS1
            class MyVue{
				constructor(settings){
					this.el = document.querySelector(settings.el);
					this.data = {};
					this.$data = settings.data;
					this.template = this.el.innerHTML;
					
					for(let key in this.$data){
						Object.defineProperty(this, key, {
							get(){
								return this.$data[key];
							},
							set(value){
								this.$data[key] = value;
								this.render();
							}
						})
					}
					this.render();
				}
				
				render(){
					let pattern = /{{(.*)}}/g;
					let myVue = this;
					let res = this.template.replace(pattern, function(match, name){
						let key = name.trim();
						if(myVue[key] !== undefined){
							return myVue[key];
						}else{
							return match;
						}
					});
					this.el.innerHTML = res;
				}
			}

            //JS2
            let myvue = new MyVue({
				el: '#app',
				data: {
					name: 'Владислав'
				}
			});
        </pre>
    </div>
    <p>Т.е. переменные , которые мы передаём в объекте data становятся свойствами объекта класса Vue, и затем ищется по html шаблоны {{}} и заменяется на значение соответствующих свойств перерисовывая полностью, как в примере выше весь div#app, вставляя в него уже обновлённый html со вставленными переменными в шаблоны. У меня тут берётся полностью весь html из div#app, помещается в template и по нему происходит поиск, но в реальности это не правильно, не надо перерисовывать весь блок #app, это слишком затратно. Например мы поменяли только одну переменную в каком то мини блоке, а перерисовался весь блок. В настоящем же Vue есть такое понятие как "виртуальный DOM", это те мозги, которые при перерисовке высчитывают какой тег нужно обновить не затрагивая другие теги и многое другое. Например в jQuery если мы динамически меняем содержимое каких то тегов, то мы переписываем все эти теги, а во Vue по другому и быстрее это всё происходит.</p>






	<h3 class="header-style2" id="1">Как подключаются и выводятся компонеты</h3>
	<p>Копонеты подключаются глобально и локально. глобальные отличаются тем что их можно использовать внутри друг друга без проблем, а локальные только внутри того блока, к которому мы их подключили. Глобальные подключаются в главном файле main.js:</p>
	<div class="code-style">
		<pre>
			 //<span class="vue-b">main.js</span>
			 // import Vue from 'vue';
			 // import App from './App.vue';

			 // вот тут подключается компонент глобально
			 // <span class="vue-r">import NameComponent from './components/NameComponent.vue';</span>

			 // а вот тут он регестрируется
			 // <span class="vue-r">Vue.componet('NameComponent', NameComponent);</span>

			 // Vue.config.productionTip = false;

			 // new Vue ....
		</pre>
	</div>
	<p>Подключение локально внутри файла App.vue. Это значит что компонеты будут доступны только в этом файле:</p>
	<div class="code-style">
		<pre>
			//<span class="vue-b">App.vue</span>

			// в теге script
			// &lt;script>
			// 		вот тут подключается компонент локально
			// 		<span class="vue-r">import NameComponent from './components/NameComponent.vue';</span>

			//      export default{
            //          name: 'App',
			//          тут регистрируется компонент
			//          components: {
			//               NameComponent
			//			}
			//		}
			// &lt;/script>
		</pre>
	</div>

	<p>Ну и есстественно для 2х этих случаев создаём компонент в папке components и в каждом компоненте в теге script указываем имя компонента.</p>
	<p>Как происходит подключение компонента уже в шаблон html? Например, если мы подключили локально в файл App.vue, то в этом файле в теге template указываем имя компонента в теге: либо так - &lt;name-component>, либо так - &lt;NameComponent></p>
	<p>Отображать компоненты в шаблоне template можно разными способами. Первый это через директиву <b>v-if</b>:</p>
	<div class="code-style">
		<pre>
			// &lt;name-component v-if="status">&lt;/name-component>
			// &lt;name-component v-elseif="status">&lt;/name-component>
			// &lt;name-component v-else>&lt;/name-component>

			<span class="vue-b">в зависимости от переменной status будет отображаться тот или иной компонент</span>
		</pre>
	</div>
	<p>Второй вариант это через тег <b>component</b>. Подставляем просто имя компонента и он отобразится. Точно синтаксис пока не знаю, узнаю, допишу.</p>
	<p>3й способ это использование директивы <b>v-show</b>. При ней компонент выключается с помощью display: none. При <b>v-if</b> компонент удаляется из DOM дерева.</p>

</div>
